import*as path from"path";import path__default,{join}from"path";import{fileURLToPath}from"url";import{c as commonjsGlobal,a as coreExports,e as execExports,t as toolCacheExports,H as HttpClient,i as info,b as ciInfo,p as pathExists,w as warning}from"../setup-cpp.mjs";import require$$0$2 from"fs";import require$$0$1 from"stream";import*as require$$0 from"os";import"process";import"https";import"crypto";import"http";import"net";import"tls";import"events";import"util";import"string_decoder";import"child_process";import"assert";import"timers";import"node:buffer";import"node:path";import"node:child_process";import"node:process";import"node:url";import"node:os";import"node:fs";import"buffer";import"node:util";import"fs/promises";import"constants";import"console";var re={exports:{}},constants,hasRequiredConstants;function requireConstants(){if(hasRequiredConstants)return constants;hasRequiredConstants=1;const e="2.0.0",t=256,n=Number.MAX_SAFE_INTEGER||9007199254740991,r=16,i=t-6;return constants={MAX_LENGTH:t,MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:i,MAX_SAFE_INTEGER:n,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:e,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},constants}var debug_1,hasRequiredDebug;function requireDebug(){return hasRequiredDebug||(hasRequiredDebug=1,debug_1=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{}),debug_1}var hasRequiredRe;function requireRe(){return hasRequiredRe||(hasRequiredRe=1,(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=requireConstants(),a=requireDebug();t=e.exports={};const h=t.re=[],c=t.safeRe=[],o=t.src=[],l=t.safeSrc=[],s=t.t={};let u=0;const p="[a-zA-Z0-9-]",m=[["\\s",1],["\\d",i],[p,r]],A=I=>{for(const[P,H]of m)I=I.split(`${P}*`).join(`${P}{0,${H}}`).split(`${P}+`).join(`${P}{1,${H}}`);return I},d=(I,P,H)=>{const O=A(P),M=u++;a(I,M,P),s[I]=M,o[M]=P,l[M]=O,h[M]=new RegExp(P,H?"g":void 0),c[M]=new RegExp(O,H?"g":void 0)};d("NUMERICIDENTIFIER","0|[1-9]\\d*"),d("NUMERICIDENTIFIERLOOSE","\\d+"),d("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${p}*`),d("MAINVERSION",`(${o[s.NUMERICIDENTIFIER]})\\.(${o[s.NUMERICIDENTIFIER]})\\.(${o[s.NUMERICIDENTIFIER]})`),d("MAINVERSIONLOOSE",`(${o[s.NUMERICIDENTIFIERLOOSE]})\\.(${o[s.NUMERICIDENTIFIERLOOSE]})\\.(${o[s.NUMERICIDENTIFIERLOOSE]})`),d("PRERELEASEIDENTIFIER",`(?:${o[s.NONNUMERICIDENTIFIER]}|${o[s.NUMERICIDENTIFIER]})`),d("PRERELEASEIDENTIFIERLOOSE",`(?:${o[s.NONNUMERICIDENTIFIER]}|${o[s.NUMERICIDENTIFIERLOOSE]})`),d("PRERELEASE",`(?:-(${o[s.PRERELEASEIDENTIFIER]}(?:\\.${o[s.PRERELEASEIDENTIFIER]})*))`),d("PRERELEASELOOSE",`(?:-?(${o[s.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${o[s.PRERELEASEIDENTIFIERLOOSE]})*))`),d("BUILDIDENTIFIER",`${p}+`),d("BUILD",`(?:\\+(${o[s.BUILDIDENTIFIER]}(?:\\.${o[s.BUILDIDENTIFIER]})*))`),d("FULLPLAIN",`v?${o[s.MAINVERSION]}${o[s.PRERELEASE]}?${o[s.BUILD]}?`),d("FULL",`^${o[s.FULLPLAIN]}$`),d("LOOSEPLAIN",`[v=\\s]*${o[s.MAINVERSIONLOOSE]}${o[s.PRERELEASELOOSE]}?${o[s.BUILD]}?`),d("LOOSE",`^${o[s.LOOSEPLAIN]}$`),d("GTLT","((?:<|>)?=?)"),d("XRANGEIDENTIFIERLOOSE",`${o[s.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),d("XRANGEIDENTIFIER",`${o[s.NUMERICIDENTIFIER]}|x|X|\\*`),d("XRANGEPLAIN",`[v=\\s]*(${o[s.XRANGEIDENTIFIER]})(?:\\.(${o[s.XRANGEIDENTIFIER]})(?:\\.(${o[s.XRANGEIDENTIFIER]})(?:${o[s.PRERELEASE]})?${o[s.BUILD]}?)?)?`),d("XRANGEPLAINLOOSE",`[v=\\s]*(${o[s.XRANGEIDENTIFIERLOOSE]})(?:\\.(${o[s.XRANGEIDENTIFIERLOOSE]})(?:\\.(${o[s.XRANGEIDENTIFIERLOOSE]})(?:${o[s.PRERELEASELOOSE]})?${o[s.BUILD]}?)?)?`),d("XRANGE",`^${o[s.GTLT]}\\s*${o[s.XRANGEPLAIN]}$`),d("XRANGELOOSE",`^${o[s.GTLT]}\\s*${o[s.XRANGEPLAINLOOSE]}$`),d("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),d("COERCE",`${o[s.COERCEPLAIN]}(?:$|[^\\d])`),d("COERCEFULL",o[s.COERCEPLAIN]+`(?:${o[s.PRERELEASE]})?(?:${o[s.BUILD]})?(?:$|[^\\d])`),d("COERCERTL",o[s.COERCE],!0),d("COERCERTLFULL",o[s.COERCEFULL],!0),d("LONETILDE","(?:~>?)"),d("TILDETRIM",`(\\s*)${o[s.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",d("TILDE",`^${o[s.LONETILDE]}${o[s.XRANGEPLAIN]}$`),d("TILDELOOSE",`^${o[s.LONETILDE]}${o[s.XRANGEPLAINLOOSE]}$`),d("LONECARET","(?:\\^)"),d("CARETTRIM",`(\\s*)${o[s.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",d("CARET",`^${o[s.LONECARET]}${o[s.XRANGEPLAIN]}$`),d("CARETLOOSE",`^${o[s.LONECARET]}${o[s.XRANGEPLAINLOOSE]}$`),d("COMPARATORLOOSE",`^${o[s.GTLT]}\\s*(${o[s.LOOSEPLAIN]})$|^$`),d("COMPARATOR",`^${o[s.GTLT]}\\s*(${o[s.FULLPLAIN]})$|^$`),d("COMPARATORTRIM",`(\\s*)${o[s.GTLT]}\\s*(${o[s.LOOSEPLAIN]}|${o[s.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",d("HYPHENRANGE",`^\\s*(${o[s.XRANGEPLAIN]})\\s+-\\s+(${o[s.XRANGEPLAIN]})\\s*$`),d("HYPHENRANGELOOSE",`^\\s*(${o[s.XRANGEPLAINLOOSE]})\\s+-\\s+(${o[s.XRANGEPLAINLOOSE]})\\s*$`),d("STAR","(<|>)?=?\\s*\\*"),d("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),d("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(re,re.exports)),re.exports}var parseOptions_1,hasRequiredParseOptions;function requireParseOptions(){if(hasRequiredParseOptions)return parseOptions_1;hasRequiredParseOptions=1;const e=Object.freeze({loose:!0}),t=Object.freeze({});return parseOptions_1=r=>r?typeof r!="object"?e:r:t,parseOptions_1}var identifiers,hasRequiredIdentifiers;function requireIdentifiers(){if(hasRequiredIdentifiers)return identifiers;hasRequiredIdentifiers=1;const e=/^[0-9]+$/,t=(r,i)=>{const a=e.test(r),h=e.test(i);return a&&h&&(r=+r,i=+i),r===i?0:a&&!h?-1:h&&!a?1:r<i?-1:1};return identifiers={compareIdentifiers:t,rcompareIdentifiers:(r,i)=>t(i,r)},identifiers}var semver$1,hasRequiredSemver$1;function requireSemver$1(){if(hasRequiredSemver$1)return semver$1;hasRequiredSemver$1=1;const e=requireDebug(),{MAX_LENGTH:t,MAX_SAFE_INTEGER:n}=requireConstants(),{safeRe:r,t:i}=requireRe(),a=requireParseOptions(),{compareIdentifiers:h}=requireIdentifiers();class c{constructor(l,s){if(s=a(s),l instanceof c){if(l.loose===!!s.loose&&l.includePrerelease===!!s.includePrerelease)return l;l=l.version}else if(typeof l!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof l}".`);if(l.length>t)throw new TypeError(`version is longer than ${t} characters`);e("SemVer",l,s),this.options=s,this.loose=!!s.loose,this.includePrerelease=!!s.includePrerelease;const u=l.trim().match(s.loose?r[i.LOOSE]:r[i.FULL]);if(!u)throw new TypeError(`Invalid Version: ${l}`);if(this.raw=l,this.major=+u[1],this.minor=+u[2],this.patch=+u[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");u[4]?this.prerelease=u[4].split(".").map(p=>{if(/^[0-9]+$/.test(p)){const m=+p;if(m>=0&&m<n)return m}return p}):this.prerelease=[],this.build=u[5]?u[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(l){if(e("SemVer.compare",this.version,this.options,l),!(l instanceof c)){if(typeof l=="string"&&l===this.version)return 0;l=new c(l,this.options)}return l.version===this.version?0:this.compareMain(l)||this.comparePre(l)}compareMain(l){return l instanceof c||(l=new c(l,this.options)),h(this.major,l.major)||h(this.minor,l.minor)||h(this.patch,l.patch)}comparePre(l){if(l instanceof c||(l=new c(l,this.options)),this.prerelease.length&&!l.prerelease.length)return-1;if(!this.prerelease.length&&l.prerelease.length)return 1;if(!this.prerelease.length&&!l.prerelease.length)return 0;let s=0;do{const u=this.prerelease[s],p=l.prerelease[s];if(e("prerelease compare",s,u,p),u===void 0&&p===void 0)return 0;if(p===void 0)return 1;if(u===void 0)return-1;if(u===p)continue;return h(u,p)}while(++s)}compareBuild(l){l instanceof c||(l=new c(l,this.options));let s=0;do{const u=this.build[s],p=l.build[s];if(e("build compare",s,u,p),u===void 0&&p===void 0)return 0;if(p===void 0)return 1;if(u===void 0)return-1;if(u===p)continue;return h(u,p)}while(++s)}inc(l,s,u){if(l.startsWith("pre")){if(!s&&u===!1)throw new Error("invalid increment argument: identifier is empty");if(s){const p=`-${s}`.match(this.options.loose?r[i.PRERELEASELOOSE]:r[i.PRERELEASE]);if(!p||p[1]!==s)throw new Error(`invalid identifier: ${s}`)}}switch(l){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",s,u);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",s,u);break;case"prepatch":this.prerelease.length=0,this.inc("patch",s,u),this.inc("pre",s,u);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",s,u),this.inc("pre",s,u);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const p=Number(u)?1:0;if(this.prerelease.length===0)this.prerelease=[p];else{let m=this.prerelease.length;for(;--m>=0;)typeof this.prerelease[m]=="number"&&(this.prerelease[m]++,m=-2);if(m===-1){if(s===this.prerelease.join(".")&&u===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(p)}}if(s){let m=[s,p];u===!1&&(m=[s]),h(this.prerelease[0],s)===0?isNaN(this.prerelease[1])&&(this.prerelease=m):this.prerelease=m}break}default:throw new Error(`invalid increment argument: ${l}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return semver$1=c,semver$1}var parse_1,hasRequiredParse$1;function requireParse$1(){if(hasRequiredParse$1)return parse_1;hasRequiredParse$1=1;const e=requireSemver$1();return parse_1=(n,r,i=!1)=>{if(n instanceof e)return n;try{return new e(n,r)}catch(a){if(!i)return null;throw a}},parse_1}var valid_1,hasRequiredValid$1;function requireValid$1(){if(hasRequiredValid$1)return valid_1;hasRequiredValid$1=1;const e=requireParse$1();return valid_1=(n,r)=>{const i=e(n,r);return i?i.version:null},valid_1}var clean_1,hasRequiredClean;function requireClean(){if(hasRequiredClean)return clean_1;hasRequiredClean=1;const e=requireParse$1();return clean_1=(n,r)=>{const i=e(n.trim().replace(/^[=v]+/,""),r);return i?i.version:null},clean_1}var inc_1,hasRequiredInc;function requireInc(){if(hasRequiredInc)return inc_1;hasRequiredInc=1;const e=requireSemver$1();return inc_1=(n,r,i,a,h)=>{typeof i=="string"&&(h=a,a=i,i=void 0);try{return new e(n instanceof e?n.version:n,i).inc(r,a,h).version}catch{return null}},inc_1}var diff_1,hasRequiredDiff;function requireDiff(){if(hasRequiredDiff)return diff_1;hasRequiredDiff=1;const e=requireParse$1();return diff_1=(n,r)=>{const i=e(n,null,!0),a=e(r,null,!0),h=i.compare(a);if(h===0)return null;const c=h>0,o=c?i:a,l=c?a:i,s=!!o.prerelease.length;if(!!l.prerelease.length&&!s){if(!l.patch&&!l.minor)return"major";if(l.compareMain(o)===0)return l.minor&&!l.patch?"minor":"patch"}const p=s?"pre":"";return i.major!==a.major?p+"major":i.minor!==a.minor?p+"minor":i.patch!==a.patch?p+"patch":"prerelease"},diff_1}var major_1,hasRequiredMajor;function requireMajor(){if(hasRequiredMajor)return major_1;hasRequiredMajor=1;const e=requireSemver$1();return major_1=(n,r)=>new e(n,r).major,major_1}var minor_1,hasRequiredMinor;function requireMinor(){if(hasRequiredMinor)return minor_1;hasRequiredMinor=1;const e=requireSemver$1();return minor_1=(n,r)=>new e(n,r).minor,minor_1}var patch_1,hasRequiredPatch;function requirePatch(){if(hasRequiredPatch)return patch_1;hasRequiredPatch=1;const e=requireSemver$1();return patch_1=(n,r)=>new e(n,r).patch,patch_1}var prerelease_1,hasRequiredPrerelease;function requirePrerelease(){if(hasRequiredPrerelease)return prerelease_1;hasRequiredPrerelease=1;const e=requireParse$1();return prerelease_1=(n,r)=>{const i=e(n,r);return i&&i.prerelease.length?i.prerelease:null},prerelease_1}var compare_1,hasRequiredCompare;function requireCompare(){if(hasRequiredCompare)return compare_1;hasRequiredCompare=1;const e=requireSemver$1();return compare_1=(n,r,i)=>new e(n,i).compare(new e(r,i)),compare_1}var rcompare_1,hasRequiredRcompare;function requireRcompare(){if(hasRequiredRcompare)return rcompare_1;hasRequiredRcompare=1;const e=requireCompare();return rcompare_1=(n,r,i)=>e(r,n,i),rcompare_1}var compareLoose_1,hasRequiredCompareLoose;function requireCompareLoose(){if(hasRequiredCompareLoose)return compareLoose_1;hasRequiredCompareLoose=1;const e=requireCompare();return compareLoose_1=(n,r)=>e(n,r,!0),compareLoose_1}var compareBuild_1,hasRequiredCompareBuild;function requireCompareBuild(){if(hasRequiredCompareBuild)return compareBuild_1;hasRequiredCompareBuild=1;const e=requireSemver$1();return compareBuild_1=(n,r,i)=>{const a=new e(n,i),h=new e(r,i);return a.compare(h)||a.compareBuild(h)},compareBuild_1}var sort_1,hasRequiredSort;function requireSort(){if(hasRequiredSort)return sort_1;hasRequiredSort=1;const e=requireCompareBuild();return sort_1=(n,r)=>n.sort((i,a)=>e(i,a,r)),sort_1}var rsort_1,hasRequiredRsort;function requireRsort(){if(hasRequiredRsort)return rsort_1;hasRequiredRsort=1;const e=requireCompareBuild();return rsort_1=(n,r)=>n.sort((i,a)=>e(a,i,r)),rsort_1}var gt_1,hasRequiredGt;function requireGt(){if(hasRequiredGt)return gt_1;hasRequiredGt=1;const e=requireCompare();return gt_1=(n,r,i)=>e(n,r,i)>0,gt_1}var lt_1,hasRequiredLt;function requireLt(){if(hasRequiredLt)return lt_1;hasRequiredLt=1;const e=requireCompare();return lt_1=(n,r,i)=>e(n,r,i)<0,lt_1}var eq_1,hasRequiredEq;function requireEq(){if(hasRequiredEq)return eq_1;hasRequiredEq=1;const e=requireCompare();return eq_1=(n,r,i)=>e(n,r,i)===0,eq_1}var neq_1,hasRequiredNeq;function requireNeq(){if(hasRequiredNeq)return neq_1;hasRequiredNeq=1;const e=requireCompare();return neq_1=(n,r,i)=>e(n,r,i)!==0,neq_1}var gte_1,hasRequiredGte;function requireGte(){if(hasRequiredGte)return gte_1;hasRequiredGte=1;const e=requireCompare();return gte_1=(n,r,i)=>e(n,r,i)>=0,gte_1}var lte_1,hasRequiredLte;function requireLte(){if(hasRequiredLte)return lte_1;hasRequiredLte=1;const e=requireCompare();return lte_1=(n,r,i)=>e(n,r,i)<=0,lte_1}var cmp_1,hasRequiredCmp;function requireCmp(){if(hasRequiredCmp)return cmp_1;hasRequiredCmp=1;const e=requireEq(),t=requireNeq(),n=requireGt(),r=requireGte(),i=requireLt(),a=requireLte();return cmp_1=(c,o,l,s)=>{switch(o){case"===":return typeof c=="object"&&(c=c.version),typeof l=="object"&&(l=l.version),c===l;case"!==":return typeof c=="object"&&(c=c.version),typeof l=="object"&&(l=l.version),c!==l;case"":case"=":case"==":return e(c,l,s);case"!=":return t(c,l,s);case">":return n(c,l,s);case">=":return r(c,l,s);case"<":return i(c,l,s);case"<=":return a(c,l,s);default:throw new TypeError(`Invalid operator: ${o}`)}},cmp_1}var coerce_1,hasRequiredCoerce;function requireCoerce(){if(hasRequiredCoerce)return coerce_1;hasRequiredCoerce=1;const e=requireSemver$1(),t=requireParse$1(),{safeRe:n,t:r}=requireRe();return coerce_1=(a,h)=>{if(a instanceof e)return a;if(typeof a=="number"&&(a=String(a)),typeof a!="string")return null;h=h||{};let c=null;if(!h.rtl)c=a.match(h.includePrerelease?n[r.COERCEFULL]:n[r.COERCE]);else{const m=h.includePrerelease?n[r.COERCERTLFULL]:n[r.COERCERTL];let A;for(;(A=m.exec(a))&&(!c||c.index+c[0].length!==a.length);)(!c||A.index+A[0].length!==c.index+c[0].length)&&(c=A),m.lastIndex=A.index+A[1].length+A[2].length;m.lastIndex=-1}if(c===null)return null;const o=c[2],l=c[3]||"0",s=c[4]||"0",u=h.includePrerelease&&c[5]?`-${c[5]}`:"",p=h.includePrerelease&&c[6]?`+${c[6]}`:"";return t(`${o}.${l}.${s}${u}${p}`,h)},coerce_1}var lrucache,hasRequiredLrucache;function requireLrucache(){if(hasRequiredLrucache)return lrucache;hasRequiredLrucache=1;class e{constructor(){this.max=1e3,this.map=new Map}get(n){const r=this.map.get(n);if(r!==void 0)return this.map.delete(n),this.map.set(n,r),r}delete(n){return this.map.delete(n)}set(n,r){if(!this.delete(n)&&r!==void 0){if(this.map.size>=this.max){const a=this.map.keys().next().value;this.delete(a)}this.map.set(n,r)}return this}}return lrucache=e,lrucache}var range,hasRequiredRange;function requireRange(){if(hasRequiredRange)return range;hasRequiredRange=1;const e=/\s+/g;class t{constructor(R,T){if(T=i(T),R instanceof t)return R.loose===!!T.loose&&R.includePrerelease===!!T.includePrerelease?R:new t(R.raw,T);if(R instanceof a)return this.raw=R.value,this.set=[[R]],this.formatted=void 0,this;if(this.options=T,this.loose=!!T.loose,this.includePrerelease=!!T.includePrerelease,this.raw=R.trim().replace(e," "),this.set=this.raw.split("||").map(_=>this.parseRange(_.trim())).filter(_=>_.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const _=this.set[0];if(this.set=this.set.filter(y=>!d(y[0])),this.set.length===0)this.set=[_];else if(this.set.length>1){for(const y of this.set)if(y.length===1&&I(y[0])){this.set=[y];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let R=0;R<this.set.length;R++){R>0&&(this.formatted+="||");const T=this.set[R];for(let _=0;_<T.length;_++)_>0&&(this.formatted+=" "),this.formatted+=T[_].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(R){const _=((this.options.includePrerelease&&m)|(this.options.loose&&A))+":"+R,y=r.get(_);if(y)return y;const C=this.options.loose,w=C?o[l.HYPHENRANGELOOSE]:o[l.HYPHENRANGE];R=R.replace(w,b(this.options.includePrerelease)),h("hyphen replace",R),R=R.replace(o[l.COMPARATORTRIM],s),h("comparator trim",R),R=R.replace(o[l.TILDETRIM],u),h("tilde trim",R),R=R.replace(o[l.CARETTRIM],p),h("caret trim",R);let L=R.split(" ").map(D=>H(D,this.options)).join(" ").split(/\s+/).map(D=>S(D,this.options));C&&(L=L.filter(D=>(h("loose invalid filter",D,this.options),!!D.match(o[l.COMPARATORLOOSE])))),h("range list",L);const N=new Map,$=L.map(D=>new a(D,this.options));for(const D of $){if(d(D))return[D];N.set(D.value,D)}N.size>1&&N.has("")&&N.delete("");const V=[...N.values()];return r.set(_,V),V}intersects(R,T){if(!(R instanceof t))throw new TypeError("a Range is required");return this.set.some(_=>P(_,T)&&R.set.some(y=>P(y,T)&&_.every(C=>y.every(w=>C.intersects(w,T)))))}test(R){if(!R)return!1;if(typeof R=="string")try{R=new c(R,this.options)}catch{return!1}for(let T=0;T<this.set.length;T++)if(U(this.set[T],R,this.options))return!0;return!1}}range=t;const n=requireLrucache(),r=new n,i=requireParseOptions(),a=requireComparator(),h=requireDebug(),c=requireSemver$1(),{safeRe:o,t:l,comparatorTrimReplace:s,tildeTrimReplace:u,caretTrimReplace:p}=requireRe(),{FLAG_INCLUDE_PRERELEASE:m,FLAG_LOOSE:A}=requireConstants(),d=E=>E.value==="<0.0.0-0",I=E=>E.value==="",P=(E,R)=>{let T=!0;const _=E.slice();let y=_.pop();for(;T&&_.length;)T=_.every(C=>y.intersects(C,R)),y=_.pop();return T},H=(E,R)=>(h("comp",E,R),E=q(E,R),h("caret",E),E=M(E,R),h("tildes",E),E=x(E,R),h("xrange",E),E=g(E,R),h("stars",E),E),O=E=>!E||E.toLowerCase()==="x"||E==="*",M=(E,R)=>E.trim().split(/\s+/).map(T=>F(T,R)).join(" "),F=(E,R)=>{const T=R.loose?o[l.TILDELOOSE]:o[l.TILDE];return E.replace(T,(_,y,C,w,L)=>{h("tilde",E,_,y,C,w,L);let N;return O(y)?N="":O(C)?N=`>=${y}.0.0 <${+y+1}.0.0-0`:O(w)?N=`>=${y}.${C}.0 <${y}.${+C+1}.0-0`:L?(h("replaceTilde pr",L),N=`>=${y}.${C}.${w}-${L} <${y}.${+C+1}.0-0`):N=`>=${y}.${C}.${w} <${y}.${+C+1}.0-0`,h("tilde return",N),N})},q=(E,R)=>E.trim().split(/\s+/).map(T=>v(T,R)).join(" "),v=(E,R)=>{h("caret",E,R);const T=R.loose?o[l.CARETLOOSE]:o[l.CARET],_=R.includePrerelease?"-0":"";return E.replace(T,(y,C,w,L,N)=>{h("caret",E,y,C,w,L,N);let $;return O(C)?$="":O(w)?$=`>=${C}.0.0${_} <${+C+1}.0.0-0`:O(L)?C==="0"?$=`>=${C}.${w}.0${_} <${C}.${+w+1}.0-0`:$=`>=${C}.${w}.0${_} <${+C+1}.0.0-0`:N?(h("replaceCaret pr",N),C==="0"?w==="0"?$=`>=${C}.${w}.${L}-${N} <${C}.${w}.${+L+1}-0`:$=`>=${C}.${w}.${L}-${N} <${C}.${+w+1}.0-0`:$=`>=${C}.${w}.${L}-${N} <${+C+1}.0.0-0`):(h("no pr"),C==="0"?w==="0"?$=`>=${C}.${w}.${L}${_} <${C}.${w}.${+L+1}-0`:$=`>=${C}.${w}.${L}${_} <${C}.${+w+1}.0-0`:$=`>=${C}.${w}.${L} <${+C+1}.0.0-0`),h("caret return",$),$})},x=(E,R)=>(h("replaceXRanges",E,R),E.split(/\s+/).map(T=>f(T,R)).join(" ")),f=(E,R)=>{E=E.trim();const T=R.loose?o[l.XRANGELOOSE]:o[l.XRANGE];return E.replace(T,(_,y,C,w,L,N)=>{h("xRange",E,_,y,C,w,L,N);const $=O(C),V=$||O(w),D=V||O(L),B=D;return y==="="&&B&&(y=""),N=R.includePrerelease?"-0":"",$?y===">"||y==="<"?_="<0.0.0-0":_="*":y&&B?(V&&(w=0),L=0,y===">"?(y=">=",V?(C=+C+1,w=0,L=0):(w=+w+1,L=0)):y==="<="&&(y="<",V?C=+C+1:w=+w+1),y==="<"&&(N="-0"),_=`${y+C}.${w}.${L}${N}`):V?_=`>=${C}.0.0${N} <${+C+1}.0.0-0`:D&&(_=`>=${C}.${w}.0${N} <${C}.${+w+1}.0-0`),h("xRange return",_),_})},g=(E,R)=>(h("replaceStars",E,R),E.trim().replace(o[l.STAR],"")),S=(E,R)=>(h("replaceGTE0",E,R),E.trim().replace(o[R.includePrerelease?l.GTE0PRE:l.GTE0],"")),b=E=>(R,T,_,y,C,w,L,N,$,V,D,B)=>(O(_)?T="":O(y)?T=`>=${_}.0.0${E?"-0":""}`:O(C)?T=`>=${_}.${y}.0${E?"-0":""}`:w?T=`>=${T}`:T=`>=${T}${E?"-0":""}`,O($)?N="":O(V)?N=`<${+$+1}.0.0-0`:O(D)?N=`<${$}.${+V+1}.0-0`:B?N=`<=${$}.${V}.${D}-${B}`:E?N=`<${$}.${V}.${+D+1}-0`:N=`<=${N}`,`${T} ${N}`.trim()),U=(E,R,T)=>{for(let _=0;_<E.length;_++)if(!E[_].test(R))return!1;if(R.prerelease.length&&!T.includePrerelease){for(let _=0;_<E.length;_++)if(h(E[_].semver),E[_].semver!==a.ANY&&E[_].semver.prerelease.length>0){const y=E[_].semver;if(y.major===R.major&&y.minor===R.minor&&y.patch===R.patch)return!0}return!1}return!0};return range}var comparator,hasRequiredComparator;function requireComparator(){if(hasRequiredComparator)return comparator;hasRequiredComparator=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(s,u){if(u=n(u),s instanceof t){if(s.loose===!!u.loose)return s;s=s.value}s=s.trim().split(/\s+/).join(" "),h("comparator",s,u),this.options=u,this.loose=!!u.loose,this.parse(s),this.semver===e?this.value="":this.value=this.operator+this.semver.version,h("comp",this)}parse(s){const u=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],p=s.match(u);if(!p)throw new TypeError(`Invalid comparator: ${s}`);this.operator=p[1]!==void 0?p[1]:"",this.operator==="="&&(this.operator=""),p[2]?this.semver=new c(p[2],this.options.loose):this.semver=e}toString(){return this.value}test(s){if(h("Comparator.test",s,this.options.loose),this.semver===e||s===e)return!0;if(typeof s=="string")try{s=new c(s,this.options)}catch{return!1}return a(s,this.operator,this.semver,this.options)}intersects(s,u){if(!(s instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new o(s.value,u).test(this.value):s.operator===""?s.value===""?!0:new o(this.value,u).test(s.semver):(u=n(u),u.includePrerelease&&(this.value==="<0.0.0-0"||s.value==="<0.0.0-0")||!u.includePrerelease&&(this.value.startsWith("<0.0.0")||s.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&s.operator.startsWith(">")||this.operator.startsWith("<")&&s.operator.startsWith("<")||this.semver.version===s.semver.version&&this.operator.includes("=")&&s.operator.includes("=")||a(this.semver,"<",s.semver,u)&&this.operator.startsWith(">")&&s.operator.startsWith("<")||a(this.semver,">",s.semver,u)&&this.operator.startsWith("<")&&s.operator.startsWith(">")))}}comparator=t;const n=requireParseOptions(),{safeRe:r,t:i}=requireRe(),a=requireCmp(),h=requireDebug(),c=requireSemver$1(),o=requireRange();return comparator}var satisfies_1,hasRequiredSatisfies;function requireSatisfies(){if(hasRequiredSatisfies)return satisfies_1;hasRequiredSatisfies=1;const e=requireRange();return satisfies_1=(n,r,i)=>{try{r=new e(r,i)}catch{return!1}return r.test(n)},satisfies_1}var toComparators_1,hasRequiredToComparators;function requireToComparators(){if(hasRequiredToComparators)return toComparators_1;hasRequiredToComparators=1;const e=requireRange();return toComparators_1=(n,r)=>new e(n,r).set.map(i=>i.map(a=>a.value).join(" ").trim().split(" ")),toComparators_1}var maxSatisfying_1,hasRequiredMaxSatisfying;function requireMaxSatisfying(){if(hasRequiredMaxSatisfying)return maxSatisfying_1;hasRequiredMaxSatisfying=1;const e=requireSemver$1(),t=requireRange();return maxSatisfying_1=(r,i,a)=>{let h=null,c=null,o=null;try{o=new t(i,a)}catch{return null}return r.forEach(l=>{o.test(l)&&(!h||c.compare(l)===-1)&&(h=l,c=new e(h,a))}),h},maxSatisfying_1}var minSatisfying_1,hasRequiredMinSatisfying;function requireMinSatisfying(){if(hasRequiredMinSatisfying)return minSatisfying_1;hasRequiredMinSatisfying=1;const e=requireSemver$1(),t=requireRange();return minSatisfying_1=(r,i,a)=>{let h=null,c=null,o=null;try{o=new t(i,a)}catch{return null}return r.forEach(l=>{o.test(l)&&(!h||c.compare(l)===1)&&(h=l,c=new e(h,a))}),h},minSatisfying_1}var minVersion_1,hasRequiredMinVersion;function requireMinVersion(){if(hasRequiredMinVersion)return minVersion_1;hasRequiredMinVersion=1;const e=requireSemver$1(),t=requireRange(),n=requireGt();return minVersion_1=(i,a)=>{i=new t(i,a);let h=new e("0.0.0");if(i.test(h)||(h=new e("0.0.0-0"),i.test(h)))return h;h=null;for(let c=0;c<i.set.length;++c){const o=i.set[c];let l=null;o.forEach(s=>{const u=new e(s.semver.version);switch(s.operator){case">":u.prerelease.length===0?u.patch++:u.prerelease.push(0),u.raw=u.format();case"":case">=":(!l||n(u,l))&&(l=u);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${s.operator}`)}}),l&&(!h||n(h,l))&&(h=l)}return h&&i.test(h)?h:null},minVersion_1}var valid,hasRequiredValid;function requireValid(){if(hasRequiredValid)return valid;hasRequiredValid=1;const e=requireRange();return valid=(n,r)=>{try{return new e(n,r).range||"*"}catch{return null}},valid}var outside_1,hasRequiredOutside;function requireOutside(){if(hasRequiredOutside)return outside_1;hasRequiredOutside=1;const e=requireSemver$1(),t=requireComparator(),{ANY:n}=t,r=requireRange(),i=requireSatisfies(),a=requireGt(),h=requireLt(),c=requireLte(),o=requireGte();return outside_1=(s,u,p,m)=>{s=new e(s,m),u=new r(u,m);let A,d,I,P,H;switch(p){case">":A=a,d=c,I=h,P=">",H=">=";break;case"<":A=h,d=o,I=a,P="<",H="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(i(s,u,m))return!1;for(let O=0;O<u.set.length;++O){const M=u.set[O];let F=null,q=null;if(M.forEach(v=>{v.semver===n&&(v=new t(">=0.0.0")),F=F||v,q=q||v,A(v.semver,F.semver,m)?F=v:I(v.semver,q.semver,m)&&(q=v)}),F.operator===P||F.operator===H||(!q.operator||q.operator===P)&&d(s,q.semver))return!1;if(q.operator===H&&I(s,q.semver))return!1}return!0},outside_1}var gtr_1,hasRequiredGtr;function requireGtr(){if(hasRequiredGtr)return gtr_1;hasRequiredGtr=1;const e=requireOutside();return gtr_1=(n,r,i)=>e(n,r,">",i),gtr_1}var ltr_1,hasRequiredLtr;function requireLtr(){if(hasRequiredLtr)return ltr_1;hasRequiredLtr=1;const e=requireOutside();return ltr_1=(n,r,i)=>e(n,r,"<",i),ltr_1}var intersects_1,hasRequiredIntersects;function requireIntersects(){if(hasRequiredIntersects)return intersects_1;hasRequiredIntersects=1;const e=requireRange();return intersects_1=(n,r,i)=>(n=new e(n,i),r=new e(r,i),n.intersects(r,i)),intersects_1}var simplify,hasRequiredSimplify;function requireSimplify(){if(hasRequiredSimplify)return simplify;hasRequiredSimplify=1;const e=requireSatisfies(),t=requireCompare();return simplify=(n,r,i)=>{const a=[];let h=null,c=null;const o=n.sort((p,m)=>t(p,m,i));for(const p of o)e(p,r,i)?(c=p,h||(h=p)):(c&&a.push([h,c]),c=null,h=null);h&&a.push([h,null]);const l=[];for(const[p,m]of a)p===m?l.push(p):!m&&p===o[0]?l.push("*"):m?p===o[0]?l.push(`<=${m}`):l.push(`${p} - ${m}`):l.push(`>=${p}`);const s=l.join(" || "),u=typeof r.raw=="string"?r.raw:String(r);return s.length<u.length?s:r},simplify}var subset_1,hasRequiredSubset;function requireSubset(){if(hasRequiredSubset)return subset_1;hasRequiredSubset=1;const e=requireRange(),t=requireComparator(),{ANY:n}=t,r=requireSatisfies(),i=requireCompare(),a=(u,p,m={})=>{if(u===p)return!0;u=new e(u,m),p=new e(p,m);let A=!1;e:for(const d of u.set){for(const I of p.set){const P=o(d,I,m);if(A=A||P!==null,P)continue e}if(A)return!1}return!0},h=[new t(">=0.0.0-0")],c=[new t(">=0.0.0")],o=(u,p,m)=>{if(u===p)return!0;if(u.length===1&&u[0].semver===n){if(p.length===1&&p[0].semver===n)return!0;m.includePrerelease?u=h:u=c}if(p.length===1&&p[0].semver===n){if(m.includePrerelease)return!0;p=c}const A=new Set;let d,I;for(const x of u)x.operator===">"||x.operator===">="?d=l(d,x,m):x.operator==="<"||x.operator==="<="?I=s(I,x,m):A.add(x.semver);if(A.size>1)return null;let P;if(d&&I){if(P=i(d.semver,I.semver,m),P>0)return null;if(P===0&&(d.operator!==">="||I.operator!=="<="))return null}for(const x of A){if(d&&!r(x,String(d),m)||I&&!r(x,String(I),m))return null;for(const f of p)if(!r(x,String(f),m))return!1;return!0}let H,O,M,F,q=I&&!m.includePrerelease&&I.semver.prerelease.length?I.semver:!1,v=d&&!m.includePrerelease&&d.semver.prerelease.length?d.semver:!1;q&&q.prerelease.length===1&&I.operator==="<"&&q.prerelease[0]===0&&(q=!1);for(const x of p){if(F=F||x.operator===">"||x.operator===">=",M=M||x.operator==="<"||x.operator==="<=",d){if(v&&x.semver.prerelease&&x.semver.prerelease.length&&x.semver.major===v.major&&x.semver.minor===v.minor&&x.semver.patch===v.patch&&(v=!1),x.operator===">"||x.operator===">="){if(H=l(d,x,m),H===x&&H!==d)return!1}else if(d.operator===">="&&!r(d.semver,String(x),m))return!1}if(I){if(q&&x.semver.prerelease&&x.semver.prerelease.length&&x.semver.major===q.major&&x.semver.minor===q.minor&&x.semver.patch===q.patch&&(q=!1),x.operator==="<"||x.operator==="<="){if(O=s(I,x,m),O===x&&O!==I)return!1}else if(I.operator==="<="&&!r(I.semver,String(x),m))return!1}if(!x.operator&&(I||d)&&P!==0)return!1}return!(d&&M&&!I&&P!==0||I&&F&&!d&&P!==0||v||q)},l=(u,p,m)=>{if(!u)return p;const A=i(u.semver,p.semver,m);return A>0?u:A<0||p.operator===">"&&u.operator===">="?p:u},s=(u,p,m)=>{if(!u)return p;const A=i(u.semver,p.semver,m);return A<0?u:A>0||p.operator==="<"&&u.operator==="<="?p:u};return subset_1=a,subset_1}var semver,hasRequiredSemver;function requireSemver(){if(hasRequiredSemver)return semver;hasRequiredSemver=1;const e=requireRe(),t=requireConstants(),n=requireSemver$1(),r=requireIdentifiers(),i=requireParse$1(),a=requireValid$1(),h=requireClean(),c=requireInc(),o=requireDiff(),l=requireMajor(),s=requireMinor(),u=requirePatch(),p=requirePrerelease(),m=requireCompare(),A=requireRcompare(),d=requireCompareLoose(),I=requireCompareBuild(),P=requireSort(),H=requireRsort(),O=requireGt(),M=requireLt(),F=requireEq(),q=requireNeq(),v=requireGte(),x=requireLte(),f=requireCmp(),g=requireCoerce(),S=requireComparator(),b=requireRange(),U=requireSatisfies(),E=requireToComparators(),R=requireMaxSatisfying(),T=requireMinSatisfying(),_=requireMinVersion(),y=requireValid(),C=requireOutside(),w=requireGtr(),L=requireLtr(),N=requireIntersects(),$=requireSimplify(),V=requireSubset();return semver={parse:i,valid:a,clean:h,inc:c,diff:o,major:l,minor:s,patch:u,prerelease:p,compare:m,rcompare:A,compareLoose:d,compareBuild:I,sort:P,rsort:H,gt:O,lt:M,eq:F,neq:q,gte:v,lte:x,cmp:f,coerce:g,Comparator:S,Range:b,satisfies:U,toComparators:E,maxSatisfying:R,minSatisfying:T,minVersion:_,validRange:y,outside:C,gtr:w,ltr:L,intersects:N,simplifyRange:$,subset:V,SemVer:n,re:e.re,src:e.src,tokens:e.t,SEMVER_SPEC_VERSION:t.SEMVER_SPEC_VERSION,RELEASE_TYPES:t.RELEASE_TYPES,compareIdentifiers:r.compareIdentifiers,rcompareIdentifiers:r.rcompareIdentifiers},semver}var semverExports=requireSemver(),toml={},parse={exports:{}},tomlParser={exports:{}},parser,hasRequiredParser;function requireParser(){if(hasRequiredParser)return parser;hasRequiredParser=1;const e=1114112;class t extends Error{constructor(a,h,c){super("[ParserError] "+a,h,c),this.name="ParserError",this.code="ParserError",Error.captureStackTrace&&Error.captureStackTrace(this,t)}}class n{constructor(a){this.parser=a,this.buf="",this.returned=null,this.result=null,this.resultTable=null,this.resultArr=null}}class r{constructor(){this.pos=0,this.col=0,this.line=0,this.obj={},this.ctx=this.obj,this.stack=[],this._buf="",this.char=null,this.ii=0,this.state=new n(this.parseStart)}parse(a){if(a.length===0||a.length==null)return;this._buf=String(a),this.ii=-1,this.char=-1;let h;for(;h===!1||this.nextChar();)h=this.runOne();this._buf=null}nextChar(){return this.char===10&&(++this.line,this.col=-1),++this.ii,this.char=this._buf.codePointAt(this.ii),++this.pos,++this.col,this.haveBuffer()}haveBuffer(){return this.ii<this._buf.length}runOne(){return this.state.parser.call(this,this.state.returned)}finish(){this.char=e;let a;do a=this.state.parser,this.runOne();while(this.state.parser!==a);return this.ctx=null,this.state=null,this._buf=null,this.obj}next(a){if(typeof a!="function")throw new t("Tried to set state to non-existent state: "+JSON.stringify(a));this.state.parser=a}goto(a){return this.next(a),this.runOne()}call(a,h){h&&this.next(h),this.stack.push(this.state),this.state=new n(a)}callNow(a,h){return this.call(a,h),this.runOne()}return(a){if(this.stack.length===0)throw this.error(new t("Stack underflow"));a===void 0&&(a=this.state.buf),this.state=this.stack.pop(),this.state.returned=a}returnNow(a){return this.return(a),this.runOne()}consume(){if(this.char===e)throw this.error(new t("Unexpected end-of-buffer"));this.state.buf+=this._buf[this.ii]}error(a){return a.line=this.line,a.col=this.col,a.pos=this.pos,a}parseStart(){throw new t("Must declare a parseStart method")}}return r.END=e,r.Error=t,parser=r,parser}var createDatetime,hasRequiredCreateDatetime;function requireCreateDatetime(){return hasRequiredCreateDatetime||(hasRequiredCreateDatetime=1,createDatetime=e=>{const t=new Date(e);if(isNaN(t))throw new TypeError("Invalid Datetime");return t}),createDatetime}var formatNum,hasRequiredFormatNum;function requireFormatNum(){return hasRequiredFormatNum||(hasRequiredFormatNum=1,formatNum=(e,t)=>{for(t=String(t);t.length<e;)t="0"+t;return t}),formatNum}var createDatetimeFloat,hasRequiredCreateDatetimeFloat;function requireCreateDatetimeFloat(){if(hasRequiredCreateDatetimeFloat)return createDatetimeFloat;hasRequiredCreateDatetimeFloat=1;const e=requireFormatNum();class t extends Date{constructor(r){super(r+"Z"),this.isFloating=!0}toISOString(){const r=`${this.getUTCFullYear()}-${e(2,this.getUTCMonth()+1)}-${e(2,this.getUTCDate())}`,i=`${e(2,this.getUTCHours())}:${e(2,this.getUTCMinutes())}:${e(2,this.getUTCSeconds())}.${e(3,this.getUTCMilliseconds())}`;return`${r}T${i}`}}return createDatetimeFloat=n=>{const r=new t(n);if(isNaN(r))throw new TypeError("Invalid Datetime");return r},createDatetimeFloat}var createDate,hasRequiredCreateDate;function requireCreateDate(){if(hasRequiredCreateDate)return createDate;hasRequiredCreateDate=1;const e=requireFormatNum(),t=commonjsGlobal.Date;class n extends t{constructor(i){super(i),this.isDate=!0}toISOString(){return`${this.getUTCFullYear()}-${e(2,this.getUTCMonth()+1)}-${e(2,this.getUTCDate())}`}}return createDate=r=>{const i=new n(r);if(isNaN(i))throw new TypeError("Invalid Datetime");return i},createDate}var createTime,hasRequiredCreateTime;function requireCreateTime(){if(hasRequiredCreateTime)return createTime;hasRequiredCreateTime=1;const e=requireFormatNum();class t extends Date{constructor(r){super(`0000-01-01T${r}Z`),this.isTime=!0}toISOString(){return`${e(2,this.getUTCHours())}:${e(2,this.getUTCMinutes())}:${e(2,this.getUTCSeconds())}.${e(3,this.getUTCMilliseconds())}`}}return createTime=n=>{const r=new t(n);if(isNaN(r))throw new TypeError("Invalid Datetime");return r},createTime}var hasRequiredTomlParser;function requireTomlParser(){if(hasRequiredTomlParser)return tomlParser.exports;hasRequiredTomlParser=1,tomlParser.exports=makeParserClass(requireParser()),tomlParser.exports.makeParserClass=makeParserClass;class TomlError extends Error{constructor(t){super(t),this.name="TomlError",Error.captureStackTrace&&Error.captureStackTrace(this,TomlError),this.fromTOML=!0,this.wrapped=null}}TomlError.wrap=e=>{const t=new TomlError(e.message);return t.code=e.code,t.wrapped=e,t},tomlParser.exports.TomlError=TomlError;const createDateTime=requireCreateDatetime(),createDateTimeFloat=requireCreateDatetimeFloat(),createDate=requireCreateDate(),createTime=requireCreateTime(),CTRL_I=9,CTRL_J=10,CTRL_M=13,CTRL_CHAR_BOUNDARY=31,CHAR_SP=32,CHAR_QUOT=34,CHAR_NUM=35,CHAR_APOS=39,CHAR_PLUS=43,CHAR_COMMA=44,CHAR_HYPHEN=45,CHAR_PERIOD=46,CHAR_0=48,CHAR_1=49,CHAR_7=55,CHAR_9=57,CHAR_COLON=58,CHAR_EQUALS=61,CHAR_A=65,CHAR_E=69,CHAR_F=70,CHAR_T=84,CHAR_U=85,CHAR_Z=90,CHAR_LOWBAR=95,CHAR_a=97,CHAR_b=98,CHAR_e=101,CHAR_f=102,CHAR_i=105,CHAR_l=108,CHAR_n=110,CHAR_o=111,CHAR_r=114,CHAR_s=115,CHAR_t=116,CHAR_u=117,CHAR_x=120,CHAR_z=122,CHAR_LCUB=123,CHAR_RCUB=125,CHAR_LSQB=91,CHAR_BSOL=92,CHAR_RSQB=93,CHAR_DEL=127,SURROGATE_FIRST=55296,SURROGATE_LAST=57343,escapes={[CHAR_b]:"\b",[CHAR_t]:"	",[CHAR_n]:`
`,[CHAR_f]:"\f",[CHAR_r]:"\r",[CHAR_QUOT]:'"',[CHAR_BSOL]:"\\"};function isDigit(e){return e>=CHAR_0&&e<=CHAR_9}function isHexit(e){return e>=CHAR_A&&e<=CHAR_F||e>=CHAR_a&&e<=CHAR_f||e>=CHAR_0&&e<=CHAR_9}function isBit(e){return e===CHAR_1||e===CHAR_0}function isOctit(e){return e>=CHAR_0&&e<=CHAR_7}function isAlphaNumQuoteHyphen(e){return e>=CHAR_A&&e<=CHAR_Z||e>=CHAR_a&&e<=CHAR_z||e>=CHAR_0&&e<=CHAR_9||e===CHAR_APOS||e===CHAR_QUOT||e===CHAR_LOWBAR||e===CHAR_HYPHEN}function isAlphaNumHyphen(e){return e>=CHAR_A&&e<=CHAR_Z||e>=CHAR_a&&e<=CHAR_z||e>=CHAR_0&&e<=CHAR_9||e===CHAR_LOWBAR||e===CHAR_HYPHEN}const _type=Symbol("type"),_declared=Symbol("declared"),hasOwnProperty=Object.prototype.hasOwnProperty,defineProperty=Object.defineProperty,descriptor={configurable:!0,enumerable:!0,writable:!0,value:void 0};function hasKey(e,t){return hasOwnProperty.call(e,t)?!0:(t==="__proto__"&&defineProperty(e,"__proto__",descriptor),!1)}const INLINE_TABLE=Symbol("inline-table");function InlineTable(){return Object.defineProperties({},{[_type]:{value:INLINE_TABLE}})}function isInlineTable(e){return e===null||typeof e!="object"?!1:e[_type]===INLINE_TABLE}const TABLE=Symbol("table");function Table(){return Object.defineProperties({},{[_type]:{value:TABLE},[_declared]:{value:!1,writable:!0}})}function isTable(e){return e===null||typeof e!="object"?!1:e[_type]===TABLE}const _contentType=Symbol("content-type"),INLINE_LIST=Symbol("inline-list");function InlineList(e){return Object.defineProperties([],{[_type]:{value:INLINE_LIST},[_contentType]:{value:e}})}function isInlineList(e){return e===null||typeof e!="object"?!1:e[_type]===INLINE_LIST}const LIST=Symbol("list");function List(){return Object.defineProperties([],{[_type]:{value:LIST}})}function isList(e){return e===null||typeof e!="object"?!1:e[_type]===LIST}let _custom;try{const utilInspect=eval("require('util').inspect");_custom=utilInspect.custom}catch(e){}const _inspect=_custom||"inspect";class BoxedBigInt{constructor(t){try{this.value=commonjsGlobal.BigInt.asIntN(64,t)}catch{this.value=null}Object.defineProperty(this,_type,{value:INTEGER})}isNaN(){return this.value===null}toString(){return String(this.value)}[_inspect](){return`[BigInt: ${this.toString()}]}`}valueOf(){return this.value}}const INTEGER=Symbol("integer");function Integer(e){let t=Number(e);return Object.is(t,-0)&&(t=0),commonjsGlobal.BigInt&&!Number.isSafeInteger(t)?new BoxedBigInt(e):Object.defineProperties(new Number(t),{isNaN:{value:function(){return isNaN(this)}},[_type]:{value:INTEGER},[_inspect]:{value:()=>`[Integer: ${e}]`}})}function isInteger(e){return e===null||typeof e!="object"?!1:e[_type]===INTEGER}const FLOAT=Symbol("float");function Float(e){return Object.defineProperties(new Number(e),{[_type]:{value:FLOAT},[_inspect]:{value:()=>`[Float: ${e}]`}})}function isFloat(e){return e===null||typeof e!="object"?!1:e[_type]===FLOAT}function tomlType(e){const t=typeof e;if(t==="object"){if(e===null)return"null";if(e instanceof Date)return"datetime";if(_type in e)switch(e[_type]){case INLINE_TABLE:return"inline-table";case INLINE_LIST:return"inline-list";case TABLE:return"table";case LIST:return"list";case FLOAT:return"float";case INTEGER:return"integer"}}return t}function makeParserClass(e){class t extends e{constructor(){super(),this.ctx=this.obj=Table()}atEndOfWord(){return this.char===CHAR_NUM||this.char===CTRL_I||this.char===CHAR_SP||this.atEndOfLine()}atEndOfLine(){return this.char===e.END||this.char===CTRL_J||this.char===CTRL_M}parseStart(){if(this.char===e.END)return null;if(this.char===CHAR_LSQB)return this.call(this.parseTableOrList);if(this.char===CHAR_NUM)return this.call(this.parseComment);if(this.char===CTRL_J||this.char===CHAR_SP||this.char===CTRL_I||this.char===CTRL_M)return null;if(isAlphaNumQuoteHyphen(this.char))return this.callNow(this.parseAssignStatement);throw this.error(new TomlError(`Unknown character "${this.char}"`))}parseWhitespaceToEOL(){if(this.char===CHAR_SP||this.char===CTRL_I||this.char===CTRL_M)return null;if(this.char===CHAR_NUM)return this.goto(this.parseComment);if(this.char===e.END||this.char===CTRL_J)return this.return();throw this.error(new TomlError("Unexpected character, expected only whitespace or comments till end of line"))}parseAssignStatement(){return this.callNow(this.parseAssign,this.recordAssignStatement)}recordAssignStatement(r){let i=this.ctx,a=r.key.pop();for(let h of r.key){if(hasKey(i,h)&&!isTable(i[h]))throw this.error(new TomlError("Can't redefine existing key"));i=i[h]=i[h]||Table()}if(hasKey(i,a))throw this.error(new TomlError("Can't redefine existing key"));return i[_declared]=!0,isInteger(r.value)||isFloat(r.value)?i[a]=r.value.valueOf():i[a]=r.value,this.goto(this.parseWhitespaceToEOL)}parseAssign(){return this.callNow(this.parseKeyword,this.recordAssignKeyword)}recordAssignKeyword(r){return this.state.resultTable?this.state.resultTable.push(r):this.state.resultTable=[r],this.goto(this.parseAssignKeywordPreDot)}parseAssignKeywordPreDot(){if(this.char===CHAR_PERIOD)return this.next(this.parseAssignKeywordPostDot);if(this.char!==CHAR_SP&&this.char!==CTRL_I)return this.goto(this.parseAssignEqual)}parseAssignKeywordPostDot(){if(this.char!==CHAR_SP&&this.char!==CTRL_I)return this.callNow(this.parseKeyword,this.recordAssignKeyword)}parseAssignEqual(){if(this.char===CHAR_EQUALS)return this.next(this.parseAssignPreValue);throw this.error(new TomlError('Invalid character, expected "="'))}parseAssignPreValue(){return this.char===CHAR_SP||this.char===CTRL_I?null:this.callNow(this.parseValue,this.recordAssignValue)}recordAssignValue(r){return this.returnNow({key:this.state.resultTable,value:r})}parseComment(){do{if(this.char===e.END||this.char===CTRL_J)return this.return();if(this.char===CHAR_DEL||this.char<=CTRL_CHAR_BOUNDARY&&this.char!==CTRL_I)throw this.errorControlCharIn("comments")}while(this.nextChar())}parseTableOrList(){if(this.char===CHAR_LSQB)this.next(this.parseList);else return this.goto(this.parseTable)}parseTable(){return this.ctx=this.obj,this.goto(this.parseTableNext)}parseTableNext(){return this.char===CHAR_SP||this.char===CTRL_I?null:this.callNow(this.parseKeyword,this.parseTableMore)}parseTableMore(r){if(this.char===CHAR_SP||this.char===CTRL_I)return null;if(this.char===CHAR_RSQB){if(hasKey(this.ctx,r)&&(!isTable(this.ctx[r])||this.ctx[r][_declared]))throw this.error(new TomlError("Can't redefine existing key"));return this.ctx=this.ctx[r]=this.ctx[r]||Table(),this.ctx[_declared]=!0,this.next(this.parseWhitespaceToEOL)}else if(this.char===CHAR_PERIOD){if(!hasKey(this.ctx,r))this.ctx=this.ctx[r]=Table();else if(isTable(this.ctx[r]))this.ctx=this.ctx[r];else if(isList(this.ctx[r]))this.ctx=this.ctx[r][this.ctx[r].length-1];else throw this.error(new TomlError("Can't redefine existing key"));return this.next(this.parseTableNext)}else throw this.error(new TomlError("Unexpected character, expected whitespace, . or ]"))}parseList(){return this.ctx=this.obj,this.goto(this.parseListNext)}parseListNext(){return this.char===CHAR_SP||this.char===CTRL_I?null:this.callNow(this.parseKeyword,this.parseListMore)}parseListMore(r){if(this.char===CHAR_SP||this.char===CTRL_I)return null;if(this.char===CHAR_RSQB){if(hasKey(this.ctx,r)||(this.ctx[r]=List()),isInlineList(this.ctx[r]))throw this.error(new TomlError("Can't extend an inline array"));if(isList(this.ctx[r])){const i=Table();this.ctx[r].push(i),this.ctx=i}else throw this.error(new TomlError("Can't redefine an existing key"));return this.next(this.parseListEnd)}else if(this.char===CHAR_PERIOD){if(!hasKey(this.ctx,r))this.ctx=this.ctx[r]=Table();else{if(isInlineList(this.ctx[r]))throw this.error(new TomlError("Can't extend an inline array"));if(isInlineTable(this.ctx[r]))throw this.error(new TomlError("Can't extend an inline table"));if(isList(this.ctx[r]))this.ctx=this.ctx[r][this.ctx[r].length-1];else if(isTable(this.ctx[r]))this.ctx=this.ctx[r];else throw this.error(new TomlError("Can't redefine an existing key"))}return this.next(this.parseListNext)}else throw this.error(new TomlError("Unexpected character, expected whitespace, . or ]"))}parseListEnd(r){if(this.char===CHAR_RSQB)return this.next(this.parseWhitespaceToEOL);throw this.error(new TomlError("Unexpected character, expected whitespace, . or ]"))}parseValue(){if(this.char===e.END)throw this.error(new TomlError("Key without value"));if(this.char===CHAR_QUOT)return this.next(this.parseDoubleString);if(this.char===CHAR_APOS)return this.next(this.parseSingleString);if(this.char===CHAR_HYPHEN||this.char===CHAR_PLUS)return this.goto(this.parseNumberSign);if(this.char===CHAR_i)return this.next(this.parseInf);if(this.char===CHAR_n)return this.next(this.parseNan);if(isDigit(this.char))return this.goto(this.parseNumberOrDateTime);if(this.char===CHAR_t||this.char===CHAR_f)return this.goto(this.parseBoolean);if(this.char===CHAR_LSQB)return this.call(this.parseInlineList,this.recordValue);if(this.char===CHAR_LCUB)return this.call(this.parseInlineTable,this.recordValue);throw this.error(new TomlError("Unexpected character, expecting string, number, datetime, boolean, inline array or inline table"))}recordValue(r){return this.returnNow(r)}parseInf(){if(this.char===CHAR_n)return this.next(this.parseInf2);throw this.error(new TomlError('Unexpected character, expected "inf", "+inf" or "-inf"'))}parseInf2(){if(this.char===CHAR_f)return this.state.buf==="-"?this.return(-1/0):this.return(1/0);throw this.error(new TomlError('Unexpected character, expected "inf", "+inf" or "-inf"'))}parseNan(){if(this.char===CHAR_a)return this.next(this.parseNan2);throw this.error(new TomlError('Unexpected character, expected "nan"'))}parseNan2(){if(this.char===CHAR_n)return this.return(NaN);throw this.error(new TomlError('Unexpected character, expected "nan"'))}parseKeyword(){return this.char===CHAR_QUOT?this.next(this.parseBasicString):this.char===CHAR_APOS?this.next(this.parseLiteralString):this.goto(this.parseBareKey)}parseBareKey(){do{if(this.char===e.END)throw this.error(new TomlError("Key ended without value"));if(isAlphaNumHyphen(this.char))this.consume();else{if(this.state.buf.length===0)throw this.error(new TomlError("Empty bare keys are not allowed"));return this.returnNow()}}while(this.nextChar())}parseSingleString(){return this.char===CHAR_APOS?this.next(this.parseLiteralMultiStringMaybe):this.goto(this.parseLiteralString)}parseLiteralString(){do{if(this.char===CHAR_APOS)return this.return();if(this.atEndOfLine())throw this.error(new TomlError("Unterminated string"));if(this.char===CHAR_DEL||this.char<=CTRL_CHAR_BOUNDARY&&this.char!==CTRL_I)throw this.errorControlCharIn("strings");this.consume()}while(this.nextChar())}parseLiteralMultiStringMaybe(){return this.char===CHAR_APOS?this.next(this.parseLiteralMultiString):this.returnNow()}parseLiteralMultiString(){return this.char===CTRL_M?null:this.char===CTRL_J?this.next(this.parseLiteralMultiStringContent):this.goto(this.parseLiteralMultiStringContent)}parseLiteralMultiStringContent(){do{if(this.char===CHAR_APOS)return this.next(this.parseLiteralMultiEnd);if(this.char===e.END)throw this.error(new TomlError("Unterminated multi-line string"));if(this.char===CHAR_DEL||this.char<=CTRL_CHAR_BOUNDARY&&this.char!==CTRL_I&&this.char!==CTRL_J&&this.char!==CTRL_M)throw this.errorControlCharIn("strings");this.consume()}while(this.nextChar())}parseLiteralMultiEnd(){return this.char===CHAR_APOS?this.next(this.parseLiteralMultiEnd2):(this.state.buf+="'",this.goto(this.parseLiteralMultiStringContent))}parseLiteralMultiEnd2(){return this.char===CHAR_APOS?this.next(this.parseLiteralMultiEnd3):(this.state.buf+="''",this.goto(this.parseLiteralMultiStringContent))}parseLiteralMultiEnd3(){return this.char===CHAR_APOS?(this.state.buf+="'",this.next(this.parseLiteralMultiEnd4)):this.returnNow()}parseLiteralMultiEnd4(){return this.char===CHAR_APOS?(this.state.buf+="'",this.return()):this.returnNow()}parseDoubleString(){return this.char===CHAR_QUOT?this.next(this.parseMultiStringMaybe):this.goto(this.parseBasicString)}parseBasicString(){do{if(this.char===CHAR_BSOL)return this.call(this.parseEscape,this.recordEscapeReplacement);if(this.char===CHAR_QUOT)return this.return();if(this.atEndOfLine())throw this.error(new TomlError("Unterminated string"));if(this.char===CHAR_DEL||this.char<=CTRL_CHAR_BOUNDARY&&this.char!==CTRL_I)throw this.errorControlCharIn("strings");this.consume()}while(this.nextChar())}recordEscapeReplacement(r){return this.state.buf+=r,this.goto(this.parseBasicString)}parseMultiStringMaybe(){return this.char===CHAR_QUOT?this.next(this.parseMultiString):this.returnNow()}parseMultiString(){return this.char===CTRL_M?null:this.char===CTRL_J?this.next(this.parseMultiStringContent):this.goto(this.parseMultiStringContent)}parseMultiStringContent(){do{if(this.char===CHAR_BSOL)return this.call(this.parseMultiEscape,this.recordMultiEscapeReplacement);if(this.char===CHAR_QUOT)return this.next(this.parseMultiEnd);if(this.char===e.END)throw this.error(new TomlError("Unterminated multi-line string"));if(this.char===CHAR_DEL||this.char<=CTRL_CHAR_BOUNDARY&&this.char!==CTRL_I&&this.char!==CTRL_J&&this.char!==CTRL_M)throw this.errorControlCharIn("strings");this.consume()}while(this.nextChar())}errorControlCharIn(r){let i="\\u00";return this.char<16&&(i+="0"),i+=this.char.toString(16),this.error(new TomlError(`Control characters (codes < 0x1f and 0x7f) are not allowed in ${r}, use ${i} instead`))}recordMultiEscapeReplacement(r){return this.state.buf+=r,this.goto(this.parseMultiStringContent)}parseMultiEnd(){return this.char===CHAR_QUOT?this.next(this.parseMultiEnd2):(this.state.buf+='"',this.goto(this.parseMultiStringContent))}parseMultiEnd2(){return this.char===CHAR_QUOT?this.next(this.parseMultiEnd3):(this.state.buf+='""',this.goto(this.parseMultiStringContent))}parseMultiEnd3(){return this.char===CHAR_QUOT?(this.state.buf+='"',this.next(this.parseMultiEnd4)):this.returnNow()}parseMultiEnd4(){return this.char===CHAR_QUOT?(this.state.buf+='"',this.return()):this.returnNow()}parseMultiEscape(){return this.char===CTRL_M||this.char===CTRL_J?this.next(this.parseMultiTrim):this.char===CHAR_SP||this.char===CTRL_I?this.next(this.parsePreMultiTrim):this.goto(this.parseEscape)}parsePreMultiTrim(){if(this.char===CHAR_SP||this.char===CTRL_I)return null;if(this.char===CTRL_M||this.char===CTRL_J)return this.next(this.parseMultiTrim);throw this.error(new TomlError("Can't escape whitespace"))}parseMultiTrim(){return this.char===CTRL_J||this.char===CHAR_SP||this.char===CTRL_I||this.char===CTRL_M?null:this.returnNow()}parseEscape(){if(this.char in escapes)return this.return(escapes[this.char]);if(this.char===CHAR_u)return this.call(this.parseSmallUnicode,this.parseUnicodeReturn);if(this.char===CHAR_U)return this.call(this.parseLargeUnicode,this.parseUnicodeReturn);throw this.error(new TomlError("Unknown escape character: "+this.char))}parseUnicodeReturn(r){try{const i=parseInt(r,16);if(i>=SURROGATE_FIRST&&i<=SURROGATE_LAST)throw this.error(new TomlError("Invalid unicode, character in range 0xD800 - 0xDFFF is reserved"));return this.returnNow(String.fromCodePoint(i))}catch(i){throw this.error(TomlError.wrap(i))}}parseSmallUnicode(){if(isHexit(this.char)){if(this.consume(),this.state.buf.length>=4)return this.return()}else throw this.error(new TomlError("Invalid character in unicode sequence, expected hex"))}parseLargeUnicode(){if(isHexit(this.char)){if(this.consume(),this.state.buf.length>=8)return this.return()}else throw this.error(new TomlError("Invalid character in unicode sequence, expected hex"))}parseNumberSign(){return this.consume(),this.next(this.parseMaybeSignedInfOrNan)}parseMaybeSignedInfOrNan(){return this.char===CHAR_i?this.next(this.parseInf):this.char===CHAR_n?this.next(this.parseNan):this.callNow(this.parseNoUnder,this.parseNumberIntegerStart)}parseNumberIntegerStart(){return this.char===CHAR_0?(this.consume(),this.next(this.parseNumberIntegerExponentOrDecimal)):this.goto(this.parseNumberInteger)}parseNumberIntegerExponentOrDecimal(){return this.char===CHAR_PERIOD?(this.consume(),this.call(this.parseNoUnder,this.parseNumberFloat)):this.char===CHAR_E||this.char===CHAR_e?(this.consume(),this.next(this.parseNumberExponentSign)):this.returnNow(Integer(this.state.buf))}parseNumberInteger(){if(isDigit(this.char))this.consume();else{if(this.char===CHAR_LOWBAR)return this.call(this.parseNoUnder);if(this.char===CHAR_E||this.char===CHAR_e)return this.consume(),this.next(this.parseNumberExponentSign);if(this.char===CHAR_PERIOD)return this.consume(),this.call(this.parseNoUnder,this.parseNumberFloat);{const r=Integer(this.state.buf);if(r.isNaN())throw this.error(new TomlError("Invalid number"));return this.returnNow(r)}}}parseNoUnder(){if(this.char===CHAR_LOWBAR||this.char===CHAR_PERIOD||this.char===CHAR_E||this.char===CHAR_e)throw this.error(new TomlError("Unexpected character, expected digit"));if(this.atEndOfWord())throw this.error(new TomlError("Incomplete number"));return this.returnNow()}parseNoUnderHexOctBinLiteral(){if(this.char===CHAR_LOWBAR||this.char===CHAR_PERIOD)throw this.error(new TomlError("Unexpected character, expected digit"));if(this.atEndOfWord())throw this.error(new TomlError("Incomplete number"));return this.returnNow()}parseNumberFloat(){if(this.char===CHAR_LOWBAR)return this.call(this.parseNoUnder,this.parseNumberFloat);if(isDigit(this.char))this.consume();else return this.char===CHAR_E||this.char===CHAR_e?(this.consume(),this.next(this.parseNumberExponentSign)):this.returnNow(Float(this.state.buf))}parseNumberExponentSign(){if(isDigit(this.char))return this.goto(this.parseNumberExponent);if(this.char===CHAR_HYPHEN||this.char===CHAR_PLUS)this.consume(),this.call(this.parseNoUnder,this.parseNumberExponent);else throw this.error(new TomlError("Unexpected character, expected -, + or digit"))}parseNumberExponent(){if(isDigit(this.char))this.consume();else return this.char===CHAR_LOWBAR?this.call(this.parseNoUnder):this.returnNow(Float(this.state.buf))}parseNumberOrDateTime(){return this.char===CHAR_0?(this.consume(),this.next(this.parseNumberBaseOrDateTime)):this.goto(this.parseNumberOrDateTimeOnly)}parseNumberOrDateTimeOnly(){if(this.char===CHAR_LOWBAR)return this.call(this.parseNoUnder,this.parseNumberInteger);if(isDigit(this.char))this.consume(),this.state.buf.length>4&&this.next(this.parseNumberInteger);else return this.char===CHAR_E||this.char===CHAR_e?(this.consume(),this.next(this.parseNumberExponentSign)):this.char===CHAR_PERIOD?(this.consume(),this.call(this.parseNoUnder,this.parseNumberFloat)):this.char===CHAR_HYPHEN?this.goto(this.parseDateTime):this.char===CHAR_COLON?this.goto(this.parseOnlyTimeHour):this.returnNow(Integer(this.state.buf))}parseDateTimeOnly(){if(this.state.buf.length<4){if(isDigit(this.char))return this.consume();if(this.char===CHAR_COLON)return this.goto(this.parseOnlyTimeHour);throw this.error(new TomlError("Expected digit while parsing year part of a date"))}else{if(this.char===CHAR_HYPHEN)return this.goto(this.parseDateTime);throw this.error(new TomlError("Expected hyphen (-) while parsing year part of date"))}}parseNumberBaseOrDateTime(){return this.char===CHAR_b?(this.consume(),this.call(this.parseNoUnderHexOctBinLiteral,this.parseIntegerBin)):this.char===CHAR_o?(this.consume(),this.call(this.parseNoUnderHexOctBinLiteral,this.parseIntegerOct)):this.char===CHAR_x?(this.consume(),this.call(this.parseNoUnderHexOctBinLiteral,this.parseIntegerHex)):this.char===CHAR_PERIOD?this.goto(this.parseNumberInteger):isDigit(this.char)?this.goto(this.parseDateTimeOnly):this.returnNow(Integer(this.state.buf))}parseIntegerHex(){if(isHexit(this.char))this.consume();else{if(this.char===CHAR_LOWBAR)return this.call(this.parseNoUnderHexOctBinLiteral);{const r=Integer(this.state.buf);if(r.isNaN())throw this.error(new TomlError("Invalid number"));return this.returnNow(r)}}}parseIntegerOct(){if(isOctit(this.char))this.consume();else{if(this.char===CHAR_LOWBAR)return this.call(this.parseNoUnderHexOctBinLiteral);{const r=Integer(this.state.buf);if(r.isNaN())throw this.error(new TomlError("Invalid number"));return this.returnNow(r)}}}parseIntegerBin(){if(isBit(this.char))this.consume();else{if(this.char===CHAR_LOWBAR)return this.call(this.parseNoUnderHexOctBinLiteral);{const r=Integer(this.state.buf);if(r.isNaN())throw this.error(new TomlError("Invalid number"));return this.returnNow(r)}}}parseDateTime(){if(this.state.buf.length<4)throw this.error(new TomlError("Years less than 1000 must be zero padded to four characters"));return this.state.result=this.state.buf,this.state.buf="",this.next(this.parseDateMonth)}parseDateMonth(){if(this.char===CHAR_HYPHEN){if(this.state.buf.length<2)throw this.error(new TomlError("Months less than 10 must be zero padded to two characters"));return this.state.result+="-"+this.state.buf,this.state.buf="",this.next(this.parseDateDay)}else if(isDigit(this.char))this.consume();else throw this.error(new TomlError("Incomplete datetime"))}parseDateDay(){if(this.char===CHAR_T||this.char===CHAR_SP){if(this.state.buf.length<2)throw this.error(new TomlError("Days less than 10 must be zero padded to two characters"));return this.state.result+="-"+this.state.buf,this.state.buf="",this.next(this.parseStartTimeHour)}else{if(this.atEndOfWord())return this.returnNow(createDate(this.state.result+"-"+this.state.buf));if(isDigit(this.char))this.consume();else throw this.error(new TomlError("Incomplete datetime"))}}parseStartTimeHour(){return this.atEndOfWord()?this.returnNow(createDate(this.state.result)):this.goto(this.parseTimeHour)}parseTimeHour(){if(this.char===CHAR_COLON){if(this.state.buf.length<2)throw this.error(new TomlError("Hours less than 10 must be zero padded to two characters"));return this.state.result+="T"+this.state.buf,this.state.buf="",this.next(this.parseTimeMin)}else if(isDigit(this.char))this.consume();else throw this.error(new TomlError("Incomplete datetime"))}parseTimeMin(){if(this.state.buf.length<2&&isDigit(this.char))this.consume();else{if(this.state.buf.length===2&&this.char===CHAR_COLON)return this.state.result+=":"+this.state.buf,this.state.buf="",this.next(this.parseTimeSec);throw this.error(new TomlError("Incomplete datetime"))}}parseTimeSec(){if(isDigit(this.char)){if(this.consume(),this.state.buf.length===2)return this.state.result+=":"+this.state.buf,this.state.buf="",this.next(this.parseTimeZoneOrFraction)}else throw this.error(new TomlError("Incomplete datetime"))}parseOnlyTimeHour(){if(this.char===CHAR_COLON){if(this.state.buf.length<2)throw this.error(new TomlError("Hours less than 10 must be zero padded to two characters"));return this.state.result=this.state.buf,this.state.buf="",this.next(this.parseOnlyTimeMin)}else throw this.error(new TomlError("Incomplete time"))}parseOnlyTimeMin(){if(this.state.buf.length<2&&isDigit(this.char))this.consume();else{if(this.state.buf.length===2&&this.char===CHAR_COLON)return this.state.result+=":"+this.state.buf,this.state.buf="",this.next(this.parseOnlyTimeSec);throw this.error(new TomlError("Incomplete time"))}}parseOnlyTimeSec(){if(isDigit(this.char)){if(this.consume(),this.state.buf.length===2)return this.next(this.parseOnlyTimeFractionMaybe)}else throw this.error(new TomlError("Incomplete time"))}parseOnlyTimeFractionMaybe(){if(this.state.result+=":"+this.state.buf,this.char===CHAR_PERIOD)this.state.buf="",this.next(this.parseOnlyTimeFraction);else return this.return(createTime(this.state.result))}parseOnlyTimeFraction(){if(isDigit(this.char))this.consume();else if(this.atEndOfWord()){if(this.state.buf.length===0)throw this.error(new TomlError("Expected digit in milliseconds"));return this.returnNow(createTime(this.state.result+"."+this.state.buf))}else throw this.error(new TomlError("Unexpected character in datetime, expected period (.), minus (-), plus (+) or Z"))}parseTimeZoneOrFraction(){if(this.char===CHAR_PERIOD)this.consume(),this.next(this.parseDateTimeFraction);else if(this.char===CHAR_HYPHEN||this.char===CHAR_PLUS)this.consume(),this.next(this.parseTimeZoneHour);else{if(this.char===CHAR_Z)return this.consume(),this.return(createDateTime(this.state.result+this.state.buf));if(this.atEndOfWord())return this.returnNow(createDateTimeFloat(this.state.result+this.state.buf));throw this.error(new TomlError("Unexpected character in datetime, expected period (.), minus (-), plus (+) or Z"))}}parseDateTimeFraction(){if(isDigit(this.char))this.consume();else{if(this.state.buf.length===1)throw this.error(new TomlError("Expected digit in milliseconds"));if(this.char===CHAR_HYPHEN||this.char===CHAR_PLUS)this.consume(),this.next(this.parseTimeZoneHour);else{if(this.char===CHAR_Z)return this.consume(),this.return(createDateTime(this.state.result+this.state.buf));if(this.atEndOfWord())return this.returnNow(createDateTimeFloat(this.state.result+this.state.buf));throw this.error(new TomlError("Unexpected character in datetime, expected period (.), minus (-), plus (+) or Z"))}}}parseTimeZoneHour(){if(isDigit(this.char)){if(this.consume(),/\d\d$/.test(this.state.buf))return this.next(this.parseTimeZoneSep)}else throw this.error(new TomlError("Unexpected character in datetime, expected digit"))}parseTimeZoneSep(){if(this.char===CHAR_COLON)this.consume(),this.next(this.parseTimeZoneMin);else throw this.error(new TomlError("Unexpected character in datetime, expected colon"))}parseTimeZoneMin(){if(isDigit(this.char)){if(this.consume(),/\d\d$/.test(this.state.buf))return this.return(createDateTime(this.state.result+this.state.buf))}else throw this.error(new TomlError("Unexpected character in datetime, expected digit"))}parseBoolean(){if(this.char===CHAR_t)return this.consume(),this.next(this.parseTrue_r);if(this.char===CHAR_f)return this.consume(),this.next(this.parseFalse_a)}parseTrue_r(){if(this.char===CHAR_r)return this.consume(),this.next(this.parseTrue_u);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseTrue_u(){if(this.char===CHAR_u)return this.consume(),this.next(this.parseTrue_e);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseTrue_e(){if(this.char===CHAR_e)return this.return(!0);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseFalse_a(){if(this.char===CHAR_a)return this.consume(),this.next(this.parseFalse_l);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseFalse_l(){if(this.char===CHAR_l)return this.consume(),this.next(this.parseFalse_s);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseFalse_s(){if(this.char===CHAR_s)return this.consume(),this.next(this.parseFalse_e);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseFalse_e(){if(this.char===CHAR_e)return this.return(!1);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseInlineList(){if(this.char===CHAR_SP||this.char===CTRL_I||this.char===CTRL_M||this.char===CTRL_J)return null;if(this.char===e.END)throw this.error(new TomlError("Unterminated inline array"));return this.char===CHAR_NUM?this.call(this.parseComment):this.char===CHAR_RSQB?this.return(this.state.resultArr||InlineList()):this.callNow(this.parseValue,this.recordInlineListValue)}recordInlineListValue(r){return this.state.resultArr||(this.state.resultArr=InlineList(tomlType(r))),isFloat(r)||isInteger(r)?this.state.resultArr.push(r.valueOf()):this.state.resultArr.push(r),this.goto(this.parseInlineListNext)}parseInlineListNext(){if(this.char===CHAR_SP||this.char===CTRL_I||this.char===CTRL_M||this.char===CTRL_J)return null;if(this.char===CHAR_NUM)return this.call(this.parseComment);if(this.char===CHAR_COMMA)return this.next(this.parseInlineList);if(this.char===CHAR_RSQB)return this.goto(this.parseInlineList);throw this.error(new TomlError("Invalid character, expected whitespace, comma (,) or close bracket (])"))}parseInlineTable(){if(this.char===CHAR_SP||this.char===CTRL_I)return null;if(this.char===e.END||this.char===CHAR_NUM||this.char===CTRL_J||this.char===CTRL_M)throw this.error(new TomlError("Unterminated inline array"));return this.char===CHAR_RCUB?this.return(this.state.resultTable||InlineTable()):(this.state.resultTable||(this.state.resultTable=InlineTable()),this.callNow(this.parseAssign,this.recordInlineTableValue))}recordInlineTableValue(r){let i=this.state.resultTable,a=r.key.pop();for(let h of r.key){if(hasKey(i,h)&&(!isTable(i[h])||i[h][_declared]))throw this.error(new TomlError("Can't redefine existing key"));i=i[h]=i[h]||Table()}if(hasKey(i,a))throw this.error(new TomlError("Can't redefine existing key"));return isInteger(r.value)||isFloat(r.value)?i[a]=r.value.valueOf():i[a]=r.value,this.goto(this.parseInlineTableNext)}parseInlineTableNext(){if(this.char===CHAR_SP||this.char===CTRL_I)return null;if(this.char===e.END||this.char===CHAR_NUM||this.char===CTRL_J||this.char===CTRL_M)throw this.error(new TomlError("Unterminated inline array"));if(this.char===CHAR_COMMA)return this.next(this.parseInlineTablePostComma);if(this.char===CHAR_RCUB)return this.goto(this.parseInlineTable);throw this.error(new TomlError("Invalid character, expected whitespace, comma (,) or close bracket (])"))}parseInlineTablePostComma(){if(this.char===CHAR_SP||this.char===CTRL_I)return null;if(this.char===e.END||this.char===CHAR_NUM||this.char===CTRL_J||this.char===CTRL_M)throw this.error(new TomlError("Unterminated inline array"));if(this.char===CHAR_COMMA)throw this.error(new TomlError("Empty elements in inline tables are not permitted"));if(this.char===CHAR_RCUB)throw this.error(new TomlError("Trailing commas in inline tables are not permitted"));return this.goto(this.parseInlineTable)}}return t}return tomlParser.exports}var parsePrettyError,hasRequiredParsePrettyError;function requireParsePrettyError(){if(hasRequiredParsePrettyError)return parsePrettyError;hasRequiredParsePrettyError=1,parsePrettyError=e;function e(t,n){if(t.pos==null||t.line==null)return t;let r=t.message;if(r+=` at row ${t.line+1}, col ${t.col+1}, pos ${t.pos}:
`,n&&n.split){const i=n.split(/\n/),a=String(Math.min(i.length,t.line+3)).length;let h=" ";for(;h.length<a;)h+=" ";for(let c=Math.max(0,t.line-1);c<Math.min(i.length,t.line+2);++c){let o=String(c+1);if(o.length<a&&(o=" "+o),t.line===c){r+=o+"> "+i[c]+`
`,r+=h+"  ";for(let l=0;l<t.col;++l)r+=" ";r+=`^
`}else r+=o+": "+i[c]+`
`}}return t.message=r+`
`,t}return parsePrettyError}var parseString_1,hasRequiredParseString;function requireParseString(){if(hasRequiredParseString)return parseString_1;hasRequiredParseString=1,parseString_1=n;const e=requireTomlParser(),t=requireParsePrettyError();function n(r){commonjsGlobal.Buffer&&commonjsGlobal.Buffer.isBuffer(r)&&(r=r.toString("utf8"));const i=new e;try{return i.parse(r),i.finish()}catch(a){throw t(a,r)}}return parseString_1}var parseAsync_1,hasRequiredParseAsync;function requireParseAsync(){if(hasRequiredParseAsync)return parseAsync_1;hasRequiredParseAsync=1,parseAsync_1=n;const e=requireTomlParser(),t=requireParsePrettyError();function n(r,i){i||(i={});const a=0,h=i.blocksize||40960,c=new e;return new Promise((l,s)=>{setImmediate(o,a,h,l,s)});function o(l,s,u,p){if(l>=r.length)try{return u(c.finish())}catch(m){return p(t(m,r))}try{c.parse(r.slice(l,l+s)),setImmediate(o,l+s,s,u,p)}catch(m){p(t(m,r))}}}return parseAsync_1}var parseStream_1,hasRequiredParseStream;function requireParseStream(){if(hasRequiredParseStream)return parseStream_1;hasRequiredParseStream=1,parseStream_1=n;const e=require$$0$1,t=requireTomlParser();function n(a){return a?r(a):i()}function r(a){const h=new t;return a.setEncoding("utf8"),new Promise((c,o)=>{let l,s=!1,u=!1;function p(){if(s=!0,!l)try{c(h.finish())}catch(d){o(d)}}function m(d){u=!0,o(d)}a.once("end",p),a.once("error",m),A();function A(){l=!0;let d;for(;(d=a.read())!==null;)try{h.parse(d)}catch(I){return m(I)}if(l=!1,s)return p();u||a.once("readable",A)}})}function i(){const a=new t;return new e.Transform({objectMode:!0,transform(h,c,o){try{a.parse(h.toString(c))}catch(l){this.emit("error",l)}o()},flush(h){try{this.push(a.finish())}catch(c){this.emit("error",c)}h()}})}return parseStream_1}var hasRequiredParse;function requireParse(){return hasRequiredParse||(hasRequiredParse=1,parse.exports=requireParseString(),parse.exports.async=requireParseAsync(),parse.exports.stream=requireParseStream(),parse.exports.prettyError=requireParsePrettyError()),parse.exports}var stringify={exports:{}},hasRequiredStringify;function requireStringify(){if(hasRequiredStringify)return stringify.exports;hasRequiredStringify=1,stringify.exports=e,stringify.exports.value=d;function e(f){if(f===null)throw t("null");if(f===void 0)throw t("undefined");if(typeof f!="object")throw t(typeof f);if(typeof f.toJSON=="function"&&(f=f.toJSON()),f==null)return null;const g=c(f);if(g!=="table")throw t(g);return a("","",f)}function t(f){return new Error("Can only stringify objects, not "+f)}function n(f){return Object.keys(f).filter(g=>h(f[g]))}function r(f){return Object.keys(f).filter(g=>!h(f[g]))}function i(f){let g=Array.isArray(f)?[]:Object.prototype.hasOwnProperty.call(f,"__proto__")?{["__proto__"]:void 0}:{};for(let S of Object.keys(f))f[S]&&typeof f[S].toJSON=="function"&&!("toISOString"in f[S])?g[S]=f[S].toJSON():g[S]=f[S];return g}function a(f,g,S){S=i(S);let b,U;b=n(S),U=r(S);const E=[],R=g||"";b.forEach(_=>{var y=c(S[_]);y!=="undefined"&&y!=="null"&&E.push(R+o(_)+" = "+A(S[_],!0))}),E.length>0&&E.push("");const T=f&&b.length>0?g+"  ":"";return U.forEach(_=>{E.push(q(f,T,_,S[_]))}),E.join(`
`)}function h(f){switch(c(f)){case"undefined":case"null":case"integer":case"nan":case"float":case"boolean":case"string":case"datetime":return!0;case"array":return f.length===0||c(f[0])!=="table";case"table":return Object.keys(f).length===0;default:return!1}}function c(f){return f===void 0?"undefined":f===null?"null":typeof f=="bigint"||Number.isInteger(f)&&!Object.is(f,-0)?"integer":typeof f=="number"?"float":typeof f=="boolean"?"boolean":typeof f=="string"?"string":"toISOString"in f?isNaN(f)?"undefined":"datetime":Array.isArray(f)?"array":"table"}function o(f){const g=String(f);return/^[-A-Za-z0-9_]+$/.test(g)?g:l(g)}function l(f){return'"'+p(f).replace(/"/g,'\\"')+'"'}function s(f){return"'"+f+"'"}function u(f,g){for(;g.length<f;)g="0"+g;return g}function p(f){return f.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/([\u0000-\u001f\u007f])/,g=>"\\u"+u(4,g.codePointAt(0).toString(16)))}function m(f){let g=f.split(/\n/).map(S=>p(S).replace(/"(?="")/g,'\\"')).join(`
`);return g.slice(-1)==='"'&&(g+=`\\
`),`"""
`+g+'"""'}function A(f,g){let S=c(f);return S==="string"&&(g&&/\n/.test(f)?S="string-multiline":!/[\b\t\n\f\r']/.test(f)&&/"/.test(f)&&(S="string-literal")),d(f,S)}function d(f,g){switch(g||(g=c(f)),g){case"string-multiline":return m(f);case"string":return l(f);case"string-literal":return s(f);case"integer":return I(f);case"float":return P(f);case"boolean":return H(f);case"datetime":return O(f);case"array":return M(f.filter(S=>c(S)!=="null"&&c(S)!=="undefined"&&c(S)!=="nan"));case"table":return F(f);default:throw t(g)}}function I(f){return String(f).replace(/\B(?=(\d{3})+(?!\d))/g,"_")}function P(f){if(f===1/0)return"inf";if(f===-1/0)return"-inf";if(Object.is(f,NaN))return"nan";if(Object.is(f,-0))return"-0.0";const[g,S]=String(f).split(".");return I(g)+"."+S}function H(f){return String(f)}function O(f){return f.toISOString()}function M(f){f=i(f);let g="[";const S=f.map(b=>d(b));return S.join(", ").length>60||/\n/.test(S)?g+=`
  `+S.join(`,
  `)+`
`:g+=" "+S.join(", ")+(S.length>0?" ":""),g+"]"}function F(f){f=i(f);const g=[];return Object.keys(f).forEach(S=>{g.push(o(S)+" = "+A(f[S],!1))}),"{ "+g.join(", ")+(g.length>0?" ":"")+"}"}function q(f,g,S,b){const U=c(b);if(U==="array")return v(f,g,S,b);if(U==="table")return x(f,g,S,b);throw t(U)}function v(f,g,S,b){b=i(b);const U=c(b[0]);if(U!=="table")throw t(U);const E=f+o(S);let R="";return b.forEach(T=>{R.length>0&&(R+=`
`),R+=g+"[["+E+`]]
`,R+=a(E+".",g,T)}),R}function x(f,g,S,b){const U=f+o(S);let E="";return n(b).length>0&&(E+=g+"["+U+`]
`),E+a(U+".",g,b)}return stringify.exports}var hasRequiredToml;function requireToml(){return hasRequiredToml||(hasRequiredToml=1,toml.parse=requireParse(),toml.stringify=requireStringify()),toml}requireToml();const IS_WINDOWS=process.platform==="win32",IS_LINUX=process.platform==="linux",IS_MAC=process.platform==="darwin",WINDOWS_ARCHS=["x86","x64"],WINDOWS_PLATFORMS=["win32","win64"],PYPY_VERSION_FILE="PYPY_VERSION";function createSymlinkInFolder(e,t,n,r=!1){const i=path.join(e,t),a=path.join(e,n);require$$0$2.existsSync(a)||(require$$0$2.symlinkSync(i,a),!IS_WINDOWS&&r&&require$$0$2.chmodSync(a,"755"))}function validateVersion(e){return isNightlyKeyword(e)||!!semverExports.validRange(e)}function isNightlyKeyword(e){return e==="nightly"}function getPyPyVersionFromPath(e){return path.basename(path.dirname(e))}function readExactPyPyVersionFile(e){let t="";const n=path.join(e,PYPY_VERSION_FILE);return require$$0$2.existsSync(n)&&(t=require$$0$2.readFileSync(n).toString().trim()),t}function writeExactPyPyVersionFile(e,t){const n=path.join(e,PYPY_VERSION_FILE);require$$0$2.writeFileSync(n,t)}function validatePythonVersionFormatForPyPy(e){return/^\d+\.\d+$/.test(e)}async function getWindowsInfo(){const{stdout:e}=await execExports.getExecOutput('powershell -command "(Get-CimInstance -ClassName Win32_OperatingSystem).Caption"',void 0,{silent:!0});return{osName:"Windows",osVersion:e.trim().split(" ")[3]}}async function getMacOSInfo(){const{stdout:e}=await execExports.getExecOutput("sw_vers",["-productVersion"],{silent:!0});return{osName:"macOS",osVersion:e.trim()}}async function getLinuxInfo(){const{stdout:e}=await execExports.getExecOutput("lsb_release",["-i","-r","-s"],{silent:!0}),[t,n]=e.trim().split(`
`);return coreExports.debug(`OS Name: ${t}, Version: ${n}`),{osName:t,osVersion:n}}async function getOSInfo(){let e;try{IS_WINDOWS?e=await getWindowsInfo():IS_LINUX?e=await getLinuxInfo():IS_MAC&&(e=await getMacOSInfo())}catch(t){const n=t;coreExports.debug(n.message)}finally{return e}}function getBinaryDirectory(e){return IS_WINDOWS?e:path.join(e,"bin")}function getDownloadFileName(e){const t=process.env.RUNNER_TEMP||".";return IS_WINDOWS?path.join(t,path.basename(e)):void 0}async function installPyPy(e,t,n,r,i){let a;if(i=i??await getAvailablePyPyVersions(),!i||i.length===0)throw new Error("No release was found in PyPy version.json");let h=findRelease(i,t,e,n,!1);if(!h||!h.foundAsset)throw new Error(`PyPy version ${t} (${e}) with arch ${n} not found`);const{foundAsset:c,resolvedPythonVersion:o,resolvedPyPyVersion:l}=h,s=`${c.download_url}`;coreExports.info(`Downloading PyPy from "${s}" ...`);try{const u=getDownloadFileName(s),p=await toolCacheExports.downloadTool(s,u);coreExports.info("Extracting downloaded archive..."),IS_WINDOWS?a=await toolCacheExports.extractZip(p):a=await toolCacheExports.extractTar(p,void 0,"x");const m=require$$0$2.readdirSync(a)[0],A=path.join(a,m);let d=A;isNightlyKeyword(l)||(d=await toolCacheExports.cacheDir(A,"PyPy",o,n)),writeExactPyPyVersionFile(d,l);const I=getBinaryDirectory(d);return await createPyPySymlink(I,o),await installPip(I),{installDir:d,resolvedPythonVersion:o,resolvedPyPyVersion:l}}catch(u){throw u instanceof Error&&(u instanceof toolCacheExports.HTTPError&&(u.httpStatusCode===403||u.httpStatusCode===429)?coreExports.info(`Received HTTP status code ${u.httpStatusCode}.  This usually indicates the rate limit has been exceeded`):coreExports.info(u.message),u.stack!==void 0&&coreExports.debug(u.stack)),u}}async function getAvailablePyPyVersions(){const e="https://downloads.python.org/pypy/versions.json",n=await new HttpClient("tool-cache").getJson(e);if(!n.result)throw new Error(`Unable to retrieve the list of available PyPy versions from '${e}'`);return n.result}async function createPyPySymlink(e,t){const n=semverExports.coerce(t),r=semverExports.major(n),i=semverExports.minor(n),a=r===2?"":"3",h=`${r}.${i}`,c=IS_WINDOWS?".exe":"";coreExports.info("Creating symlinks..."),createSymlinkInFolder(e,`pypy${a}${c}`,`python${r}${c}`,!0),createSymlinkInFolder(e,`pypy${a}${c}`,`python${c}`,!0),createSymlinkInFolder(e,`pypy${a}${c}`,`pypy${h}${c}`,!0)}async function installPip(e){coreExports.info("Installing and updating pip");const t=path.join(e,"python");await execExports.exec(`${t} -m ensurepip`),await execExports.exec(`${e}/python -m pip install --ignore-installed pip`)}function findRelease(e,t,n,r,i){const a={includePrerelease:i},h=e.filter(s=>{const u=semverExports.satisfies(semverExports.coerce(s.python_version),t),m=isNightlyKeyword(n)&&isNightlyKeyword(s.pypy_version)||semverExports.satisfies(pypyVersionToSemantic(s.pypy_version),n,a),A=s.files&&(IS_WINDOWS?isArchPresentForWindows(s,r):isArchPresentForMacOrLinux(s,r,process.platform));return u&&m&&A});if(h.length===0)return null;const o=h.sort((s,u)=>semverExports.compare(semverExports.coerce(pypyVersionToSemantic(u.pypy_version)),semverExports.coerce(pypyVersionToSemantic(s.pypy_version)))||semverExports.compare(semverExports.coerce(u.python_version),semverExports.coerce(s.python_version)))[0];return{foundAsset:IS_WINDOWS?findAssetForWindows(o,r):findAssetForMacOrLinux(o,r,process.platform),resolvedPythonVersion:o.python_version,resolvedPyPyVersion:o.pypy_version.trim()}}function pypyVersionToSemantic(e){const t=/(\d+\.\d+\.\d+)((?:a|b|rc))(\d*)/g;return e.replace(t,"$1-$2.$3")}function isArchPresentForWindows(e,t){return t=replaceX32toX86(t),e.files.some(n=>WINDOWS_PLATFORMS.includes(n.platform)&&n.arch===t)}function isArchPresentForMacOrLinux(e,t,n){return e.files.some(r=>r.arch===t&&r.platform===n)}function findAssetForWindows(e,t){return t=replaceX32toX86(t),e.files.find(n=>WINDOWS_PLATFORMS.includes(n.platform)&&n.arch===t)}function findAssetForMacOrLinux(e,t,n){return e.files.find(r=>r.arch===t&&r.platform===n)}function replaceX32toX86(e){return e==="x32"&&(e="x86"),e}async function findPyPyVersion(e,t,n,r,i){let a="",h="",c,o;const l=parsePyPyVersion(e);({installDir:c,resolvedPythonVersion:h,resolvedPyPyVersion:a}=findPyPyToolCache(l.pythonVersion,l.pypyVersion,t)),c||({installDir:c,resolvedPythonVersion:h,resolvedPyPyVersion:a}=await installPyPy(l.pypyVersion,l.pythonVersion,t,i,o));const s=IS_WINDOWS?"Scripts":"bin",u=path.join(c,s),p=IS_WINDOWS?".exe":"",m=path.join(IS_WINDOWS?c:u,`python${p}`),A=getBinaryDirectory(c);return coreExports.exportVariable("pythonLocation",c),coreExports.exportVariable("Python_ROOT_DIR",c),coreExports.exportVariable("Python2_ROOT_DIR",c),coreExports.exportVariable("Python3_ROOT_DIR",c),coreExports.exportVariable("PKG_CONFIG_PATH",A+"/lib/pkgconfig"),coreExports.addPath(A),coreExports.addPath(u),coreExports.setOutput("python-version","pypy"+a),coreExports.setOutput("python-path",m),{resolvedPyPyVersion:a,resolvedPythonVersion:h}}function findPyPyToolCache(e,t,n){let r="",i="",a=IS_WINDOWS?findPyPyInstallDirForWindows(e):toolCacheExports.find("PyPy",e,n);return a&&(i=getPyPyVersionFromPath(a),r=readExactPyPyVersionFile(a),semverExports.satisfies(r,t)||(a=null,r="",i="")),a||coreExports.info(`PyPy version ${e} (${t}) was not found in the local cache`),{installDir:a,resolvedPythonVersion:i,resolvedPyPyVersion:r}}function parsePyPyVersion(e){const t=e.split("-").filter(i=>!!i);if(/^(pypy)(.+)/.test(t[0])){const i=t[0].replace("pypy","");t.splice(0,1,"pypy",i)}if(t.length<2||t[0]!="pypy")throw new Error("Invalid 'version' property for PyPy. PyPy version should be specified as 'pypy<python-version>' or 'pypy-<python-version>'. See README for examples and documentation.");const n=t[1];let r;if(t.length>2?r=pypyVersionToSemantic(t[2]):r="x",!validateVersion(n)||!validateVersion(r))throw new Error("Invalid 'version' property for PyPy. Both Python version and PyPy versions should satisfy SemVer notation. See README for examples and documentation.");if(!validatePythonVersionFormatForPyPy(n))throw new Error("Invalid format of Python version for PyPy. Python version should be specified in format 'x.y'. See README for examples and documentation.");return{pypyVersion:r,pythonVersion:n}}function findPyPyInstallDirForWindows(e){let t="";return WINDOWS_ARCHS.forEach(n=>t=t||toolCacheExports.find("PyPy",e,n)),t}const TOKEN=coreExports.getInput("token"),AUTH=TOKEN?`token ${TOKEN}`:void 0,MANIFEST_REPO_OWNER="actions",MANIFEST_REPO_NAME="python-versions",MANIFEST_REPO_BRANCH="main",MANIFEST_URL=`https://raw.githubusercontent.com/${MANIFEST_REPO_OWNER}/${MANIFEST_REPO_NAME}/${MANIFEST_REPO_BRANCH}/versions-manifest.json`;async function findReleaseFromManifest(e,t,n){return n||(n=await getManifest()),await toolCacheExports.findFromManifest(e,!1,n,t)}async function getManifest(){try{return await getManifestFromRepo()}catch(e){coreExports.debug("Fetching the manifest via the API failed."),e instanceof Error&&coreExports.debug(e.message)}return await getManifestFromURL()}function getManifestFromRepo(){return coreExports.debug(`Getting manifest from ${MANIFEST_REPO_OWNER}/${MANIFEST_REPO_NAME}@${MANIFEST_REPO_BRANCH}`),toolCacheExports.getManifestFromRepo(MANIFEST_REPO_OWNER,MANIFEST_REPO_NAME,AUTH,MANIFEST_REPO_BRANCH)}async function getManifestFromURL(){coreExports.debug("Falling back to fetching the manifest using raw URL.");const t=await new HttpClient("tool-cache").getJson(MANIFEST_URL);if(!t.result)throw new Error(`Unable to get manifest from ${MANIFEST_URL}`);return t.result}async function installPython(e){const t={cwd:e,env:{...process.env,...IS_LINUX&&{LD_LIBRARY_PATH:path.join(e,"lib")}},silent:!0,listeners:{stdout:n=>{coreExports.info(n.toString().trim())},stderr:n=>{coreExports.error(n.toString().trim())}}};IS_WINDOWS?await execExports.exec("powershell",["./setup.ps1"],t):await execExports.exec("bash",["./setup.sh"],t)}async function installCpythonFromRelease(e){const t=e.files[0].download_url;coreExports.info(`Download from "${t}"`);let n="";try{const r=getDownloadFileName(t);n=await toolCacheExports.downloadTool(t,r,AUTH),coreExports.info("Extract downloaded archive");let i;IS_WINDOWS?i=await toolCacheExports.extractZip(n):i=await toolCacheExports.extractTar(n),coreExports.info("Execute installation script"),await installPython(i)}catch(r){throw r instanceof toolCacheExports.HTTPError&&(r.httpStatusCode===403||r.httpStatusCode===429?coreExports.info(`Received HTTP status code ${r.httpStatusCode}.  This usually indicates the rate limit has been exceeded`):coreExports.info(r.message),r.stack&&coreExports.debug(r.stack)),r}}function binDir(e){return IS_WINDOWS?path.join(e,"Scripts"):path.join(e,"bin")}async function useCpythonVersion(e,t,n,r,i){let a=null;const h=desugarDevVersion(e);let c=pythonVersionToSemantic(h);coreExports.debug(`Semantic version spec of ${e} is ${c}`);let o=toolCacheExports.find("Python",c,t);if(!o){coreExports.info(`Version ${c} was not found in the local cache`);const m=await findReleaseFromManifest(c,t,a);m&&m.files&&m.files.length>0&&(coreExports.info(`Version ${c} is available for downloading`),await installCpythonFromRelease(m),o=toolCacheExports.find("Python",c,t))}if(!o){const m=await getOSInfo();throw new Error([`The version '${e}' with architecture '${t}' was not found for ${m?`${m.osName} ${m.osVersion}`:"this operating system"}.`,`The list of all available versions can be found here: ${MANIFEST_URL}`].join(require$$0.EOL))}const l=binDir(o),s=IS_WINDOWS?".exe":"",u=path.join(IS_WINDOWS?o:l,`python${s}`);{if(coreExports.exportVariable("pythonLocation",o),coreExports.exportVariable("PKG_CONFIG_PATH",o+"/lib/pkgconfig"),coreExports.exportVariable("pythonLocation",o),coreExports.exportVariable("Python_ROOT_DIR",o),coreExports.exportVariable("Python2_ROOT_DIR",o),coreExports.exportVariable("Python3_ROOT_DIR",o),coreExports.exportVariable("PKG_CONFIG_PATH",o+"/lib/pkgconfig"),IS_LINUX){const m=process.env.LD_LIBRARY_PATH?`:${process.env.LD_LIBRARY_PATH}`:"",A=path.join(o,"lib");m.split(":").includes(A)||coreExports.exportVariable("LD_LIBRARY_PATH",A+m)}if(coreExports.addPath(o),coreExports.addPath(l),IS_WINDOWS){const m=path.basename(path.dirname(o)),A=semverExports.major(m),d=semverExports.minor(m),I=path.join(process.env.APPDATA||"","Python",`Python${A}${d}`,"Scripts");coreExports.addPath(I)}}const p=versionFromPath(o);return coreExports.setOutput("python-version",p),coreExports.setOutput("python-path",u),{impl:"CPython",version:p}}function desugarDevVersion(e){const t=/^(\d+)\.(\d+)-dev$/;return e.replace(t,"~$1.$2.0-0")}function versionFromPath(e){const t=e.split(path.sep),n=t.findIndex(r=>r==="PyPy"||r==="Python");return t[n+1]||""}function pythonVersionToSemantic(e,t){const n=/(\d+\.\d+\.\d+)((?:a|b|rc)\d*)/g;return e.replace(n,"$1-$2")}const{GITHUB_ACTIONS}=ciInfo,dirname=typeof __dirname=="string"?__dirname:path__default.dirname(fileURLToPath(import.meta.url));function isPyPyVersion(e){return e.startsWith("pypy")}const checkLatest=!1;async function setupActionsPython(e,t,n){IS_MAC&&(process.env.AGENT_TOOLSDIRECTORY="/Users/runner/hostedtoolcache");const r=process.env.AGENT_TOOLSDIRECTORY?.trim();if(typeof r=="string"&&r!==""&&(process.env.RUNNER_TOOL_CACHE=process.env.AGENT_TOOLSDIRECTORY),coreExports.debug(`Python is expected to be installed into ${process.env.RUNNER_TOOL_CACHE}`),e){let i;if(isPyPyVersion(e)){const a=await findPyPyVersion(e,n,!0,checkLatest,!1);i=`${a.resolvedPyPyVersion}-${a.resolvedPythonVersion}`,info(`Successfully set up PyPy ${a.resolvedPyPyVersion} with Python (${a.resolvedPythonVersion})`)}else{const a=await useCpythonVersion(e,n);i=a.version,info(`Successfully set up ${a.impl} (${i})`)}}GITHUB_ACTIONS&&await addPythonLoggingMatcher()}async function addPythonLoggingMatcher(){const e=join(dirname,"python_matcher.json");if(!await pathExists(e))return warning("the python_matcher.json file does not exist in the same folder as setup-cpp.js");info(`::add-matcher::${e}`)}export{setupActionsPython};
//# sourceMappingURL=actions_python-ph6vnUiA.mjs.map
