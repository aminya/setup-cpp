#!/usr/bin/env node
import fp from"process";import it,{homedir as dp,tmpdir as Ue}from"os";import ce,{join as Z,resolve as tu,delimiter as vn,basename as er,extname as An,normalize as F_,sep as hp,dirname as Re,relative as q_,parse as pp}from"path";import De,{promises as Nn,existsSync as Qt,mkdir as mp,stat as k_,statSync as j_,mkdirSync as _p}from"fs";import*as Mu from"https";import jr from"https";import yp from"crypto";import*as Xn from"http";import Ln from"http";import"net";import U_ from"tls";import vr from"events";import Cn from"util";import M_ from"string_decoder";import Ur from"child_process";import Mr from"assert";import G_ from"timers";import{Buffer as V_}from"node:buffer";import hr from"node:path";import Wa,{ChildProcess as B_}from"node:child_process";import Tt from"node:process";import{fileURLToPath as vp}from"node:url";import wp,{constants as gp}from"node:os";import H_,{createWriteStream as z_,createReadStream as W_,readFileSync as X_,promises as K_}from"node:fs";import Y_ from"buffer";import Gr from"stream";import{debuglog as J_}from"node:util";import Ep,{readFile as pr,appendFile as Q_,writeFile as wn,chmod as Sp,readdir as Rp}from"fs/promises";import ru,{fileURLToPath as xt}from"url";import Z_ from"constants";import{error as ey,info as Xa}from"console";function Kn(e){return e==null?[]:Array.isArray(e)?e:[e]}function ty(e,t,r,n){var i,a=e[t],s=~n.string.indexOf(t)?r==null||r===!0?"":String(r):typeof r=="boolean"?r:~n.boolean.indexOf(t)?r==="false"?!1:r==="true"||(e._.push((i=+r,i*0===0?i:r)),!!r):(i=+r,i*0===0?i:r);e[t]=a==null?s:Array.isArray(a)?a.concat(s):[a,s]}function ry(e,t){e=e||[],t=t||{};var r,n,i,a,s,l={_:[]},c=0,u=0,o=0,m=e.length;const _=t.alias!==void 0,S=t.unknown!==void 0,R=t.default!==void 0;if(t.alias=t.alias||{},t.string=Kn(t.string),t.boolean=Kn(t.boolean),_)for(r in t.alias)for(n=t.alias[r]=Kn(t.alias[r]),c=0;c<n.length;c++)(t.alias[n[c]]=n.concat(r)).splice(c,1);for(c=t.boolean.length;c-- >0;)for(n=t.alias[t.boolean[c]]||[],u=n.length;u-- >0;)t.boolean.push(n[u]);for(c=t.string.length;c-- >0;)for(n=t.alias[t.string[c]]||[],u=n.length;u-- >0;)t.string.push(n[u]);if(R){for(r in t.default)if(a=typeof t.default[r],n=t.alias[r]=t.alias[r]||[],t[a]!==void 0)for(t[a].push(r),c=0;c<n.length;c++)t[a].push(n[c])}const p=S?Object.keys(t.alias):[];for(c=0;c<m;c++){if(i=e[c],i==="--"){l._=l._.concat(e.slice(++c));break}for(u=0;u<i.length&&i.charCodeAt(u)===45;u++);if(u===0)l._.push(i);else if(i.substring(u,u+3)==="no-"){if(a=i.substring(u+3),S&&!~p.indexOf(a))return t.unknown(i);l[a]=!1}else{for(o=u+1;o<i.length&&i.charCodeAt(o)!==61;o++);for(a=i.substring(u,o),s=i.substring(++o)||c+1===m||(""+e[c+1]).charCodeAt(0)===45||e[++c],n=u===2?[a]:a,o=0;o<n.length;o++){if(a=n[o],S&&!~p.indexOf(a))return t.unknown("-".repeat(u)+a);ty(l,a,o+1<n.length||s,t)}}}if(R)for(r in t.default)l[r]===void 0&&(l[r]=t.default[r]);if(_)for(r in l)for(n=t.alias[r]||[];n.length>0;)l[n.shift()]=l[r];return l}var at=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function $e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function ny(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var t=e.default;if(typeof t=="function"){var r=function n(){var i=!1;try{i=this instanceof n}catch{}return i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(n){var i=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(r,n,i.get?i:{enumerable:!0,get:function(){return e[n]}})}),r}var Wr={exports:{}},Yn,Gu;function xn(){if(Gu)return Yn;Gu=1;const e="2.0.0",t=256,r=Number.MAX_SAFE_INTEGER||9007199254740991,n=16,i=t-6;return Yn={MAX_LENGTH:t,MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:i,MAX_SAFE_INTEGER:r,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:e,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},Yn}var Jn,Vu;function Dn(){return Vu||(Vu=1,Jn=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{}),Jn}var Bu;function Vr(){return Bu||(Bu=1,(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:n,MAX_LENGTH:i}=xn(),a=Dn();t=e.exports={};const s=t.re=[],l=t.safeRe=[],c=t.src=[],u=t.safeSrc=[],o=t.t={};let m=0;const _="[a-zA-Z0-9-]",S=[["\\s",1],["\\d",i],[_,n]],R=h=>{for(const[y,v]of S)h=h.split(`${y}*`).join(`${y}{0,${v}}`).split(`${y}+`).join(`${y}{1,${v}}`);return h},p=(h,y,v)=>{const g=R(y),E=m++;a(h,E,y),o[h]=E,c[E]=y,u[E]=g,s[E]=new RegExp(y,v?"g":void 0),l[E]=new RegExp(g,v?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${_}*`),p("MAINVERSION",`(${c[o.NUMERICIDENTIFIER]})\\.(${c[o.NUMERICIDENTIFIER]})\\.(${c[o.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${c[o.NUMERICIDENTIFIERLOOSE]})\\.(${c[o.NUMERICIDENTIFIERLOOSE]})\\.(${c[o.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${c[o.NONNUMERICIDENTIFIER]}|${c[o.NUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${c[o.NONNUMERICIDENTIFIER]}|${c[o.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASE",`(?:-(${c[o.PRERELEASEIDENTIFIER]}(?:\\.${c[o.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${c[o.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${c[o.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${_}+`),p("BUILD",`(?:\\+(${c[o.BUILDIDENTIFIER]}(?:\\.${c[o.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${c[o.MAINVERSION]}${c[o.PRERELEASE]}?${c[o.BUILD]}?`),p("FULL",`^${c[o.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${c[o.MAINVERSIONLOOSE]}${c[o.PRERELEASELOOSE]}?${c[o.BUILD]}?`),p("LOOSE",`^${c[o.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${c[o.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${c[o.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${c[o.XRANGEIDENTIFIER]})(?:\\.(${c[o.XRANGEIDENTIFIER]})(?:\\.(${c[o.XRANGEIDENTIFIER]})(?:${c[o.PRERELEASE]})?${c[o.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${c[o.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[o.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[o.XRANGEIDENTIFIERLOOSE]})(?:${c[o.PRERELEASELOOSE]})?${c[o.BUILD]}?)?)?`),p("XRANGE",`^${c[o.GTLT]}\\s*${c[o.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${c[o.GTLT]}\\s*${c[o.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?`),p("COERCE",`${c[o.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",c[o.COERCEPLAIN]+`(?:${c[o.PRERELEASE]})?(?:${c[o.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",c[o.COERCE],!0),p("COERCERTLFULL",c[o.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${c[o.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${c[o.LONETILDE]}${c[o.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${c[o.LONETILDE]}${c[o.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${c[o.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${c[o.LONECARET]}${c[o.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${c[o.LONECARET]}${c[o.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${c[o.GTLT]}\\s*(${c[o.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${c[o.GTLT]}\\s*(${c[o.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${c[o.GTLT]}\\s*(${c[o.LOOSEPLAIN]}|${c[o.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${c[o.XRANGEPLAIN]})\\s+-\\s+(${c[o.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${c[o.XRANGEPLAINLOOSE]})\\s+-\\s+(${c[o.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(Wr,Wr.exports)),Wr.exports}var Qn,Hu;function nu(){if(Hu)return Qn;Hu=1;const e=Object.freeze({loose:!0}),t=Object.freeze({});return Qn=n=>n?typeof n!="object"?e:n:t,Qn}var Zn,zu;function bp(){if(zu)return Zn;zu=1;const e=/^[0-9]+$/,t=(n,i)=>{const a=e.test(n),s=e.test(i);return a&&s&&(n=+n,i=+i),n===i?0:a&&!s?-1:s&&!a?1:n<i?-1:1};return Zn={compareIdentifiers:t,rcompareIdentifiers:(n,i)=>t(i,n)},Zn}var ei,Wu;function We(){if(Wu)return ei;Wu=1;const e=Dn(),{MAX_LENGTH:t,MAX_SAFE_INTEGER:r}=xn(),{safeRe:n,t:i}=Vr(),a=nu(),{compareIdentifiers:s}=bp();class l{constructor(u,o){if(o=a(o),u instanceof l){if(u.loose===!!o.loose&&u.includePrerelease===!!o.includePrerelease)return u;u=u.version}else if(typeof u!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof u}".`);if(u.length>t)throw new TypeError(`version is longer than ${t} characters`);e("SemVer",u,o),this.options=o,this.loose=!!o.loose,this.includePrerelease=!!o.includePrerelease;const m=u.trim().match(o.loose?n[i.LOOSE]:n[i.FULL]);if(!m)throw new TypeError(`Invalid Version: ${u}`);if(this.raw=u,this.major=+m[1],this.minor=+m[2],this.patch=+m[3],this.major>r||this.major<0)throw new TypeError("Invalid major version");if(this.minor>r||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>r||this.patch<0)throw new TypeError("Invalid patch version");m[4]?this.prerelease=m[4].split(".").map(_=>{if(/^[0-9]+$/.test(_)){const S=+_;if(S>=0&&S<r)return S}return _}):this.prerelease=[],this.build=m[5]?m[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(u){if(e("SemVer.compare",this.version,this.options,u),!(u instanceof l)){if(typeof u=="string"&&u===this.version)return 0;u=new l(u,this.options)}return u.version===this.version?0:this.compareMain(u)||this.comparePre(u)}compareMain(u){return u instanceof l||(u=new l(u,this.options)),s(this.major,u.major)||s(this.minor,u.minor)||s(this.patch,u.patch)}comparePre(u){if(u instanceof l||(u=new l(u,this.options)),this.prerelease.length&&!u.prerelease.length)return-1;if(!this.prerelease.length&&u.prerelease.length)return 1;if(!this.prerelease.length&&!u.prerelease.length)return 0;let o=0;do{const m=this.prerelease[o],_=u.prerelease[o];if(e("prerelease compare",o,m,_),m===void 0&&_===void 0)return 0;if(_===void 0)return 1;if(m===void 0)return-1;if(m===_)continue;return s(m,_)}while(++o)}compareBuild(u){u instanceof l||(u=new l(u,this.options));let o=0;do{const m=this.build[o],_=u.build[o];if(e("build compare",o,m,_),m===void 0&&_===void 0)return 0;if(_===void 0)return 1;if(m===void 0)return-1;if(m===_)continue;return s(m,_)}while(++o)}inc(u,o,m){if(u.startsWith("pre")){if(!o&&m===!1)throw new Error("invalid increment argument: identifier is empty");if(o){const _=`-${o}`.match(this.options.loose?n[i.PRERELEASELOOSE]:n[i.PRERELEASE]);if(!_||_[1]!==o)throw new Error(`invalid identifier: ${o}`)}}switch(u){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",o,m);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",o,m);break;case"prepatch":this.prerelease.length=0,this.inc("patch",o,m),this.inc("pre",o,m);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",o,m),this.inc("pre",o,m);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const _=Number(m)?1:0;if(this.prerelease.length===0)this.prerelease=[_];else{let S=this.prerelease.length;for(;--S>=0;)typeof this.prerelease[S]=="number"&&(this.prerelease[S]++,S=-2);if(S===-1){if(o===this.prerelease.join(".")&&m===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(_)}}if(o){let S=[o,_];m===!1&&(S=[o]),s(this.prerelease[0],o)===0?isNaN(this.prerelease[1])&&(this.prerelease=S):this.prerelease=S}break}default:throw new Error(`invalid increment argument: ${u}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return ei=l,ei}var ti,Xu;function wr(){if(Xu)return ti;Xu=1;const e=We();return ti=(r,n,i=!1)=>{if(r instanceof e)return r;try{return new e(r,n)}catch(a){if(!i)return null;throw a}},ti}var ri,Ku;function iy(){if(Ku)return ri;Ku=1;const e=wr();return ri=(r,n)=>{const i=e(r,n);return i?i.version:null},ri}var ni,Yu;function sy(){if(Yu)return ni;Yu=1;const e=wr();return ni=(r,n)=>{const i=e(r.trim().replace(/^[=v]+/,""),n);return i?i.version:null},ni}var ii,Ju;function oy(){if(Ju)return ii;Ju=1;const e=We();return ii=(r,n,i,a,s)=>{typeof i=="string"&&(s=a,a=i,i=void 0);try{return new e(r instanceof e?r.version:r,i).inc(n,a,s).version}catch{return null}},ii}var si,Qu;function ay(){if(Qu)return si;Qu=1;const e=wr();return si=(r,n)=>{const i=e(r,null,!0),a=e(n,null,!0),s=i.compare(a);if(s===0)return null;const l=s>0,c=l?i:a,u=l?a:i,o=!!c.prerelease.length;if(!!u.prerelease.length&&!o){if(!u.patch&&!u.minor)return"major";if(u.compareMain(c)===0)return u.minor&&!u.patch?"minor":"patch"}const _=o?"pre":"";return i.major!==a.major?_+"major":i.minor!==a.minor?_+"minor":i.patch!==a.patch?_+"patch":"prerelease"},si}var oi,Zu;function uy(){if(Zu)return oi;Zu=1;const e=We();return oi=(r,n)=>new e(r,n).major,oi}var ai,ec;function cy(){if(ec)return ai;ec=1;const e=We();return ai=(r,n)=>new e(r,n).minor,ai}var ui,tc;function ly(){if(tc)return ui;tc=1;const e=We();return ui=(r,n)=>new e(r,n).patch,ui}var ci,rc;function fy(){if(rc)return ci;rc=1;const e=wr();return ci=(r,n)=>{const i=e(r,n);return i&&i.prerelease.length?i.prerelease:null},ci}var li,nc;function wt(){if(nc)return li;nc=1;const e=We();return li=(r,n,i)=>new e(r,i).compare(new e(n,i)),li}var fi,ic;function dy(){if(ic)return fi;ic=1;const e=wt();return fi=(r,n,i)=>e(n,r,i),fi}var di,sc;function hy(){if(sc)return di;sc=1;const e=wt();return di=(r,n)=>e(r,n,!0),di}var hi,oc;function iu(){if(oc)return hi;oc=1;const e=We();return hi=(r,n,i)=>{const a=new e(r,i),s=new e(n,i);return a.compare(s)||a.compareBuild(s)},hi}var pi,ac;function py(){if(ac)return pi;ac=1;const e=iu();return pi=(r,n)=>r.sort((i,a)=>e(i,a,n)),pi}var mi,uc;function my(){if(uc)return mi;uc=1;const e=iu();return mi=(r,n)=>r.sort((i,a)=>e(a,i,n)),mi}var _i,cc;function Fn(){if(cc)return _i;cc=1;const e=wt();return _i=(r,n,i)=>e(r,n,i)>0,_i}var yi,lc;function su(){if(lc)return yi;lc=1;const e=wt();return yi=(r,n,i)=>e(r,n,i)<0,yi}var vi,fc;function $p(){if(fc)return vi;fc=1;const e=wt();return vi=(r,n,i)=>e(r,n,i)===0,vi}var wi,dc;function Op(){if(dc)return wi;dc=1;const e=wt();return wi=(r,n,i)=>e(r,n,i)!==0,wi}var gi,hc;function ou(){if(hc)return gi;hc=1;const e=wt();return gi=(r,n,i)=>e(r,n,i)>=0,gi}var Ei,pc;function au(){if(pc)return Ei;pc=1;const e=wt();return Ei=(r,n,i)=>e(r,n,i)<=0,Ei}var Si,mc;function Ip(){if(mc)return Si;mc=1;const e=$p(),t=Op(),r=Fn(),n=ou(),i=su(),a=au();return Si=(l,c,u,o)=>{switch(c){case"===":return typeof l=="object"&&(l=l.version),typeof u=="object"&&(u=u.version),l===u;case"!==":return typeof l=="object"&&(l=l.version),typeof u=="object"&&(u=u.version),l!==u;case"":case"=":case"==":return e(l,u,o);case"!=":return t(l,u,o);case">":return r(l,u,o);case">=":return n(l,u,o);case"<":return i(l,u,o);case"<=":return a(l,u,o);default:throw new TypeError(`Invalid operator: ${c}`)}},Si}var Ri,_c;function _y(){if(_c)return Ri;_c=1;const e=We(),t=wr(),{safeRe:r,t:n}=Vr();return Ri=(a,s)=>{if(a instanceof e)return a;if(typeof a=="number"&&(a=String(a)),typeof a!="string")return null;s=s||{};let l=null;if(!s.rtl)l=a.match(s.includePrerelease?r[n.COERCEFULL]:r[n.COERCE]);else{const S=s.includePrerelease?r[n.COERCERTLFULL]:r[n.COERCERTL];let R;for(;(R=S.exec(a))&&(!l||l.index+l[0].length!==a.length);)(!l||R.index+R[0].length!==l.index+l[0].length)&&(l=R),S.lastIndex=R.index+R[1].length+R[2].length;S.lastIndex=-1}if(l===null)return null;const c=l[2],u=l[3]||"0",o=l[4]||"0",m=s.includePrerelease&&l[5]?`-${l[5]}`:"",_=s.includePrerelease&&l[6]?`+${l[6]}`:"";return t(`${c}.${u}.${o}${m}${_}`,s)},Ri}var bi,yc;function yy(){if(yc)return bi;yc=1;class e{constructor(){this.max=1e3,this.map=new Map}get(r){const n=this.map.get(r);if(n!==void 0)return this.map.delete(r),this.map.set(r,n),n}delete(r){return this.map.delete(r)}set(r,n){if(!this.delete(r)&&n!==void 0){if(this.map.size>=this.max){const a=this.map.keys().next().value;this.delete(a)}this.map.set(r,n)}return this}}return bi=e,bi}var $i,vc;function gt(){if(vc)return $i;vc=1;const e=/\s+/g;class t{constructor(I,N){if(N=i(N),I instanceof t)return I.loose===!!N.loose&&I.includePrerelease===!!N.includePrerelease?I:new t(I.raw,N);if(I instanceof a)return this.raw=I.value,this.set=[[I]],this.formatted=void 0,this;if(this.options=N,this.loose=!!N.loose,this.includePrerelease=!!N.includePrerelease,this.raw=I.trim().replace(e," "),this.set=this.raw.split("||").map(D=>this.parseRange(D.trim())).filter(D=>D.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const D=this.set[0];if(this.set=this.set.filter(x=>!p(x[0])),this.set.length===0)this.set=[D];else if(this.set.length>1){for(const x of this.set)if(x.length===1&&h(x[0])){this.set=[x];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let I=0;I<this.set.length;I++){I>0&&(this.formatted+="||");const N=this.set[I];for(let D=0;D<N.length;D++)D>0&&(this.formatted+=" "),this.formatted+=N[D].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(I){const D=((this.options.includePrerelease&&S)|(this.options.loose&&R))+":"+I,x=n.get(D);if(x)return x;const F=this.options.loose,C=F?c[u.HYPHENRANGELOOSE]:c[u.HYPHENRANGE];I=I.replace(C,V(this.options.includePrerelease)),s("hyphen replace",I),I=I.replace(c[u.COMPARATORTRIM],o),s("comparator trim",I),I=I.replace(c[u.TILDETRIM],m),s("tilde trim",I),I=I.replace(c[u.CARETTRIM],_),s("caret trim",I);let B=I.split(" ").map(W=>v(W,this.options)).join(" ").split(/\s+/).map(W=>q(W,this.options));F&&(B=B.filter(W=>(s("loose invalid filter",W,this.options),!!W.match(c[u.COMPARATORLOOSE])))),s("range list",B);const G=new Map,J=B.map(W=>new a(W,this.options));for(const W of J){if(p(W))return[W];G.set(W.value,W)}G.size>1&&G.has("")&&G.delete("");const se=[...G.values()];return n.set(D,se),se}intersects(I,N){if(!(I instanceof t))throw new TypeError("a Range is required");return this.set.some(D=>y(D,N)&&I.set.some(x=>y(x,N)&&D.every(F=>x.every(C=>F.intersects(C,N)))))}test(I){if(!I)return!1;if(typeof I=="string")try{I=new l(I,this.options)}catch{return!1}for(let N=0;N<this.set.length;N++)if(M(this.set[N],I,this.options))return!0;return!1}}$i=t;const r=yy(),n=new r,i=nu(),a=qn(),s=Dn(),l=We(),{safeRe:c,t:u,comparatorTrimReplace:o,tildeTrimReplace:m,caretTrimReplace:_}=Vr(),{FLAG_INCLUDE_PRERELEASE:S,FLAG_LOOSE:R}=xn(),p=P=>P.value==="<0.0.0-0",h=P=>P.value==="",y=(P,I)=>{let N=!0;const D=P.slice();let x=D.pop();for(;N&&D.length;)N=D.every(F=>x.intersects(F,I)),x=D.pop();return N},v=(P,I)=>(s("comp",P,I),P=w(P,I),s("caret",P),P=E(P,I),s("tildes",P),P=b(P,I),s("xrange",P),P=T(P,I),s("stars",P),P),g=P=>!P||P.toLowerCase()==="x"||P==="*",E=(P,I)=>P.trim().split(/\s+/).map(N=>d(N,I)).join(" "),d=(P,I)=>{const N=I.loose?c[u.TILDELOOSE]:c[u.TILDE];return P.replace(N,(D,x,F,C,B)=>{s("tilde",P,D,x,F,C,B);let G;return g(x)?G="":g(F)?G=`>=${x}.0.0 <${+x+1}.0.0-0`:g(C)?G=`>=${x}.${F}.0 <${x}.${+F+1}.0-0`:B?(s("replaceTilde pr",B),G=`>=${x}.${F}.${C}-${B} <${x}.${+F+1}.0-0`):G=`>=${x}.${F}.${C} <${x}.${+F+1}.0-0`,s("tilde return",G),G})},w=(P,I)=>P.trim().split(/\s+/).map(N=>f(N,I)).join(" "),f=(P,I)=>{s("caret",P,I);const N=I.loose?c[u.CARETLOOSE]:c[u.CARET],D=I.includePrerelease?"-0":"";return P.replace(N,(x,F,C,B,G)=>{s("caret",P,x,F,C,B,G);let J;return g(F)?J="":g(C)?J=`>=${F}.0.0${D} <${+F+1}.0.0-0`:g(B)?F==="0"?J=`>=${F}.${C}.0${D} <${F}.${+C+1}.0-0`:J=`>=${F}.${C}.0${D} <${+F+1}.0.0-0`:G?(s("replaceCaret pr",G),F==="0"?C==="0"?J=`>=${F}.${C}.${B}-${G} <${F}.${C}.${+B+1}-0`:J=`>=${F}.${C}.${B}-${G} <${F}.${+C+1}.0-0`:J=`>=${F}.${C}.${B}-${G} <${+F+1}.0.0-0`):(s("no pr"),F==="0"?C==="0"?J=`>=${F}.${C}.${B}${D} <${F}.${C}.${+B+1}-0`:J=`>=${F}.${C}.${B}${D} <${F}.${+C+1}.0-0`:J=`>=${F}.${C}.${B} <${+F+1}.0.0-0`),s("caret return",J),J})},b=(P,I)=>(s("replaceXRanges",P,I),P.split(/\s+/).map(N=>$(N,I)).join(" ")),$=(P,I)=>{P=P.trim();const N=I.loose?c[u.XRANGELOOSE]:c[u.XRANGE];return P.replace(N,(D,x,F,C,B,G)=>{s("xRange",P,D,x,F,C,B,G);const J=g(F),se=J||g(C),W=se||g(B),ie=W;return x==="="&&ie&&(x=""),G=I.includePrerelease?"-0":"",J?x===">"||x==="<"?D="<0.0.0-0":D="*":x&&ie?(se&&(C=0),B=0,x===">"?(x=">=",se?(F=+F+1,C=0,B=0):(C=+C+1,B=0)):x==="<="&&(x="<",se?F=+F+1:C=+C+1),x==="<"&&(G="-0"),D=`${x+F}.${C}.${B}${G}`):se?D=`>=${F}.0.0${G} <${+F+1}.0.0-0`:W&&(D=`>=${F}.${C}.0${G} <${F}.${+C+1}.0-0`),s("xRange return",D),D})},T=(P,I)=>(s("replaceStars",P,I),P.trim().replace(c[u.STAR],"")),q=(P,I)=>(s("replaceGTE0",P,I),P.trim().replace(c[I.includePrerelease?u.GTE0PRE:u.GTE0],"")),V=P=>(I,N,D,x,F,C,B,G,J,se,W,ie)=>(g(D)?N="":g(x)?N=`>=${D}.0.0${P?"-0":""}`:g(F)?N=`>=${D}.${x}.0${P?"-0":""}`:C?N=`>=${N}`:N=`>=${N}${P?"-0":""}`,g(J)?G="":g(se)?G=`<${+J+1}.0.0-0`:g(W)?G=`<${J}.${+se+1}.0-0`:ie?G=`<=${J}.${se}.${W}-${ie}`:P?G=`<${J}.${se}.${+W+1}-0`:G=`<=${G}`,`${N} ${G}`.trim()),M=(P,I,N)=>{for(let D=0;D<P.length;D++)if(!P[D].test(I))return!1;if(I.prerelease.length&&!N.includePrerelease){for(let D=0;D<P.length;D++)if(s(P[D].semver),P[D].semver!==a.ANY&&P[D].semver.prerelease.length>0){const x=P[D].semver;if(x.major===I.major&&x.minor===I.minor&&x.patch===I.patch)return!0}return!1}return!0};return $i}var Oi,wc;function qn(){if(wc)return Oi;wc=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(o,m){if(m=r(m),o instanceof t){if(o.loose===!!m.loose)return o;o=o.value}o=o.trim().split(/\s+/).join(" "),s("comparator",o,m),this.options=m,this.loose=!!m.loose,this.parse(o),this.semver===e?this.value="":this.value=this.operator+this.semver.version,s("comp",this)}parse(o){const m=this.options.loose?n[i.COMPARATORLOOSE]:n[i.COMPARATOR],_=o.match(m);if(!_)throw new TypeError(`Invalid comparator: ${o}`);this.operator=_[1]!==void 0?_[1]:"",this.operator==="="&&(this.operator=""),_[2]?this.semver=new l(_[2],this.options.loose):this.semver=e}toString(){return this.value}test(o){if(s("Comparator.test",o,this.options.loose),this.semver===e||o===e)return!0;if(typeof o=="string")try{o=new l(o,this.options)}catch{return!1}return a(o,this.operator,this.semver,this.options)}intersects(o,m){if(!(o instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new c(o.value,m).test(this.value):o.operator===""?o.value===""?!0:new c(this.value,m).test(o.semver):(m=r(m),m.includePrerelease&&(this.value==="<0.0.0-0"||o.value==="<0.0.0-0")||!m.includePrerelease&&(this.value.startsWith("<0.0.0")||o.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&o.operator.startsWith(">")||this.operator.startsWith("<")&&o.operator.startsWith("<")||this.semver.version===o.semver.version&&this.operator.includes("=")&&o.operator.includes("=")||a(this.semver,"<",o.semver,m)&&this.operator.startsWith(">")&&o.operator.startsWith("<")||a(this.semver,">",o.semver,m)&&this.operator.startsWith("<")&&o.operator.startsWith(">")))}}Oi=t;const r=nu(),{safeRe:n,t:i}=Vr(),a=Ip(),s=Dn(),l=We(),c=gt();return Oi}var Ii,gc;function kn(){if(gc)return Ii;gc=1;const e=gt();return Ii=(r,n,i)=>{try{n=new e(n,i)}catch{return!1}return n.test(r)},Ii}var Pi,Ec;function vy(){if(Ec)return Pi;Ec=1;const e=gt();return Pi=(r,n)=>new e(r,n).set.map(i=>i.map(a=>a.value).join(" ").trim().split(" ")),Pi}var Ti,Sc;function wy(){if(Sc)return Ti;Sc=1;const e=We(),t=gt();return Ti=(n,i,a)=>{let s=null,l=null,c=null;try{c=new t(i,a)}catch{return null}return n.forEach(u=>{c.test(u)&&(!s||l.compare(u)===-1)&&(s=u,l=new e(s,a))}),s},Ti}var Ai,Rc;function gy(){if(Rc)return Ai;Rc=1;const e=We(),t=gt();return Ai=(n,i,a)=>{let s=null,l=null,c=null;try{c=new t(i,a)}catch{return null}return n.forEach(u=>{c.test(u)&&(!s||l.compare(u)===1)&&(s=u,l=new e(s,a))}),s},Ai}var Ni,bc;function Ey(){if(bc)return Ni;bc=1;const e=We(),t=gt(),r=Fn();return Ni=(i,a)=>{i=new t(i,a);let s=new e("0.0.0");if(i.test(s)||(s=new e("0.0.0-0"),i.test(s)))return s;s=null;for(let l=0;l<i.set.length;++l){const c=i.set[l];let u=null;c.forEach(o=>{const m=new e(o.semver.version);switch(o.operator){case">":m.prerelease.length===0?m.patch++:m.prerelease.push(0),m.raw=m.format();case"":case">=":(!u||r(m,u))&&(u=m);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${o.operator}`)}}),u&&(!s||r(s,u))&&(s=u)}return s&&i.test(s)?s:null},Ni}var Li,$c;function Sy(){if($c)return Li;$c=1;const e=gt();return Li=(r,n)=>{try{return new e(r,n).range||"*"}catch{return null}},Li}var Ci,Oc;function uu(){if(Oc)return Ci;Oc=1;const e=We(),t=qn(),{ANY:r}=t,n=gt(),i=kn(),a=Fn(),s=su(),l=au(),c=ou();return Ci=(o,m,_,S)=>{o=new e(o,S),m=new n(m,S);let R,p,h,y,v;switch(_){case">":R=a,p=l,h=s,y=">",v=">=";break;case"<":R=s,p=c,h=a,y="<",v="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(i(o,m,S))return!1;for(let g=0;g<m.set.length;++g){const E=m.set[g];let d=null,w=null;if(E.forEach(f=>{f.semver===r&&(f=new t(">=0.0.0")),d=d||f,w=w||f,R(f.semver,d.semver,S)?d=f:h(f.semver,w.semver,S)&&(w=f)}),d.operator===y||d.operator===v||(!w.operator||w.operator===y)&&p(o,w.semver))return!1;if(w.operator===v&&h(o,w.semver))return!1}return!0},Ci}var xi,Ic;function Ry(){if(Ic)return xi;Ic=1;const e=uu();return xi=(r,n,i)=>e(r,n,">",i),xi}var Di,Pc;function by(){if(Pc)return Di;Pc=1;const e=uu();return Di=(r,n,i)=>e(r,n,"<",i),Di}var Fi,Tc;function $y(){if(Tc)return Fi;Tc=1;const e=gt();return Fi=(r,n,i)=>(r=new e(r,i),n=new e(n,i),r.intersects(n,i)),Fi}var qi,Ac;function Oy(){if(Ac)return qi;Ac=1;const e=kn(),t=wt();return qi=(r,n,i)=>{const a=[];let s=null,l=null;const c=r.sort((_,S)=>t(_,S,i));for(const _ of c)e(_,n,i)?(l=_,s||(s=_)):(l&&a.push([s,l]),l=null,s=null);s&&a.push([s,null]);const u=[];for(const[_,S]of a)_===S?u.push(_):!S&&_===c[0]?u.push("*"):S?_===c[0]?u.push(`<=${S}`):u.push(`${_} - ${S}`):u.push(`>=${_}`);const o=u.join(" || "),m=typeof n.raw=="string"?n.raw:String(n);return o.length<m.length?o:n},qi}var ki,Nc;function Iy(){if(Nc)return ki;Nc=1;const e=gt(),t=qn(),{ANY:r}=t,n=kn(),i=wt(),a=(m,_,S={})=>{if(m===_)return!0;m=new e(m,S),_=new e(_,S);let R=!1;e:for(const p of m.set){for(const h of _.set){const y=c(p,h,S);if(R=R||y!==null,y)continue e}if(R)return!1}return!0},s=[new t(">=0.0.0-0")],l=[new t(">=0.0.0")],c=(m,_,S)=>{if(m===_)return!0;if(m.length===1&&m[0].semver===r){if(_.length===1&&_[0].semver===r)return!0;S.includePrerelease?m=s:m=l}if(_.length===1&&_[0].semver===r){if(S.includePrerelease)return!0;_=l}const R=new Set;let p,h;for(const b of m)b.operator===">"||b.operator===">="?p=u(p,b,S):b.operator==="<"||b.operator==="<="?h=o(h,b,S):R.add(b.semver);if(R.size>1)return null;let y;if(p&&h){if(y=i(p.semver,h.semver,S),y>0)return null;if(y===0&&(p.operator!==">="||h.operator!=="<="))return null}for(const b of R){if(p&&!n(b,String(p),S)||h&&!n(b,String(h),S))return null;for(const $ of _)if(!n(b,String($),S))return!1;return!0}let v,g,E,d,w=h&&!S.includePrerelease&&h.semver.prerelease.length?h.semver:!1,f=p&&!S.includePrerelease&&p.semver.prerelease.length?p.semver:!1;w&&w.prerelease.length===1&&h.operator==="<"&&w.prerelease[0]===0&&(w=!1);for(const b of _){if(d=d||b.operator===">"||b.operator===">=",E=E||b.operator==="<"||b.operator==="<=",p){if(f&&b.semver.prerelease&&b.semver.prerelease.length&&b.semver.major===f.major&&b.semver.minor===f.minor&&b.semver.patch===f.patch&&(f=!1),b.operator===">"||b.operator===">="){if(v=u(p,b,S),v===b&&v!==p)return!1}else if(p.operator===">="&&!n(p.semver,String(b),S))return!1}if(h){if(w&&b.semver.prerelease&&b.semver.prerelease.length&&b.semver.major===w.major&&b.semver.minor===w.minor&&b.semver.patch===w.patch&&(w=!1),b.operator==="<"||b.operator==="<="){if(g=o(h,b,S),g===b&&g!==h)return!1}else if(h.operator==="<="&&!n(h.semver,String(b),S))return!1}if(!b.operator&&(h||p)&&y!==0)return!1}return!(p&&E&&!h&&y!==0||h&&d&&!p&&y!==0||f||w)},u=(m,_,S)=>{if(!m)return _;const R=i(m.semver,_.semver,S);return R>0?m:R<0||_.operator===">"&&m.operator===">="?_:m},o=(m,_,S)=>{if(!m)return _;const R=i(m.semver,_.semver,S);return R<0?m:R>0||_.operator==="<"&&m.operator==="<="?_:m};return ki=a,ki}var ji,Lc;function Py(){if(Lc)return ji;Lc=1;const e=Vr(),t=xn(),r=We(),n=bp(),i=wr(),a=iy(),s=sy(),l=oy(),c=ay(),u=uy(),o=cy(),m=ly(),_=fy(),S=wt(),R=dy(),p=hy(),h=iu(),y=py(),v=my(),g=Fn(),E=su(),d=$p(),w=Op(),f=ou(),b=au(),$=Ip(),T=_y(),q=qn(),V=gt(),M=kn(),P=vy(),I=wy(),N=gy(),D=Ey(),x=Sy(),F=uu(),C=Ry(),B=by(),G=$y(),J=Oy(),se=Iy();return ji={parse:i,valid:a,clean:s,inc:l,diff:c,major:u,minor:o,patch:m,prerelease:_,compare:S,rcompare:R,compareLoose:p,compareBuild:h,sort:y,rsort:v,gt:g,lt:E,eq:d,neq:w,gte:f,lte:b,cmp:$,coerce:T,Comparator:q,Range:V,satisfies:M,toComparators:P,maxSatisfying:I,minSatisfying:N,minVersion:D,validRange:x,outside:F,gtr:C,ltr:B,intersects:G,simplifyRange:J,subset:se,SemVer:r,re:e.re,src:e.src,tokens:e.t,SEMVER_SPEC_VERSION:t.SEMVER_SPEC_VERSION,RELEASE_TYPES:t.RELEASE_TYPES,compareIdentifiers:n.compareIdentifiers,rcompareIdentifiers:n.rcompareIdentifiers},ji}var Ui,Cc;function Ty(){if(Cc)return Ui;Cc=1;var e=fp,t=Py(),r=it,n=ce,i=De,a=jr;function s($,T,q,V){function M(P){return P instanceof q?P:new q(function(I){I(P)})}return new(q||(q=Promise))(function(P,I){function N(F){try{x(V.next(F))}catch(C){I(C)}}function D(F){try{x(V.throw(F))}catch(C){I(C)}}function x(F){F.done?P(F.value):M(F.value).then(N,D)}x((V=V.apply($,[])).next())})}function l($,T){var q={label:0,sent:function(){if(P[0]&1)throw P[1];return P[1]},trys:[],ops:[]},V,M,P,I;return I={next:N(0),throw:N(1),return:N(2)},typeof Symbol=="function"&&(I[Symbol.iterator]=function(){return this}),I;function N(x){return function(F){return D([x,F])}}function D(x){if(V)throw new TypeError("Generator is already executing.");for(;I&&(I=0,x[0]&&(q=0)),q;)try{if(V=1,M&&(P=x[0]&2?M.return:x[0]?M.throw||((P=M.return)&&P.call(M),0):M.next)&&!(P=P.call(M,x[1])).done)return P;switch(M=0,P&&(x=[x[0]&2,P.value]),x[0]){case 0:case 1:P=x;break;case 4:return q.label++,{value:x[1],done:!1};case 5:q.label++,M=x[1],x=[0];continue;case 7:x=q.ops.pop(),q.trys.pop();continue;default:if(P=q.trys,!(P=P.length>0&&P[P.length-1])&&(x[0]===6||x[0]===2)){q=0;continue}if(x[0]===3&&(!P||x[1]>P[0]&&x[1]<P[3])){q.label=x[1];break}if(x[0]===6&&q.label<P[1]){q.label=P[1],P=x;break}if(P&&q.label<P[2]){q.label=P[2],q.ops.push(x);break}P[2]&&q.ops.pop(),q.trys.pop();continue}x=T.call($,q)}catch(F){x=[6,F],M=0}finally{V=P=0}if(x[0]&5)throw x[1];return{value:x[0]?x[1]:void 0,done:!0}}}var c=e.env.npm_package_json,u=e.env.npm_config_user_agent,o=!!(u&&u.startsWith("npm")),m=!!(c&&c.endsWith("package.json")),_=o||m,S=!!(u&&u.startsWith("yarn")),R=_||S,p=r.homedir(),h=process.env.XDG_CONFIG_HOME||n.join(p,".config","simple-update-notifier"),y=function($){return n.join(h,"".concat($.replace("@","").replace("/","__"),".json"))},v=function(){i.existsSync(h)||i.mkdirSync(h,{recursive:!0})},g=function($){var T=y($);try{if(!i.existsSync(T))return;var q=JSON.parse(i.readFileSync(T,"utf8"));return q.lastUpdateCheck}catch{return}},E=function($){var T=y($);i.writeFileSync(T,JSON.stringify({lastUpdateCheck:new Date().getTime()}))},d=function($,T){return s(void 0,void 0,void 0,function(){var q;return l(this,function(V){return q="https://registry.npmjs.org/-/package/".concat($,"/dist-tags"),[2,new Promise(function(M,P){a.get(q,function(I){var N="";I.on("data",function(D){return N+=D}),I.on("end",function(){try{var D=JSON.parse(N),x=D[T];x||P(new Error("Error getting version")),M(x)}catch{P(new Error("Could not parse version response"))}})}).on("error",function(I){return P(I)})})]})})},w=function($){var T=$.pkg,q=$.updateCheckInterval,V=q===void 0?1e3*60*60*24:q,M=$.distTag,P=M===void 0?"latest":M,I=$.alwaysRun,N=$.debug;return s(void 0,void 0,void 0,function(){var D,x;return l(this,function(F){switch(F.label){case 0:return v(),D=g(T.name),I||!D||D<new Date().getTime()-V?[4,d(T.name,P)]:[3,2];case 1:return x=F.sent(),E(T.name),t.gt(x,T.version)?[2,x]:(N&&console.error("Latest version (".concat(x,") not newer than current version (").concat(T.version,")")),[3,3]);case 2:N&&console.error("Too recent to check for a new update. simpleUpdateNotifier() interval set to ".concat(V,"ms but only ").concat(new Date().getTime()-D,"ms since last check.")),F.label=3;case 3:return[2,!1]}})})},f=function($){for(var T=$.split(`
`),q=Math.max.apply(Math,T.map(function(N){return N.length})),V=["┌".concat("─".repeat(q+2),"┐")],M=0,P=T;M<P.length;M++){var I=P[M];V.push("│ ".concat(I.padEnd(q)," │"))}return V.push("└".concat("─".repeat(q+2),"┘")),V.join(`
`)},b=function($){return s(void 0,void 0,void 0,function(){var T,q;return l(this,function(V){switch(V.label){case 0:if(!$.alwaysRun&&(!process.stdout.isTTY||R&&!$.shouldNotifyInNpmScript))return $.debug&&console.error("Opting out of running simpleUpdateNotifier()"),[2];V.label=1;case 1:return V.trys.push([1,3,,4]),[4,w($)];case 2:return T=V.sent(),T&&console.error(f("New version of ".concat($.pkg.name,` available!
Current Version: `).concat($.pkg.version,`
Latest Version: `).concat(T))),[3,4];case 3:return q=V.sent(),$.debug&&q instanceof Error&&console.error("Unexpected error in simpleUpdateNotifier():",q),[3,4];case 4:return[2]}})})};return Ui=b,Ui}var Ay=Ty();const Ny=$e(Ay),Ly="setup-cpp",Cy="1.8.0",cu={name:Ly,version:Cy};var ft={},Je={},Gt={},xc;function lu(){if(xc)return Gt;xc=1,Object.defineProperty(Gt,"__esModule",{value:!0}),Gt.toCommandProperties=Gt.toCommandValue=void 0;function e(r){return r==null?"":typeof r=="string"||r instanceof String?r:JSON.stringify(r)}Gt.toCommandValue=e;function t(r){return Object.keys(r).length?{title:r.title,file:r.file,line:r.startLine,endLine:r.endLine,col:r.startColumn,endColumn:r.endColumn}:{}}return Gt.toCommandProperties=t,Gt}var Dc;function xy(){if(Dc)return Je;Dc=1;var e=Je&&Je.__createBinding||(Object.create?(function(m,_,S,R){R===void 0&&(R=S);var p=Object.getOwnPropertyDescriptor(_,S);(!p||("get"in p?!_.__esModule:p.writable||p.configurable))&&(p={enumerable:!0,get:function(){return _[S]}}),Object.defineProperty(m,R,p)}):(function(m,_,S,R){R===void 0&&(R=S),m[R]=_[S]})),t=Je&&Je.__setModuleDefault||(Object.create?(function(m,_){Object.defineProperty(m,"default",{enumerable:!0,value:_})}):function(m,_){m.default=_}),r=Je&&Je.__importStar||function(m){if(m&&m.__esModule)return m;var _={};if(m!=null)for(var S in m)S!=="default"&&Object.prototype.hasOwnProperty.call(m,S)&&e(_,m,S);return t(_,m),_};Object.defineProperty(Je,"__esModule",{value:!0}),Je.issue=Je.issueCommand=void 0;const n=r(it),i=lu();function a(m,_,S){const R=new c(m,_,S);process.stdout.write(R.toString()+n.EOL)}Je.issueCommand=a;function s(m,_=""){a(m,{},_)}Je.issue=s;const l="::";class c{constructor(_,S,R){_||(_="missing.command"),this.command=_,this.properties=S,this.message=R}toString(){let _=l+this.command;if(this.properties&&Object.keys(this.properties).length>0){_+=" ";let S=!0;for(const R in this.properties)if(this.properties.hasOwnProperty(R)){const p=this.properties[R];p&&(S?S=!1:_+=",",_+=`${R}=${o(p)}`)}}return _+=`${l}${u(this.message)}`,_}}function u(m){return(0,i.toCommandValue)(m).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A")}function o(m){return(0,i.toCommandValue)(m).replace(/%/g,"%25").replace(/\r/g,"%0D").replace(/\n/g,"%0A").replace(/:/g,"%3A").replace(/,/g,"%2C")}return Je}var Qe={},Fc;function Dy(){if(Fc)return Qe;Fc=1;var e=Qe&&Qe.__createBinding||(Object.create?(function(u,o,m,_){_===void 0&&(_=m);var S=Object.getOwnPropertyDescriptor(o,m);(!S||("get"in S?!o.__esModule:S.writable||S.configurable))&&(S={enumerable:!0,get:function(){return o[m]}}),Object.defineProperty(u,_,S)}):(function(u,o,m,_){_===void 0&&(_=m),u[_]=o[m]})),t=Qe&&Qe.__setModuleDefault||(Object.create?(function(u,o){Object.defineProperty(u,"default",{enumerable:!0,value:o})}):function(u,o){u.default=o}),r=Qe&&Qe.__importStar||function(u){if(u&&u.__esModule)return u;var o={};if(u!=null)for(var m in u)m!=="default"&&Object.prototype.hasOwnProperty.call(u,m)&&e(o,u,m);return t(o,u),o};Object.defineProperty(Qe,"__esModule",{value:!0}),Qe.prepareKeyValueMessage=Qe.issueFileCommand=void 0;const n=r(yp),i=r(De),a=r(it),s=lu();function l(u,o){const m=process.env[`GITHUB_${u}`];if(!m)throw new Error(`Unable to find environment variable for file command ${u}`);if(!i.existsSync(m))throw new Error(`Missing file at path: ${m}`);i.appendFileSync(m,`${(0,s.toCommandValue)(o)}${a.EOL}`,{encoding:"utf8"})}Qe.issueFileCommand=l;function c(u,o){const m=`ghadelimiter_${n.randomUUID()}`,_=(0,s.toCommandValue)(o);if(u.includes(m))throw new Error(`Unexpected input: name should not contain the delimiter "${m}"`);if(_.includes(m))throw new Error(`Unexpected input: value should not contain the delimiter "${m}"`);return`${u}<<${m}${a.EOL}${_}${a.EOL}${m}`}return Qe.prepareKeyValueMessage=c,Qe}var Vt={};function Ka(e){const t=e.protocol==="https:";if(Fy(e))return;const r=t?process.env.https_proxy||process.env.HTTPS_PROXY:process.env.http_proxy||process.env.HTTP_PROXY;if(r)try{return new qc(r)}catch{if(!r.startsWith("http://")&&!r.startsWith("https://"))return new qc(`http://${r}`)}else return}function Fy(e){if(!e.hostname)return!1;const t=e.hostname;if(qy(t))return!0;const r=process.env.no_proxy||process.env.NO_PROXY||"";if(!r)return!1;let n;e.port?n=Number(e.port):e.protocol==="http:"?n=80:e.protocol==="https:"&&(n=443);const i=[e.hostname.toUpperCase()];typeof n=="number"&&i.push(`${i[0]}:${n}`);for(const a of r.split(",").map(s=>s.trim().toUpperCase()).filter(s=>s))if(a==="*"||i.some(s=>s===a||s.endsWith(`.${a}`)||a.startsWith(".")&&s.endsWith(`${a}`)))return!0;return!1}function qy(e){const t=e.toLowerCase();return t==="localhost"||t.startsWith("127.")||t.startsWith("[::1]")||t.startsWith("[0:0:0:0:0:0:0:1]")}class qc extends URL{_decodedUsername;_decodedPassword;constructor(t,r){super(t,r),this._decodedUsername=decodeURIComponent(super.username),this._decodedPassword=decodeURIComponent(super.password)}get username(){return this._decodedUsername}get password(){return this._decodedPassword}}var Bt={},kc;function ky(){if(kc)return Bt;kc=1;var e=U_,t=Ln,r=jr,n=vr,i=Cn;Bt.httpOverHttp=a,Bt.httpsOverHttp=s,Bt.httpOverHttps=l,Bt.httpsOverHttps=c;function a(R){var p=new u(R);return p.request=t.request,p}function s(R){var p=new u(R);return p.request=t.request,p.createSocket=o,p.defaultPort=443,p}function l(R){var p=new u(R);return p.request=r.request,p}function c(R){var p=new u(R);return p.request=r.request,p.createSocket=o,p.defaultPort=443,p}function u(R){var p=this;p.options=R||{},p.proxyOptions=p.options.proxy||{},p.maxSockets=p.options.maxSockets||t.Agent.defaultMaxSockets,p.requests=[],p.sockets=[],p.on("free",function(y,v,g,E){for(var d=m(v,g,E),w=0,f=p.requests.length;w<f;++w){var b=p.requests[w];if(b.host===d.host&&b.port===d.port){p.requests.splice(w,1),b.request.onSocket(y);return}}y.destroy(),p.removeSocket(y)})}i.inherits(u,n.EventEmitter),u.prototype.addRequest=function(p,h,y,v){var g=this,E=_({request:p},g.options,m(h,y,v));if(g.sockets.length>=this.maxSockets){g.requests.push(E);return}g.createSocket(E,function(d){d.on("free",w),d.on("close",f),d.on("agentRemove",f),p.onSocket(d);function w(){g.emit("free",d,E)}function f(b){g.removeSocket(d),d.removeListener("free",w),d.removeListener("close",f),d.removeListener("agentRemove",f)}})},u.prototype.createSocket=function(p,h){var y=this,v={};y.sockets.push(v);var g=_({},y.proxyOptions,{method:"CONNECT",path:p.host+":"+p.port,agent:!1,headers:{host:p.host+":"+p.port}});p.localAddress&&(g.localAddress=p.localAddress),g.proxyAuth&&(g.headers=g.headers||{},g.headers["Proxy-Authorization"]="Basic "+new Buffer(g.proxyAuth).toString("base64")),S("making CONNECT request");var E=y.request(g);E.useChunkedEncodingByDefault=!1,E.once("response",d),E.once("upgrade",w),E.once("connect",f),E.once("error",b),E.end();function d($){$.upgrade=!0}function w($,T,q){process.nextTick(function(){f($,T,q)})}function f($,T,q){if(E.removeAllListeners(),T.removeAllListeners(),$.statusCode!==200){S("tunneling socket could not be established, statusCode=%d",$.statusCode),T.destroy();var V=new Error("tunneling socket could not be established, statusCode="+$.statusCode);V.code="ECONNRESET",p.request.emit("error",V),y.removeSocket(v);return}if(q.length>0){S("got illegal response body from proxy"),T.destroy();var V=new Error("got illegal response body from proxy");V.code="ECONNRESET",p.request.emit("error",V),y.removeSocket(v);return}return S("tunneling connection has established"),y.sockets[y.sockets.indexOf(v)]=T,h(T)}function b($){E.removeAllListeners(),S(`tunneling socket could not be established, cause=%s
`,$.message,$.stack);var T=new Error("tunneling socket could not be established, cause="+$.message);T.code="ECONNRESET",p.request.emit("error",T),y.removeSocket(v)}},u.prototype.removeSocket=function(p){var h=this.sockets.indexOf(p);if(h!==-1){this.sockets.splice(h,1);var y=this.requests.shift();y&&this.createSocket(y,function(v){y.request.onSocket(v)})}};function o(R,p){var h=this;u.prototype.createSocket.call(h,R,function(y){var v=R.request.getHeader("host"),g=_({},h.options,{socket:y,servername:v?v.replace(/:.*$/,""):R.host}),E=e.connect(0,g);h.sockets[h.sockets.indexOf(y)]=E,p(E)})}function m(R,p,h){return typeof R=="string"?{host:R,port:p,localAddress:h}:R}function _(R){for(var p=1,h=arguments.length;p<h;++p){var y=arguments[p];if(typeof y=="object")for(var v=Object.keys(y),g=0,E=v.length;g<E;++g){var d=v[g];y[d]!==void 0&&(R[d]=y[d])}}return R}var S;return process.env.NODE_DEBUG&&/\btunnel\b/.test(process.env.NODE_DEBUG)?S=function(){var R=Array.prototype.slice.call(arguments);typeof R[0]=="string"?R[0]="TUNNEL: "+R[0]:R.unshift("TUNNEL:"),console.error.apply(console,R)}:S=function(){},Bt.debug=S,Bt}var Mi,jc;function jy(){return jc||(jc=1,Mi=ky()),Mi}var Xr=jy(),tt;(function(e){e[e.OK=200]="OK",e[e.MultipleChoices=300]="MultipleChoices",e[e.MovedPermanently=301]="MovedPermanently",e[e.ResourceMoved=302]="ResourceMoved",e[e.SeeOther=303]="SeeOther",e[e.NotModified=304]="NotModified",e[e.UseProxy=305]="UseProxy",e[e.SwitchProxy=306]="SwitchProxy",e[e.TemporaryRedirect=307]="TemporaryRedirect",e[e.PermanentRedirect=308]="PermanentRedirect",e[e.BadRequest=400]="BadRequest",e[e.Unauthorized=401]="Unauthorized",e[e.PaymentRequired=402]="PaymentRequired",e[e.Forbidden=403]="Forbidden",e[e.NotFound=404]="NotFound",e[e.MethodNotAllowed=405]="MethodNotAllowed",e[e.NotAcceptable=406]="NotAcceptable",e[e.ProxyAuthenticationRequired=407]="ProxyAuthenticationRequired",e[e.RequestTimeout=408]="RequestTimeout",e[e.Conflict=409]="Conflict",e[e.Gone=410]="Gone",e[e.TooManyRequests=429]="TooManyRequests",e[e.InternalServerError=500]="InternalServerError",e[e.NotImplemented=501]="NotImplemented",e[e.BadGateway=502]="BadGateway",e[e.ServiceUnavailable=503]="ServiceUnavailable",e[e.GatewayTimeout=504]="GatewayTimeout"})(tt||(tt={}));var je;(function(e){e.Accept="accept",e.ContentType="content-type"})(je||(je={}));var Ot;(function(e){e.ApplicationJson="application/json"})(Ot||(Ot={}));function Uy(e){const t=Ka(new URL(e));return t?t.href:""}const My=[tt.MovedPermanently,tt.ResourceMoved,tt.SeeOther,tt.TemporaryRedirect,tt.PermanentRedirect],Gy=[tt.BadGateway,tt.ServiceUnavailable,tt.GatewayTimeout],Vy=["OPTIONS","GET","DELETE","HEAD"],By=10,Hy=5;class jn extends Error{constructor(t,r){super(t),this.name="HttpClientError",this.statusCode=r,Object.setPrototypeOf(this,jn.prototype)}statusCode;result}class Pp{constructor(t){this.message=t}message;async readBody(){return new Promise(async t=>{let r=Buffer.alloc(0);this.message.on("data",n=>{r=Buffer.concat([r,n])}),this.message.on("end",()=>{t(r.toString())})})}async readBodyBuffer(){return new Promise(async t=>{const r=[];this.message.on("data",n=>{r.push(n)}),this.message.on("end",()=>{t(Buffer.concat(r))})})}}function zy(e){return new URL(e).protocol==="https:"}class Wy{userAgent;handlers;requestOptions;_ignoreSslError=!1;_socketTimeout;_allowRedirects=!0;_allowRedirectDowngrade=!1;_maxRedirects=50;_allowRetries=!1;_maxRetries=1;_agent;_proxyAgent;_proxyAgentDispatcher;_keepAlive=!1;_disposed=!1;constructor(t,r,n){this.userAgent=t,this.handlers=r||[],this.requestOptions=n,n&&(n.ignoreSslError!=null&&(this._ignoreSslError=n.ignoreSslError),this._socketTimeout=n.socketTimeout,n.allowRedirects!=null&&(this._allowRedirects=n.allowRedirects),n.allowRedirectDowngrade!=null&&(this._allowRedirectDowngrade=n.allowRedirectDowngrade),n.maxRedirects!=null&&(this._maxRedirects=Math.max(n.maxRedirects,0)),n.keepAlive!=null&&(this._keepAlive=n.keepAlive),n.allowRetries!=null&&(this._allowRetries=n.allowRetries),n.maxRetries!=null&&(this._maxRetries=n.maxRetries))}async options(t,r){return this.request("OPTIONS",t,null,r||{})}async get(t,r){return this.request("GET",t,null,r||{})}async del(t,r){return this.request("DELETE",t,null,r||{})}async post(t,r,n){return this.request("POST",t,r,n||{})}async patch(t,r,n){return this.request("PATCH",t,r,n||{})}async put(t,r,n){return this.request("PUT",t,r,n||{})}async head(t,r){return this.request("HEAD",t,null,r||{})}async sendStream(t,r,n,i){return this.request(t,r,n,i)}async getJson(t,r={}){r[je.Accept]=this._getExistingOrDefaultHeader(r,je.Accept,Ot.ApplicationJson);const n=await this.get(t,r);return this._processResponse(n,this.requestOptions)}async postJson(t,r,n={}){const i=JSON.stringify(r,null,2);n[je.Accept]=this._getExistingOrDefaultHeader(n,je.Accept,Ot.ApplicationJson),n[je.ContentType]=this._getExistingOrDefaultHeader(n,je.ContentType,Ot.ApplicationJson);const a=await this.post(t,i,n);return this._processResponse(a,this.requestOptions)}async putJson(t,r,n={}){const i=JSON.stringify(r,null,2);n[je.Accept]=this._getExistingOrDefaultHeader(n,je.Accept,Ot.ApplicationJson),n[je.ContentType]=this._getExistingOrDefaultHeader(n,je.ContentType,Ot.ApplicationJson);const a=await this.put(t,i,n);return this._processResponse(a,this.requestOptions)}async patchJson(t,r,n={}){const i=JSON.stringify(r,null,2);n[je.Accept]=this._getExistingOrDefaultHeader(n,je.Accept,Ot.ApplicationJson),n[je.ContentType]=this._getExistingOrDefaultHeader(n,je.ContentType,Ot.ApplicationJson);const a=await this.patch(t,i,n);return this._processResponse(a,this.requestOptions)}async request(t,r,n,i){if(this._disposed)throw new Error("Client has already been disposed.");const a=new URL(r);let s=this._prepareRequest(t,a,i);const l=this._allowRetries&&Vy.includes(t)?this._maxRetries+1:1;let c=0,u;do{if(u=await this.requestRaw(s,n),u&&u.message&&u.message.statusCode===tt.Unauthorized){let m;for(const _ of this.handlers)if(_.canHandleAuthentication(u)){m=_;break}return m?m.handleAuthentication(this,s,n):u}let o=this._maxRedirects;for(;u.message.statusCode&&My.includes(u.message.statusCode)&&this._allowRedirects&&o>0;){const m=u.message.headers.location;if(!m)break;const _=new URL(m);if(a.protocol==="https:"&&a.protocol!==_.protocol&&!this._allowRedirectDowngrade)throw new Error("Redirect from HTTPS to HTTP protocol. This downgrade is not allowed for security reasons. If you want to allow this behavior, set the allowRedirectDowngrade option to true.");if(await u.readBody(),_.hostname!==a.hostname)for(const S in i)S.toLowerCase()==="authorization"&&delete i[S];s=this._prepareRequest(t,_,i),u=await this.requestRaw(s,n),o--}if(!u.message.statusCode||!Gy.includes(u.message.statusCode))return u;c+=1,c<l&&(await u.readBody(),await this._performExponentialBackoff(c))}while(c<l);return u}dispose(){this._agent&&this._agent.destroy(),this._disposed=!0}async requestRaw(t,r){return new Promise((n,i)=>{function a(s,l){s?i(s):l?n(l):i(new Error("Unknown error"))}this.requestRawWithCallback(t,r,a)})}requestRawWithCallback(t,r,n){typeof r=="string"&&(t.options.headers||(t.options.headers={}),t.options.headers["Content-Length"]=Buffer.byteLength(r,"utf8"));let i=!1;function a(c,u){i||(i=!0,n(c,u))}const s=t.httpModule.request(t.options,c=>{const u=new Pp(c);a(void 0,u)});let l;s.on("socket",c=>{l=c}),s.setTimeout(this._socketTimeout||3*6e4,()=>{l&&l.end(),a(new Error(`Request timeout: ${t.options.path}`))}),s.on("error",function(c){a(c)}),r&&typeof r=="string"&&s.write(r,"utf8"),r&&typeof r!="string"?(r.on("close",function(){s.end()}),r.pipe(s)):s.end()}getAgent(t){const r=new URL(t);return this._getAgent(r)}async getAgentDispatcher(t){const r=new URL(t),n=Ka(r);if(n&&n.hostname)return await this._getProxyAgentDispatcher(r,n)}_prepareRequest(t,r,n){const i={};i.parsedUrl=r;const a=i.parsedUrl.protocol==="https:";i.httpModule=a?Mu:Xn;const s=a?443:80;if(i.options={},i.options.host=i.parsedUrl.hostname,i.options.port=i.parsedUrl.port?parseInt(i.parsedUrl.port):s,i.options.path=(i.parsedUrl.pathname||"")+(i.parsedUrl.search||""),i.options.method=t,i.options.headers=this._mergeHeaders(n),this.userAgent!=null&&(i.options.headers["user-agent"]=this.userAgent),i.options.agent=this._getAgent(i.parsedUrl),this.handlers)for(const l of this.handlers)l.prepareRequest(i.options);return i}_mergeHeaders(t){return this.requestOptions&&this.requestOptions.headers?Object.assign({},Kr(this.requestOptions.headers),Kr(t||{})):Kr(t||{})}_getExistingOrDefaultHeader(t,r,n){let i;return this.requestOptions&&this.requestOptions.headers&&(i=Kr(this.requestOptions.headers)[r]),t[r]||i||n}_getAgent(t){let r;const n=Ka(t),i=n&&n.hostname;if(this._keepAlive&&i&&(r=this._proxyAgent),i||(r=this._agent),r)return r;const a=t.protocol==="https:";let s=100;if(this.requestOptions&&(s=this.requestOptions.maxSockets||Xn.globalAgent.maxSockets),n&&n.hostname){const l={maxSockets:s,keepAlive:this._keepAlive,proxy:{...(n.username||n.password)&&{proxyAuth:`${n.username}:${n.password}`},host:n.hostname,port:n.port}};let c;const u=n.protocol==="https:";a?c=u?Xr.httpsOverHttps:Xr.httpsOverHttp:c=u?Xr.httpOverHttps:Xr.httpOverHttp,r=c(l),this._proxyAgent=r}if(!r){const l={keepAlive:this._keepAlive,maxSockets:s};r=a?new Mu.Agent(l):new Xn.Agent(l),this._agent=r}return a&&this._ignoreSslError&&(r.options=Object.assign(r.options||{},{rejectUnauthorized:!1})),r}async _getProxyAgentDispatcher(t,r){let n;if(this._keepAlive&&(n=this._proxyAgentDispatcher),n)return n;const i=t.protocol==="https:",a=await import("./assets/proxy-agent-CkLs76tb.mjs").then(s=>s.p);return n=new a({uri:r.href,pipelining:this._keepAlive?1:0,...(r.username||r.password)&&{token:`Basic ${Buffer.from(`${r.username}:${r.password}`).toString("base64")}`}}),this._proxyAgentDispatcher=n,i&&this._ignoreSslError&&(n.options=Object.assign(n.options.requestTls||{},{rejectUnauthorized:!1})),n}async _performExponentialBackoff(t){t=Math.min(By,t);const r=Hy*Math.pow(2,t);return new Promise(n=>setTimeout(()=>n(),r))}async _processResponse(t,r){return new Promise(async(n,i)=>{const a=t.message.statusCode||0,s={statusCode:a,result:null,headers:{}};a===tt.NotFound&&n(s);function l(o,m){if(typeof m=="string"){const _=new Date(m);if(!isNaN(_.valueOf()))return _}return m}let c,u;try{u=await t.readBody(),u&&u.length>0&&(r&&r.deserializeDates?c=JSON.parse(u,l):c=JSON.parse(u),s.result=c),s.headers=t.message.headers}catch{}if(a>299){let o;c&&c.message?o=c.message:u&&u.length>0?o=u:o=`Failed request: (${a})`;const m=new jn(o,a);m.result=s.result,i(m)}else n(s)})}}const Kr=e=>Object.keys(e).reduce((t,r)=>(t[r.toLowerCase()]=e[r],t),{}),Xy=Object.freeze(Object.defineProperty({__proto__:null,get Headers(){return je},HttpClient:Wy,HttpClientError:jn,HttpClientResponse:Pp,get HttpCodes(){return tt},get MediaTypes(){return Ot},getProxyUrl:Uy,isHttps:zy},Symbol.toStringTag,{value:"Module"})),Tp=ny(Xy);var dt={},Uc;function Ky(){if(Uc)return dt;Uc=1;var e=dt&&dt.__awaiter||function(i,a,s,l){function c(u){return u instanceof s?u:new s(function(o){o(u)})}return new(s||(s=Promise))(function(u,o){function m(R){try{S(l.next(R))}catch(p){o(p)}}function _(R){try{S(l.throw(R))}catch(p){o(p)}}function S(R){R.done?u(R.value):c(R.value).then(m,_)}S((l=l.apply(i,a||[])).next())})};Object.defineProperty(dt,"__esModule",{value:!0}),dt.PersonalAccessTokenCredentialHandler=dt.BearerCredentialHandler=dt.BasicCredentialHandler=void 0;class t{constructor(a,s){this.username=a,this.password=s}prepareRequest(a){if(!a.headers)throw Error("The request has no headers");a.headers.Authorization=`Basic ${Buffer.from(`${this.username}:${this.password}`).toString("base64")}`}canHandleAuthentication(){return!1}handleAuthentication(){return e(this,void 0,void 0,function*(){throw new Error("not implemented")})}}dt.BasicCredentialHandler=t;class r{constructor(a){this.token=a}prepareRequest(a){if(!a.headers)throw Error("The request has no headers");a.headers.Authorization=`Bearer ${this.token}`}canHandleAuthentication(){return!1}handleAuthentication(){return e(this,void 0,void 0,function*(){throw new Error("not implemented")})}}dt.BearerCredentialHandler=r;class n{constructor(a){this.token=a}prepareRequest(a){if(!a.headers)throw Error("The request has no headers");a.headers.Authorization=`Basic ${Buffer.from(`PAT:${this.token}`).toString("base64")}`}canHandleAuthentication(){return!1}handleAuthentication(){return e(this,void 0,void 0,function*(){throw new Error("not implemented")})}}return dt.PersonalAccessTokenCredentialHandler=n,dt}var Mc;function Yy(){if(Mc)return Vt;Mc=1;var e=Vt&&Vt.__awaiter||function(a,s,l,c){function u(o){return o instanceof l?o:new l(function(m){m(o)})}return new(l||(l=Promise))(function(o,m){function _(p){try{R(c.next(p))}catch(h){m(h)}}function S(p){try{R(c.throw(p))}catch(h){m(h)}}function R(p){p.done?o(p.value):u(p.value).then(_,S)}R((c=c.apply(a,s||[])).next())})};Object.defineProperty(Vt,"__esModule",{value:!0}),Vt.OidcClient=void 0;const t=Tp,r=Ky(),n=gr();class i{static createHttpClient(s=!0,l=10){const c={allowRetries:s,maxRetries:l};return new t.HttpClient("actions/oidc-client",[new r.BearerCredentialHandler(i.getRequestToken())],c)}static getRequestToken(){const s=process.env.ACTIONS_ID_TOKEN_REQUEST_TOKEN;if(!s)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_TOKEN env variable");return s}static getIDTokenUrl(){const s=process.env.ACTIONS_ID_TOKEN_REQUEST_URL;if(!s)throw new Error("Unable to get ACTIONS_ID_TOKEN_REQUEST_URL env variable");return s}static getCall(s){var l;return e(this,void 0,void 0,function*(){const o=(l=(yield i.createHttpClient().getJson(s).catch(m=>{throw new Error(`Failed to get ID Token. 
 
        Error Code : ${m.statusCode}
 
        Error Message: ${m.message}`)})).result)===null||l===void 0?void 0:l.value;if(!o)throw new Error("Response json body do not have ID Token field");return o})}static getIDToken(s){return e(this,void 0,void 0,function*(){try{let l=i.getIDTokenUrl();if(s){const u=encodeURIComponent(s);l=`${l}&audience=${u}`}(0,n.debug)(`ID token url is ${l}`);const c=yield i.getCall(l);return(0,n.setSecret)(c),c}catch(l){throw new Error(`Error message: ${l.message}`)}})}}return Vt.OidcClient=i,Vt}var Tr={},Gc;function Vc(){return Gc||(Gc=1,(function(e){var t=Tr&&Tr.__awaiter||function(u,o,m,_){function S(R){return R instanceof m?R:new m(function(p){p(R)})}return new(m||(m=Promise))(function(R,p){function h(g){try{v(_.next(g))}catch(E){p(E)}}function y(g){try{v(_.throw(g))}catch(E){p(E)}}function v(g){g.done?R(g.value):S(g.value).then(h,y)}v((_=_.apply(u,o||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0}),e.summary=e.markdownSummary=e.SUMMARY_DOCS_URL=e.SUMMARY_ENV_VAR=void 0;const r=it,n=De,{access:i,appendFile:a,writeFile:s}=n.promises;e.SUMMARY_ENV_VAR="GITHUB_STEP_SUMMARY",e.SUMMARY_DOCS_URL="https://docs.github.com/actions/using-workflows/workflow-commands-for-github-actions#adding-a-job-summary";class l{constructor(){this._buffer=""}filePath(){return t(this,void 0,void 0,function*(){if(this._filePath)return this._filePath;const o=process.env[e.SUMMARY_ENV_VAR];if(!o)throw new Error(`Unable to find environment variable for $${e.SUMMARY_ENV_VAR}. Check if your runtime environment supports job summaries.`);try{yield i(o,n.constants.R_OK|n.constants.W_OK)}catch{throw new Error(`Unable to access summary file: '${o}'. Check if the file has correct read/write permissions.`)}return this._filePath=o,this._filePath})}wrap(o,m,_={}){const S=Object.entries(_).map(([R,p])=>` ${R}="${p}"`).join("");return m?`<${o}${S}>${m}</${o}>`:`<${o}${S}>`}write(o){return t(this,void 0,void 0,function*(){const m=!!o?.overwrite,_=yield this.filePath();return yield(m?s:a)(_,this._buffer,{encoding:"utf8"}),this.emptyBuffer()})}clear(){return t(this,void 0,void 0,function*(){return this.emptyBuffer().write({overwrite:!0})})}stringify(){return this._buffer}isEmptyBuffer(){return this._buffer.length===0}emptyBuffer(){return this._buffer="",this}addRaw(o,m=!1){return this._buffer+=o,m?this.addEOL():this}addEOL(){return this.addRaw(r.EOL)}addCodeBlock(o,m){const _=Object.assign({},m&&{lang:m}),S=this.wrap("pre",this.wrap("code",o),_);return this.addRaw(S).addEOL()}addList(o,m=!1){const _=m?"ol":"ul",S=o.map(p=>this.wrap("li",p)).join(""),R=this.wrap(_,S);return this.addRaw(R).addEOL()}addTable(o){const m=o.map(S=>{const R=S.map(p=>{if(typeof p=="string")return this.wrap("td",p);const{header:h,data:y,colspan:v,rowspan:g}=p,E=h?"th":"td",d=Object.assign(Object.assign({},v&&{colspan:v}),g&&{rowspan:g});return this.wrap(E,y,d)}).join("");return this.wrap("tr",R)}).join(""),_=this.wrap("table",m);return this.addRaw(_).addEOL()}addDetails(o,m){const _=this.wrap("details",this.wrap("summary",o)+m);return this.addRaw(_).addEOL()}addImage(o,m,_){const{width:S,height:R}=_||{},p=Object.assign(Object.assign({},S&&{width:S}),R&&{height:R}),h=this.wrap("img",null,Object.assign({src:o,alt:m},p));return this.addRaw(h).addEOL()}addHeading(o,m){const _=`h${m}`,S=["h1","h2","h3","h4","h5","h6"].includes(_)?_:"h1",R=this.wrap(S,o);return this.addRaw(R).addEOL()}addSeparator(){const o=this.wrap("hr",null);return this.addRaw(o).addEOL()}addBreak(){const o=this.wrap("br",null);return this.addRaw(o).addEOL()}addQuote(o,m){const _=Object.assign({},m&&{cite:m}),S=this.wrap("blockquote",o,_);return this.addRaw(S).addEOL()}addLink(o,m){const _=this.wrap("a",o,{href:m});return this.addRaw(_).addEOL()}}const c=new l;e.markdownSummary=c,e.summary=c})(Tr)),Tr}var Ve={},Bc;function Jy(){if(Bc)return Ve;Bc=1;var e=Ve&&Ve.__createBinding||(Object.create?(function(l,c,u,o){o===void 0&&(o=u);var m=Object.getOwnPropertyDescriptor(c,u);(!m||("get"in m?!c.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return c[u]}}),Object.defineProperty(l,o,m)}):(function(l,c,u,o){o===void 0&&(o=u),l[o]=c[u]})),t=Ve&&Ve.__setModuleDefault||(Object.create?(function(l,c){Object.defineProperty(l,"default",{enumerable:!0,value:c})}):function(l,c){l.default=c}),r=Ve&&Ve.__importStar||function(l){if(l&&l.__esModule)return l;var c={};if(l!=null)for(var u in l)u!=="default"&&Object.prototype.hasOwnProperty.call(l,u)&&e(c,l,u);return t(c,l),c};Object.defineProperty(Ve,"__esModule",{value:!0}),Ve.toPlatformPath=Ve.toWin32Path=Ve.toPosixPath=void 0;const n=r(ce);function i(l){return l.replace(/[\\]/g,"/")}Ve.toPosixPath=i;function a(l){return l.replace(/[/]/g,"\\")}Ve.toWin32Path=a;function s(l){return l.replace(/[/\\]/g,n.sep)}return Ve.toPlatformPath=s,Ve}var Ze={},Be={},He={},Se={},ht={},Hc;function Ap(){return Hc||(Hc=1,(function(e){var t=ht&&ht.__createBinding||(Object.create?(function(p,h,y,v){v===void 0&&(v=y),Object.defineProperty(p,v,{enumerable:!0,get:function(){return h[y]}})}):(function(p,h,y,v){v===void 0&&(v=y),p[v]=h[y]})),r=ht&&ht.__setModuleDefault||(Object.create?(function(p,h){Object.defineProperty(p,"default",{enumerable:!0,value:h})}):function(p,h){p.default=h}),n=ht&&ht.__importStar||function(p){if(p&&p.__esModule)return p;var h={};if(p!=null)for(var y in p)y!=="default"&&Object.hasOwnProperty.call(p,y)&&t(h,p,y);return r(h,p),h},i=ht&&ht.__awaiter||function(p,h,y,v){function g(E){return E instanceof y?E:new y(function(d){d(E)})}return new(y||(y=Promise))(function(E,d){function w($){try{b(v.next($))}catch(T){d(T)}}function f($){try{b(v.throw($))}catch(T){d(T)}}function b($){$.done?E($.value):g($.value).then(w,f)}b((v=v.apply(p,h||[])).next())})},a;Object.defineProperty(e,"__esModule",{value:!0}),e.getCmdPath=e.tryGetExecutablePath=e.isRooted=e.isDirectory=e.exists=e.READONLY=e.UV_FS_O_EXLOCK=e.IS_WINDOWS=e.unlink=e.symlink=e.stat=e.rmdir=e.rm=e.rename=e.readlink=e.readdir=e.open=e.mkdir=e.lstat=e.copyFile=e.chmod=void 0;const s=n(De),l=n(ce);a=s.promises,e.chmod=a.chmod,e.copyFile=a.copyFile,e.lstat=a.lstat,e.mkdir=a.mkdir,e.open=a.open,e.readdir=a.readdir,e.readlink=a.readlink,e.rename=a.rename,e.rm=a.rm,e.rmdir=a.rmdir,e.stat=a.stat,e.symlink=a.symlink,e.unlink=a.unlink,e.IS_WINDOWS=process.platform==="win32",e.UV_FS_O_EXLOCK=268435456,e.READONLY=s.constants.O_RDONLY;function c(p){return i(this,void 0,void 0,function*(){try{yield e.stat(p)}catch(h){if(h.code==="ENOENT")return!1;throw h}return!0})}e.exists=c;function u(p,h=!1){return i(this,void 0,void 0,function*(){return(h?yield e.stat(p):yield e.lstat(p)).isDirectory()})}e.isDirectory=u;function o(p){if(p=_(p),!p)throw new Error('isRooted() parameter "p" cannot be empty');return e.IS_WINDOWS?p.startsWith("\\")||/^[A-Z]:/i.test(p):p.startsWith("/")}e.isRooted=o;function m(p,h){return i(this,void 0,void 0,function*(){let y;try{y=yield e.stat(p)}catch(g){g.code!=="ENOENT"&&console.log(`Unexpected error attempting to determine if executable file exists '${p}': ${g}`)}if(y&&y.isFile()){if(e.IS_WINDOWS){const g=l.extname(p).toUpperCase();if(h.some(E=>E.toUpperCase()===g))return p}else if(S(y))return p}const v=p;for(const g of h){p=v+g,y=void 0;try{y=yield e.stat(p)}catch(E){E.code!=="ENOENT"&&console.log(`Unexpected error attempting to determine if executable file exists '${p}': ${E}`)}if(y&&y.isFile()){if(e.IS_WINDOWS){try{const E=l.dirname(p),d=l.basename(p).toUpperCase();for(const w of yield e.readdir(E))if(d===w.toUpperCase()){p=l.join(E,w);break}}catch(E){console.log(`Unexpected error attempting to determine the actual case of the file '${p}': ${E}`)}return p}else if(S(y))return p}}return""})}e.tryGetExecutablePath=m;function _(p){return p=p||"",e.IS_WINDOWS?(p=p.replace(/\//g,"\\"),p.replace(/\\\\+/g,"\\")):p.replace(/\/\/+/g,"/")}function S(p){return(p.mode&1)>0||(p.mode&8)>0&&p.gid===process.getgid()||(p.mode&64)>0&&p.uid===process.getuid()}function R(){var p;return(p=process.env.COMSPEC)!==null&&p!==void 0?p:"cmd.exe"}e.getCmdPath=R})(ht)),ht}var zc;function Np(){if(zc)return Se;zc=1;var e=Se&&Se.__createBinding||(Object.create?(function(h,y,v,g){g===void 0&&(g=v),Object.defineProperty(h,g,{enumerable:!0,get:function(){return y[v]}})}):(function(h,y,v,g){g===void 0&&(g=v),h[g]=y[v]})),t=Se&&Se.__setModuleDefault||(Object.create?(function(h,y){Object.defineProperty(h,"default",{enumerable:!0,value:y})}):function(h,y){h.default=y}),r=Se&&Se.__importStar||function(h){if(h&&h.__esModule)return h;var y={};if(h!=null)for(var v in h)v!=="default"&&Object.hasOwnProperty.call(h,v)&&e(y,h,v);return t(y,h),y},n=Se&&Se.__awaiter||function(h,y,v,g){function E(d){return d instanceof v?d:new v(function(w){w(d)})}return new(v||(v=Promise))(function(d,w){function f(T){try{$(g.next(T))}catch(q){w(q)}}function b(T){try{$(g.throw(T))}catch(q){w(q)}}function $(T){T.done?d(T.value):E(T.value).then(f,b)}$((g=g.apply(h,y||[])).next())})};Object.defineProperty(Se,"__esModule",{value:!0}),Se.findInPath=Se.which=Se.mkdirP=Se.rmRF=Se.mv=Se.cp=void 0;const i=Mr,a=r(ce),s=r(Ap());function l(h,y,v={}){return n(this,void 0,void 0,function*(){const{force:g,recursive:E,copySourceDirectory:d}=S(v),w=(yield s.exists(y))?yield s.stat(y):null;if(w&&w.isFile()&&!g)return;const f=w&&w.isDirectory()&&d?a.join(y,a.basename(h)):y;if(!(yield s.exists(h)))throw new Error(`no such file or directory: ${h}`);if((yield s.stat(h)).isDirectory())if(E)yield R(h,f,0,g);else throw new Error(`Failed to copy. ${h} is a directory, but tried to copy without recursive flag.`);else{if(a.relative(h,f)==="")throw new Error(`'${f}' and '${h}' are the same file`);yield p(h,f,g)}})}Se.cp=l;function c(h,y,v={}){return n(this,void 0,void 0,function*(){if(yield s.exists(y)){let g=!0;if((yield s.isDirectory(y))&&(y=a.join(y,a.basename(h)),g=yield s.exists(y)),g)if(v.force==null||v.force)yield u(y);else throw new Error("Destination already exists")}yield o(a.dirname(y)),yield s.rename(h,y)})}Se.mv=c;function u(h){return n(this,void 0,void 0,function*(){if(s.IS_WINDOWS&&/[*"<>|]/.test(h))throw new Error('File path must not contain `*`, `"`, `<`, `>` or `|` on Windows');try{yield s.rm(h,{force:!0,maxRetries:3,recursive:!0,retryDelay:300})}catch(y){throw new Error(`File was unable to be removed ${y}`)}})}Se.rmRF=u;function o(h){return n(this,void 0,void 0,function*(){i.ok(h,"a path argument must be provided"),yield s.mkdir(h,{recursive:!0})})}Se.mkdirP=o;function m(h,y){return n(this,void 0,void 0,function*(){if(!h)throw new Error("parameter 'tool' is required");if(y){const g=yield m(h,!1);if(!g)throw s.IS_WINDOWS?new Error(`Unable to locate executable file: ${h}. Please verify either the file path exists or the file can be found within a directory specified by the PATH environment variable. Also verify the file has a valid extension for an executable file.`):new Error(`Unable to locate executable file: ${h}. Please verify either the file path exists or the file can be found within a directory specified by the PATH environment variable. Also check the file mode to verify the file is executable.`);return g}const v=yield _(h);return v&&v.length>0?v[0]:""})}Se.which=m;function _(h){return n(this,void 0,void 0,function*(){if(!h)throw new Error("parameter 'tool' is required");const y=[];if(s.IS_WINDOWS&&process.env.PATHEXT)for(const E of process.env.PATHEXT.split(a.delimiter))E&&y.push(E);if(s.isRooted(h)){const E=yield s.tryGetExecutablePath(h,y);return E?[E]:[]}if(h.includes(a.sep))return[];const v=[];if(process.env.PATH)for(const E of process.env.PATH.split(a.delimiter))E&&v.push(E);const g=[];for(const E of v){const d=yield s.tryGetExecutablePath(a.join(E,h),y);d&&g.push(d)}return g})}Se.findInPath=_;function S(h){const y=h.force==null?!0:h.force,v=!!h.recursive,g=h.copySourceDirectory==null?!0:!!h.copySourceDirectory;return{force:y,recursive:v,copySourceDirectory:g}}function R(h,y,v,g){return n(this,void 0,void 0,function*(){if(v>=255)return;v++,yield o(y);const E=yield s.readdir(h);for(const d of E){const w=`${h}/${d}`,f=`${y}/${d}`;(yield s.lstat(w)).isDirectory()?yield R(w,f,v,g):yield p(w,f,g)}yield s.chmod(y,(yield s.stat(h)).mode)})}function p(h,y,v){return n(this,void 0,void 0,function*(){if((yield s.lstat(h)).isSymbolicLink()){try{yield s.lstat(y),yield s.unlink(y)}catch(E){E.code==="EPERM"&&(yield s.chmod(y,"0666"),yield s.unlink(y))}const g=yield s.readlink(h);yield s.symlink(g,y,s.IS_WINDOWS?"junction":null)}else(!(yield s.exists(y))||v)&&(yield s.copyFile(h,y))})}return Se}var Wc;function Qy(){if(Wc)return He;Wc=1;var e=He&&He.__createBinding||(Object.create?(function(p,h,y,v){v===void 0&&(v=y),Object.defineProperty(p,v,{enumerable:!0,get:function(){return h[y]}})}):(function(p,h,y,v){v===void 0&&(v=y),p[v]=h[y]})),t=He&&He.__setModuleDefault||(Object.create?(function(p,h){Object.defineProperty(p,"default",{enumerable:!0,value:h})}):function(p,h){p.default=h}),r=He&&He.__importStar||function(p){if(p&&p.__esModule)return p;var h={};if(p!=null)for(var y in p)y!=="default"&&Object.hasOwnProperty.call(p,y)&&e(h,p,y);return t(h,p),h},n=He&&He.__awaiter||function(p,h,y,v){function g(E){return E instanceof y?E:new y(function(d){d(E)})}return new(y||(y=Promise))(function(E,d){function w($){try{b(v.next($))}catch(T){d(T)}}function f($){try{b(v.throw($))}catch(T){d(T)}}function b($){$.done?E($.value):g($.value).then(w,f)}b((v=v.apply(p,h||[])).next())})};Object.defineProperty(He,"__esModule",{value:!0}),He.argStringToArray=He.ToolRunner=void 0;const i=r(it),a=r(vr),s=r(Ur),l=r(ce),c=r(Np()),u=r(Ap()),o=G_,m=process.platform==="win32";class _ extends a.EventEmitter{constructor(h,y,v){if(super(),!h)throw new Error("Parameter 'toolPath' cannot be null or empty.");this.toolPath=h,this.args=y||[],this.options=v||{}}_debug(h){this.options.listeners&&this.options.listeners.debug&&this.options.listeners.debug(h)}_getCommandString(h,y){const v=this._getSpawnFileName(),g=this._getSpawnArgs(h);let E=y?"":"[command]";if(m)if(this._isCmdFile()){E+=v;for(const d of g)E+=` ${d}`}else if(h.windowsVerbatimArguments){E+=`"${v}"`;for(const d of g)E+=` ${d}`}else{E+=this._windowsQuoteCmdArg(v);for(const d of g)E+=` ${this._windowsQuoteCmdArg(d)}`}else{E+=v;for(const d of g)E+=` ${d}`}return E}_processLineBuffer(h,y,v){try{let g=y+h.toString(),E=g.indexOf(i.EOL);for(;E>-1;){const d=g.substring(0,E);v(d),g=g.substring(E+i.EOL.length),E=g.indexOf(i.EOL)}return g}catch(g){return this._debug(`error processing line. Failed with error ${g}`),""}}_getSpawnFileName(){return m&&this._isCmdFile()?process.env.COMSPEC||"cmd.exe":this.toolPath}_getSpawnArgs(h){if(m&&this._isCmdFile()){let y=`/D /S /C "${this._windowsQuoteCmdArg(this.toolPath)}`;for(const v of this.args)y+=" ",y+=h.windowsVerbatimArguments?v:this._windowsQuoteCmdArg(v);return y+='"',[y]}return this.args}_endsWith(h,y){return h.endsWith(y)}_isCmdFile(){const h=this.toolPath.toUpperCase();return this._endsWith(h,".CMD")||this._endsWith(h,".BAT")}_windowsQuoteCmdArg(h){if(!this._isCmdFile())return this._uvQuoteCmdArg(h);if(!h)return'""';const y=[" ","	","&","(",")","[","]","{","}","^","=",";","!","'","+",",","`","~","|","<",">",'"'];let v=!1;for(const d of h)if(y.some(w=>w===d)){v=!0;break}if(!v)return h;let g='"',E=!0;for(let d=h.length;d>0;d--)g+=h[d-1],E&&h[d-1]==="\\"?g+="\\":h[d-1]==='"'?(E=!0,g+='"'):E=!1;return g+='"',g.split("").reverse().join("")}_uvQuoteCmdArg(h){if(!h)return'""';if(!h.includes(" ")&&!h.includes("	")&&!h.includes('"'))return h;if(!h.includes('"')&&!h.includes("\\"))return`"${h}"`;let y='"',v=!0;for(let g=h.length;g>0;g--)y+=h[g-1],v&&h[g-1]==="\\"?y+="\\":h[g-1]==='"'?(v=!0,y+="\\"):v=!1;return y+='"',y.split("").reverse().join("")}_cloneExecOptions(h){h=h||{};const y={cwd:h.cwd||process.cwd(),env:h.env||process.env,silent:h.silent||!1,windowsVerbatimArguments:h.windowsVerbatimArguments||!1,failOnStdErr:h.failOnStdErr||!1,ignoreReturnCode:h.ignoreReturnCode||!1,delay:h.delay||1e4};return y.outStream=h.outStream||process.stdout,y.errStream=h.errStream||process.stderr,y}_getSpawnOptions(h,y){h=h||{};const v={};return v.cwd=h.cwd,v.env=h.env,v.windowsVerbatimArguments=h.windowsVerbatimArguments||this._isCmdFile(),h.windowsVerbatimArguments&&(v.argv0=`"${y}"`),v}exec(){return n(this,void 0,void 0,function*(){return!u.isRooted(this.toolPath)&&(this.toolPath.includes("/")||m&&this.toolPath.includes("\\"))&&(this.toolPath=l.resolve(process.cwd(),this.options.cwd||process.cwd(),this.toolPath)),this.toolPath=yield c.which(this.toolPath,!0),new Promise((h,y)=>n(this,void 0,void 0,function*(){this._debug(`exec tool: ${this.toolPath}`),this._debug("arguments:");for(const b of this.args)this._debug(`   ${b}`);const v=this._cloneExecOptions(this.options);!v.silent&&v.outStream&&v.outStream.write(this._getCommandString(v)+i.EOL);const g=new R(v,this.toolPath);if(g.on("debug",b=>{this._debug(b)}),this.options.cwd&&!(yield u.exists(this.options.cwd)))return y(new Error(`The cwd: ${this.options.cwd} does not exist!`));const E=this._getSpawnFileName(),d=s.spawn(E,this._getSpawnArgs(v),this._getSpawnOptions(this.options,E));let w="";d.stdout&&d.stdout.on("data",b=>{this.options.listeners&&this.options.listeners.stdout&&this.options.listeners.stdout(b),!v.silent&&v.outStream&&v.outStream.write(b),w=this._processLineBuffer(b,w,$=>{this.options.listeners&&this.options.listeners.stdline&&this.options.listeners.stdline($)})});let f="";if(d.stderr&&d.stderr.on("data",b=>{g.processStderr=!0,this.options.listeners&&this.options.listeners.stderr&&this.options.listeners.stderr(b),!v.silent&&v.errStream&&v.outStream&&(v.failOnStdErr?v.errStream:v.outStream).write(b),f=this._processLineBuffer(b,f,$=>{this.options.listeners&&this.options.listeners.errline&&this.options.listeners.errline($)})}),d.on("error",b=>{g.processError=b.message,g.processExited=!0,g.processClosed=!0,g.CheckComplete()}),d.on("exit",b=>{g.processExitCode=b,g.processExited=!0,this._debug(`Exit code ${b} received from tool '${this.toolPath}'`),g.CheckComplete()}),d.on("close",b=>{g.processExitCode=b,g.processExited=!0,g.processClosed=!0,this._debug(`STDIO streams have closed for tool '${this.toolPath}'`),g.CheckComplete()}),g.on("done",(b,$)=>{w.length>0&&this.emit("stdline",w),f.length>0&&this.emit("errline",f),d.removeAllListeners(),b?y(b):h($)}),this.options.input){if(!d.stdin)throw new Error("child process missing stdin");d.stdin.end(this.options.input)}}))})}}He.ToolRunner=_;function S(p){const h=[];let y=!1,v=!1,g="";function E(d){v&&d!=='"'&&(g+="\\"),g+=d,v=!1}for(let d=0;d<p.length;d++){const w=p.charAt(d);if(w==='"'){v?E(w):y=!y;continue}if(w==="\\"&&v){E(w);continue}if(w==="\\"&&y){v=!0;continue}if(w===" "&&!y){g.length>0&&(h.push(g),g="");continue}E(w)}return g.length>0&&h.push(g.trim()),h}He.argStringToArray=S;class R extends a.EventEmitter{constructor(h,y){if(super(),this.processClosed=!1,this.processError="",this.processExitCode=0,this.processExited=!1,this.processStderr=!1,this.delay=1e4,this.done=!1,this.timeout=null,!y)throw new Error("toolPath must not be empty");this.options=h,this.toolPath=y,h.delay&&(this.delay=h.delay)}CheckComplete(){this.done||(this.processClosed?this._setResult():this.processExited&&(this.timeout=o.setTimeout(R.HandleTimeout,this.delay,this)))}_debug(h){this.emit("debug",h)}_setResult(){let h;this.processExited&&(this.processError?h=new Error(`There was an error when attempting to execute the process '${this.toolPath}'. This may indicate the process failed to start. Error: ${this.processError}`):this.processExitCode!==0&&!this.options.ignoreReturnCode?h=new Error(`The process '${this.toolPath}' failed with exit code ${this.processExitCode}`):this.processStderr&&this.options.failOnStdErr&&(h=new Error(`The process '${this.toolPath}' failed because one or more lines were written to the STDERR stream`))),this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.done=!0,this.emit("done",h,this.processExitCode)}static HandleTimeout(h){if(!h.done){if(!h.processClosed&&h.processExited){const y=`The STDIO streams did not close within ${h.delay/1e3} seconds of the exit event from process '${h.toolPath}'. This may indicate a child process inherited the STDIO streams and has not yet exited.`;h._debug(y)}h._setResult()}}}return He}var Xc;function fu(){if(Xc)return Be;Xc=1;var e=Be&&Be.__createBinding||(Object.create?(function(c,u,o,m){m===void 0&&(m=o),Object.defineProperty(c,m,{enumerable:!0,get:function(){return u[o]}})}):(function(c,u,o,m){m===void 0&&(m=o),c[m]=u[o]})),t=Be&&Be.__setModuleDefault||(Object.create?(function(c,u){Object.defineProperty(c,"default",{enumerable:!0,value:u})}):function(c,u){c.default=u}),r=Be&&Be.__importStar||function(c){if(c&&c.__esModule)return c;var u={};if(c!=null)for(var o in c)o!=="default"&&Object.hasOwnProperty.call(c,o)&&e(u,c,o);return t(u,c),u},n=Be&&Be.__awaiter||function(c,u,o,m){function _(S){return S instanceof o?S:new o(function(R){R(S)})}return new(o||(o=Promise))(function(S,R){function p(v){try{y(m.next(v))}catch(g){R(g)}}function h(v){try{y(m.throw(v))}catch(g){R(g)}}function y(v){v.done?S(v.value):_(v.value).then(p,h)}y((m=m.apply(c,u||[])).next())})};Object.defineProperty(Be,"__esModule",{value:!0}),Be.getExecOutput=Be.exec=void 0;const i=M_,a=r(Qy());function s(c,u,o){return n(this,void 0,void 0,function*(){const m=a.argStringToArray(c);if(m.length===0)throw new Error("Parameter 'commandLine' cannot be null or empty.");const _=m[0];return u=m.slice(1).concat(u||[]),new a.ToolRunner(_,u,o).exec()})}Be.exec=s;function l(c,u,o){var m,_;return n(this,void 0,void 0,function*(){let S="",R="";const p=new i.StringDecoder("utf8"),h=new i.StringDecoder("utf8"),y=(m=o?.listeners)===null||m===void 0?void 0:m.stdout,v=(_=o?.listeners)===null||_===void 0?void 0:_.stderr,g=f=>{R+=h.write(f),v&&v(f)},E=f=>{S+=p.write(f),y&&y(f)},d=Object.assign(Object.assign({},o?.listeners),{stdout:E,stderr:g}),w=yield s(c,u,Object.assign(Object.assign({},o),{listeners:d}));return S+=p.end(),R+=h.end(),{exitCode:w,stdout:S,stderr:R}})}return Be.getExecOutput=l,Be}var Kc;function Zy(){return Kc||(Kc=1,(function(e){var t=Ze&&Ze.__createBinding||(Object.create?(function(_,S,R,p){p===void 0&&(p=R);var h=Object.getOwnPropertyDescriptor(S,R);(!h||("get"in h?!S.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return S[R]}}),Object.defineProperty(_,p,h)}):(function(_,S,R,p){p===void 0&&(p=R),_[p]=S[R]})),r=Ze&&Ze.__setModuleDefault||(Object.create?(function(_,S){Object.defineProperty(_,"default",{enumerable:!0,value:S})}):function(_,S){_.default=S}),n=Ze&&Ze.__importStar||function(_){if(_&&_.__esModule)return _;var S={};if(_!=null)for(var R in _)R!=="default"&&Object.prototype.hasOwnProperty.call(_,R)&&t(S,_,R);return r(S,_),S},i=Ze&&Ze.__awaiter||function(_,S,R,p){function h(y){return y instanceof R?y:new R(function(v){v(y)})}return new(R||(R=Promise))(function(y,v){function g(w){try{d(p.next(w))}catch(f){v(f)}}function E(w){try{d(p.throw(w))}catch(f){v(f)}}function d(w){w.done?y(w.value):h(w.value).then(g,E)}d((p=p.apply(_,S||[])).next())})},a=Ze&&Ze.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(e,"__esModule",{value:!0}),e.getDetails=e.isLinux=e.isMacOS=e.isWindows=e.arch=e.platform=void 0;const s=a(it),l=n(fu()),c=()=>i(void 0,void 0,void 0,function*(){const{stdout:_}=yield l.getExecOutput('powershell -command "(Get-CimInstance -ClassName Win32_OperatingSystem).Version"',void 0,{silent:!0}),{stdout:S}=yield l.getExecOutput('powershell -command "(Get-CimInstance -ClassName Win32_OperatingSystem).Caption"',void 0,{silent:!0});return{name:S.trim(),version:_.trim()}}),u=()=>i(void 0,void 0,void 0,function*(){var _,S,R,p;const{stdout:h}=yield l.getExecOutput("sw_vers",void 0,{silent:!0}),y=(S=(_=h.match(/ProductVersion:\s*(.+)/))===null||_===void 0?void 0:_[1])!==null&&S!==void 0?S:"";return{name:(p=(R=h.match(/ProductName:\s*(.+)/))===null||R===void 0?void 0:R[1])!==null&&p!==void 0?p:"",version:y}}),o=()=>i(void 0,void 0,void 0,function*(){const{stdout:_}=yield l.getExecOutput("lsb_release",["-i","-r","-s"],{silent:!0}),[S,R]=_.trim().split(`
`);return{name:S,version:R}});e.platform=s.default.platform(),e.arch=s.default.arch(),e.isWindows=e.platform==="win32",e.isMacOS=e.platform==="darwin",e.isLinux=e.platform==="linux";function m(){return i(this,void 0,void 0,function*(){return Object.assign(Object.assign({},yield e.isWindows?c():e.isMacOS?u():o()),{platform:e.platform,arch:e.arch,isWindows:e.isWindows,isMacOS:e.isMacOS,isLinux:e.isLinux})})}e.getDetails=m})(Ze)),Ze}var Yc;function gr(){return Yc||(Yc=1,(function(e){var t=ft&&ft.__createBinding||(Object.create?(function(C,B,G,J){J===void 0&&(J=G);var se=Object.getOwnPropertyDescriptor(B,G);(!se||("get"in se?!B.__esModule:se.writable||se.configurable))&&(se={enumerable:!0,get:function(){return B[G]}}),Object.defineProperty(C,J,se)}):(function(C,B,G,J){J===void 0&&(J=G),C[J]=B[G]})),r=ft&&ft.__setModuleDefault||(Object.create?(function(C,B){Object.defineProperty(C,"default",{enumerable:!0,value:B})}):function(C,B){C.default=B}),n=ft&&ft.__importStar||function(C){if(C&&C.__esModule)return C;var B={};if(C!=null)for(var G in C)G!=="default"&&Object.prototype.hasOwnProperty.call(C,G)&&t(B,C,G);return r(B,C),B},i=ft&&ft.__awaiter||function(C,B,G,J){function se(W){return W instanceof G?W:new G(function(ie){ie(W)})}return new(G||(G=Promise))(function(W,ie){function oe(j){try{U(J.next(j))}catch(k){ie(k)}}function ve(j){try{U(J.throw(j))}catch(k){ie(k)}}function U(j){j.done?W(j.value):se(j.value).then(oe,ve)}U((J=J.apply(C,B||[])).next())})};Object.defineProperty(e,"__esModule",{value:!0}),e.platform=e.toPlatformPath=e.toWin32Path=e.toPosixPath=e.markdownSummary=e.summary=e.getIDToken=e.getState=e.saveState=e.group=e.endGroup=e.startGroup=e.info=e.notice=e.warning=e.error=e.debug=e.isDebug=e.setFailed=e.setCommandEcho=e.setOutput=e.getBooleanInput=e.getMultilineInput=e.getInput=e.addPath=e.setSecret=e.exportVariable=e.ExitCode=void 0;const a=xy(),s=Dy(),l=lu(),c=n(it),u=n(ce),o=Yy();var m;(function(C){C[C.Success=0]="Success",C[C.Failure=1]="Failure"})(m||(e.ExitCode=m={}));function _(C,B){const G=(0,l.toCommandValue)(B);if(process.env[C]=G,process.env.GITHUB_ENV||"")return(0,s.issueFileCommand)("ENV",(0,s.prepareKeyValueMessage)(C,B));(0,a.issueCommand)("set-env",{name:C},G)}e.exportVariable=_;function S(C){(0,a.issueCommand)("add-mask",{},C)}e.setSecret=S;function R(C){process.env.GITHUB_PATH||""?(0,s.issueFileCommand)("PATH",C):(0,a.issueCommand)("add-path",{},C),process.env.PATH=`${C}${u.delimiter}${process.env.PATH}`}e.addPath=R;function p(C,B){const G=process.env[`INPUT_${C.replace(/ /g,"_").toUpperCase()}`]||"";if(B&&B.required&&!G)throw new Error(`Input required and not supplied: ${C}`);return B&&B.trimWhitespace===!1?G:G.trim()}e.getInput=p;function h(C,B){const G=p(C,B).split(`
`).filter(J=>J!=="");return B&&B.trimWhitespace===!1?G:G.map(J=>J.trim())}e.getMultilineInput=h;function y(C,B){const G=["true","True","TRUE"],J=["false","False","FALSE"],se=p(C,B);if(G.includes(se))return!0;if(J.includes(se))return!1;throw new TypeError(`Input does not meet YAML 1.2 "Core Schema" specification: ${C}
Support boolean input list: \`true | True | TRUE | false | False | FALSE\``)}e.getBooleanInput=y;function v(C,B){if(process.env.GITHUB_OUTPUT||"")return(0,s.issueFileCommand)("OUTPUT",(0,s.prepareKeyValueMessage)(C,B));process.stdout.write(c.EOL),(0,a.issueCommand)("set-output",{name:C},(0,l.toCommandValue)(B))}e.setOutput=v;function g(C){(0,a.issue)("echo",C?"on":"off")}e.setCommandEcho=g;function E(C){process.exitCode=m.Failure,f(C)}e.setFailed=E;function d(){return process.env.RUNNER_DEBUG==="1"}e.isDebug=d;function w(C){(0,a.issueCommand)("debug",{},C)}e.debug=w;function f(C,B={}){(0,a.issueCommand)("error",(0,l.toCommandProperties)(B),C instanceof Error?C.toString():C)}e.error=f;function b(C,B={}){(0,a.issueCommand)("warning",(0,l.toCommandProperties)(B),C instanceof Error?C.toString():C)}e.warning=b;function $(C,B={}){(0,a.issueCommand)("notice",(0,l.toCommandProperties)(B),C instanceof Error?C.toString():C)}e.notice=$;function T(C){process.stdout.write(C+c.EOL)}e.info=T;function q(C){(0,a.issue)("group",C)}e.startGroup=q;function V(){(0,a.issue)("endgroup")}e.endGroup=V;function M(C,B){return i(this,void 0,void 0,function*(){q(C);let G;try{G=yield B()}finally{V()}return G})}e.group=M;function P(C,B){if(process.env.GITHUB_STATE||"")return(0,s.issueFileCommand)("STATE",(0,s.prepareKeyValueMessage)(C,B));(0,a.issueCommand)("save-state",{name:C},(0,l.toCommandValue)(B))}e.saveState=P;function I(C){return process.env[`STATE_${C}`]||""}e.getState=I;function N(C){return i(this,void 0,void 0,function*(){return yield o.OidcClient.getIDToken(C)})}e.getIDToken=N;var D=Vc();Object.defineProperty(e,"summary",{enumerable:!0,get:function(){return D.summary}});var x=Vc();Object.defineProperty(e,"markdownSummary",{enumerable:!0,get:function(){return x.markdownSummary}});var F=Jy();Object.defineProperty(e,"toPosixPath",{enumerable:!0,get:function(){return F.toPosixPath}}),Object.defineProperty(e,"toWin32Path",{enumerable:!0,get:function(){return F.toWin32Path}}),Object.defineProperty(e,"toPlatformPath",{enumerable:!0,get:function(){return F.toPlatformPath}}),e.platform=n(Zy())})(ft)),ft}var Ee=gr();function Lp(e){const t=Ee.getInput(e.toLowerCase());if(t!=="false"&&t!=="")return t}var Gi={};const ev=[{name:"Agola CI",constant:"AGOLA",env:"AGOLA_GIT_REF",pr:"AGOLA_PULL_REQUEST_ID"},{name:"Appcircle",constant:"APPCIRCLE",env:"AC_APPCIRCLE",pr:{env:"AC_GIT_PR",ne:"false"}},{name:"AppVeyor",constant:"APPVEYOR",env:"APPVEYOR",pr:"APPVEYOR_PULL_REQUEST_NUMBER"},{name:"AWS CodeBuild",constant:"CODEBUILD",env:"CODEBUILD_BUILD_ARN",pr:{env:"CODEBUILD_WEBHOOK_EVENT",any:["PULL_REQUEST_CREATED","PULL_REQUEST_UPDATED","PULL_REQUEST_REOPENED"]}},{name:"Azure Pipelines",constant:"AZURE_PIPELINES",env:"TF_BUILD",pr:{BUILD_REASON:"PullRequest"}},{name:"Bamboo",constant:"BAMBOO",env:"bamboo_planKey"},{name:"Bitbucket Pipelines",constant:"BITBUCKET",env:"BITBUCKET_COMMIT",pr:"BITBUCKET_PR_ID"},{name:"Bitrise",constant:"BITRISE",env:"BITRISE_IO",pr:"BITRISE_PULL_REQUEST"},{name:"Buddy",constant:"BUDDY",env:"BUDDY_WORKSPACE_ID",pr:"BUDDY_EXECUTION_PULL_REQUEST_ID"},{name:"Buildkite",constant:"BUILDKITE",env:"BUILDKITE",pr:{env:"BUILDKITE_PULL_REQUEST",ne:"false"}},{name:"CircleCI",constant:"CIRCLE",env:"CIRCLECI",pr:"CIRCLE_PULL_REQUEST"},{name:"Cirrus CI",constant:"CIRRUS",env:"CIRRUS_CI",pr:"CIRRUS_PR"},{name:"Cloudflare Pages",constant:"CLOUDFLARE_PAGES",env:"CF_PAGES"},{name:"Cloudflare Workers",constant:"CLOUDFLARE_WORKERS",env:"WORKERS_CI"},{name:"Codefresh",constant:"CODEFRESH",env:"CF_BUILD_ID",pr:{any:["CF_PULL_REQUEST_NUMBER","CF_PULL_REQUEST_ID"]}},{name:"Codemagic",constant:"CODEMAGIC",env:"CM_BUILD_ID",pr:"CM_PULL_REQUEST"},{name:"Codeship",constant:"CODESHIP",env:{CI_NAME:"codeship"}},{name:"Drone",constant:"DRONE",env:"DRONE",pr:{DRONE_BUILD_EVENT:"pull_request"}},{name:"dsari",constant:"DSARI",env:"DSARI"},{name:"Earthly",constant:"EARTHLY",env:"EARTHLY_CI"},{name:"Expo Application Services",constant:"EAS",env:"EAS_BUILD"},{name:"Gerrit",constant:"GERRIT",env:"GERRIT_PROJECT"},{name:"Gitea Actions",constant:"GITEA_ACTIONS",env:"GITEA_ACTIONS"},{name:"GitHub Actions",constant:"GITHUB_ACTIONS",env:"GITHUB_ACTIONS",pr:{GITHUB_EVENT_NAME:"pull_request"}},{name:"GitLab CI",constant:"GITLAB",env:"GITLAB_CI",pr:"CI_MERGE_REQUEST_ID"},{name:"GoCD",constant:"GOCD",env:"GO_PIPELINE_LABEL"},{name:"Google Cloud Build",constant:"GOOGLE_CLOUD_BUILD",env:"BUILDER_OUTPUT"},{name:"Harness CI",constant:"HARNESS",env:"HARNESS_BUILD_ID"},{name:"Heroku",constant:"HEROKU",env:{env:"NODE",includes:"/app/.heroku/node/bin/node"}},{name:"Hudson",constant:"HUDSON",env:"HUDSON_URL"},{name:"Jenkins",constant:"JENKINS",env:["JENKINS_URL","BUILD_ID"],pr:{any:["ghprbPullId","CHANGE_ID"]}},{name:"LayerCI",constant:"LAYERCI",env:"LAYERCI",pr:"LAYERCI_PULL_REQUEST"},{name:"Magnum CI",constant:"MAGNUM",env:"MAGNUM"},{name:"Netlify CI",constant:"NETLIFY",env:"NETLIFY",pr:{env:"PULL_REQUEST",ne:"false"}},{name:"Nevercode",constant:"NEVERCODE",env:"NEVERCODE",pr:{env:"NEVERCODE_PULL_REQUEST",ne:"false"}},{name:"Prow",constant:"PROW",env:"PROW_JOB_ID"},{name:"ReleaseHub",constant:"RELEASEHUB",env:"RELEASE_BUILD_ID"},{name:"Render",constant:"RENDER",env:"RENDER",pr:{IS_PULL_REQUEST:"true"}},{name:"Sail CI",constant:"SAIL",env:"SAILCI",pr:"SAIL_PULL_REQUEST_NUMBER"},{name:"Screwdriver",constant:"SCREWDRIVER",env:"SCREWDRIVER",pr:{env:"SD_PULL_REQUEST",ne:"false"}},{name:"Semaphore",constant:"SEMAPHORE",env:"SEMAPHORE",pr:"PULL_REQUEST_NUMBER"},{name:"Sourcehut",constant:"SOURCEHUT",env:{CI_NAME:"sourcehut"}},{name:"Strider CD",constant:"STRIDER",env:"STRIDER"},{name:"TaskCluster",constant:"TASKCLUSTER",env:["TASK_ID","RUN_ID"]},{name:"TeamCity",constant:"TEAMCITY",env:"TEAMCITY_VERSION"},{name:"Travis CI",constant:"TRAVIS",env:"TRAVIS",pr:{env:"TRAVIS_PULL_REQUEST",ne:"false"}},{name:"Vela",constant:"VELA",env:"VELA",pr:{VELA_PULL_REQUEST:"1"}},{name:"Vercel",constant:"VERCEL",env:{any:["NOW_BUILDER","VERCEL"]},pr:"VERCEL_GIT_PULL_REQUEST_ID"},{name:"Visual Studio App Center",constant:"APPCENTER",env:"APPCENTER_BUILD_ID"},{name:"Woodpecker",constant:"WOODPECKER",env:{CI:"woodpecker"},pr:{CI_BUILD_EVENT:"pull_request"}},{name:"Xcode Cloud",constant:"XCODE_CLOUD",env:"CI_XCODE_PROJECT",pr:"CI_PULL_REQUEST_NUMBER"},{name:"Xcode Server",constant:"XCODE_SERVER",env:"XCS"}];var Jc;function tv(){return Jc||(Jc=1,(function(e){const t=ev,r=process.env;Object.defineProperty(e,"_vendors",{value:t.map(function(a){return a.constant})}),e.name=null,e.isPR=null,e.id=null,t.forEach(function(a){const l=(Array.isArray(a.env)?a.env:[a.env]).every(function(c){return n(c)});e[a.constant]=l,l&&(e.name=a.name,e.isPR=i(a),e.id=a.constant)}),e.isCI=!!(r.CI!=="false"&&(r.BUILD_ID||r.BUILD_NUMBER||r.CI||r.CI_APP_ID||r.CI_BUILD_ID||r.CI_BUILD_NUMBER||r.CI_NAME||r.CONTINUOUS_INTEGRATION||r.RUN_ID||e.name));function n(a){return typeof a=="string"?!!r[a]:"env"in a?r[a.env]&&r[a.env].includes(a.includes):"any"in a?a.any.some(function(s){return!!r[s]}):Object.keys(a).every(function(s){return r[s]===a[s]})}function i(a){switch(typeof a.pr){case"string":return!!r[a.pr];case"object":return"env"in a.pr?"any"in a.pr?a.pr.any.some(function(s){return r[a.pr.env]===s}):a.pr.env in r&&r[a.pr.env]!==a.pr.ne:"any"in a.pr?a.pr.any.some(function(s){return!!r[s]}):n(a.pr);default:return null}}})(Gi)),Gi}var gn=tv();const At=$e(gn),{GITHUB_ACTIONS:Un}=At;function Ne(e){return Un?Ee.error(e):console.log(`\x1B[31m${e}\x1B[0m`)}function rv(e){return console.log(`\x1B[32m${e}\x1B[0m`)}function ye(e){return Un?Ee.warning(e):console.log(`\x1B[33m${e}\x1B[0m`)}function Zt(e){return Un?Ee.notice(e):console.log(`\x1B[94m${e}\x1B[0m`)}function Y(e){return Un?Ee.info(e):console.log(e)}var Ht={exports:{}},Vi,Qc;function nv(){if(Qc)return Vi;Qc=1,Vi=n,n.sync=i;var e=De;function t(a,s){var l=s.pathExt!==void 0?s.pathExt:process.env.PATHEXT;if(!l||(l=l.split(";"),l.indexOf("")!==-1))return!0;for(var c=0;c<l.length;c++){var u=l[c].toLowerCase();if(u&&a.substr(-u.length).toLowerCase()===u)return!0}return!1}function r(a,s,l){return!a.isSymbolicLink()&&!a.isFile()?!1:t(s,l)}function n(a,s,l){e.stat(a,function(c,u){l(c,c?!1:r(u,a,s))})}function i(a,s){return r(e.statSync(a),a,s)}return Vi}var Bi,Zc;function iv(){if(Zc)return Bi;Zc=1,Bi=t,t.sync=r;var e=De;function t(a,s,l){e.stat(a,function(c,u){l(c,c?!1:n(u,s))})}function r(a,s){return n(e.statSync(a),s)}function n(a,s){return a.isFile()&&i(a,s)}function i(a,s){var l=a.mode,c=a.uid,u=a.gid,o=s.uid!==void 0?s.uid:process.getuid&&process.getuid(),m=s.gid!==void 0?s.gid:process.getgid&&process.getgid(),_=parseInt("100",8),S=parseInt("010",8),R=parseInt("001",8),p=_|S,h=l&R||l&S&&u===m||l&_&&c===o||l&p&&o===0;return h}return Bi}var Hi,el;function sv(){if(el)return Hi;el=1;var e;process.platform==="win32"||at.TESTING_WINDOWS?e=nv():e=iv(),Hi=t,t.sync=r;function t(n,i,a){if(typeof i=="function"&&(a=i,i={}),!a){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(s,l){t(n,i||{},function(c,u){c?l(c):s(u)})})}e(n,i||{},function(s,l){s&&(s.code==="EACCES"||i&&i.ignoreErrors)&&(s=null,l=!1),a(s,l)})}function r(n,i){try{return e.sync(n,i||{})}catch(a){if(i&&i.ignoreErrors||a.code==="EACCES")return!1;throw a}}return Hi}var zi,tl;function ov(){if(tl)return zi;tl=1;const e=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",t=ce,r=e?";":":",n=sv(),i=c=>Object.assign(new Error(`not found: ${c}`),{code:"ENOENT"}),a=(c,u)=>{const o=u.colon||r,m=c.match(/\//)||e&&c.match(/\\/)?[""]:[...e?[process.cwd()]:[],...(u.path||process.env.PATH||"").split(o)],_=e?u.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",S=e?_.split(o):[""];return e&&c.indexOf(".")!==-1&&S[0]!==""&&S.unshift(""),{pathEnv:m,pathExt:S,pathExtExe:_}},s=(c,u,o)=>{typeof u=="function"&&(o=u,u={}),u||(u={});const{pathEnv:m,pathExt:_,pathExtExe:S}=a(c,u),R=[],p=y=>new Promise((v,g)=>{if(y===m.length)return u.all&&R.length?v(R):g(i(c));const E=m[y],d=/^".*"$/.test(E)?E.slice(1,-1):E,w=t.join(d,c),f=!d&&/^\.[\\\/]/.test(c)?c.slice(0,2)+w:w;v(h(f,y,0))}),h=(y,v,g)=>new Promise((E,d)=>{if(g===_.length)return E(p(v+1));const w=_[g];n(y+w,{pathExt:S},(f,b)=>{if(!f&&b)if(u.all)R.push(y+w);else return E(y+w);return E(h(y,v,g+1))})});return o?p(0).then(y=>o(null,y),o):p(0)},l=(c,u)=>{u=u||{};const{pathEnv:o,pathExt:m,pathExtExe:_}=a(c,u),S=[];for(let R=0;R<o.length;R++){const p=o[R],h=/^".*"$/.test(p)?p.slice(1,-1):p,y=t.join(h,c),v=!h&&/^\.[\\\/]/.test(c)?c.slice(0,2)+y:y;for(let g=0;g<m.length;g++){const E=v+m[g];try{if(n.sync(E,{pathExt:_}))if(u.all)S.push(E);else return E}catch{}}}if(u.all&&S.length)return S;if(u.nothrow)return null;throw i(c)};return zi=s,s.sync=l,zi}var Yr={exports:{}},rl;function av(){if(rl)return Yr.exports;rl=1;const e=(t={})=>{const r=t.env||process.env;return(t.platform||process.platform)!=="win32"?"PATH":Object.keys(r).reverse().find(i=>i.toUpperCase()==="PATH")||"Path"};return Yr.exports=e,Yr.exports.default=e,Yr.exports}var Wi,nl;function uv(){if(nl)return Wi;nl=1;const e=ce,t=ov(),r=av();function n(a,s){const l=a.options.env||process.env,c=process.cwd(),u=a.options.cwd!=null,o=u&&process.chdir!==void 0&&!process.chdir.disabled;if(o)try{process.chdir(a.options.cwd)}catch{}let m;try{m=t.sync(a.command,{path:l[r({env:l})],pathExt:s?e.delimiter:void 0})}catch{}finally{o&&process.chdir(c)}return m&&(m=e.resolve(u?a.options.cwd:"",m)),m}function i(a){return n(a)||n(a,!0)}return Wi=i,Wi}var Jr={},il;function cv(){if(il)return Jr;il=1;const e=/([()\][%!^"`<>&|;, *?])/g;function t(n){return n=n.replace(e,"^$1"),n}function r(n,i){return n=`${n}`,n=n.replace(/(?=(\\+?)?)\1"/g,'$1$1\\"'),n=n.replace(/(?=(\\+?)?)\1$/,"$1$1"),n=`"${n}"`,n=n.replace(e,"^$1"),i&&(n=n.replace(e,"^$1")),n}return Jr.command=t,Jr.argument=r,Jr}var Xi,sl;function lv(){return sl||(sl=1,Xi=/^#!(.*)/),Xi}var Ki,ol;function fv(){if(ol)return Ki;ol=1;const e=lv();return Ki=(t="")=>{const r=t.match(e);if(!r)return null;const[n,i]=r[0].replace(/#! ?/,"").split(" "),a=n.split("/").pop();return a==="env"?i:i?`${a} ${i}`:a},Ki}var Yi,al;function dv(){if(al)return Yi;al=1;const e=De,t=fv();function r(n){const a=Buffer.alloc(150);let s;try{s=e.openSync(n,"r"),e.readSync(s,a,0,150,0),e.closeSync(s)}catch{}return t(a.toString())}return Yi=r,Yi}var Ji,ul;function hv(){if(ul)return Ji;ul=1;const e=ce,t=uv(),r=cv(),n=dv(),i=process.platform==="win32",a=/\.(?:com|exe)$/i,s=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function l(o){o.file=t(o);const m=o.file&&n(o.file);return m?(o.args.unshift(o.file),o.command=m,t(o)):o.file}function c(o){if(!i)return o;const m=l(o),_=!a.test(m);if(o.options.forceShell||_){const S=s.test(m);o.command=e.normalize(o.command),o.command=r.command(o.command),o.args=o.args.map(p=>r.argument(p,S));const R=[o.command].concat(o.args).join(" ");o.args=["/d","/s","/c",`"${R}"`],o.command=process.env.comspec||"cmd.exe",o.options.windowsVerbatimArguments=!0}return o}function u(o,m,_){m&&!Array.isArray(m)&&(_=m,m=null),m=m?m.slice(0):[],_=Object.assign({},_);const S={command:o,args:m,options:_,file:void 0,original:{command:o,args:m}};return _.shell?S:c(S)}return Ji=u,Ji}var Qi,cl;function pv(){if(cl)return Qi;cl=1;const e=process.platform==="win32";function t(a,s){return Object.assign(new Error(`${s} ${a.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${s} ${a.command}`,path:a.command,spawnargs:a.args})}function r(a,s){if(!e)return;const l=a.emit;a.emit=function(c,u){if(c==="exit"){const o=n(u,s);if(o)return l.call(a,"error",o)}return l.apply(a,arguments)}}function n(a,s){return e&&a===1&&!s.file?t(s.original,"spawn"):null}function i(a,s){return e&&a===1&&!s.file?t(s.original,"spawnSync"):null}return Qi={hookChildProcess:r,verifyENOENT:n,verifyENOENTSync:i,notFoundError:t},Qi}var ll;function mv(){if(ll)return Ht.exports;ll=1;const e=Ur,t=hv(),r=pv();function n(a,s,l){const c=t(a,s,l),u=e.spawn(c.command,c.args,c.options);return r.hookChildProcess(u,c),u}function i(a,s,l){const c=t(a,s,l),u=e.spawnSync(c.command,c.args,c.options);return u.error=u.error||r.verifyENOENTSync(u.status,c),u}return Ht.exports=n,Ht.exports.spawn=n,Ht.exports.sync=i,Ht.exports._parse=t,Ht.exports._enoent=r,Ht.exports}var _v=mv();const yv=$e(_v);function vv(e){const t=typeof e=="string"?`
`:10,r=typeof e=="string"?"\r":13;return e[e.length-1]===t&&(e=e.slice(0,-1)),e[e.length-1]===r&&(e=e.slice(0,-1)),e}function Cp(e={}){const{env:t=process.env,platform:r=process.platform}=e;return r!=="win32"?"PATH":Object.keys(t).reverse().find(n=>n.toUpperCase()==="PATH")||"Path"}const wv=({cwd:e=Tt.cwd(),path:t=Tt.env[Cp()],preferLocal:r=!0,execPath:n=Tt.execPath,addExecPath:i=!0}={})=>{const a=e instanceof URL?vp(e):e,s=hr.resolve(a),l=[];return r&&gv(l,s),i&&Ev(l,n,s),[...l,t].join(hr.delimiter)},gv=(e,t)=>{let r;for(;r!==t;)e.push(hr.join(t,"node_modules/.bin")),r=t,t=hr.resolve(t,"..")},Ev=(e,t,r)=>{const n=t instanceof URL?vp(t):t;e.push(hr.resolve(r,n,".."))},Sv=({env:e=Tt.env,...t}={})=>{e={...e};const r=Cp({env:e});return t.path=e[r],e[r]=wv(t),e},Rv=(e,t,r,n)=>{if(r==="length"||r==="prototype"||r==="arguments"||r==="caller")return;const i=Object.getOwnPropertyDescriptor(e,r),a=Object.getOwnPropertyDescriptor(t,r);!bv(i,a)&&n||Object.defineProperty(e,r,a)},bv=function(e,t){return e===void 0||e.configurable||e.writable===t.writable&&e.enumerable===t.enumerable&&e.configurable===t.configurable&&(e.writable||e.value===t.value)},$v=(e,t)=>{const r=Object.getPrototypeOf(t);r!==Object.getPrototypeOf(e)&&Object.setPrototypeOf(e,r)},Ov=(e,t)=>`/* Wrapped ${e}*/
${t}`,Iv=Object.getOwnPropertyDescriptor(Function.prototype,"toString"),Pv=Object.getOwnPropertyDescriptor(Function.prototype.toString,"name"),Tv=(e,t,r)=>{const n=r===""?"":`with ${r.trim()}() `,i=Ov.bind(null,n,t.toString());Object.defineProperty(i,"name",Pv),Object.defineProperty(e,"toString",{...Iv,value:i})};function Av(e,t,{ignoreNonConfigurable:r=!1}={}){const{name:n}=e;for(const i of Reflect.ownKeys(t))Rv(e,t,i,r);return $v(e,t),Tv(e,t,n),e}const En=new WeakMap,xp=(e,t={})=>{if(typeof e!="function")throw new TypeError("Expected a function");let r,n=0;const i=e.displayName||e.name||"<anonymous>",a=function(...s){if(En.set(a,++n),n===1)r=e.apply(this,s),e=null;else if(t.throw===!0)throw new Error(`Function \`${i}\` can only be called once`);return r};return Av(a,e),En.set(a,n),a};xp.callCount=e=>{if(!En.has(e))throw new Error(`The given function \`${e.name}\` is not wrapped by the \`onetime\` package`);return En.get(e)};const Nv=()=>{const e=Fp-Dp+1;return Array.from({length:e},Lv)},Lv=(e,t)=>({name:`SIGRT${t+1}`,number:Dp+t,action:"terminate",description:"Application-specific signal (realtime)",standard:"posix"}),Dp=34,Fp=64,Cv=[{name:"SIGHUP",number:1,action:"terminate",description:"Terminal closed",standard:"posix"},{name:"SIGINT",number:2,action:"terminate",description:"User interruption with CTRL-C",standard:"ansi"},{name:"SIGQUIT",number:3,action:"core",description:"User interruption with CTRL-\\",standard:"posix"},{name:"SIGILL",number:4,action:"core",description:"Invalid machine instruction",standard:"ansi"},{name:"SIGTRAP",number:5,action:"core",description:"Debugger breakpoint",standard:"posix"},{name:"SIGABRT",number:6,action:"core",description:"Aborted",standard:"ansi"},{name:"SIGIOT",number:6,action:"core",description:"Aborted",standard:"bsd"},{name:"SIGBUS",number:7,action:"core",description:"Bus error due to misaligned, non-existing address or paging error",standard:"bsd"},{name:"SIGEMT",number:7,action:"terminate",description:"Command should be emulated but is not implemented",standard:"other"},{name:"SIGFPE",number:8,action:"core",description:"Floating point arithmetic error",standard:"ansi"},{name:"SIGKILL",number:9,action:"terminate",description:"Forced termination",standard:"posix",forced:!0},{name:"SIGUSR1",number:10,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGSEGV",number:11,action:"core",description:"Segmentation fault",standard:"ansi"},{name:"SIGUSR2",number:12,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGPIPE",number:13,action:"terminate",description:"Broken pipe or socket",standard:"posix"},{name:"SIGALRM",number:14,action:"terminate",description:"Timeout or timer",standard:"posix"},{name:"SIGTERM",number:15,action:"terminate",description:"Termination",standard:"ansi"},{name:"SIGSTKFLT",number:16,action:"terminate",description:"Stack is empty or overflowed",standard:"other"},{name:"SIGCHLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"posix"},{name:"SIGCLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"other"},{name:"SIGCONT",number:18,action:"unpause",description:"Unpaused",standard:"posix",forced:!0},{name:"SIGSTOP",number:19,action:"pause",description:"Paused",standard:"posix",forced:!0},{name:"SIGTSTP",number:20,action:"pause",description:'Paused using CTRL-Z or "suspend"',standard:"posix"},{name:"SIGTTIN",number:21,action:"pause",description:"Background process cannot read terminal input",standard:"posix"},{name:"SIGBREAK",number:21,action:"terminate",description:"User interruption with CTRL-BREAK",standard:"other"},{name:"SIGTTOU",number:22,action:"pause",description:"Background process cannot write to terminal output",standard:"posix"},{name:"SIGURG",number:23,action:"ignore",description:"Socket received out-of-band data",standard:"bsd"},{name:"SIGXCPU",number:24,action:"core",description:"Process timed out",standard:"bsd"},{name:"SIGXFSZ",number:25,action:"core",description:"File too big",standard:"bsd"},{name:"SIGVTALRM",number:26,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGPROF",number:27,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGWINCH",number:28,action:"ignore",description:"Terminal window size changed",standard:"bsd"},{name:"SIGIO",number:29,action:"terminate",description:"I/O is available",standard:"other"},{name:"SIGPOLL",number:29,action:"terminate",description:"Watched event",standard:"other"},{name:"SIGINFO",number:29,action:"ignore",description:"Request for process information",standard:"other"},{name:"SIGPWR",number:30,action:"terminate",description:"Device running out of power",standard:"systemv"},{name:"SIGSYS",number:31,action:"core",description:"Invalid system call",standard:"other"},{name:"SIGUNUSED",number:31,action:"terminate",description:"Invalid system call",standard:"other"}],qp=()=>{const e=Nv();return[...Cv,...e].map(xv)},xv=({name:e,number:t,description:r,action:n,forced:i=!1,standard:a})=>{const{signals:{[e]:s}}=gp,l=s!==void 0;return{name:e,number:l?s:t,description:r,supported:l,action:n,forced:i,standard:a}},Dv=()=>{const e=qp();return Object.fromEntries(e.map(Fv))},Fv=({name:e,number:t,description:r,supported:n,action:i,forced:a,standard:s})=>[e,{name:e,number:t,description:r,supported:n,action:i,forced:a,standard:s}],qv=Dv(),kv=()=>{const e=qp(),t=Fp+1,r=Array.from({length:t},(n,i)=>jv(i,e));return Object.assign({},...r)},jv=(e,t)=>{const r=Uv(e,t);if(r===void 0)return{};const{name:n,description:i,supported:a,action:s,forced:l,standard:c}=r;return{[e]:{name:n,number:e,description:i,supported:a,action:s,forced:l,standard:c}}},Uv=(e,t)=>{const r=t.find(({name:n})=>gp.signals[n]===e);return r!==void 0?r:t.find(n=>n.number===e)};kv();const Mv=({timedOut:e,timeout:t,errorCode:r,signal:n,signalDescription:i,exitCode:a,isCanceled:s})=>e?`timed out after ${t} milliseconds`:s?"was canceled":r!==void 0?`failed with ${r}`:n!==void 0?`was killed with ${n} (${i})`:a!==void 0?`failed with exit code ${a}`:"failed",Sn=({stdout:e,stderr:t,all:r,error:n,signal:i,exitCode:a,command:s,escapedCommand:l,timedOut:c,isCanceled:u,killed:o,parsed:{options:{timeout:m,cwd:_=Tt.cwd()}}})=>{a=a===null?void 0:a,i=i===null?void 0:i;const S=i===void 0?void 0:qv[i].description,R=n&&n.code,h=`Command ${Mv({timedOut:c,timeout:m,errorCode:R,signal:i,signalDescription:S,exitCode:a,isCanceled:u})}: ${s}`,y=Object.prototype.toString.call(n)==="[object Error]",v=y?`${h}
${n.message}`:h,g=[v,t,e].filter(Boolean).join(`
`);return y?(n.originalMessage=n.message,n.message=g):n=new Error(g),n.shortMessage=v,n.command=s,n.escapedCommand=l,n.exitCode=a,n.signal=i,n.signalDescription=S,n.stdout=e,n.stderr=t,n.cwd=_,r!==void 0&&(n.all=r),"bufferedData"in n&&delete n.bufferedData,n.failed=!0,n.timedOut=!!c,n.isCanceled=u,n.killed=o&&!c,n},cn=["stdin","stdout","stderr"],Gv=e=>cn.some(t=>e[t]!==void 0),Vv=e=>{if(!e)return;const{stdio:t}=e;if(t===void 0)return cn.map(n=>e[n]);if(Gv(e))throw new Error(`It's not possible to provide \`stdio\` in combination with one of ${cn.map(n=>`\`${n}\``).join(", ")}`);if(typeof t=="string")return t;if(!Array.isArray(t))throw new TypeError(`Expected \`stdio\` to be of type \`string\` or \`Array\`, got \`${typeof t}\``);const r=Math.max(t.length,cn.length);return Array.from({length:r},(n,i)=>t[i])};var zt={exports:{}},Zi={exports:{}},fl;function Bv(){return fl||(fl=1,(function(e){e.exports=["SIGABRT","SIGALRM","SIGHUP","SIGINT","SIGTERM"],process.platform!=="win32"&&e.exports.push("SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT"),process.platform==="linux"&&e.exports.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT","SIGUNUSED")})(Zi)),Zi.exports}var dl;function Hv(){if(dl)return zt.exports;dl=1;var e=at.process;const t=function(h){return h&&typeof h=="object"&&typeof h.removeListener=="function"&&typeof h.emit=="function"&&typeof h.reallyExit=="function"&&typeof h.listeners=="function"&&typeof h.kill=="function"&&typeof h.pid=="number"&&typeof h.on=="function"};if(!t(e))zt.exports=function(){return function(){}};else{var r=Mr,n=Bv(),i=/^win/i.test(e.platform),a=vr;typeof a!="function"&&(a=a.EventEmitter);var s;e.__signal_exit_emitter__?s=e.__signal_exit_emitter__:(s=e.__signal_exit_emitter__=new a,s.count=0,s.emitted={}),s.infinite||(s.setMaxListeners(1/0),s.infinite=!0),zt.exports=function(h,y){if(!t(at.process))return function(){};r.equal(typeof h,"function","a callback must be provided for exit handler"),o===!1&&m();var v="exit";y&&y.alwaysLast&&(v="afterexit");var g=function(){s.removeListener(v,h),s.listeners("exit").length===0&&s.listeners("afterexit").length===0&&l()};return s.on(v,h),g};var l=function(){!o||!t(at.process)||(o=!1,n.forEach(function(y){try{e.removeListener(y,u[y])}catch{}}),e.emit=R,e.reallyExit=_,s.count-=1)};zt.exports.unload=l;var c=function(y,v,g){s.emitted[y]||(s.emitted[y]=!0,s.emit(y,v,g))},u={};n.forEach(function(h){u[h]=function(){if(t(at.process)){var v=e.listeners(h);v.length===s.count&&(l(),c("exit",null,h),c("afterexit",null,h),i&&h==="SIGHUP"&&(h="SIGINT"),e.kill(e.pid,h))}}}),zt.exports.signals=function(){return n};var o=!1,m=function(){o||!t(at.process)||(o=!0,s.count+=1,n=n.filter(function(y){try{return e.on(y,u[y]),!0}catch{return!1}}),e.emit=p,e.reallyExit=S)};zt.exports.load=m;var _=e.reallyExit,S=function(y){t(at.process)&&(e.exitCode=y||0,c("exit",e.exitCode,null),c("afterexit",e.exitCode,null),_.call(e,e.exitCode))},R=e.emit,p=function(y,v){if(y==="exit"&&t(at.process)){v!==void 0&&(e.exitCode=v);var g=R.apply(this,arguments);return c("exit",e.exitCode,null),c("afterexit",e.exitCode,null),g}else return R.apply(this,arguments)}}return zt.exports}var zv=Hv();const Wv=$e(zv),Xv=1e3*5,Kv=(e,t="SIGTERM",r={})=>{const n=e(t);return Yv(e,t,r,n),n},Yv=(e,t,r,n)=>{if(!Jv(t,r,n))return;const i=Zv(r),a=setTimeout(()=>{e("SIGKILL")},i);a.unref&&a.unref()},Jv=(e,{forceKillAfterTimeout:t},r)=>Qv(e)&&t!==!1&&r,Qv=e=>e===wp.constants.signals.SIGTERM||typeof e=="string"&&e.toUpperCase()==="SIGTERM",Zv=({forceKillAfterTimeout:e=!0})=>{if(e===!0)return Xv;if(!Number.isFinite(e)||e<0)throw new TypeError(`Expected the \`forceKillAfterTimeout\` option to be a non-negative integer, got \`${e}\` (${typeof e})`);return e},ew=(e,t)=>{e.kill()&&(t.isCanceled=!0)},tw=(e,t,r)=>{e.kill(t),r(Object.assign(new Error("Timed out"),{timedOut:!0,signal:t}))},rw=(e,{timeout:t,killSignal:r="SIGTERM"},n)=>{if(t===0||t===void 0)return n;let i;const a=new Promise((l,c)=>{i=setTimeout(()=>{tw(e,r,c)},t)}),s=n.finally(()=>{clearTimeout(i)});return Promise.race([a,s])},nw=({timeout:e})=>{if(e!==void 0&&(!Number.isFinite(e)||e<0))throw new TypeError(`Expected the \`timeout\` option to be a non-negative integer, got \`${e}\` (${typeof e})`)},iw=async(e,{cleanup:t,detached:r},n)=>{if(!t||r)return n;const i=Wv(()=>{e.kill()});return n.finally(()=>{i()})};function du(e){return e!==null&&typeof e=="object"&&typeof e.pipe=="function"}function hl(e){return du(e)&&e.writable!==!1&&typeof e._write=="function"&&typeof e._writableState=="object"}const sw=e=>e instanceof B_&&typeof e.then=="function",es=(e,t,r)=>{if(typeof r=="string")return e[t].pipe(z_(r)),e;if(hl(r))return e[t].pipe(r),e;if(!sw(r))throw new TypeError("The second argument must be a string, a stream or an Execa child process.");if(!hl(r.stdin))throw new TypeError("The target child process's stdin must be available.");return e[t].pipe(r.stdin),r},ow=e=>{e.stdout!==null&&(e.pipeStdout=es.bind(void 0,e,"stdout")),e.stderr!==null&&(e.pipeStderr=es.bind(void 0,e,"stderr")),e.all!==void 0&&(e.pipeAll=es.bind(void 0,e,"all"))};var cr={exports:{}},ts,pl;function aw(){if(pl)return ts;pl=1;const{PassThrough:e}=Gr;return ts=t=>{t={...t};const{array:r}=t;let{encoding:n}=t;const i=n==="buffer";let a=!1;r?a=!(n||i):n=n||"utf8",i&&(n=null);const s=new e({objectMode:a});n&&s.setEncoding(n);let l=0;const c=[];return s.on("data",u=>{c.push(u),a?l=c.length:l+=u.length}),s.getBufferedValue=()=>r?c:i?Buffer.concat(c,l):c.join(""),s.getBufferedLength=()=>l,s},ts}var ml;function uw(){if(ml)return cr.exports;ml=1;const{constants:e}=Y_,t=Gr,{promisify:r}=Cn,n=aw(),i=r(t.pipeline);class a extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}}async function s(l,c){if(!l)throw new Error("Expected a stream");c={maxBuffer:1/0,...c};const{maxBuffer:u}=c,o=n(c);return await new Promise((m,_)=>{const S=R=>{R&&o.getBufferedLength()<=e.MAX_LENGTH&&(R.bufferedData=o.getBufferedValue()),_(R)};(async()=>{try{await i(l,o),m()}catch(R){S(R)}})(),o.on("data",()=>{o.getBufferedLength()>u&&S(new a)})}),o.getBufferedValue()}return cr.exports=s,cr.exports.buffer=(l,c)=>s(l,{...c,encoding:"buffer"}),cr.exports.array=(l,c)=>s(l,{...c,array:!0}),cr.exports.MaxBufferError=a,cr.exports}var cw=uw();const _l=$e(cw);var rs,yl;function lw(){if(yl)return rs;yl=1;const{PassThrough:e}=Gr;return rs=function(){var t=[],r=new e({objectMode:!0});return r.setMaxListeners(0),r.add=n,r.isEmpty=i,r.on("unpipe",a),Array.prototype.slice.call(arguments).forEach(n),r;function n(s){return Array.isArray(s)?(s.forEach(n),this):(t.push(s),s.once("end",a.bind(null,s)),s.once("error",r.emit.bind(r,"error")),s.pipe(r,{end:!1}),this)}function i(){return t.length==0}function a(s){t=t.filter(function(l){return l!==s}),!t.length&&r.readable&&r.end()}},rs}var fw=lw();const dw=$e(fw),kp=e=>{if(e!==void 0)throw new TypeError("The `input` and `inputFile` options cannot be both set.")},hw=({input:e,inputFile:t})=>typeof t!="string"?e:(kp(e),X_(t)),pw=e=>{const t=hw(e);if(du(t))throw new TypeError("The `input` option cannot be a stream in sync mode");return t},mw=({input:e,inputFile:t})=>typeof t!="string"?e:(kp(e),W_(t)),_w=(e,t)=>{const r=mw(t);r!==void 0&&(du(r)?r.pipe(e.stdin):e.stdin.end(r))},yw=(e,{all:t})=>{if(!t||!e.stdout&&!e.stderr)return;const r=dw();return e.stdout&&r.add(e.stdout),e.stderr&&r.add(e.stderr),r},ns=async(e,t)=>{if(!(!e||t===void 0)){e.destroy();try{return await t}catch(r){return r.bufferedData}}},is=(e,{encoding:t,buffer:r,maxBuffer:n})=>{if(!(!e||!r))return t?_l(e,{encoding:t,maxBuffer:n}):_l.buffer(e,{maxBuffer:n})},vw=async({stdout:e,stderr:t,all:r},{encoding:n,buffer:i,maxBuffer:a},s)=>{const l=is(e,{encoding:n,buffer:i,maxBuffer:a}),c=is(t,{encoding:n,buffer:i,maxBuffer:a}),u=is(r,{encoding:n,buffer:i,maxBuffer:a*2});try{return await Promise.all([s,l,c,u])}catch(o){return Promise.all([{error:o,signal:o.signal,timedOut:o.timedOut},ns(e,l),ns(t,c),ns(r,u)])}},ww=(async()=>{})().constructor.prototype,gw=["then","catch","finally"].map(e=>[e,Reflect.getOwnPropertyDescriptor(ww,e)]),vl=(e,t)=>{for(const[r,n]of gw){const i=typeof t=="function"?(...a)=>Reflect.apply(n.value,t(),a):n.value.bind(t);Reflect.defineProperty(e,r,{...n,value:i})}},Ew=e=>new Promise((t,r)=>{e.on("exit",(n,i)=>{t({exitCode:n,signal:i})}),e.on("error",n=>{r(n)}),e.stdin&&e.stdin.on("error",n=>{r(n)})}),jp=(e,t=[])=>Array.isArray(t)?[e,...t]:[e],Sw=/^[\w.-]+$/,Rw=/"/g,bw=e=>typeof e!="string"||Sw.test(e)?e:`"${e.replace(Rw,'\\"')}"`,Up=(e,t)=>jp(e,t).join(" "),Mp=(e,t)=>jp(e,t).map(r=>bw(r)).join(" "),$w=/ +/g,Gp=e=>{const t=[];for(const r of e.trim().split($w)){const n=t[t.length-1];n&&n.endsWith("\\")?t[t.length-1]=`${n.slice(0,-1)} ${r}`:t.push(r)}return t},Ow=J_("execa").enabled,Qr=(e,t)=>String(e).padStart(t,"0"),Iw=()=>{const e=new Date;return`${Qr(e.getHours(),2)}:${Qr(e.getMinutes(),2)}:${Qr(e.getSeconds(),2)}.${Qr(e.getMilliseconds(),3)}`},Vp=(e,{verbose:t})=>{t&&Tt.stderr.write(`[${Iw()}] ${e}
`)},Pw=1e3*1e3*100,Tw=({env:e,extendEnv:t,preferLocal:r,localDir:n,execPath:i})=>{const a=t?{...Tt.env,...e}:e;return r?Sv({env:a,cwd:n,execPath:i}):a},Bp=(e,t,r={})=>{const n=yv._parse(e,t,r);return e=n.command,t=n.args,r=n.options,r={maxBuffer:Pw,buffer:!0,stripFinalNewline:!0,extendEnv:!0,preferLocal:!1,localDir:r.cwd||Tt.cwd(),execPath:Tt.execPath,encoding:"utf8",reject:!0,cleanup:!0,all:!1,windowsHide:!0,verbose:Ow,...r},r.env=Tw(r),r.stdio=Vv(r),Tt.platform==="win32"&&hr.basename(e,".exe")==="cmd"&&t.unshift("/q"),{file:e,args:t,options:r,parsed:n}},qr=(e,t,r)=>typeof t!="string"&&!V_.isBuffer(t)?r===void 0?void 0:"":e.stripFinalNewline?vv(t):t;function le(e,t,r){const n=Bp(e,t,r),i=Up(e,t),a=Mp(e,t);Vp(a,n.options),nw(n.options);let s;try{s=Wa.spawn(n.file,n.args,n.options)}catch(S){const R=new Wa.ChildProcess,p=Promise.reject(Sn({error:S,stdout:"",stderr:"",all:"",command:i,escapedCommand:a,parsed:n,timedOut:!1,isCanceled:!1,killed:!1}));return vl(R,p),R}const l=Ew(s),c=rw(s,n.options,l),u=iw(s,n.options,c),o={isCanceled:!1};s.kill=Kv.bind(null,s.kill.bind(s)),s.cancel=ew.bind(null,s,o);const _=xp(async()=>{const[{error:S,exitCode:R,signal:p,timedOut:h},y,v,g]=await vw(s,n.options,u),E=qr(n.options,y),d=qr(n.options,v),w=qr(n.options,g);if(S||R!==0||p!==null){const f=Sn({error:S,exitCode:R,signal:p,stdout:E,stderr:d,all:w,command:i,escapedCommand:a,parsed:n,timedOut:h,isCanceled:o.isCanceled||(n.options.signal?n.options.signal.aborted:!1),killed:s.killed});if(!n.options.reject)return f;throw f}return{command:i,escapedCommand:a,exitCode:0,stdout:E,stderr:d,all:w,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}});return _w(s,n.options),s.all=yw(s,n.options),ow(s),vl(s,_),s}function ze(e,t,r){const n=Bp(e,t,r),i=Up(e,t),a=Mp(e,t);Vp(a,n.options);const s=pw(n.options);let l;try{l=Wa.spawnSync(n.file,n.args,{...n.options,input:s})}catch(o){throw Sn({error:o,stdout:"",stderr:"",all:"",command:i,escapedCommand:a,parsed:n,timedOut:!1,isCanceled:!1,killed:!1})}const c=qr(n.options,l.stdout,l.error),u=qr(n.options,l.stderr,l.error);if(l.error||l.status!==0||l.signal!==null){const o=Sn({stdout:c,stderr:u,error:l.error,signal:l.signal,exitCode:l.status,command:i,escapedCommand:a,parsed:n,timedOut:l.error&&l.error.code==="ETIMEDOUT",isCanceled:!1,killed:l.signal!==null});if(!n.options.reject)return o;throw o}return{command:i,escapedCommand:a,exitCode:0,stdout:c,stderr:u,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}}function Aw(e,t){const[r,...n]=Gp(e);return le(r,n,t)}function Nw(e,t){const[r,...n]=Gp(e);return ze(r,n,t)}var pt={},Wt={},wl;function Lw(){if(wl)return Wt;wl=1,Object.defineProperty(Wt,"__esModule",{value:!0}),Wt.sync=Wt.isexe=void 0;const e=De,t=Ep,r=async(s,l={})=>{const{ignoreErrors:c=!1}=l;try{return i(await(0,t.stat)(s),l)}catch(u){const o=u;if(c||o.code==="EACCES")return!1;throw o}};Wt.isexe=r;const n=(s,l={})=>{const{ignoreErrors:c=!1}=l;try{return i((0,e.statSync)(s),l)}catch(u){const o=u;if(c||o.code==="EACCES")return!1;throw o}};Wt.sync=n;const i=(s,l)=>s.isFile()&&a(s,l),a=(s,l)=>{const c=l.uid??process.getuid?.(),u=l.groups??process.getgroups?.()??[],o=l.gid??process.getgid?.()??u[0];if(c===void 0||o===void 0)throw new Error("cannot get uid or gid");const m=new Set([o,...u]),_=s.mode,S=s.uid,R=s.gid,p=parseInt("100",8),h=parseInt("010",8),y=parseInt("001",8),v=p|h;return!!(_&y||_&h&&m.has(R)||_&p&&S===c||_&v&&c===0)};return Wt}var Xt={},gl;function Cw(){if(gl)return Xt;gl=1,Object.defineProperty(Xt,"__esModule",{value:!0}),Xt.sync=Xt.isexe=void 0;const e=De,t=Ep,r=async(s,l={})=>{const{ignoreErrors:c=!1}=l;try{return a(await(0,t.stat)(s),s,l)}catch(u){const o=u;if(c||o.code==="EACCES")return!1;throw o}};Xt.isexe=r;const n=(s,l={})=>{const{ignoreErrors:c=!1}=l;try{return a((0,e.statSync)(s),s,l)}catch(u){const o=u;if(c||o.code==="EACCES")return!1;throw o}};Xt.sync=n;const i=(s,l)=>{const{pathExt:c=process.env.PATHEXT||""}=l,u=c.split(";");if(u.indexOf("")!==-1)return!0;for(let o=0;o<u.length;o++){const m=u[o].toLowerCase(),_=s.substring(s.length-m.length).toLowerCase();if(m&&_===m)return!0}return!1},a=(s,l,c)=>s.isFile()&&i(l,c);return Xt}var ss={},El;function xw(){return El||(El=1,Object.defineProperty(ss,"__esModule",{value:!0})),ss}var Sl;function Dw(){return Sl||(Sl=1,(function(e){var t=pt&&pt.__createBinding||(Object.create?(function(u,o,m,_){_===void 0&&(_=m);var S=Object.getOwnPropertyDescriptor(o,m);(!S||("get"in S?!o.__esModule:S.writable||S.configurable))&&(S={enumerable:!0,get:function(){return o[m]}}),Object.defineProperty(u,_,S)}):(function(u,o,m,_){_===void 0&&(_=m),u[_]=o[m]})),r=pt&&pt.__setModuleDefault||(Object.create?(function(u,o){Object.defineProperty(u,"default",{enumerable:!0,value:o})}):function(u,o){u.default=o}),n=pt&&pt.__importStar||function(u){if(u&&u.__esModule)return u;var o={};if(u!=null)for(var m in u)m!=="default"&&Object.prototype.hasOwnProperty.call(u,m)&&t(o,u,m);return r(o,u),o},i=pt&&pt.__exportStar||function(u,o){for(var m in u)m!=="default"&&!Object.prototype.hasOwnProperty.call(o,m)&&t(o,u,m)};Object.defineProperty(e,"__esModule",{value:!0}),e.sync=e.isexe=e.posix=e.win32=void 0;const a=n(Lw());e.posix=a;const s=n(Cw());e.win32=s,i(xw(),e);const c=(process.env._ISEXE_TEST_PLATFORM_||process.platform)==="win32"?s:a;e.isexe=c.isexe,e.sync=c.sync})(pt)),pt}var os,Rl;function Fw(){if(Rl)return os;Rl=1;const{isexe:e,sync:t}=Dw(),{join:r,delimiter:n,sep:i,posix:a}=ce,s=process.platform==="win32",l=new RegExp(`[${a.sep}${i===a.sep?"":i}]`.replace(/(\\)/g,"\\$1")),c=new RegExp(`^\\.${l.source}`),u=R=>Object.assign(new Error(`not found: ${R}`),{code:"ENOENT"}),o=(R,{path:p=process.env.PATH,pathExt:h=process.env.PATHEXT,delimiter:y=n})=>{const v=R.match(l)?[""]:[...s?[process.cwd()]:[],...(p||"").split(y)];if(s){const g=h||[".EXE",".CMD",".BAT",".COM"].join(y),E=g.split(y).flatMap(d=>[d,d.toLowerCase()]);return R.includes(".")&&E[0]!==""&&E.unshift(""),{pathEnv:v,pathExt:E,pathExtExe:g}}return{pathEnv:v,pathExt:[""]}},m=(R,p)=>{const h=/^".*"$/.test(R)?R.slice(1,-1):R;return(!h&&c.test(p)?p.slice(0,2):"")+r(h,p)},_=async(R,p={})=>{const{pathEnv:h,pathExt:y,pathExtExe:v}=o(R,p),g=[];for(const E of h){const d=m(E,R);for(const w of y){const f=d+w;if(await e(f,{pathExt:v,ignoreErrors:!0})){if(!p.all)return f;g.push(f)}}}if(p.all&&g.length)return g;if(p.nothrow)return null;throw u(R)},S=(R,p={})=>{const{pathEnv:h,pathExt:y,pathExtExe:v}=o(R,p),g=[];for(const E of h){const d=m(E,R);for(const w of y){const f=d+w;if(t(f,{pathExt:v,ignoreErrors:!0})){if(!p.all)return f;g.push(f)}}}if(p.all&&g.length)return g;if(p.nothrow)return null;throw u(R)};return os=_,_.sync=S,os}var qw=Fw();const fe=$e(qw);let Ar;function Hp(e,t=["-NoProfile","-NoLogo","-NonInteractive"],r={stdio:"inherit"}){return le(kw(),[...t,"-c",e],r)}function kw(){if(Ar===void 0){const e=fe.sync("pwsh",{nothrow:!0});e!==null&&(Ar=e);const t=fe.sync("powershell",{nothrow:!0});t!==null&&(Ar=t)}if(Ar===void 0)throw new Error("Could not find powershell");return Ar}function mt(e,t,r,n){Object.defineProperty(e,t,{get:r,set:n,enumerable:!0,configurable:!0})}function zp(){return fe.sync("sudo",{nothrow:!0})!==null}function Er(){return process.getuid?.()===0||!!process.env.CI}function Sr(){return Er()&&zp()}function jw(e){return Sr()?`sudo ${e}`:e}function pe(e,t=[],r=st){return Sr()?Nw(Wp(e,t),r):ze(e,hu(t),r)}function yt(e,t=[],r=st){return Sr()?Aw(Wp(e,t),r):le(e,hu(t),r)}function Wp(e,t){return`sudo ${hu([e,...t]).join(" ")}`}function hu(e){return e.map(t=>`'${t}'`)}async function Uw(){try{return await le("fltmc"),!0}catch{return!1}}async function Mw(){if(process.platform!=="win32")return!1;try{return await le("fsutil",["dirty","query",process.env.systemdrive??""]),!0}catch(e){return e.code==="ENOENT"?Uw():!1}}function Gw(){return process.platform==="win32"?Xp():Er()}async function Rr(e){if((process.platform==="linux"||process.platform==="darwin")&&Sr()&&process.env.SUDO_USER!==void 0){let t=De.statSync(e).isDirectory();await yt("chown",[...t?["-R"]:[],process.env.SUDO_USER,e],st)}}var as,Kt={};mt(Kt,"hasSudo",()=>zp),mt(Kt,"isRoot",()=>Er),mt(Kt,"isSudo",()=>Sr),mt(Kt,"prependSudo",()=>jw),mt(Kt,"defaultExecOptions",()=>st),mt(Kt,"execRootSync",()=>pe),mt(Kt,"execRoot",()=>yt);let st={stdio:"inherit",shell:!0};mt(as={},"isAdminWindows",()=>Xp),mt(as,"isAdminPosix",()=>Vw),mt(as,"isAdmin",()=>Gw);let Xp=Mw,Vw=Er;mt({},"grantUserWriteAccess",()=>Rr);var us,bl;function Bw(){return bl||(bl=1,us=function(){}),us}var cs,$l;function rr(){if($l)return cs;$l=1;var e=Bw()();return cs=function(t){return t!==e&&t!==null},cs}var ls,Ol;function Kp(){if(Ol)return ls;Ol=1;var e=rr(),t=Array.prototype.forEach,r=Object.create,n=function(i,a){var s;for(s in i)a[s]=i[s]};return ls=function(i){var a=r(null);return t.call(arguments,function(s){e(s)&&n(Object(s),a)}),a},ls}var fs,Il;function Hw(){return Il||(Il=1,fs=function(){var e=Math.sign;return typeof e!="function"?!1:e(10)===1&&e(-20)===-1}),fs}var ds,Pl;function zw(){return Pl||(Pl=1,ds=function(e){return e=Number(e),isNaN(e)||e===0?e:e>0?1:-1}),ds}var hs,Tl;function Ww(){return Tl||(Tl=1,hs=Hw()()?Math.sign:zw()),hs}var ps,Al;function Xw(){if(Al)return ps;Al=1;var e=Ww(),t=Math.abs,r=Math.floor;return ps=function(n){return isNaN(n)?0:(n=Number(n),n===0||!isFinite(n)?n:e(n)*r(t(n)))},ps}var ms,Nl;function nr(){if(Nl)return ms;Nl=1;var e=Xw(),t=Math.max;return ms=function(r){return t(0,e(r))},ms}var _s,Ll;function Yp(){if(Ll)return _s;Ll=1;var e=nr();return _s=function(t,r,n){var i;return isNaN(t)?(i=r,i>=0?n&&i?i-1:i:1):t===!1?!1:e(t)},_s}var ys,Cl;function Ut(){return Cl||(Cl=1,ys=function(e){if(typeof e!="function")throw new TypeError(e+" is not a function");return e}),ys}var vs,xl;function br(){if(xl)return vs;xl=1;var e=rr();return vs=function(t){if(!e(t))throw new TypeError("Cannot use null or undefined");return t},vs}var ws,Dl;function Kw(){if(Dl)return ws;Dl=1;var e=Ut(),t=br(),r=Function.prototype.bind,n=Function.prototype.call,i=Object.keys,a=Object.prototype.propertyIsEnumerable;return ws=function(s,l){return function(c,u){var o,m=arguments[2],_=arguments[3];return c=Object(t(c)),e(u),o=i(c),_&&o.sort(typeof _=="function"?r.call(_,c):void 0),typeof s!="function"&&(s=o[s]),n.call(s,o,function(S,R){return a.call(c,S)?n.call(u,m,c[S],S,c,R):l})}},ws}var gs,Fl;function Mn(){return Fl||(Fl=1,gs=Kw()("forEach")),gs}var ql={},kl;function ir(){return kl||(kl=1),ql}var Es={exports:{}},Ss,jl;function Yw(){return jl||(jl=1,Ss=function(){var e=Object.assign,t;return typeof e!="function"?!1:(t={foo:"raz"},e(t,{bar:"dwa"},{trzy:"trzy"}),t.foo+t.bar+t.trzy==="razdwatrzy")}),Ss}var Rs,Ul;function Jw(){return Ul||(Ul=1,Rs=function(){try{return Object.keys("primitive"),!0}catch{return!1}}),Rs}var bs,Ml;function Qw(){if(Ml)return bs;Ml=1;var e=rr(),t=Object.keys;return bs=function(r){return t(e(r)?Object(r):r)},bs}var $s,Gl;function Zw(){return Gl||(Gl=1,$s=Jw()()?Object.keys:Qw()),$s}var Os,Vl;function eg(){if(Vl)return Os;Vl=1;var e=Zw(),t=br(),r=Math.max;return Os=function(n,i){var a,s,l=r(arguments.length,2),c;for(n=Object(t(n)),c=function(u){try{n[u]=i[u]}catch(o){a||(a=o)}},s=1;s<l;++s)i=arguments[s],e(i).forEach(c);if(a!==void 0)throw a;return n},Os}var Is,Bl;function Jp(){return Bl||(Bl=1,Is=Yw()()?Object.assign:eg()),Is}var Ps,Hl;function tg(){if(Hl)return Ps;Hl=1;var e=rr(),t={function:!0,object:!0};return Ps=function(r){return e(r)&&t[typeof r]||!1},Ps}var zl;function rg(){return zl||(zl=1,(function(e){var t=Jp(),r=tg(),n=rr(),i=Error.captureStackTrace;e.exports=function(a){var s=new Error(a),l=arguments[1],c=arguments[2];return n(c)||r(l)&&(c=l,l=null),n(c)&&t(s,c),n(l)&&(s.code=l),i&&i(s,e.exports),s}})(Es)),Es.exports}var Zr={exports:{}},Ts,Wl;function Qp(){if(Wl)return Ts;Wl=1;var e=br(),t=Object.defineProperty,r=Object.getOwnPropertyDescriptor,n=Object.getOwnPropertyNames,i=Object.getOwnPropertySymbols;return Ts=function(a,s){var l,c=Object(e(s));if(a=Object(e(a)),n(c).forEach(function(u){try{t(a,u,r(s,u))}catch(o){l=o}}),typeof i=="function"&&i(c).forEach(function(u){try{t(a,u,r(s,u))}catch(o){l=o}}),l!==void 0)throw l;return a},Ts}var Xl;function Zp(){if(Xl)return Zr.exports;Xl=1;var e=nr(),t=function(s,l){return l},r,n,i,a;try{Object.defineProperty(t,"length",{configurable:!0,writable:!1,enumerable:!1,value:1})}catch{}return t.length===1?(r={configurable:!0,writable:!1,enumerable:!1},n=Object.defineProperty,Zr.exports=function(s,l){return l=e(l),s.length===l?s:(r.value=l,n(s,"length",r))}):(a=Qp(),i=(function(){var s=[];return function(l){var c,u=0;if(s[l])return s[l];for(c=[];l--;)c.push("a"+(++u).toString(36));return new Function("fn","return function ("+c.join(", ")+") { return fn.apply(this, arguments); };")}})(),Zr.exports=function(s,l){var c;if(l=e(l),s.length===l)return s;c=i(l)(s);try{a(c,s)}catch{}return c}),Zr.exports}var As={exports:{}},Ns,Kl;function em(){if(Kl)return Ns;Kl=1;var e=void 0;return Ns=function(t){return t!==e&&t!==null},Ns}var Ls,Yl;function ng(){if(Yl)return Ls;Yl=1;var e=em(),t={object:!0,function:!0,undefined:!0};return Ls=function(r){return e(r)?hasOwnProperty.call(t,typeof r):!1},Ls}var Cs,Jl;function ig(){if(Jl)return Cs;Jl=1;var e=ng();return Cs=function(t){if(!e(t))return!1;try{return t.constructor?t.constructor.prototype===t:!1}catch{return!1}},Cs}var xs,Ql;function sg(){if(Ql)return xs;Ql=1;var e=ig();return xs=function(t){if(typeof t!="function"||!hasOwnProperty.call(t,"length"))return!1;try{if(typeof t.length!="number"||typeof t.call!="function"||typeof t.apply!="function")return!1}catch{return!1}return!e(t)},xs}var Ds,Zl;function og(){if(Zl)return Ds;Zl=1;var e=sg(),t=/^\s*class[\s{/}]/,r=Function.prototype.toString;return Ds=function(n){return!(!e(n)||t.test(r.call(n)))},Ds}var Fs,ef;function ag(){if(ef)return Fs;ef=1;var e="razdwatrzy";return Fs=function(){return typeof e.contains!="function"?!1:e.contains("dwa")===!0&&e.contains("foo")===!1},Fs}var qs,tf;function ug(){if(tf)return qs;tf=1;var e=String.prototype.indexOf;return qs=function(t){return e.call(this,t,arguments[1])>-1},qs}var ks,rf;function cg(){return rf||(rf=1,ks=ag()()?String.prototype.contains:ug()),ks}var nf;function sr(){if(nf)return As.exports;nf=1;var e=em(),t=og(),r=Jp(),n=Kp(),i=cg(),a=As.exports=function(s,l){var c,u,o,m,_;return arguments.length<2||typeof s!="string"?(m=l,l=s,s=null):m=arguments[2],e(s)?(c=i.call(s,"c"),u=i.call(s,"e"),o=i.call(s,"w")):(c=o=!0,u=!1),_={value:l,configurable:c,enumerable:u,writable:o},m?r(n(m),_):_};return a.gs=function(s,l,c){var u,o,m,_;return typeof s!="string"?(m=c,c=l,l=s,s=null):m=arguments[3],e(l)?t(l)?e(c)?t(c)||(m=c,c=void 0):c=void 0:(m=l,l=c=void 0):l=void 0,e(s)?(u=i.call(s,"c"),o=i.call(s,"e")):(u=!0,o=!1),_={get:l,set:c,configurable:u,enumerable:o},m?r(n(m),_):_},As.exports}var en={exports:{}},sf;function lg(){return sf||(sf=1,(function(e,t){var r=sr(),n=Ut(),i=Function.prototype.apply,a=Function.prototype.call,s=Object.create,l=Object.defineProperty,c=Object.defineProperties,u=Object.prototype.hasOwnProperty,o={configurable:!0,enumerable:!1,writable:!0},m,_,S,R,p,h,y;m=function(v,g){var E;return n(g),u.call(this,"__ee__")?E=this.__ee__:(E=o.value=s(null),l(this,"__ee__",o),o.value=null),E[v]?typeof E[v]=="object"?E[v].push(g):E[v]=[E[v],g]:E[v]=g,this},_=function(v,g){var E,d;return n(g),d=this,m.call(this,v,E=function(){S.call(d,v,E),i.call(g,this,arguments)}),E.__eeOnceListener__=g,this},S=function(v,g){var E,d,w,f;if(n(g),!u.call(this,"__ee__"))return this;if(E=this.__ee__,!E[v])return this;if(d=E[v],typeof d=="object")for(f=0;w=d[f];++f)(w===g||w.__eeOnceListener__===g)&&(d.length===2?E[v]=d[f?0:1]:d.splice(f,1));else(d===g||d.__eeOnceListener__===g)&&delete E[v];return this},R=function(v){var g,E,d,w,f;if(u.call(this,"__ee__")&&(w=this.__ee__[v],!!w))if(typeof w=="object"){for(E=arguments.length,f=new Array(E-1),g=1;g<E;++g)f[g-1]=arguments[g];for(w=w.slice(),g=0;d=w[g];++g)i.call(d,this,f)}else switch(arguments.length){case 1:a.call(w,this);break;case 2:a.call(w,this,arguments[1]);break;case 3:a.call(w,this,arguments[1],arguments[2]);break;default:for(E=arguments.length,f=new Array(E-1),g=1;g<E;++g)f[g-1]=arguments[g];i.call(w,this,f)}},p={on:m,once:_,off:S,emit:R},h={on:r(m),once:r(_),off:r(S),emit:r(R)},y=c({},h),e.exports=t=function(v){return v==null?s(y):c(Object(v),h)},t.methods=p})(en,en.exports)),en.exports}var js,of;function fg(){return of||(of=1,js=function(){var e=Array.from,t,r;return typeof e!="function"?!1:(t=["raz","dwa"],r=e(t),!!(r&&r!==t&&r[1]==="dwa"))}),js}var Us,af;function dg(){return af||(af=1,Us=function(){return typeof globalThis!="object"||!globalThis?!1:globalThis.Array===Array}),Us}var Ms,uf;function hg(){if(uf)return Ms;uf=1;var e=function(){if(typeof self=="object"&&self)return self;if(typeof window=="object"&&window)return window;throw new Error("Unable to resolve global `this`")};return Ms=(function(){if(this)return this;try{Object.defineProperty(Object.prototype,"__global__",{get:function(){return this},configurable:!0})}catch{return e()}try{return __global__||e()}finally{delete Object.prototype.__global__}})(),Ms}var Gs,cf;function Gn(){return cf||(cf=1,Gs=dg()()?globalThis:hg()),Gs}var Vs,lf;function pg(){if(lf)return Vs;lf=1;var e=Gn(),t={object:!0,symbol:!0};return Vs=function(){var r=e.Symbol,n;if(typeof r!="function")return!1;n=r("test symbol");try{String(n)}catch{return!1}return!(!t[typeof r.iterator]||!t[typeof r.toPrimitive]||!t[typeof r.toStringTag])},Vs}var Bs,ff;function mg(){return ff||(ff=1,Bs=function(e){return e?typeof e=="symbol"?!0:!e.constructor||e.constructor.name!=="Symbol"?!1:e[e.constructor.toStringTag]==="Symbol":!1}),Bs}var Hs,df;function tm(){if(df)return Hs;df=1;var e=mg();return Hs=function(t){if(!e(t))throw new TypeError(t+" is not a symbol");return t},Hs}var zs,hf;function _g(){if(hf)return zs;hf=1;var e=sr(),t=Object.create,r=Object.defineProperty,n=Object.prototype,i=t(null);return zs=function(a){for(var s=0,l,c;i[a+(s||"")];)++s;return a+=s||"",i[a]=!0,l="@@"+a,r(n,l,e.gs(null,function(u){c||(c=!0,r(this,l,e(u)),c=!1)})),l},zs}var Ws,pf;function yg(){if(pf)return Ws;pf=1;var e=sr(),t=Gn().Symbol;return Ws=function(r){return Object.defineProperties(r,{hasInstance:e("",t&&t.hasInstance||r("hasInstance")),isConcatSpreadable:e("",t&&t.isConcatSpreadable||r("isConcatSpreadable")),iterator:e("",t&&t.iterator||r("iterator")),match:e("",t&&t.match||r("match")),replace:e("",t&&t.replace||r("replace")),search:e("",t&&t.search||r("search")),species:e("",t&&t.species||r("species")),split:e("",t&&t.split||r("split")),toPrimitive:e("",t&&t.toPrimitive||r("toPrimitive")),toStringTag:e("",t&&t.toStringTag||r("toStringTag")),unscopables:e("",t&&t.unscopables||r("unscopables"))})},Ws}var Xs,mf;function vg(){if(mf)return Xs;mf=1;var e=sr(),t=tm(),r=Object.create(null);return Xs=function(n){return Object.defineProperties(n,{for:e(function(i){return r[i]?r[i]:r[i]=n(String(i))}),keyFor:e(function(i){var a;t(i);for(a in r)if(r[a]===i)return a})})},Xs}var Ks,_f;function wg(){if(_f)return Ks;_f=1;var e=sr(),t=tm(),r=Gn().Symbol,n=_g(),i=yg(),a=vg(),s=Object.create,l=Object.defineProperties,c=Object.defineProperty,u,o,m;if(typeof r=="function")try{String(r()),m=!0}catch{}else r=null;return o=function(S){if(this instanceof o)throw new TypeError("Symbol is not a constructor");return u(S)},Ks=u=function _(S){var R;if(this instanceof _)throw new TypeError("Symbol is not a constructor");return m?r(S):(R=s(o.prototype),S=S===void 0?"":String(S),l(R,{__description__:e("",S),__name__:e("",n(S))}))},i(u),a(u),l(o.prototype,{constructor:e(u),toString:e("",function(){return this.__name__})}),l(u.prototype,{toString:e(function(){return"Symbol ("+t(this).__description__+")"}),valueOf:e(function(){return t(this)})}),c(u.prototype,u.toPrimitive,e("",function(){var _=t(this);return typeof _=="symbol"?_:_.toString()})),c(u.prototype,u.toStringTag,e("c","Symbol")),c(o.prototype,u.toStringTag,e("c",u.prototype[u.toStringTag])),c(o.prototype,u.toPrimitive,e("c",u.prototype[u.toPrimitive])),Ks}var Ys,yf;function gg(){return yf||(yf=1,Ys=pg()()?Gn().Symbol:wg()),Ys}var Js,vf;function Eg(){if(vf)return Js;vf=1;var e=Object.prototype.toString,t=e.call((function(){return arguments})());return Js=function(r){return e.call(r)===t},Js}var Qs,wf;function Sg(){if(wf)return Qs;wf=1;var e=Object.prototype.toString,t=RegExp.prototype.test.bind(/^[object [A-Za-z0-9]*Function]$/);return Qs=function(r){return typeof r=="function"&&t(e.call(r))},Qs}var Zs,gf;function Rg(){if(gf)return Zs;gf=1;var e=Object.prototype.toString,t=e.call("");return Zs=function(r){return typeof r=="string"||r&&typeof r=="object"&&(r instanceof String||e.call(r)===t)||!1},Zs}var eo,Ef;function bg(){if(Ef)return eo;Ef=1;var e=gg().iterator,t=Eg(),r=Sg(),n=nr(),i=Ut(),a=br(),s=rr(),l=Rg(),c=Array.isArray,u=Function.prototype.call,o={configurable:!0,enumerable:!0,writable:!0,value:null},m=Object.defineProperty;return eo=function(_){var S=arguments[1],R=arguments[2],p,h,y,v,g,E,d,w,f,b;if(_=Object(a(_)),s(S)&&i(S),!this||this===Array||!r(this)){if(!S){if(t(_))return g=_.length,g!==1?Array.apply(null,_):(v=new Array(1),v[0]=_[0],v);if(c(_)){for(v=new Array(g=_.length),h=0;h<g;++h)v[h]=_[h];return v}}v=[]}else p=this;if(!c(_)){if((f=_[e])!==void 0){for(d=i(f).call(_),p&&(v=new p),w=d.next(),h=0;!w.done;)b=S?u.call(S,R,w.value,h):w.value,p?(o.value=b,m(v,h,o)):v[h]=b,w=d.next(),++h;g=h}else if(l(_)){for(g=_.length,p&&(v=new p),h=0,y=0;h<g;++h)b=_[h],h+1<g&&(E=b.charCodeAt(0),E>=55296&&E<=56319&&(b+=_[++h])),b=S?u.call(S,R,b,y):b,p?(o.value=b,m(v,y,o)):v[y]=b,++y;g=y}}if(g===void 0)for(g=n(_.length),p&&(v=new p(g)),h=0;h<g;++h)b=S?u.call(S,R,_[h],h):_[h],p?(o.value=b,m(v,h,o)):v[h]=b;return p&&(o.value=null,v.length=g),v},eo}var to,Sf;function pu(){return Sf||(Sf=1,to=fg()()?Array.from:bg()),to}var ro,Rf;function $g(){if(Rf)return ro;Rf=1;var e=pu(),t=Array.isArray;return ro=function(r){return t(r)?r:e(r)},ro}var no,bf;function Og(){if(bf)return no;bf=1;var e=$g(),t=rr(),r=Ut(),n=Array.prototype.slice,i;return i=function(a){return this.map(function(s,l){return s?s(a[l]):a[l]}).concat(n.call(a,this.length))},no=function(a){return a=e(a),a.forEach(function(s){t(s)&&r(s)}),i.bind(a)},no}var io,$f;function Ig(){if($f)return io;$f=1;var e=Ut();return io=function(t){var r;return typeof t=="function"?{set:t,get:t}:(r={get:e(t.get)},t.set!==void 0?(r.set=e(t.set),t.delete&&(r.delete=e(t.delete)),t.clear&&(r.clear=e(t.clear)),r):(r.set=r.get,r))},io}var so,Of;function Pg(){if(Of)return so;Of=1;var e=rg(),t=Zp(),r=sr(),n=lg().methods,i=Og(),a=Ig(),s=Function.prototype.apply,l=Function.prototype.call,c=Object.create,u=Object.defineProperties,o=n.on,m=n.emit;return so=function(_,S,R){var p=c(null),h,y,v,g,E,d,w,f,b,$,T,q,V,M,P;return S!==!1?y=S:isNaN(_.length)?y=1:y=_.length,R.normalizer&&($=a(R.normalizer),v=$.get,g=$.set,E=$.delete,d=$.clear),R.resolvers!=null&&(P=i(R.resolvers)),v?M=t(function(I){var N,D,x=arguments;if(P&&(x=P(x)),N=v(x),N!==null&&hasOwnProperty.call(p,N))return T&&h.emit("get",N,x,this),p[N];if(x.length===1?D=l.call(_,this,x[0]):D=s.call(_,this,x),N===null){if(N=v(x),N!==null)throw e("Circular invocation","CIRCULAR_INVOCATION");N=g(x)}else if(hasOwnProperty.call(p,N))throw e("Circular invocation","CIRCULAR_INVOCATION");return p[N]=D,q&&h.emit("set",N,null,D),D},y):S===0?M=function(){var I;if(hasOwnProperty.call(p,"data"))return T&&h.emit("get","data",arguments,this),p.data;if(arguments.length?I=s.call(_,this,arguments):I=l.call(_,this),hasOwnProperty.call(p,"data"))throw e("Circular invocation","CIRCULAR_INVOCATION");return p.data=I,q&&h.emit("set","data",null,I),I}:M=function(I){var N,D=arguments,x;if(P&&(D=P(arguments)),x=String(D[0]),hasOwnProperty.call(p,x))return T&&h.emit("get",x,D,this),p[x];if(D.length===1?N=l.call(_,this,D[0]):N=s.call(_,this,D),hasOwnProperty.call(p,x))throw e("Circular invocation","CIRCULAR_INVOCATION");return p[x]=N,q&&h.emit("set",x,null,N),N},h={original:_,memoized:M,profileName:R.profileName,get:function(I){return P&&(I=P(I)),v?v(I):String(I[0])},has:function(I){return hasOwnProperty.call(p,I)},delete:function(I){var N;hasOwnProperty.call(p,I)&&(E&&E(I),N=p[I],delete p[I],V&&h.emit("delete",I,N))},clear:function(){var I=p;d&&d(),p=c(null),h.emit("clear",I)},on:function(I,N){return I==="get"?T=!0:I==="set"?q=!0:I==="delete"&&(V=!0),o.call(this,I,N)},emit:m,updateEnv:function(){_=h.original}},v?w=t(function(I){var N,D=arguments;P&&(D=P(D)),N=v(D),N!==null&&h.delete(N)},y):S===0?w=function(){return h.delete("data")}:w=function(I){return P&&(I=P(arguments)[0]),h.delete(I)},f=t(function(){var I,N=arguments;return S===0?p.data:(P&&(N=P(N)),v?I=v(N):I=String(N[0]),p[I])}),b=t(function(){var I,N=arguments;return S===0?h.has("data"):(P&&(N=P(N)),v?I=v(N):I=String(N[0]),I===null?!1:h.has(I))}),u(M,{__memoized__:r(!0),delete:r(w),clear:r(h.clear),_get:r(f),_has:r(b)}),h},so}var oo,If;function Tg(){if(If)return oo;If=1;var e=Ut(),t=Mn(),r=ir(),n=Pg(),i=Yp();return oo=function a(s){var l,c,u;if(e(s),l=Object(arguments[1]),l.async&&l.promise)throw new Error("Options 'async' and 'promise' cannot be used together");return hasOwnProperty.call(s,"__memoized__")&&!l.force?s:(c=i(l.length,s.length,l.async&&r.async),u=n(s,c,l),t(r,function(o,m){l[m]&&o(l[m],u,l)}),a.__profiler__&&a.__profiler__(u),u.updateEnv(),u.memoized)},oo}var ao,Pf;function Ag(){return Pf||(Pf=1,ao=function(e){var t,r,n=e.length;if(!n)return"";for(t=String(e[r=0]);--n;)t+=""+e[++r];return t}),ao}var uo,Tf;function Ng(){return Tf||(Tf=1,uo=function(e){return e?function(t){for(var r=String(t[0]),n=0,i=e;--i;)r+=""+t[++n];return r}:function(){return""}}),uo}var co,Af;function Lg(){return Af||(Af=1,co=function(){var e=Number.isNaN;return typeof e!="function"?!1:!e({})&&e(NaN)&&!e(34)}),co}var lo,Nf;function Cg(){return Nf||(Nf=1,lo=function(e){return e!==e}),lo}var fo,Lf;function xg(){return Lf||(Lf=1,fo=Lg()()?Number.isNaN:Cg()),fo}var ho,Cf;function mu(){if(Cf)return ho;Cf=1;var e=xg(),t=nr(),r=br(),n=Array.prototype.indexOf,i=Object.prototype.hasOwnProperty,a=Math.abs,s=Math.floor;return ho=function(l){var c,u,o,m;if(!e(l))return n.apply(this,arguments);for(u=t(r(this).length),o=arguments[1],isNaN(o)?o=0:o>=0?o=s(o):o=t(this.length)-s(a(o)),c=o;c<u;++c)if(i.call(this,c)&&(m=this[c],e(m)))return c;return-1},ho}var po,xf;function Dg(){if(xf)return po;xf=1;var e=mu(),t=Object.create;return po=function(){var r=0,n=[],i=t(null);return{get:function(a){var s=0,l=n,c,u=a.length;if(u===0)return l[u]||null;if(l=l[u]){for(;s<u-1;){if(c=e.call(l[0],a[s]),c===-1)return null;l=l[1][c],++s}return c=e.call(l[0],a[s]),c===-1?null:l[1][c]||null}return null},set:function(a){var s=0,l=n,c,u=a.length;if(u===0)l[u]=++r;else{for(l[u]||(l[u]=[[],[]]),l=l[u];s<u-1;)c=e.call(l[0],a[s]),c===-1&&(c=l[0].push(a[s])-1,l[1].push([[],[]])),l=l[1][c],++s;c=e.call(l[0],a[s]),c===-1&&(c=l[0].push(a[s])-1),l[1][c]=++r}return i[r]=a,r},delete:function(a){var s=0,l=n,c,u=i[a],o=u.length,m=[];if(o===0)delete l[o];else if(l=l[o]){for(;s<o-1;){if(c=e.call(l[0],u[s]),c===-1)return;m.push(l,c),l=l[1][c],++s}if(c=e.call(l[0],u[s]),c===-1)return;for(a=l[1][c],l[0].splice(c,1),l[1].splice(c,1);!l[0].length&&m.length;)c=m.pop(),l=m.pop(),l[0].splice(c,1),l[1].splice(c,1)}delete i[a]},clear:function(){n=[],i=t(null)}}},po}var mo,Df;function Fg(){if(Df)return mo;Df=1;var e=mu();return mo=function(){var t=0,r=[],n=[];return{get:function(i){var a=e.call(r,i[0]);return a===-1?null:n[a]},set:function(i){return r.push(i[0]),n.push(++t),t},delete:function(i){var a=e.call(n,i);a!==-1&&(r.splice(a,1),n.splice(a,1))},clear:function(){r=[],n=[]}}},mo}var _o,Ff;function qg(){if(Ff)return _o;Ff=1;var e=mu(),t=Object.create;return _o=function(r){var n=0,i=[[],[]],a=t(null);return{get:function(s){for(var l=0,c=i,u;l<r-1;){if(u=e.call(c[0],s[l]),u===-1)return null;c=c[1][u],++l}return u=e.call(c[0],s[l]),u===-1?null:c[1][u]||null},set:function(s){for(var l=0,c=i,u;l<r-1;)u=e.call(c[0],s[l]),u===-1&&(u=c[0].push(s[l])-1,c[1].push([[],[]])),c=c[1][u],++l;return u=e.call(c[0],s[l]),u===-1&&(u=c[0].push(s[l])-1),c[1][u]=++n,a[n]=s,n},delete:function(s){for(var l=0,c=i,u,o=[],m=a[s];l<r-1;){if(u=e.call(c[0],m[l]),u===-1)return;o.push(c,u),c=c[1][u],++l}if(u=e.call(c[0],m[l]),u!==-1){for(s=c[1][u],c[0].splice(u,1),c[1].splice(u,1);!c[0].length&&o.length;)u=o.pop(),c=o.pop(),c[0].splice(u,1),c[1].splice(u,1);delete a[s]}},clear:function(){i=[[],[]],a=t(null)}}},_o}var qf={},yo,kf;function rm(){if(kf)return yo;kf=1;var e=Ut(),t=Mn(),r=Function.prototype.call;return yo=function(n,i){var a={},s=arguments[2];return e(i),t(n,function(l,c,u,o){a[c]=r.call(i,s,l,c,u,o)}),a},yo}var vo,jf;function _u(){if(jf)return vo;jf=1;var e=function(r){if(typeof r!="function")throw new TypeError(r+" is not a function");return r},t=function(r){var n=document.createTextNode(""),i,a,s=0;return new r(function(){var l;if(i)a&&(i=a.concat(i));else{if(!a)return;i=a}if(a=i,i=null,typeof a=="function"){l=a,a=null,l();return}for(n.data=s=++s%2;a;)l=a.shift(),a.length||(a=null),l()}).observe(n,{characterData:!0}),function(l){if(e(l),i){typeof i=="function"?i=[i,l]:i.push(l);return}i=l,n.data=s=++s%2}};return vo=(function(){if(typeof process=="object"&&process&&typeof process.nextTick=="function")return process.nextTick;if(typeof queueMicrotask=="function")return function(r){queueMicrotask(e(r))};if(typeof document=="object"&&document){if(typeof MutationObserver=="function")return t(MutationObserver);if(typeof WebKitMutationObserver=="function")return t(WebKitMutationObserver)}return typeof setImmediate=="function"?function(r){setImmediate(e(r))}:typeof setTimeout=="function"||typeof setTimeout=="object"?function(r){setTimeout(e(r),0)}:null})(),vo}var Uf;function kg(){if(Uf)return qf;Uf=1;var e=pu(),t=rm(),r=Qp(),n=Zp(),i=_u(),a=Array.prototype.slice,s=Function.prototype.apply,l=Object.create;return ir().async=function(c,u){var o=l(null),m=l(null),_=u.memoized,S=u.original,R,p,h;u.memoized=n(function(y){var v=arguments,g=v[v.length-1];return typeof g=="function"&&(R=g,v=a.call(v,0,-1)),_.apply(p=this,h=v)},_);try{r(u.memoized,_)}catch{}u.on("get",function(y){var v,g,E;if(R){if(o[y]){typeof o[y]=="function"?o[y]=[o[y],R]:o[y].push(R),R=null;return}v=R,g=p,E=h,R=p=h=null,i(function(){var d;hasOwnProperty.call(m,y)?(d=m[y],u.emit("getasync",y,E,g),s.call(v,d.context,d.args)):(R=v,p=g,h=E,_.apply(g,E))})}}),u.original=function(){var y,v,g,E;return R?(y=e(arguments),v=function d(w){var f,b,$=d.id;if($==null){i(s.bind(d,this,arguments));return}if(delete d.id,f=o[$],delete o[$],!!f)return b=e(arguments),u.has($)&&(w?u.delete($):(m[$]={context:this,args:b},u.emit("setasync",$,typeof f=="function"?1:f.length))),typeof f=="function"?E=s.call(f,this,b):f.forEach(function(T){E=s.call(T,this,b)},this),E},g=R,R=p=h=null,y.push(v),E=s.call(S,this,y),v.cb=g,R=v,E):s.call(S,this,arguments)},u.on("set",function(y){if(!R){u.delete(y);return}o[y]?typeof o[y]=="function"?o[y]=[o[y],R.cb]:o[y].push(R.cb):o[y]=R.cb,delete R.cb,R.id=y,R=null}),u.on("delete",function(y){var v;hasOwnProperty.call(o,y)||m[y]&&(v=m[y],delete m[y],u.emit("deleteasync",y,a.call(v.args,1)))}),u.on("clear",function(){var y=m;m=l(null),u.emit("clearasync",t(y,function(v){return a.call(v.args,1)}))})},qf}var Mf={},wo,Gf;function jg(){if(Gf)return wo;Gf=1;var e=Array.prototype.forEach,t=Object.create;return wo=function(r){var n=t(null);return e.call(arguments,function(i){n[i]=!0}),n},wo}var go,Vf;function nm(){return Vf||(Vf=1,go=function(e){return typeof e=="function"}),go}var Eo,Bf;function Ug(){if(Bf)return Eo;Bf=1;var e=nm();return Eo=function(t){try{return t&&e(t.toString)?t.toString():String(t)}catch{throw new TypeError("Passed argument cannot be stringifed")}},Eo}var So,Hf;function Mg(){if(Hf)return So;Hf=1;var e=br(),t=Ug();return So=function(r){return t(e(r))},So}var Ro,zf;function Gg(){if(zf)return Ro;zf=1;var e=nm();return Ro=function(t){try{return t&&e(t.toString)?t.toString():String(t)}catch{return"<Non-coercible to string value>"}},Ro}var bo,Wf;function Vg(){if(Wf)return bo;Wf=1;var e=Gg(),t=/[\n\r\u2028\u2029]/g;return bo=function(r){var n=e(r);return n.length>100&&(n=n.slice(0,99)+"…"),n=n.replace(t,function(i){return JSON.stringify(i).slice(1,-1)}),n},bo}var tn={exports:{}},Xf;function im(){if(Xf)return tn.exports;Xf=1,tn.exports=e,tn.exports.default=e;function e(t){return!!t&&(typeof t=="object"||typeof t=="function")&&typeof t.then=="function"}return tn.exports}var Kf;function Bg(){if(Kf)return Mf;Kf=1;var e=rm(),t=jg(),r=Mg(),n=Vg(),i=im(),a=_u(),s=Object.create,l=t("then","then:finally","done","done:finally");return ir().promise=function(c,u){var o=s(null),m=s(null),_=s(null);if(c===!0)c=null;else if(c=r(c),!l[c])throw new TypeError("'"+n(c)+"' is not valid promise mode");u.on("set",function(S,R,p){var h=!1;if(!i(p)){m[S]=p,u.emit("setasync",S,1);return}o[S]=1,_[S]=p;var y=function(d){var w=o[S];if(h)throw new Error(`Memoizee error: Detected unordered then|done & finally resolution, which in turn makes proper detection of success/failure impossible (when in 'done:finally' mode)
Consider to rely on 'then' or 'done' mode instead.`);w&&(delete o[S],m[S]=d,u.emit("setasync",S,w))},v=function(){h=!0,o[S]&&(delete o[S],delete _[S],u.delete(S))},g=c;if(g||(g="then"),g==="then"){var E=function(){a(v)};p=p.then(function(d){a(y.bind(this,d))},E),typeof p.finally=="function"&&p.finally(E)}else if(g==="done"){if(typeof p.done!="function")throw new Error("Memoizee error: Retrieved promise does not implement 'done' in 'done' mode");p.done(y,v)}else if(g==="done:finally"){if(typeof p.done!="function")throw new Error("Memoizee error: Retrieved promise does not implement 'done' in 'done:finally' mode");if(typeof p.finally!="function")throw new Error("Memoizee error: Retrieved promise does not implement 'finally' in 'done:finally' mode");p.done(y),p.finally(v)}}),u.on("get",function(S,R,p){var h;if(o[S]){++o[S];return}h=_[S];var y=function(){u.emit("getasync",S,R,p)};i(h)?typeof h.done=="function"?h.done(y):h.then(function(){a(y)}):y()}),u.on("delete",function(S){if(delete _[S],o[S]){delete o[S];return}if(hasOwnProperty.call(m,S)){var R=m[S];delete m[S],u.emit("deleteasync",S,[R])}}),u.on("clear",function(){var S=m;m=s(null),o=s(null),_=s(null),u.emit("clearasync",e(S,function(R){return[R]}))})},Mf}var Yf={},Jf;function Hg(){if(Jf)return Yf;Jf=1;var e=Ut(),t=Mn(),r=ir(),n=Function.prototype.apply;return r.dispose=function(i,a,s){var l;if(e(i),s.async&&r.async||s.promise&&r.promise){a.on("deleteasync",l=function(c,u){n.call(i,null,u)}),a.on("clearasync",function(c){t(c,function(u,o){l(o,u)})});return}a.on("delete",l=function(c,u){i(u)}),a.on("clear",function(c){t(c,function(u,o){l(o,u)})})},Yf}var Qf={},$o,Zf;function zg(){return Zf||(Zf=1,$o=2147483647),$o}var Oo,ed;function Wg(){if(ed)return Oo;ed=1;var e=nr(),t=zg();return Oo=function(r){if(r=e(r),r>t)throw new TypeError(r+" exceeds maximum possible timeout");return r},Oo}var td;function Xg(){if(td)return Qf;td=1;var e=pu(),t=Mn(),r=_u(),n=im(),i=Wg(),a=ir(),s=Function.prototype,l=Math.max,c=Math.min,u=Object.create;return a.maxAge=function(o,m,_){var S,R,p,h;o=i(o),o&&(S=u(null),R=_.async&&a.async||_.promise&&a.promise?"async":"",m.on("set"+R,function(y){S[y]=setTimeout(function(){m.delete(y)},o),typeof S[y].unref=="function"&&S[y].unref(),h&&(h[y]&&h[y]!=="nextTick"&&clearTimeout(h[y]),h[y]=setTimeout(function(){delete h[y]},p),typeof h[y].unref=="function"&&h[y].unref())}),m.on("delete"+R,function(y){clearTimeout(S[y]),delete S[y],h&&(h[y]!=="nextTick"&&clearTimeout(h[y]),delete h[y])}),_.preFetch&&(_.preFetch===!0||isNaN(_.preFetch)?p=.333:p=l(c(Number(_.preFetch),1),0),p&&(h={},p=(1-p)*o,m.on("get"+R,function(y,v,g){h[y]||(h[y]="nextTick",r(function(){var E;h[y]==="nextTick"&&(delete h[y],m.delete(y),_.async&&(v=e(v),v.push(s)),E=m.memoized.apply(g,v),_.promise&&n(E)&&(typeof E.done=="function"?E.done(s,s):E.then(s,s)))}))}))),m.on("clear"+R,function(){t(S,function(y){clearTimeout(y)}),S={},h&&(t(h,function(y){y!=="nextTick"&&clearTimeout(y)}),h={})}))},Qf}var rd={},Io,nd;function Kg(){if(nd)return Io;nd=1;var e=nr(),t=Object.create,r=Object.prototype.hasOwnProperty;return Io=function(n){var i=0,a=1,s=t(null),l=t(null),c=0,u;return n=e(n),{hit:function(o){var m=l[o],_=++c;if(s[_]=o,l[o]=_,!m)return++i,i<=n?void 0:(o=s[a],u(o),o);if(delete s[m],a===m)for(;!r.call(s,++a););},delete:u=function(o){var m=l[o];if(m&&(delete s[m],delete l[o],--i,a===m)){if(!i){c=0,a=1;return}for(;!r.call(s,++a););}},clear:function(){i=0,a=1,s=t(null),l=t(null),c=0}}},Io}var id;function Yg(){if(id)return rd;id=1;var e=nr(),t=Kg(),r=ir();return r.max=function(n,i,a){var s,l,c;n=e(n),n&&(l=t(n),s=a.async&&r.async||a.promise&&r.promise?"async":"",i.on("set"+s,c=function(u){u=l.hit(u),u!==void 0&&i.delete(u)}),i.on("get"+s,c),i.on("delete"+s,l.delete),i.on("clear"+s,l.clear))},rd}var sd={},od;function Jg(){if(od)return sd;od=1;var e=sr(),t=ir(),r=Object.create,n=Object.defineProperties;return t.refCounter=function(i,a,s){var l,c;l=r(null),c=s.async&&t.async||s.promise&&t.promise?"async":"",a.on("set"+c,function(u,o){l[u]=o||1}),a.on("get"+c,function(u){++l[u]}),a.on("delete"+c,function(u){delete l[u]}),a.on("clear"+c,function(){l={}}),n(a.memoized,{deleteRef:e(function(){var u=a.get(arguments);return u===null||!l[u]?null:--l[u]?!1:(a.delete(u),!0)}),getRefCount:e(function(){var u=a.get(arguments);return u===null||!l[u]?0:l[u]})})},sd}var Po,ad;function Qg(){if(ad)return Po;ad=1;var e=Kp(),t=Yp(),r=Tg();return Po=function(n){var i=e(arguments[1]),a;return i.normalizer||(a=i.length=t(i.length,n.length,i.async),a!==0&&(i.primitive?a===!1?i.normalizer=Ag():a>1&&(i.normalizer=Ng()(a)):a===!1?i.normalizer=Dg()():a===1?i.normalizer=Fg()():i.normalizer=qg()(a))),i.async&&kg(),i.promise&&Bg(),i.dispose&&Hg(),i.maxAge&&Xg(),i.max&&Yg(),i.refCounter&&Jg(),r(n,i)},Po}var Zg=Qg();const ke=$e(Zg);async function _e(e){try{return await K_.access(e),!0}catch{return!1}}function eE(e){try{return H_.accessSync(e),!0}catch{return!1}}function tE(){if(Sr()&&typeof process.env.SUDO_USER=="string"&&process.env.SUDO_USER!=="")return process.platform==="darwin"?Z("/Users/",process.env.SUDO_USER):Z("/home/",process.env.SUDO_USER);{const e=dp();return e===""?void 0:e}}const rE=/^~(?=$|\/|\\)/;function rt(e){const t=tE();return t===void 0?e:e.replace(rE,t)}const{appendFile:sm,readFile:yu,writeFile:nE}=Nn,iE="envosman",om=rt("~/.envosmanrc");async function sE(e){const t=rt("~/.bashrc"),r=rt("~/.profile"),n=tu(e.rcPath);if(n===t||n===r)return;const i=e.guard??iE,a=`
# ${i}
if [[ "$SOURCE_${i.toUpperCase()}RC" != 0 && -f "${n}" ]]; then source "${n}"; fi
`;try{await Promise.all([oE(e),ud(a,t),ud(a,r)])}catch(s){ye(`Failed to add ${a} to .profile or .bashrc. You should add it manually: ${s}`)}}const vu=ke(sE,{promise:!0});async function oE(e){const t=e.guard===void 0?`
# Automatically Generated by envosman
`:`
# Automatically Generated by envosman ${e.guard}
export SOURCE_${e.guard.toUpperCase()}RC=0
`;await _e(e.rcPath)&&((await yu(e.rcPath,"utf8")).includes(t)||(await sm(e.rcPath,`
${t}
`),Y(`Added ${t} to ${e.rcPath}`)))}async function ud(e,t){await _e(t)&&((await yu(t,"utf-8")).includes(e)||(await sm(t,e),Y(`${e} was added to ${t}`)))}async function aE(e){if(await _e(e.rcPath)){const t=(await yu(e.rcPath,"utf-8")).split(`
`),r=[...new Set(t.reverse())].reverse();await nE(e.rcPath,r.join(`
`)),await Rr(e.rcPath)}}var To,cd;function uE(){if(cd)return To;cd=1;const e=it,t=e.platform()!=="win32",r=e.release(),n=/(\d+\.\d+)\.(\d+)/,i=(a="",s="")=>/1\d+\.\d+/.test(a)&&Number(s)>=17134.1184;return To=function(a){return t?a.replace(/(\s+)/g,"\\$1"):i(...n.exec(r).splice(1))?a:a.replace(/(\s+)/g,"%20")},To}var cE=uE();const lE=$e(cE);var ln={exports:{}},Ao,ld;function fE(){if(ld)return Ao;ld=1;var e=/[|\\{}()[\]^$+*?.]/g;return Ao=function(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(e,"\\$&")},Ao}var dE=ln.exports,fd;function hE(){return fd||(fd=1,(function(){var e,t;e=fE(),t=function(r){return r.split("").reverse().join("")},ln.exports=function(r,n,i){var a;return n==null&&(n="'"),i==null&&(i="\\"),typeof r!="string"?r:(a=new RegExp("(["+e(n)+"])(?!"+e(i)+")","g"),t(t(r).replace(a,"$1"+i)))}}).call(dE)),ln.exports}var pE=hE();const mE=$e(pE);function _E(e,t=!1){const r=t?lE(e):e;return mE(r,'"',"\\")}const{GITHUB_ACTIONS:yE}=At,{appendFile:dd}=Nn;async function Ie(e,t,r={}){const n={escapeSpace:!1,overwrite:!0,rcPath:om,...r},i=_E(t??"",n.escapeSpace);try{if(yE)try{if(!n.overwrite&&process.env[e]!==void 0){Y(`Environment variable ${e} is already defined. Skipping.`);return}Ee.exportVariable(e,i)}catch(a){Ne(a),await hd(e,i,n)}else await hd(e,i,n)}catch(a){Ne(`${a}
Failed to export environment variable ${e}=${i}. You should add it manually.`)}}async function hd(e,t,r){const n=t??"";switch(process.platform){case"win32":{if(!r.overwrite&&process.env[e]!==void 0){Y(`Environment variable ${e} is already defined. Skipping.`);return}await Hp(`[Environment]::SetEnvironmentVariable('${e}', '${n}', "User")`),Y(`${e}='${n}' was set in the environment.`);return}case"linux":case"darwin":{await vu(r),r.overwrite?(await dd(r.rcPath,`
export ${e}="${n}"
`),Y(`${e}="${n}" was added to "${r.rcPath}`)):(await dd(r.rcPath,`
if [ -z "\${${e}}" ]; then export ${e}="${n}"; fi
`),Y(`if not defined ${e} then ${e}="${n}" was added to "${r.rcPath}`)),process.env[e]=n;return}}process.env[e]=n}const{GITHUB_ACTIONS:vE}=At,{appendFile:wE}=Nn;async function be(e,t={}){const r={rcPath:om,...t};if(!EE(e)){process.env.PATH=`${e}${vn}${process.env.PATH}`;try{if(vE)try{Ee.addPath(e)}catch(n){Ne(n),await pd(e,r)}else await pd(e,r)}catch(n){Ne(`${n}
Failed to add ${e} to the percistent PATH. You should add it manually.`)}}}async function pd(e,t){switch(process.platform){case"win32":{await Hp(`$USER_PATH=([Environment]::GetEnvironmentVariable("PATH", "User")); [Environment]::SetEnvironmentVariable("PATH", "${e};$USER_PATH", "User")`),Y(`"${e}" was added to the PATH.`);return}case"linux":case"darwin":{await vu(t),await wE(t.rcPath,`
export PATH="${e}:$PATH"
`),Y(`"${e}" was added to "${t.rcPath}"`);return}default:return}}const gE=[/\/usr\/bin\/?/,/\/usr\/local\/bin\/?/];function EE(e){return gE.some(t=>t.test(e))?(process.env.PATH?.split(vn)??[]).includes(e):!1}function wu(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var fn={exports:{}},SE=fn.exports,md;function am(){return md||(md=1,(function(e){(function(){var t={},r={create:n,addLocale:i,pluralize:a};e.exports=r;function n(u){return l(u),{pluralize:function(o,m){return a(u,o,m)}}}function i(u,o){t[u]=o}function a(u,o,m){if(l(u),typeof m!="object")throw new Error("List of variants should be specified as an object");var _=t[u](o);return typeof m[_]<"u"?m[_]:null}function s(u){return typeof t[u]<"u"}function l(u){s(u)||c(u)}function c(u){try{wu(__dirname+"/../locales/"+u+".js")}catch{throw Error("Failed to load the following locale: "+u)}}}).call(SE)})(fn)),fn.exports}var No,_d;function um(){return _d||(_d=1,No=am()),No}var RE=um();const bE=$e(RE);var Lo={},yd;function $E(){return yd||(yd=1,(function(){var e=this,t;typeof wu=="function"?t=am():t=e.numerous,t.addLocale("en",function(n){var i=Math.floor(Math.abs(n)),a=n.toString().replace(/^[^.]*\.?/,"").length;return typeof n=="string"&&(n=parseInt(n,10)),i===1&&a===0?"one":"other"})}).call(Lo)),Lo}var OE=$E();const IE=$e(OE);var Co={exports:{}},vd;function PE(){return vd||(vd=1,(function(e,t){e.exports=!!(typeof process<"u"&&process.versions&&process.versions.node)})(Co)),Co.exports}var xo,wd;function TE(){if(wd)return xo;wd=1;const e=um(),t=PE(),r=[["years",336*24*60*60*1e3],["months",672*60*60*1e3],["weeks",10080*60*1e3],["days",1440*60*1e3],["hours",3600*1e3],["minutes",60*1e3],["seconds",1e3]],n={locale:"en",span:2,delimiter:", ",unitType:"long",unitTypeLookupOrder:["long","short","narrow"],autoloadLocales:!0},i={};xo={create:s,addLocale:a,defaultConfig:n};function a(p){Array.isArray(p)||(p=[p]);for(const h of p){const{id:y,data:v}=h;i[y]=v}}function s(p){return p=Object.assign({},n,p||{}),{format:function(h,y,v){return v=Object.assign({},p,v||{}),l(h,y,v)}}}function l(p,h,y){if(c(y.locale,{autoload:y.autoloadLocales}),!p)throw new Error("Missing first date argument");if(!h)throw new Error("Missing second date argument");const v=m(p,h),g=[];for(const E of v){const[d,w]=E;if(w>0&&g.push(_(d,w,y)),g.length>=y.span)break}return g.join(y.delimiter)}function c(p,h){const{autoload:y}=h;if(!u(p))if(t&&y)o(p);else throw new Error(`Missing locale: ${p}, you must load it manually before using it`)}function u(p){return!!i[p]}function o(p){try{a(wu(`../locales/${p}.js`))}catch(h){throw Error(`Failed to load locale: ${p} from ../locales/${p}.js. If using a bundled time-delta, set 'autoloadLocales: false' in the config: ${h}`)}}function m(p,h){let y=h-p;const v=[];return r.some(function(g){const E=g[0],d=g[1],w=Math.floor(y/d);if(y-=w*d,v.push([E,w]),y<=0)return!0}),v}function _(p,h,y){const v=S(y);return e.pluralize(y.locale,h,v[p]).replace("{0}",h)}function S(p){const h=i[p.locale];let y=p.unitTypeLookupOrder.slice();y.unshift(p.unitType),y=R(y);let v=null;if(y.some(function(g){if(typeof h[g]<"u")return v=h[g],!0}),v===null)throw new Error("Can not find any unit type data for locale: "+p.locale);return v}function R(p){return Array.from(new Set(p))}return xo}var Do,gd;function AE(){return gd||(gd=1,Do=TE()),Do}var NE=AE();const Ed=$e(NE);var Fo,Sd;function LE(){return Sd||(Sd=1,Fo={id:"en",data:{long:{years:{one:"{0} year",other:"{0} years"},months:{one:"{0} month",other:"{0} months"},weeks:{one:"{0} week",other:"{0} weeks"},days:{one:"{0} day",other:"{0} days"},hours:{one:"{0} hour",other:"{0} hours"},minutes:{one:"{0} minute",other:"{0} minutes"},seconds:{one:"{0} second",other:"{0} seconds"}},narrow:{years:{one:"{0}y",other:"{0}y"},months:{one:"{0}m",other:"{0}m"},weeks:{one:"{0}w",other:"{0}w"},days:{one:"{0}d",other:"{0}d"},hours:{one:"{0}h",other:"{0}h"},minutes:{one:"{0}m",other:"{0}m"},seconds:{one:"{0}s",other:"{0}s"}},short:{years:{one:"{0} yr",other:"{0} yrs"},months:{one:"{0} mth",other:"{0} mths"},weeks:{one:"{0} wk",other:"{0} wks"},days:{one:"{0} day",other:"{0} days"},hours:{one:"{0} hr",other:"{0} hr"},minutes:{one:"{0} min",other:"{0} min"},seconds:{one:"{0} sec",other:"{0} sec"}}}}),Fo}var CE=LE();const xE=$e(CE);var qo,Rd;function Vn(){return Rd||(Rd=1,qo=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{}),qo}var ko,bd;function gu(){if(bd)return ko;bd=1;const e="2.0.0",t=256,r=Number.MAX_SAFE_INTEGER||9007199254740991,n=16,i=t-6;return ko={MAX_LENGTH:t,MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:i,MAX_SAFE_INTEGER:r,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:e,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},ko}var rn={exports:{}},$d;function Bn(){return $d||($d=1,(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:n,MAX_LENGTH:i}=gu(),a=Vn();t=e.exports={};const s=t.re=[],l=t.safeRe=[],c=t.src=[],u=t.safeSrc=[],o=t.t={};let m=0;const _="[a-zA-Z0-9-]",S=[["\\s",1],["\\d",i],[_,n]],R=h=>{for(const[y,v]of S)h=h.split(`${y}*`).join(`${y}{0,${v}}`).split(`${y}+`).join(`${y}{1,${v}}`);return h},p=(h,y,v)=>{const g=R(y),E=m++;a(h,E,y),o[h]=E,c[E]=y,u[E]=g,s[E]=new RegExp(y,v?"g":void 0),l[E]=new RegExp(g,v?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${_}*`),p("MAINVERSION",`(${c[o.NUMERICIDENTIFIER]})\\.(${c[o.NUMERICIDENTIFIER]})\\.(${c[o.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${c[o.NUMERICIDENTIFIERLOOSE]})\\.(${c[o.NUMERICIDENTIFIERLOOSE]})\\.(${c[o.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${c[o.NONNUMERICIDENTIFIER]}|${c[o.NUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${c[o.NONNUMERICIDENTIFIER]}|${c[o.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASE",`(?:-(${c[o.PRERELEASEIDENTIFIER]}(?:\\.${c[o.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${c[o.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${c[o.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${_}+`),p("BUILD",`(?:\\+(${c[o.BUILDIDENTIFIER]}(?:\\.${c[o.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${c[o.MAINVERSION]}${c[o.PRERELEASE]}?${c[o.BUILD]}?`),p("FULL",`^${c[o.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${c[o.MAINVERSIONLOOSE]}${c[o.PRERELEASELOOSE]}?${c[o.BUILD]}?`),p("LOOSE",`^${c[o.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${c[o.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${c[o.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${c[o.XRANGEIDENTIFIER]})(?:\\.(${c[o.XRANGEIDENTIFIER]})(?:\\.(${c[o.XRANGEIDENTIFIER]})(?:${c[o.PRERELEASE]})?${c[o.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${c[o.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[o.XRANGEIDENTIFIERLOOSE]})(?:\\.(${c[o.XRANGEIDENTIFIERLOOSE]})(?:${c[o.PRERELEASELOOSE]})?${c[o.BUILD]}?)?)?`),p("XRANGE",`^${c[o.GTLT]}\\s*${c[o.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${c[o.GTLT]}\\s*${c[o.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${r}})(?:\\.(\\d{1,${r}}))?(?:\\.(\\d{1,${r}}))?`),p("COERCE",`${c[o.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",c[o.COERCEPLAIN]+`(?:${c[o.PRERELEASE]})?(?:${c[o.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",c[o.COERCE],!0),p("COERCERTLFULL",c[o.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${c[o.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${c[o.LONETILDE]}${c[o.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${c[o.LONETILDE]}${c[o.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${c[o.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${c[o.LONECARET]}${c[o.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${c[o.LONECARET]}${c[o.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${c[o.GTLT]}\\s*(${c[o.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${c[o.GTLT]}\\s*(${c[o.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${c[o.GTLT]}\\s*(${c[o.LOOSEPLAIN]}|${c[o.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${c[o.XRANGEPLAIN]})\\s+-\\s+(${c[o.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${c[o.XRANGEPLAINLOOSE]})\\s+-\\s+(${c[o.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(rn,rn.exports)),rn.exports}var jo,Od;function Eu(){if(Od)return jo;Od=1;const e=Object.freeze({loose:!0}),t=Object.freeze({});return jo=n=>n?typeof n!="object"?e:n:t,jo}var Uo,Id;function DE(){if(Id)return Uo;Id=1;const e=/^[0-9]+$/,t=(n,i)=>{if(typeof n=="number"&&typeof i=="number")return n===i?0:n<i?-1:1;const a=e.test(n),s=e.test(i);return a&&s&&(n=+n,i=+i),n===i?0:a&&!s?-1:s&&!a?1:n<i?-1:1};return Uo={compareIdentifiers:t,rcompareIdentifiers:(n,i)=>t(i,n)},Uo}var Mo,Pd;function $r(){if(Pd)return Mo;Pd=1;const e=Vn(),{MAX_LENGTH:t,MAX_SAFE_INTEGER:r}=gu(),{safeRe:n,t:i}=Bn(),a=Eu(),{compareIdentifiers:s}=DE();class l{constructor(u,o){if(o=a(o),u instanceof l){if(u.loose===!!o.loose&&u.includePrerelease===!!o.includePrerelease)return u;u=u.version}else if(typeof u!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof u}".`);if(u.length>t)throw new TypeError(`version is longer than ${t} characters`);e("SemVer",u,o),this.options=o,this.loose=!!o.loose,this.includePrerelease=!!o.includePrerelease;const m=u.trim().match(o.loose?n[i.LOOSE]:n[i.FULL]);if(!m)throw new TypeError(`Invalid Version: ${u}`);if(this.raw=u,this.major=+m[1],this.minor=+m[2],this.patch=+m[3],this.major>r||this.major<0)throw new TypeError("Invalid major version");if(this.minor>r||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>r||this.patch<0)throw new TypeError("Invalid patch version");m[4]?this.prerelease=m[4].split(".").map(_=>{if(/^[0-9]+$/.test(_)){const S=+_;if(S>=0&&S<r)return S}return _}):this.prerelease=[],this.build=m[5]?m[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(u){if(e("SemVer.compare",this.version,this.options,u),!(u instanceof l)){if(typeof u=="string"&&u===this.version)return 0;u=new l(u,this.options)}return u.version===this.version?0:this.compareMain(u)||this.comparePre(u)}compareMain(u){return u instanceof l||(u=new l(u,this.options)),this.major<u.major?-1:this.major>u.major?1:this.minor<u.minor?-1:this.minor>u.minor?1:this.patch<u.patch?-1:this.patch>u.patch?1:0}comparePre(u){if(u instanceof l||(u=new l(u,this.options)),this.prerelease.length&&!u.prerelease.length)return-1;if(!this.prerelease.length&&u.prerelease.length)return 1;if(!this.prerelease.length&&!u.prerelease.length)return 0;let o=0;do{const m=this.prerelease[o],_=u.prerelease[o];if(e("prerelease compare",o,m,_),m===void 0&&_===void 0)return 0;if(_===void 0)return 1;if(m===void 0)return-1;if(m===_)continue;return s(m,_)}while(++o)}compareBuild(u){u instanceof l||(u=new l(u,this.options));let o=0;do{const m=this.build[o],_=u.build[o];if(e("build compare",o,m,_),m===void 0&&_===void 0)return 0;if(_===void 0)return 1;if(m===void 0)return-1;if(m===_)continue;return s(m,_)}while(++o)}inc(u,o,m){if(u.startsWith("pre")){if(!o&&m===!1)throw new Error("invalid increment argument: identifier is empty");if(o){const _=`-${o}`.match(this.options.loose?n[i.PRERELEASELOOSE]:n[i.PRERELEASE]);if(!_||_[1]!==o)throw new Error(`invalid identifier: ${o}`)}}switch(u){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",o,m);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",o,m);break;case"prepatch":this.prerelease.length=0,this.inc("patch",o,m),this.inc("pre",o,m);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",o,m),this.inc("pre",o,m);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const _=Number(m)?1:0;if(this.prerelease.length===0)this.prerelease=[_];else{let S=this.prerelease.length;for(;--S>=0;)typeof this.prerelease[S]=="number"&&(this.prerelease[S]++,S=-2);if(S===-1){if(o===this.prerelease.join(".")&&m===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(_)}}if(o){let S=[o,_];m===!1&&(S=[o]),s(this.prerelease[0],o)===0?isNaN(this.prerelease[1])&&(this.prerelease=S):this.prerelease=S}break}default:throw new Error(`invalid increment argument: ${u}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return Mo=l,Mo}var Go,Td;function cm(){if(Td)return Go;Td=1;const e=$r();return Go=(r,n,i=!1)=>{if(r instanceof e)return r;try{return new e(r,n)}catch(a){if(!i)return null;throw a}},Go}var Vo,Ad;function FE(){if(Ad)return Vo;Ad=1;const e=cm();return Vo=(r,n)=>{const i=e(r,n);return i?i.version:null},Vo}var qE=FE();const Hn=$e(qE);function Rn(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}var Bo,Nd;function kE(){if(Nd)return Bo;Nd=1;var e=ce;function t(n,i){if(typeof n!="string"||n.length===0)return n;var a=e.basename(n,e.extname(n))+i,s=e.join(e.dirname(n),a);return r(n)?"."+e.sep+s:s}function r(n){var i=n.slice(0,2);return i==="."+e.sep||i==="./"}return Bo=t,Bo}var jE=kE();const UE=$e(jE);function Rt(e,t){return Object.keys(t).forEach((r=>{r==="default"||r==="__esModule"||e.hasOwnProperty(r)||Object.defineProperty(e,r,{enumerable:!0,get(){return t[r]}})})),e}function Nt(e,t,r,n){Object.defineProperty(e,t,{get:r,set:n,enumerable:!0,configurable:!0})}function ME(e,t=!0){return t?er(e):er(e,An(e))}function GE(e){return F_(e).replace(RegExp(Rn(hp)+"$"),"")}function we(e,t=".exe",r=""){return process.platform==="win32"?`${e}${t}`:`${e}${r}`}function VE(e,t){const r=An(e),n=`${t}${er(e,r)}${r}`;return Z(Re(e),n)}function BE(e,t){const r=An(e),n=`${er(e,r)}${t}${r}`;return Z(Re(e),n)}function Ya(e,t=".cmd",r=".sh"){return process.platform==="win32"?`${e}${t}`:`${e}${r}`}function lm(e){return process.platform==="win32"?e:"./"+e}function HE(e){const t=An(e).length;return e.slice(0,-t)}function zE(e,t){return UE(e,t)}function WE(e,t){const r=q_(t,e);return!(!r||r===".."||r.startsWith(".."+hp)||r===tu(e))}var bt={},fm={};Nt(fm,"name",(()=>ME));var dm={};Nt(dm,"normalizeTrim",(()=>GE));var hm={};Nt(hm,"addExeExt",(()=>we));var pm={};Nt(pm,"addNamePrefix",(()=>VE));var mm={};Nt(mm,"addNameSuffix",(()=>BE));var _m={};Nt(_m,"addShExt",(()=>Ya));var ym={};Nt(ym,"addShRelativePrefix",(()=>lm));var vm={};Nt(vm,"removeExt",(()=>HE));var wm={};Nt(wm,"replaceExt",(()=>zE));var Ld={};Nt(Ld,"isPathInside",(()=>WE)),Rt(bt,fm),Rt(bt,dm),Rt(bt,hm),Rt(bt,pm),Rt(bt,mm),Rt(bt,_m),Rt(bt,ym),Rt(bt,vm),Rt(bt,wm),Rt(bt,Ld);var Ho,Cd;function XE(){if(Cd)return Ho;Cd=1;const e=$r();return Ho=(r,n)=>new e(r,n).major,Ho}var KE=XE();const gm=$e(KE);function Em(){if(process.platform!=="linux")return!1;try{return eE("/etc/alpine-release")}catch{return!1}}async function YE(){if(!Em())return!1;try{return await fe("apk"),!0}catch{return!1}}const Oe=ke(YE,{promise:!0});async function JE(){await le("apk",["update"],{stdio:"inherit"})}const bn=ke(JE,{promise:!0});async function QE(e){if(!await Oe())throw new Error("apk is not available on this system");try{const t="/etc/apk/repositories";if(!await _e(t))throw new Error(`APK repositories file not found at ${t}`);return Y(`Adding repository: ${e}`),await Q_(t,`${e}
`),await bn.clear(),await bn(),Y(`Successfully added repository: ${e}`),!0}catch(t){throw new Error(`Failed to add repository ${e}: ${t}`)}}async function Sm(){const e=(await ZE()).split(".").slice(0,2).join(".");return QE(`https://dl-cdn.alpinelinux.org/alpine/v${e}/community/`)}async function ZE(){const e="/etc/alpine-release";if(!await _e(e))throw new Error(`Alpine release file not found at ${e}`);return pr(e,"utf8")}async function eS(e){try{const{exitCode:t}=await yt("apk",["info","-e",e.name],{reject:!1,stdio:["ignore","pipe","ignore"]});if(t!==0)return!1;if(e.version===void 0||e.version==="")return!0;const{stdout:r}=await yt("apk",["info","-v",e.name],{stdio:["ignore","pipe","ignore"]});return r.trim().split("-").slice(-1)[0]===e.version}catch{return!1}}async function Rm(e){return(await Promise.all(e.map(async r=>await eS(r)?void 0:r))).filter(r=>r!==void 0).map(bm)}function bm(e){return e.version!==void 0&&e.version!==""?`${e.name}=${e.version}`:e.name}async function tS(){const e=await Rm([{name:"bash"}]);e.length!==0&&pe("apk",["add",...e],{...st})}const rS=ke(tS,{promise:!0});async function Fe(e,t=!1){if(!await Oe())throw new Error("apk is not available on this system");try{await rS(),t&&await bn.clear(),await bn();const r=await Rm(e);return r.length===0?(Y("All packages are already installed"),{binDir:"/usr/bin"}):(Y(`Installing ${r.join(" ")}`),await yt("apk",["add",...r]),Y(`Successfully installed ${r.join(" ")}`),{binDir:"/usr/bin"})}catch(r){throw ye(`Failed to install ${e.map(n=>bm(n)).join(" ")}: ${r}`),r}}const{GITHUB_ACTIONS:nS}=At,{appendFile:iS}=Nn;async function sS(e,t,r=40){await yt("update-alternatives",["--install",`/usr/bin/${e}`,e,t,r.toString()])}async function _t(e,t,r,n=40){nS?await sS(e,t,n):(await vu(r),await iS(r.rcPath,`
if [ $UID -eq 0 ]; then update-alternatives --install /usr/bin/${e} ${e} ${t} ${n}; fi
`))}var zo={},xd;function oS(){return xd||(xd=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DownloaderHelper=e.DH_STATES=void 0;var t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},r=(function(){function v(g,E){for(var d,w=0;w<E.length;w++)d=E[w],d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(g,d.key,d)}return function(g,E,d){return E&&v(g.prototype,E),d&&v(g,d),g}})(),n=De,i=S(n),a=ru,s=ce,l=S(s),c=Ln,u=S(c),o=jr,m=S(o),_=vr;function S(v){if(v&&v.__esModule)return v;var g={};if(v!=null)for(var E in v)Object.prototype.hasOwnProperty.call(v,E)&&(g[E]=v[E]);return g.default=v,g}function R(v,g){if(!(v instanceof g))throw new TypeError("Cannot call a class as a function")}function p(v,g){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:v}function h(v,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);v.prototype=Object.create(g&&g.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(v,g):v.__proto__=g)}var y=e.DH_STATES={IDLE:"IDLE",SKIPPED:"SKIPPED",STARTED:"STARTED",DOWNLOADING:"DOWNLOADING",RETRY:"RETRY",PAUSED:"PAUSED",RESUMED:"RESUMED",STOPPED:"STOPPED",FINISHED:"FINISHED",FAILED:"FAILED"};e.DownloaderHelper=(function(v){function g(E,d){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{};R(this,g);var f=p(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,{captureRejections:!0}));return f.__validate(E,d)?(f.url=f.requestURL=E.trim(),f.state=y.IDLE,f.__defaultOpts={body:null,retry:!1,method:"GET",headers:{},fileName:"",timeout:-1,metadata:null,override:!1,forceResume:!1,removeOnStop:!0,removeOnFail:!0,progressThrottle:1e3,httpRequestOptions:{},httpsRequestOptions:{},resumeOnIncomplete:!0,resumeIfFileExists:!1,resumeOnIncompleteMaxRetry:5},f.__opts=Object.assign({},f.__defaultOpts),f.__pipes=[],f.__total=0,f.__downloaded=0,f.__progress=0,f.__retryCount=0,f.__retryTimeout=null,f.__resumeRetryCount=0,f.__states=y,f.__promise=null,f.__request=null,f.__response=null,f.__isAborted=!1,f.__isResumed=!1,f.__isResumable=!1,f.__isRedirected=!1,f.__destFolder=d,f.__statsEstimate={time:0,bytes:0,prevBytes:0,throttleTime:0},f.__fileName="",f.__filePath="",f.updateOptions(w),f):p(f)}return h(g,v),r(g,[{key:"start",value:function(){var d=this,w=function(){return new Promise(function(f,b){d.__promise={resolve:f,reject:b},d.__start()})};return this.__opts.resumeIfFileExists&&this.state!==this.__states.RESUMED?this.getTotalSize().then(function(f){var b=f.name,$=f.total,T=d.__opts.override;if(d.__opts.override=!0,d.__filePath=d.__getFilePath(b),d.__opts.override=T,d.__filePath&&i.existsSync(d.__filePath)){var q=d.__getFilesizeInBytes(d.__filePath);return q===$?w():d.resumeFromFile(d.__filePath,{total:$,fileName:b})}return w()}):w()}},{key:"pause",value:function(){var d=this;return this.state===this.__states.STOPPED?Promise.resolve(!0):(this.__response&&(this.__response.unpipe(),this.__pipes.forEach(function(w){return w.stream.unpipe()})),this.__fileStream&&this.__fileStream.removeAllListeners(),this.__requestAbort(),this.__closeFileStream().then(function(){return d.__setState(d.__states.PAUSED),d.emit("pause"),!0}))}},{key:"resume",value:function(){return this.__promise?this.state===this.__states.STOPPED?Promise.resolve(!1):(this.__setState(this.__states.RESUMED),this.__isResumable&&(this.__isResumed=!0,this.__reqOptions.headers.range="bytes="+this.__downloaded+"-"),this.emit("resume",this.__isResumed),this.__start()):this.start()}},{key:"stop",value:function(){var d=this;if(this.state===this.__states.STOPPED)return Promise.resolve(!0);var w=function(){return new Promise(function(f,b){i.access(d.__filePath,function($){return $?(d.__emitStop(),f(!0)):void i.unlink(d.__filePath,function(T){return T?(d.__setState(d.__states.FAILED),d.emit("error",T),b(T)):(d.__emitStop(),void f(!0))})})})};return this.__requestAbort(),this.__closeFileStream().then(function(){return d.__opts.removeOnStop?w():(d.__emitStop(),Promise.resolve(!0))})}},{key:"pipe",value:function(d){var w=1<arguments.length&&arguments[1]!==void 0?arguments[1]:null;return this.__pipes.push({stream:d,options:w}),d}},{key:"unpipe",value:function(){var d=this,w=0<arguments.length&&arguments[0]!==void 0?arguments[0]:null,f=function($){return d.__response?d.__response.unpipe($):$.unpipe()};if(w){var b=this.__pipes.find(function($){return $.stream===w});return void(b&&(f(w),this.__pipes=this.__pipes.filter(function($){return $.stream!==w})))}this.__pipes.forEach(function($){return f($.stream)}),this.__pipes=[]}},{key:"getDownloadPath",value:function(){return this.__filePath}},{key:"isResumable",value:function(){return this.__isResumable}},{key:"updateOptions",value:function(d){var w=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"";this.__opts=Object.assign({},this.__opts,d),this.__headers=this.__opts.headers,-1<this.__opts.timeout&&(this.__opts.httpRequestOptions.timeout=this.__opts.timeout,this.__opts.httpsRequestOptions.timeout=this.__opts.timeout),(typeof this.__opts.progressThrottle!="number"||0>this.__opts.progressThrottle)&&(this.__opts.progressThrottle=this.__defaultOpts.progressThrottle),this.url=w||this.url,this.__reqOptions=this.__getReqOptions(this.__opts.method,this.url,this.__opts.headers),this.__initProtocol(this.url)}},{key:"getOptions",value:function(){return this.__opts}},{key:"getMetadata",value:function(){return this.__opts.metadata}},{key:"getStats",value:function(){return{total:this.__total,name:this.__fileName,downloaded:this.__downloaded,progress:this.__progress,speed:this.__statsEstimate.bytes}}},{key:"getTotalSize",value:function(){var d=this;return new Promise(function(w,f){var b=function(T){d.__initProtocol(T);var q=Object.assign({},d.__headers);q.hasOwnProperty("range")&&delete q.range;var V=d.__getReqOptions("HEAD",T,q);return Object.assign({},d.__reqOptions,V)},$=function(T,q){var V=d.__protocol.request(q,function(M){if(d.__isRequireRedirect(M)){var P=/^https?:\/\//.test(M.headers.location)?M.headers.location:new a.URL(M.headers.location,T).href;return d.emit("redirected",P,T),$(P,b(P))}return M.statusCode===200?void w({name:d.__getFileNameFromHeaders(M.headers,M),total:parseInt(M.headers["content-length"])||null}):f(new Error("Response status was "+M.statusCode))});V.on("error",function(M){return f(M)}),V.on("timeout",function(){return f(new Error("timeout"))}),V.on("uncaughtException",function(M){return f(M)}),V.end()};$(d.url,b(d.url))})}},{key:"getResumeState",value:function(){return{downloaded:this.__downloaded,filePath:this.__filePath,fileName:this.__fileName,total:this.__total}}},{key:"resumeFromFile",value:function(d){var w=this,f=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};return this.__opts.override=!0,this.__filePath=d,(f.total&&f.fileName?Promise.resolve({name:f.fileName,total:f.total}):this.getTotalSize()).then(function(b){var $=b.name,T=b.total;return w.__total=f.total||T,w.__fileName=f.fileName||$,w.__downloaded=f.downloaded||w.__getFilesizeInBytes(w.__filePath),w.__reqOptions.headers.range="bytes="+w.__downloaded+"-",w.__isResumed=!0,w.__isResumable=!0,w.__setState(w.__states.RESUMED),w.emit("resume",w.__isResumed),new Promise(function(q,V){w.__promise={resolve:q,reject:V},w.__start()})})}},{key:"__start",value:function(){this.__isRedirected||this.state===this.__states.RESUMED||(this.emit("start"),this.__setState(this.__states.STARTED),this.__initProtocol(this.url)),this.__response=null,this.__isAborted=!1,this.__request&&!this.__request.destroyed&&this.__request.destroy(),this.__retryTimeout&&(clearTimeout(this.__retryTimeout),this.__retryTimeout=null),this.__request=this.__downloadRequest(this.__promise.resolve,this.__promise.reject),this.__request.on("error",this.__onError(this.__promise.resolve,this.__promise.reject)),this.__request.on("timeout",this.__onTimeout(this.__promise.resolve,this.__promise.reject)),this.__request.on("uncaughtException",this.__onError(this.__promise.resolve,this.__promise.reject,!0)),this.__opts.body&&this.__request.write(this.__opts.body),this.__request.end()}},{key:"__resolvePending",value:function(){if(this.__promise){var d=this.__promise.resolve;return this.__promise=null,d(!0)}}},{key:"__downloadRequest",value:function(d,w){var f=this;return this.__protocol.request(this.__reqOptions,function(b){if(f.__response=b,f.__isResumed||(f.__total=parseInt(b.headers["content-length"])||null,f.__resetStats()),f.__isRequireRedirect(b)){var $=/^https?:\/\//.test(b.headers.location)?b.headers.location:new a.URL(b.headers.location,f.url).href;return f.__isRedirected=!0,f.__initProtocol($),f.emit("redirected",$,f.url),f.__start()}if(b.statusCode!==200&&b.statusCode!==206){var T=new Error("Response status was "+b.statusCode);return T.status=b.statusCode||0,T.body=b.body||"",f.__setState(f.__states.FAILED),f.emit("error",T),w(T)}(f.__opts.forceResume||b.headers.hasOwnProperty("accept-ranges")&&b.headers["accept-ranges"]!=="none")&&(f.__isResumable=!0),f.__startDownload(b,d,w)})}},{key:"__startDownload",value:function(d,w,f){var b=this,$=d;if(this.__isResumed)this.__fileStream=i.createWriteStream(this.__filePath,{flags:"a"});else{var T=this.__getFileNameFromHeaders(d.headers);if(this.__filePath=this.__getFilePath(T),this.__fileName=this.__filePath.split(l.sep).pop(),i.existsSync(this.__filePath)){var q=this.__getFilesizeInBytes(this.__filePath),V=this.__total?this.__total:0;if(t(this.__opts.override)==="object"&&this.__opts.override.skip&&(this.__opts.override.skipSmaller||q>=V))return this.emit("skip",{totalSize:this.__total,fileName:this.__fileName,filePath:this.__filePath,downloadedSize:q}),this.__setState(this.__states.SKIPPED),w(!0)}this.__fileStream=i.createWriteStream(this.__filePath,{})}this.emit("download",{fileName:this.__fileName,filePath:this.__filePath,totalSize:this.__total,isResumed:this.__isResumed,downloadedSize:this.__downloaded}),this.__retryCount=0,this.__isResumed=!1,this.__isRedirected=!1,this.__setState(this.__states.DOWNLOADING),this.__statsEstimate.time=new Date,this.__statsEstimate.throttleTime=new Date,$.on("data",function(M){return b.__calculateStats(M.length)}),this.__pipes.forEach(function(M){$.pipe(M.stream,M.options),$=M.stream}),$.pipe(this.__fileStream),$.on("error",this.__onError(w,f)),this.__fileStream.on("finish",this.__onFinished(w,f)),this.__fileStream.on("error",this.__onError(w,f))}},{key:"__hasFinished",value:function(){return!this.__isAborted&&[this.__states.PAUSED,this.__states.STOPPED,this.__states.RETRY,this.__states.FAILED,this.__states.RESUMED].indexOf(this.state)===-1}},{key:"__isRequireRedirect",value:function(d){return 300<d.statusCode&&400>d.statusCode&&d.headers.hasOwnProperty("location")&&d.headers.location}},{key:"__onFinished",value:function(d,w){var f=this;return function(){f.__fileStream.close(function(b){if(b)return w(b);if(f.__hasFinished()){var $=!!f.__total&&f.__downloaded!==f.__total;if($&&f.__isResumable&&f.__opts.resumeOnIncomplete&&f.__resumeRetryCount<=f.__opts.resumeOnIncompleteMaxRetry)return f.__resumeRetryCount++,f.emit("warning",new Error("uncomplete download, retrying")),f.resume();f.__setState(f.__states.FINISHED),f.__pipes=[],f.emit("end",{fileName:f.__fileName,filePath:f.__filePath,totalSize:f.__total,incomplete:$,onDiskSize:f.__getFilesizeInBytes(f.__filePath),downloadedSize:f.__downloaded})}return d(f.__downloaded===f.__total)})}}},{key:"__closeFileStream",value:function(){var d=this;return this.__fileStream?new Promise(function(w,f){d.__fileStream.close(function(b){return b?f(b):w(!0)})}):Promise.resolve(!0)}},{key:"__onError",value:function(d,w){var f=this,b=2<arguments.length&&arguments[2]!==void 0&&arguments[2];return function($){return f.__pipes=[],b&&f.__requestAbort(),f.state===f.__states.STOPPED||f.state===f.__states.FAILED?void 0:f.__opts.retry?f.__retry($).catch(function(T){f.__removeFile().finally(function(){f.__setState(f.__states.FAILED),f.emit("error",T||$),w(T||$)})}):f.__removeFile().finally(function(){f.__setState(f.__states.FAILED),f.emit("error",$),w($)})}}},{key:"__retry",value:function(){var d=this,w=0<arguments.length&&arguments[0]!==void 0?arguments[0]:null;if(!this.__opts.retry||t(this.__opts.retry)!=="object")return Promise.reject(w||new Error("wrong retry options"));var f=this.__opts.retry,b=f.delay,$=b===void 0?0:b,T=f.maxRetries,q=T===void 0?999:T;return this.__retryCount>=q?Promise.reject(w||new Error("reached the maximum retries")):(this.__retryCount++,this.__setState(this.__states.RETRY),this.emit("retry",this.__retryCount,this.__opts.retry,w),this.__response&&(this.__response.unpipe(),this.__pipes.forEach(function(V){return V.stream.unpipe()})),this.__fileStream&&this.__fileStream.removeAllListeners(),this.__requestAbort(),this.__closeFileStream().then(function(){return new Promise(function(V){return d.__retryTimeout=setTimeout(function(){return V(0<d.__downloaded?d.resume():d.__start())},$)})}))}},{key:"__onTimeout",value:function(d,w){var f=this;return function(){return f.__requestAbort(),f.__opts.retry?f.__retry(new Error("timeout")).catch(function(b){f.__removeFile().finally(function(){f.__setState(f.__states.FAILED),b?w(b):(f.emit("timeout"),w(new Error("timeout")))})}):f.__removeFile().finally(function(){f.__setState(f.__states.FAILED),f.emit("timeout"),w(new Error("timeout"))})}}},{key:"__resetStats",value:function(){this.__retryCount=0,this.__downloaded=0,this.__progress=0,this.__resumeRetryCount=0,this.__statsEstimate={time:0,bytes:0,prevBytes:0,throttleTime:0}}},{key:"__getFileNameFromHeaders",value:function(d,w){var f="",b=/.*filename\*=.*?'.*?'([^"].+?[^"])(?:(?:;)|$)/i,$=/.*filename="(.*?)";?/i,T=/.*filename=([^"].+?[^"])(?:(?:;)|$)/i,q=d.hasOwnProperty("content-disposition"),V=q?d["content-disposition"].match(b):null,M=!q||V?null:d["content-disposition"].match($),P=!q||V||M?null:d["content-disposition"].match(T);return q&&(V||M||P)?(f=d["content-disposition"],f=f.trim(),V?f=V[1]:M?f=M[1]:P&&(f=P[1]),f=f.replace(/[/\\]/g,"")):0<l.basename(new a.URL(this.requestURL).pathname).length?f=l.basename(new a.URL(this.requestURL).pathname):f=new a.URL(this.requestURL).hostname+".html",this.__opts.fileName?this.__getFileNameFromOpts(f,w):f.replace(/\.*$/,"")}},{key:"__getFilePath",value:function(d){var w=l.join(this.__destFolder,d),f=w;return this.__opts.override||this.state===this.__states.RESUMED||(f=this.__uniqFileNameSync(f),w!==f&&this.emit("renamed",{path:f,fileName:f.split(l.sep).pop(),prevPath:w,prevFileName:w.split(l.sep).pop()})),f}},{key:"__getFileNameFromOpts",value:function(d,w){if(!this.__opts.fileName)return d;if(typeof this.__opts.fileName=="string")return this.__opts.fileName;if(typeof this.__opts.fileName=="function"){var f=l.join(this.__destFolder,d);return w&&w.headers||this.__response&&this.__response.headers?this.__opts.fileName(d,f,(w||this.__response).headers["content-type"]):this.__opts.fileName(d,f)}if(t(this.__opts.fileName)==="object"){var b=this.__opts.fileName,$=b.name,T=!!b.hasOwnProperty("ext")&&b.ext;if(typeof T=="string")return $+"."+T;if(typeof T=="boolean"){if(T)return $;var q=d.includes(".")?d.split(".").pop():"";return q===""?$:$+"."+q}}return d}},{key:"__calculateStats",value:function(d){var w=new Date,f=w-this.__statsEstimate.time,b=w-this.__statsEstimate.throttleTime,$=this.__total||0;d&&(this.__downloaded+=d,this.__progress=$===0?0:100*(this.__downloaded/$),(this.__downloaded===$||1e3<f)&&(this.__statsEstimate.time=w,this.__statsEstimate.bytes=this.__downloaded-this.__statsEstimate.prevBytes,this.__statsEstimate.prevBytes=this.__downloaded),(this.__downloaded===$||b>this.__opts.progressThrottle)&&(this.__statsEstimate.throttleTime=w,this.emit("progress.throttled",this.getStats())),this.emit("progress",this.getStats()))}},{key:"__setState",value:function(d){this.state=d,this.emit("stateChanged",this.state)}},{key:"__getReqOptions",value:function(d,w){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{},b=new a.URL(w),$={protocol:b.protocol,host:b.hostname,port:b.port,path:b.pathname+b.search,method:d};return f&&($.headers=f),$}},{key:"__getFilesizeInBytes",value:function(d){try{var w=i.statSync(d,{throwIfNoEntry:!1}),f=w.size||0;return f}catch(b){this.emit("warning",b)}return 0}},{key:"__validate",value:function(d,w){if(typeof d!="string")throw new Error("URL should be an string");if(d.trim()==="")throw new Error("URL couldn't be empty");if(typeof w!="string")throw new Error("Destination Folder should be an string");if(w.trim()==="")throw new Error("Destination Folder couldn't be empty");if(!i.existsSync(w))throw new Error("Destination Folder must exist");var f=i.statSync(w);if(!f.isDirectory())throw new Error("Destination Folder must be a directory");try{i.accessSync(w,i.constants.W_OK)}catch{throw new Error("Destination Folder must be writable")}return!0}},{key:"__initProtocol",value:function(d){var w=this.__getReqOptions(this.__opts.method,d,this.__headers);this.requestURL=d,-1<d.indexOf("https://")?(this.__protocol=m,w.agent=new m.Agent({keepAlive:!1}),this.__reqOptions=Object.assign({},w,this.__opts.httpsRequestOptions)):(this.__protocol=u,w.agent=new u.Agent({keepAlive:!1}),this.__reqOptions=Object.assign({},w,this.__opts.httpRequestOptions))}},{key:"__uniqFileNameSync",value:function(d){if(typeof d!="string"||d==="")return d;try{i.accessSync(d,i.F_OK);var w=d.match(/(.*)(\([0-9]+\))(\..*)$/),f=w?w[1].trim():d,b=w?parseInt(w[2].replace(/\(|\)/,"")):0,$=d.split(".").pop();return $!==d&&0<$.length?($="."+$,f=f.replace($,"")):$="",this.__uniqFileNameSync(f+" ("+ ++b+")"+$)}catch{return d}}},{key:"__removeFile",value:function(){var d=this;return new Promise(function(w){return d.__fileStream?void d.__fileStream.close(function(f){return f&&d.emit("warning",f),d.__opts.removeOnFail?i.access(d.__filePath,function(b){return b?w():void i.unlink(d.__filePath,function($){$&&d.emit("warning",f),w()})}):void w()}):w()})}},{key:"__requestAbort",value:function(){this.__isAborted=!0,this.__retryTimeout&&(clearTimeout(this.__retryTimeout),this.__retryTimeout=null),this.__response&&this.__response.destroy(),this.__request&&(this.__request.destroy?this.__request.destroy():this.__request.abort())}},{key:"__emitStop",value:function(){this.__resolvePending(),this.__setState(this.__states.STOPPED),this.emit("stop")}}]),g})(_.EventEmitter)})(zo)),zo}var Su=oS();function $m(){return process.platform==="linux"&&fe.sync("nala",{nothrow:!0})!==null}function aS(){return process.platform==="linux"&&fe.sync("apt-fast",{nothrow:!0})!==null}function me(){return process.platform==="linux"&&fe.sync("apt-get",{nothrow:!0})!==null}function Br(){if($m())return"nala";if(aS())return"apt-fast";if(me())return"apt-get";throw new Error("No apt command found")}function lt(e="apt-get"){const t={...process.env,DEBIAN_FRONTEND:"noninteractive"};return e==="nala"&&(t.LANG===void 0&&(t.LANG="C.UTF-8"),t.LC_ALL===void 0&&(t.LC_ALL="C.UTF-8")),t}function uS(e){return"keyUrl"in e?Om(e):lS(e)}const cS="/etc/apt/trusted.gpg.d",Dd="keyserver.ubuntu.com";async function lS({key:e,keyServer:t=Dd,fileName:r,keyStorePath:n=Dd}){try{Pm(r);const i=Z(n,r);return await _e(i)||(Im(),await yt("gpg",["--no-default-keyring","--keyring",`gnupg-ring:${i}`,"--keyserver",t,"--recv-keys",e]),await yt("chmod",["644",i])),i}catch(i){ye(`Failed to add apt key via server ${t}: ${i}`);return}}async function Om({keyUrl:e,fileName:t,keyStorePath:r=cS}){try{Pm(t);const n=Z(r,t);if(!await _e(n)){Im(),await de([{name:"ca-certificates"}]);const i=Z(Ue(),t),a=new Su.DownloaderHelper(e,Ue(),{fileName:t});a.on("error",s=>{throw new Error(`Failed to download ${e}: ${s}`)}),await a.start(),pe("gpg",["--no-default-keyring","--keyring",`gnupg-ring:${n}`,"--import",i]),pe("chmod",["644",n])}return n}catch(n){ye(`Failed to add apt key via download ${e}: ${n}`);return}}function Im(){pe("gpg",["-k"])}function Pm(e){if(!e.endsWith(".gpg"))throw new Error(`Key file name must end with .gpg: ${e}`)}const Or="Dpkg::Lock::Timeout=300";async function Ru(e){try{const{stdout:t}=await le("dpkg",["-s",e],{env:lt("apt-get"),stdio:"pipe"});return typeof t!="string"?!1:t.split(`
`).some(n=>n.startsWith("Status: install ok installed"))}catch{return!1}}async function fS(e){try{const{stdout:t}=await le("dpkg",["-l",e],{env:lt("apt-get"),stdio:"pipe"});return typeof t!="string"?!1:t.split(`
`).some(n=>n.startsWith("ii"))}catch{return!1}}let Tm=!1;function dS(e=Br()){pe(e,["update","-o",Or],{...st,env:lt(e)}),Tm=!0}const mr=ke(dS);var It;(function(e){e[e.NameDashVersion=0]="NameDashVersion",e[e.NameEqualsVersion=1]="NameEqualsVersion",e[e.Name=2]="Name",e[e.None=3]="None"})(It||(It={}));async function Am(e,t=Br()){return(await Promise.all(e.map(r=>Ja(r,t)))).filter(r=>r!==void 0)}async function Ja(e,t=Br()){const r=await pS(t,e);return await Ru(r)?void 0:r}async function Nm(e,t,r,n){const i=r!==void 0&&r!=="",a=!i||n;if(i){if(await hS(e,t,r))return It.NameDashVersion;if(await Fd(e,`${t}=${r}`))return It.NameEqualsVersion}const s=()=>{i&&n&&Y(`Could not find package ${t} ${r}. Falling back to latest version.`)};return a&&await Fd(e,t)?(s(),It.Name):Tm?a?(s(),It.Name):It.None:(mr(e),Nm(e,t,r,n))}async function hS(e,t,r){try{const{stdout:n}=await le("apt-cache",["search","--names-only",`^${Rn(t)}-${Rn(r)}$`],{env:lt(e),stdio:"pipe"});if(n.trim()!=="")return!0}catch{}return!1}async function Fd(e,t){try{const{stdout:r}=await le("apt-cache",["show",t],{env:lt(e),stdio:"pipe",verbose:!0});if(r.trim()!=="")return!0}catch{}return!1}async function pS(e,t){const{name:r,version:n,fallBackToLatest:i=!1}=t;switch(await Nm(e,r,n,i)){case It.NameDashVersion:return`${r}-${n}`;case It.NameEqualsVersion:return`${r}=${n}`;case It.Name:return r;default:throw new Error(`Could not find package '${r}' ${n??"with unspecified version"}`)}}async function mS(e){mr(e);const t=await Am([{name:"ca-certificates"},{name:"gnupg"},{name:"apt-utils"}],e);t.length!==0&&pe(e,["install","-y","--fix-broken","-o",Or,...t],{...st,env:lt(e)})}const Lm=ke(mS,{promise:!0});function _S(e="apt-get"){try{const{stdout:t}=pe("add-apt-repository",["--help"],{...st,env:lt(e),stdio:"pipe"});return t.includes("--no-update")}catch{return!1}}const Cm=ke(_S);async function yS(e,t=Br()){await Lm(t),await xm();try{pe("add-apt-repository",["-y",Cm(t)?"--no-update":void 0,e].filter(r=>r!==void 0),{...st,env:lt(t)})}catch{pe("add-apt-repository",["-y",e],{...st,env:lt(t)})}mr.clear(),mr(t)}async function xm(){if(await Ru("software-properties-common"))return;const e="apt-get";pe(e,["install","-y","--fix-broken","-o",Or,"software-properties-common"],{...st,env:lt(e)})}const vS=["E: Could not get lock","dpkg: error processing archive","dpkg: error: dpkg status database is locked by another process"];async function de(e,t=!1){try{const r=Br();for(const{name:i,version:a}of e)Y(`Installing ${i} ${a??""} via ${r}`);t&&mr.clear(),mr(r),await wS(r,e);const n=await Am(e,r);if(n.length===0)return Y("All packages are already installed"),{binDir:"/usr/bin/"};await Lm(r);try{await gS(e),pe(r,["install","--fix-broken","-y",...n],{...st,env:lt(r)})}catch(i){if(ES(i))vS.some(a=>typeof i.stderr=="string"&&i.stderr.includes(a))&&(ye(`Failed to install packages ${n}. Retrying...`),pe(r,["install","--fix-broken","-y","-o",Or,...n],{...st,env:lt(r)}));else throw i}return{binDir:"/usr/bin/"}}catch(r){const n=r instanceof Error?`${r.message}
${r.stack}`:String(r);throw new Error(`Failed to install apt packages: ${n}`)}}async function wS(e,t){const r=[...new Set(t.flatMap(n=>n.repository??[]))];await Promise.all(r.map(n=>yS(n,e)))}async function gS(e){await Promise.all(e.map(async t=>{t.key!==void 0&&await uS(t.key)}))}function ES(e){return typeof e.stderr=="string"}let lr;async function qd(){if(!me())return;if(typeof lr=="string")return{binDir:lr};const e=fe.sync("apt-fast",{nothrow:!0});return e!==null?(lr=Re(e),{binDir:lr}):(lr="/usr/bin",await SS(),{binDir:lr})}async function SS(){const e=de([{name:"bash"},{name:"wget"}]),t=new Su.DownloaderHelper("https://raw.githubusercontent.com/ilikenwf/apt-fast/c2cd0a0420d3f2d647dc82cf749bfd58c4697dac/quick-install.sh",Ue(),{fileName:"install-apt-fast.sh"});t.on("error",c=>{throw new Error(`Failed to download install-apt-fast.sh: ${c}`)}),await t.start();const r=Z(Ue(),"install-apt-fast.sh");let n=await pr(r,"utf8");n=n.replace(/sudo/g,"").replace("https://raw.githubusercontent.com/ilikenwf/apt-fast/master","https://raw.githubusercontent.com/Rongronggg9/apt-fast/ac82051792f764220e5e303d4560de0f1952826b"),await wn(r,n),await e;try{pe("bash",[r])}catch(c){Ne(`Failed to install apt-fast via installer: ${c}`)}const i="/etc/apt-fast.conf";let a=await pr(i,"utf8");const s=["_APTMGR","DOWNLOADBEFORE"];for(const c of s)a=a.replace(new RegExp(`^#\\s*${c}`,"m"),c);const l=Z(Ue(),"apt-fast.conf");await wn(l,a),pe("mv",[l,i])}let Ft;async function RS({version:e}={}){if(!me())return;if(typeof Ft=="string")return{binDir:Ft};const t=fe.sync("nala",{nothrow:!0});if(t!==null)return Ft=Re(t),{binDir:Ft};await de([{name:"python3-apt"}]),Ft="/usr/bin";try{const r=await Ja({name:"nala",version:e});if(r!==void 0)return await de([{name:r}]),{binDir:Ft}}catch(r){Y(`Failed to install nala: ${r}`)}try{const r=await Ja({name:"nala-legacy"});if(r!==void 0)return await de([{name:r}],!0),{binDir:Ft}}catch(r){Y(`Failed to install nala-legacy: ${r}`)}return await bS(),{binDir:Ft}}async function bS(){const e=new Su.DownloaderHelper("https://gitlab.com/volian/volian-archive/-/raw/1939afc3f80638dca2bbedde74bbd86731703cc8/install-nala.sh",Ue(),{fileName:"install-nala.sh"});e.on("error",n=>{throw new Error(`Failed to download install-nala.sh: ${n}`)}),await e.start();const t=Z(Ue(),"install-nala.sh"),r=await pr(t,"utf8");await wn(t,r.replace(/sudo/g,"")),await de([{name:"wget"}]);try{pe("bash",[t])}catch(n){Ne(`Failed to install nala via installer: ${n}`),pe("apt",["install","-y","-t","nala","nala"])}}var Wo={},kd;function $S(){return kd||(kd=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DownloaderHelper=e.DH_STATES=void 0;var t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},r=(function(){function v(g,E){for(var d,w=0;w<E.length;w++)d=E[w],d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(g,d.key,d)}return function(g,E,d){return E&&v(g.prototype,E),d&&v(g,d),g}})(),n=De,i=S(n),a=ru,s=ce,l=S(s),c=Ln,u=S(c),o=jr,m=S(o),_=vr;function S(v){if(v&&v.__esModule)return v;var g={};if(v!=null)for(var E in v)Object.prototype.hasOwnProperty.call(v,E)&&(g[E]=v[E]);return g.default=v,g}function R(v,g){if(!(v instanceof g))throw new TypeError("Cannot call a class as a function")}function p(v,g){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:v}function h(v,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);v.prototype=Object.create(g&&g.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(v,g):v.__proto__=g)}var y=e.DH_STATES={IDLE:"IDLE",SKIPPED:"SKIPPED",STARTED:"STARTED",DOWNLOADING:"DOWNLOADING",RETRY:"RETRY",PAUSED:"PAUSED",RESUMED:"RESUMED",STOPPED:"STOPPED",FINISHED:"FINISHED",FAILED:"FAILED"};e.DownloaderHelper=(function(v){function g(E,d){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{};R(this,g);var f=p(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,{captureRejections:!0}));return f.__validate(E,d)?(f.url=f.requestURL=E.trim(),f.state=y.IDLE,f.__defaultOpts={body:null,retry:!1,method:"GET",headers:{},fileName:"",timeout:-1,metadata:null,override:!1,forceResume:!1,removeOnStop:!0,removeOnFail:!0,progressThrottle:1e3,httpRequestOptions:{},httpsRequestOptions:{},resumeOnIncomplete:!0,resumeIfFileExists:!1,resumeOnIncompleteMaxRetry:5},f.__opts=Object.assign({},f.__defaultOpts),f.__pipes=[],f.__total=0,f.__downloaded=0,f.__progress=0,f.__retryCount=0,f.__retryTimeout=null,f.__resumeRetryCount=0,f.__states=y,f.__promise=null,f.__request=null,f.__response=null,f.__isAborted=!1,f.__isResumed=!1,f.__isResumable=!1,f.__isRedirected=!1,f.__destFolder=d,f.__statsEstimate={time:0,bytes:0,prevBytes:0,throttleTime:0},f.__fileName="",f.__filePath="",f.updateOptions(w),f):p(f)}return h(g,v),r(g,[{key:"start",value:function(){var d=this,w=function(){return new Promise(function(f,b){d.__promise={resolve:f,reject:b},d.__start()})};return this.__opts.resumeIfFileExists&&this.state!==this.__states.RESUMED?this.getTotalSize().then(function(f){var b=f.name,$=f.total,T=d.__opts.override;if(d.__opts.override=!0,d.__filePath=d.__getFilePath(b),d.__opts.override=T,d.__filePath&&i.existsSync(d.__filePath)){var q=d.__getFilesizeInBytes(d.__filePath);return q===$?w():d.resumeFromFile(d.__filePath,{total:$,fileName:b})}return w()}):w()}},{key:"pause",value:function(){var d=this;return this.state===this.__states.STOPPED?Promise.resolve(!0):(this.__response&&(this.__response.unpipe(),this.__pipes.forEach(function(w){return w.stream.unpipe()})),this.__fileStream&&this.__fileStream.removeAllListeners(),this.__requestAbort(),this.__closeFileStream().then(function(){return d.__setState(d.__states.PAUSED),d.emit("pause"),!0}))}},{key:"resume",value:function(){return this.__promise?this.state===this.__states.STOPPED?Promise.resolve(!1):(this.__setState(this.__states.RESUMED),this.__isResumable&&(this.__isResumed=!0,this.__reqOptions.headers.range="bytes="+this.__downloaded+"-"),this.emit("resume",this.__isResumed),this.__start()):this.start()}},{key:"stop",value:function(){var d=this;if(this.state===this.__states.STOPPED)return Promise.resolve(!0);var w=function(){return new Promise(function(f,b){i.access(d.__filePath,function($){return $?(d.__emitStop(),f(!0)):void i.unlink(d.__filePath,function(T){return T?(d.__setState(d.__states.FAILED),d.emit("error",T),b(T)):(d.__emitStop(),void f(!0))})})})};return this.__requestAbort(),this.__closeFileStream().then(function(){return d.__opts.removeOnStop?w():(d.__emitStop(),Promise.resolve(!0))})}},{key:"pipe",value:function(d){var w=1<arguments.length&&arguments[1]!==void 0?arguments[1]:null;return this.__pipes.push({stream:d,options:w}),d}},{key:"unpipe",value:function(){var d=this,w=0<arguments.length&&arguments[0]!==void 0?arguments[0]:null,f=function($){return d.__response?d.__response.unpipe($):$.unpipe()};if(w){var b=this.__pipes.find(function($){return $.stream===w});return void(b&&(f(w),this.__pipes=this.__pipes.filter(function($){return $.stream!==w})))}this.__pipes.forEach(function($){return f($.stream)}),this.__pipes=[]}},{key:"getDownloadPath",value:function(){return this.__filePath}},{key:"isResumable",value:function(){return this.__isResumable}},{key:"updateOptions",value:function(d){var w=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"";this.__opts=Object.assign({},this.__opts,d),this.__headers=this.__opts.headers,-1<this.__opts.timeout&&(this.__opts.httpRequestOptions.timeout=this.__opts.timeout,this.__opts.httpsRequestOptions.timeout=this.__opts.timeout),(typeof this.__opts.progressThrottle!="number"||0>this.__opts.progressThrottle)&&(this.__opts.progressThrottle=this.__defaultOpts.progressThrottle),this.url=w||this.url,this.__reqOptions=this.__getReqOptions(this.__opts.method,this.url,this.__opts.headers),this.__initProtocol(this.url)}},{key:"getOptions",value:function(){return this.__opts}},{key:"getMetadata",value:function(){return this.__opts.metadata}},{key:"getStats",value:function(){return{total:this.__total,name:this.__fileName,downloaded:this.__downloaded,progress:this.__progress,speed:this.__statsEstimate.bytes}}},{key:"getTotalSize",value:function(){var d=this;return new Promise(function(w,f){var b=function(T){d.__initProtocol(T);var q=Object.assign({},d.__headers);q.hasOwnProperty("range")&&delete q.range;var V=d.__getReqOptions("HEAD",T,q);return Object.assign({},d.__reqOptions,V)},$=function(T,q){var V=d.__protocol.request(q,function(M){if(d.__isRequireRedirect(M)){var P=/^https?:\/\//.test(M.headers.location)?M.headers.location:new a.URL(M.headers.location,T).href;return d.emit("redirected",P,T),$(P,b(P))}return M.statusCode===200?void w({name:d.__getFileNameFromHeaders(M.headers,M),total:parseInt(M.headers["content-length"])||null}):f(new Error("Response status was "+M.statusCode))});V.on("error",function(M){return f(M)}),V.on("timeout",function(){return f(new Error("timeout"))}),V.on("uncaughtException",function(M){return f(M)}),V.end()};$(d.url,b(d.url))})}},{key:"getResumeState",value:function(){return{downloaded:this.__downloaded,filePath:this.__filePath,fileName:this.__fileName,total:this.__total}}},{key:"resumeFromFile",value:function(d){var w=this,f=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};return this.__opts.override=!0,this.__filePath=d,(f.total&&f.fileName?Promise.resolve({name:f.fileName,total:f.total}):this.getTotalSize()).then(function(b){var $=b.name,T=b.total;return w.__total=f.total||T,w.__fileName=f.fileName||$,w.__downloaded=f.downloaded||w.__getFilesizeInBytes(w.__filePath),w.__reqOptions.headers.range="bytes="+w.__downloaded+"-",w.__isResumed=!0,w.__isResumable=!0,w.__setState(w.__states.RESUMED),w.emit("resume",w.__isResumed),new Promise(function(q,V){w.__promise={resolve:q,reject:V},w.__start()})})}},{key:"__start",value:function(){this.__isRedirected||this.state===this.__states.RESUMED||(this.emit("start"),this.__setState(this.__states.STARTED),this.__initProtocol(this.url)),this.__response=null,this.__isAborted=!1,this.__request&&!this.__request.destroyed&&this.__request.destroy(),this.__retryTimeout&&(clearTimeout(this.__retryTimeout),this.__retryTimeout=null),this.__request=this.__downloadRequest(this.__promise.resolve,this.__promise.reject),this.__request.on("error",this.__onError(this.__promise.resolve,this.__promise.reject)),this.__request.on("timeout",this.__onTimeout(this.__promise.resolve,this.__promise.reject)),this.__request.on("uncaughtException",this.__onError(this.__promise.resolve,this.__promise.reject,!0)),this.__opts.body&&this.__request.write(this.__opts.body),this.__request.end()}},{key:"__resolvePending",value:function(){if(this.__promise){var d=this.__promise.resolve;return this.__promise=null,d(!0)}}},{key:"__downloadRequest",value:function(d,w){var f=this;return this.__protocol.request(this.__reqOptions,function(b){if(f.__response=b,f.__isResumed||(f.__total=parseInt(b.headers["content-length"])||null,f.__resetStats()),f.__isRequireRedirect(b)){var $=/^https?:\/\//.test(b.headers.location)?b.headers.location:new a.URL(b.headers.location,f.url).href;return f.__isRedirected=!0,f.__initProtocol($),f.emit("redirected",$,f.url),f.__start()}if(b.statusCode!==200&&b.statusCode!==206){var T=new Error("Response status was "+b.statusCode);return T.status=b.statusCode||0,T.body=b.body||"",f.__setState(f.__states.FAILED),f.emit("error",T),w(T)}(f.__opts.forceResume||b.headers.hasOwnProperty("accept-ranges")&&b.headers["accept-ranges"]!=="none")&&(f.__isResumable=!0),f.__startDownload(b,d,w)})}},{key:"__startDownload",value:function(d,w,f){var b=this,$=d;if(this.__isResumed)this.__fileStream=i.createWriteStream(this.__filePath,{flags:"a"});else{var T=this.__getFileNameFromHeaders(d.headers);if(this.__filePath=this.__getFilePath(T),this.__fileName=this.__filePath.split(l.sep).pop(),i.existsSync(this.__filePath)){var q=this.__getFilesizeInBytes(this.__filePath),V=this.__total?this.__total:0;if(t(this.__opts.override)==="object"&&this.__opts.override.skip&&(this.__opts.override.skipSmaller||q>=V))return this.emit("skip",{totalSize:this.__total,fileName:this.__fileName,filePath:this.__filePath,downloadedSize:q}),this.__setState(this.__states.SKIPPED),w(!0)}this.__fileStream=i.createWriteStream(this.__filePath,{})}this.emit("download",{fileName:this.__fileName,filePath:this.__filePath,totalSize:this.__total,isResumed:this.__isResumed,downloadedSize:this.__downloaded}),this.__retryCount=0,this.__isResumed=!1,this.__isRedirected=!1,this.__setState(this.__states.DOWNLOADING),this.__statsEstimate.time=new Date,this.__statsEstimate.throttleTime=new Date,$.on("data",function(M){return b.__calculateStats(M.length)}),this.__pipes.forEach(function(M){$.pipe(M.stream,M.options),$=M.stream}),$.pipe(this.__fileStream),$.on("error",this.__onError(w,f)),this.__fileStream.on("finish",this.__onFinished(w,f)),this.__fileStream.on("error",this.__onError(w,f))}},{key:"__hasFinished",value:function(){return!this.__isAborted&&[this.__states.PAUSED,this.__states.STOPPED,this.__states.RETRY,this.__states.FAILED,this.__states.RESUMED].indexOf(this.state)===-1}},{key:"__isRequireRedirect",value:function(d){return 300<d.statusCode&&400>d.statusCode&&d.headers.hasOwnProperty("location")&&d.headers.location}},{key:"__onFinished",value:function(d,w){var f=this;return function(){f.__fileStream.close(function(b){if(b)return w(b);if(f.__hasFinished()){var $=!!f.__total&&f.__downloaded!==f.__total;if($&&f.__isResumable&&f.__opts.resumeOnIncomplete&&f.__resumeRetryCount<=f.__opts.resumeOnIncompleteMaxRetry)return f.__resumeRetryCount++,f.emit("warning",new Error("uncomplete download, retrying")),f.resume();f.__setState(f.__states.FINISHED),f.__pipes=[],f.emit("end",{fileName:f.__fileName,filePath:f.__filePath,totalSize:f.__total,incomplete:$,onDiskSize:f.__getFilesizeInBytes(f.__filePath),downloadedSize:f.__downloaded})}return d(f.__downloaded===f.__total)})}}},{key:"__closeFileStream",value:function(){var d=this;return this.__fileStream?new Promise(function(w,f){d.__fileStream.close(function(b){return b?f(b):w(!0)})}):Promise.resolve(!0)}},{key:"__onError",value:function(d,w){var f=this,b=2<arguments.length&&arguments[2]!==void 0&&arguments[2];return function($){return f.__pipes=[],b&&f.__requestAbort(),f.state===f.__states.STOPPED||f.state===f.__states.FAILED?void 0:f.__opts.retry?f.__retry($).catch(function(T){f.__removeFile().finally(function(){f.__setState(f.__states.FAILED),f.emit("error",T||$),w(T||$)})}):f.__removeFile().finally(function(){f.__setState(f.__states.FAILED),f.emit("error",$),w($)})}}},{key:"__retry",value:function(){var d=this,w=0<arguments.length&&arguments[0]!==void 0?arguments[0]:null;if(!this.__opts.retry||t(this.__opts.retry)!=="object")return Promise.reject(w||new Error("wrong retry options"));var f=this.__opts.retry,b=f.delay,$=b===void 0?0:b,T=f.maxRetries,q=T===void 0?999:T;return this.__retryCount>=q?Promise.reject(w||new Error("reached the maximum retries")):(this.__retryCount++,this.__setState(this.__states.RETRY),this.emit("retry",this.__retryCount,this.__opts.retry,w),this.__response&&(this.__response.unpipe(),this.__pipes.forEach(function(V){return V.stream.unpipe()})),this.__fileStream&&this.__fileStream.removeAllListeners(),this.__requestAbort(),this.__closeFileStream().then(function(){return new Promise(function(V){return d.__retryTimeout=setTimeout(function(){return V(0<d.__downloaded?d.resume():d.__start())},$)})}))}},{key:"__onTimeout",value:function(d,w){var f=this;return function(){return f.__requestAbort(),f.__opts.retry?f.__retry(new Error("timeout")).catch(function(b){f.__removeFile().finally(function(){f.__setState(f.__states.FAILED),b?w(b):(f.emit("timeout"),w(new Error("timeout")))})}):f.__removeFile().finally(function(){f.__setState(f.__states.FAILED),f.emit("timeout"),w(new Error("timeout"))})}}},{key:"__resetStats",value:function(){this.__retryCount=0,this.__downloaded=0,this.__progress=0,this.__resumeRetryCount=0,this.__statsEstimate={time:0,bytes:0,prevBytes:0,throttleTime:0}}},{key:"__getFileNameFromHeaders",value:function(d,w){var f="",b=/.*filename\*=.*?'.*?'([^"].+?[^"])(?:(?:;)|$)/i,$=/.*filename="(.*?)";?/i,T=/.*filename=([^"].+?[^"])(?:(?:;)|$)/i,q=d.hasOwnProperty("content-disposition"),V=q?d["content-disposition"].match(b):null,M=!q||V?null:d["content-disposition"].match($),P=!q||V||M?null:d["content-disposition"].match(T);return q&&(V||M||P)?(f=d["content-disposition"],f=f.trim(),V?f=V[1]:M?f=M[1]:P&&(f=P[1]),f=f.replace(/[/\\]/g,"")):0<l.basename(new a.URL(this.requestURL).pathname).length?f=l.basename(new a.URL(this.requestURL).pathname):f=new a.URL(this.requestURL).hostname+".html",this.__opts.fileName?this.__getFileNameFromOpts(f,w):f.replace(/\.*$/,"")}},{key:"__getFilePath",value:function(d){var w=l.join(this.__destFolder,d),f=w;return this.__opts.override||this.state===this.__states.RESUMED||(f=this.__uniqFileNameSync(f),w!==f&&this.emit("renamed",{path:f,fileName:f.split(l.sep).pop(),prevPath:w,prevFileName:w.split(l.sep).pop()})),f}},{key:"__getFileNameFromOpts",value:function(d,w){if(!this.__opts.fileName)return d;if(typeof this.__opts.fileName=="string")return this.__opts.fileName;if(typeof this.__opts.fileName=="function"){var f=l.join(this.__destFolder,d);return w&&w.headers||this.__response&&this.__response.headers?this.__opts.fileName(d,f,(w||this.__response).headers["content-type"]):this.__opts.fileName(d,f)}if(t(this.__opts.fileName)==="object"){var b=this.__opts.fileName,$=b.name,T=!!b.hasOwnProperty("ext")&&b.ext;if(typeof T=="string")return $+"."+T;if(typeof T=="boolean"){if(T)return $;var q=d.includes(".")?d.split(".").pop():"";return q===""?$:$+"."+q}}return d}},{key:"__calculateStats",value:function(d){var w=new Date,f=w-this.__statsEstimate.time,b=w-this.__statsEstimate.throttleTime,$=this.__total||0;d&&(this.__downloaded+=d,this.__progress=$===0?0:100*(this.__downloaded/$),(this.__downloaded===$||1e3<f)&&(this.__statsEstimate.time=w,this.__statsEstimate.bytes=this.__downloaded-this.__statsEstimate.prevBytes,this.__statsEstimate.prevBytes=this.__downloaded),(this.__downloaded===$||b>this.__opts.progressThrottle)&&(this.__statsEstimate.throttleTime=w,this.emit("progress.throttled",this.getStats())),this.emit("progress",this.getStats()))}},{key:"__setState",value:function(d){this.state=d,this.emit("stateChanged",this.state)}},{key:"__getReqOptions",value:function(d,w){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{},b=new a.URL(w),$={protocol:b.protocol,host:b.hostname,port:b.port,path:b.pathname+b.search,method:d};return f&&($.headers=f),$}},{key:"__getFilesizeInBytes",value:function(d){try{var w=i.statSync(d,{throwIfNoEntry:!1}),f=w.size||0;return f}catch(b){this.emit("warning",b)}return 0}},{key:"__validate",value:function(d,w){if(typeof d!="string")throw new Error("URL should be an string");if(d.trim()==="")throw new Error("URL couldn't be empty");if(typeof w!="string")throw new Error("Destination Folder should be an string");if(w.trim()==="")throw new Error("Destination Folder couldn't be empty");if(!i.existsSync(w))throw new Error("Destination Folder must exist");var f=i.statSync(w);if(!f.isDirectory())throw new Error("Destination Folder must be a directory");try{i.accessSync(w,i.constants.W_OK)}catch{throw new Error("Destination Folder must be writable")}return!0}},{key:"__initProtocol",value:function(d){var w=this.__getReqOptions(this.__opts.method,d,this.__headers);this.requestURL=d,-1<d.indexOf("https://")?(this.__protocol=m,w.agent=new m.Agent({keepAlive:!1}),this.__reqOptions=Object.assign({},w,this.__opts.httpsRequestOptions)):(this.__protocol=u,w.agent=new u.Agent({keepAlive:!1}),this.__reqOptions=Object.assign({},w,this.__opts.httpRequestOptions))}},{key:"__uniqFileNameSync",value:function(d){if(typeof d!="string"||d==="")return d;try{i.accessSync(d,i.F_OK);var w=d.match(/(.*)(\([0-9]+\))(\..*)$/),f=w?w[1].trim():d,b=w?parseInt(w[2].replace(/\(|\)/,"")):0,$=d.split(".").pop();return $!==d&&0<$.length?($="."+$,f=f.replace($,"")):$="",this.__uniqFileNameSync(f+" ("+ ++b+")"+$)}catch{return d}}},{key:"__removeFile",value:function(){var d=this;return new Promise(function(w){return d.__fileStream?void d.__fileStream.close(function(f){return f&&d.emit("warning",f),d.__opts.removeOnFail?i.access(d.__filePath,function(b){return b?w():void i.unlink(d.__filePath,function($){$&&d.emit("warning",f),w()})}):void w()}):w()})}},{key:"__requestAbort",value:function(){this.__isAborted=!0,this.__retryTimeout&&(clearTimeout(this.__retryTimeout),this.__retryTimeout=null),this.__response&&this.__response.destroy(),this.__request&&(this.__request.destroy?this.__request.destroy():this.__request.abort())}},{key:"__emitStop",value:function(){this.__resolvePending(),this.__setState(this.__states.STOPPED),this.emit("stop")}}]),g})(_.EventEmitter)})(Wo)),Wo}var OS=$S();let Yt;async function bu(e={}){if(!["darwin","linux"].includes(process.platform)||process.platform==="linux"&&process.arch!=="x64"){ye(`Brew is not supported on ${process.platform} ${process.arch}`);return}if(typeof Yt=="string")return{binDir:Yt};const t=await fe("brew",{nothrow:!0});if(t!==null)return Yt=Re(t),{binDir:Yt};await de([{name:"ca-certificates"}]);const r=new OS.DownloaderHelper("https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh",Ue(),{fileName:"install-brew.sh"});return r.on("error",n=>{throw new Error(`Failed to download the brew installer script: ${n}`)}),await r.start(),ze("/bin/bash",[r.getDownloadPath()],{stdio:"inherit",env:{NONINTERACTIVE:"1"}}),Yt=$u(),await be(Yt,e.rcOptions),{binDir:Yt}}function $u(){return Z(Ou(),"bin")}function Dm(){return Z($u(),"brew")}function Ou(){if(process.platform==="darwin")return process.arch==="arm64"?"/opt/homebrew":"/usr/local";if(process.platform==="linux")return"/home/linuxbrew/.linuxbrew";throw new Error("Unsupported platform for brew")}function Fm(e,t){return t!==void 0&&t!==""?`${e}@${t}`:e}async function IS(e,t){const r=Fm(e,t),n=await jd(r);if(n!==void 0)return n;const i=await jd(e);return i!==void 0?i:PS(e,r)}async function jd(e){try{const t=Dm();return(await le(t,["--prefix",e],{stdio:"pipe"})).stdout}catch{return}}function PS(e,t){const r=Ou(),n=Z(r,"opt",t);if(Qt(n))return n;const i=Z(r,"opt",e);if(Qt(i))return i;const a=Z(r,"Cellar",t);if(Qt(a))return a;const s=Z(r,"Cellar",e);if(Qt(s))return s;const l=Z(r,"lib",t);if(Qt(l))return l;const c=Z(r,"lib",e);if(Qt(c))return c}let Ud=!1;async function Ge(e,t,r={}){"overwrite"in r||(r.overwrite=!0),r.cask===!0&&(r.overwrite=!1),Y(`Installing ${e} ${t??""} via brew`),(!Ud||fe.sync("brew",{nothrow:!0})===null)&&(await bu(),Ud=!0);const n=Dm(),i=["install",Fm(e,t)];for(const[c,u]of Object.entries(r))typeof u=="boolean"&&u?i.push(`--${c}`):typeof u=="string"&&i.push(`--${c}`,u);const a=ze(n,[...i,"--dry-run"],{stdio:"pipe"});a.exitCode===0&&new RegExp(`.*${e}.* is already installed and up-to-date.[\\s\\S]*`).test(a.stderr)?Y(`${e} ${t??""} is already installed and up-to-date`):ze(n,i,{stdio:"inherit"});const l=await IS(e,t);return l===void 0?(ye(`Failed to find installation directory for ${e} ${t}`),{binDir:$u(),installDir:void 0}):{installDir:l,binDir:Z(l,"bin")}}var Iu=fu();const ne={rcPath:rt("~/.cpprc"),guard:"cpp"};async function qm(){if(process.platform==="darwin")try{const e=await Iu.getExecOutput("xcrun --sdk macosx --show-sdk-path"),t=e.stdout||e.stderr;t?await Ie("SDKROOT",t.trim(),ne):Ne("SDKROOT not set")}catch(e){Ne(e)}}let Xo;function Ce(){return process.platform!=="linux"?!1:(Xo===void 0&&(Xo=fe.sync("dnf",{nothrow:!0})!==null),Xo)}let Ko;function Pe(){return process.platform!=="linux"?!1:(Ko===void 0&&(Ko=fe.sync("pacman",{nothrow:!0})!==null),Ko)}async function Le(e){for(const{name:r,version:n}of e)Y(`Installing ${r} ${n??""} via dnf`);const t=await Promise.all(e.map(r=>TS(r.name,r.version)));return pe("dnf",["-y","install",...t]),{binDir:"/usr/bin/"}}async function TS(e,t){if(t===void 0||t==="")return e;const{stdout:r}=await le("dnf",["search","-q",`${e}-${t}`]);if(r.trim()!=="")return`${e}-${t}`;const{stdout:n}=await le("dnf",["search","-q",`${e}${t}`]);return n.trim()!==""?`${e}${t}`:(ye(`Failed to install ${e} ${t} via dnf, trying without version`),e)}let Md=!1,Gd=!1;async function ge(e,t,r){Y(`Installing ${e} ${t??""} via pacman`);const n="pacman";r==="yay"&&LS(),!Md&&r!=="yay"&&(pe(n,["-Sy","--noconfirm"]),Md=!0),!Gd&&r!=="yay"&&(pe(n,["-S","--noconfirm","base-devel"]),Gd=!0);const i=a=>r==="yay"?Er()&&km?pe("su",["-","builder","-c",`yay -S --noconfirm ${a}`]):ze(r,["-S","--noconfirm",a]):pe(r??n,["-S","--noconfirm",a]);if(t!==void 0&&t!=="")if((await NS(n,e)).includes(t))try{i(`${e}=${t}`)}catch{i(`${e}${t}`)}else Y(`Failed to install ${e} ${t} via pacman, trying without version`),i(e);else i(e);return{binDir:"/usr/bin/"}}const AS=/Version\s*:\s*(.*)/g;async function NS(e,t){const r=[];try{const{stdout:n}=await le(e,["-Si",t]);for(const i of n.matchAll(AS))r.push(i[1])}catch(n){ye(`Failed to get available versions for ${t}: ${n}`)}return r}let km=!1;function LS(){if(fe.sync("yay",{nothrow:!0})===null)try{pe("pacman",["-S","--noconfirm","base-devel","git"]);const e=Z(Ue(),"yay");pe("mkdir",["-p",e]),Er()?(ye("Creating a non-root user to build yay"),pe("useradd",["-m","-G","wheel","builder"]),pe("passwd",["-d","builder"]),pe("chown",["-R","builder:builder",e]),pe("bash",["-c",'echo "builder ALL=(ALL) NOPASSWD: ALL" >> /etc/sudoers']),km=!0,ze("su",["-","builder","-c",`git clone https://aur.archlinux.org/yay.git ${e}`],{stdio:"inherit"}),ze("su",["-","builder","-c",`cd ${e} && makepkg -si --noconfirm`],{stdio:"inherit"})):(ze("git",["clone","https://aur.archlinux.org/yay.git",e],{stdio:"inherit",cwd:Ue()}),ze("makepkg",["-si","--noconfirm"],{stdio:"inherit",cwd:e})),ze("rm",["-rf",e],{stdio:"inherit"})}catch(e){throw new Error(`Failed to install yay: ${e}. Install yay manually and re-run the script.`)}}var Yo,Vd;function CS(){if(Vd)return Yo;Vd=1;const e=$r(),t=cm(),{safeRe:r,t:n}=Bn();return Yo=(a,s)=>{if(a instanceof e)return a;if(typeof a=="number"&&(a=String(a)),typeof a!="string")return null;s=s||{};let l=null;if(!s.rtl)l=a.match(s.includePrerelease?r[n.COERCEFULL]:r[n.COERCE]);else{const S=s.includePrerelease?r[n.COERCERTLFULL]:r[n.COERCERTL];let R;for(;(R=S.exec(a))&&(!l||l.index+l[0].length!==a.length);)(!l||R.index+R[0].length!==l.index+l[0].length)&&(l=R),S.lastIndex=R.index+R[1].length+R[2].length;S.lastIndex=-1}if(l===null)return null;const c=l[2],u=l[3]||"0",o=l[4]||"0",m=s.includePrerelease&&l[5]?`-${l[5]}`:"",_=s.includePrerelease&&l[6]?`+${l[6]}`:"";return t(`${c}.${u}.${o}${m}${_}`,s)},Yo}var xS=CS();const _r=$e(xS);var Jo,Bd;function or(){if(Bd)return Jo;Bd=1;const e=$r();return Jo=(r,n,i)=>new e(r,i).compare(new e(n,i)),Jo}var DS=or();const FS=$e(DS);var Qo,Hd;function qS(){if(Hd)return Qo;Hd=1;class e{constructor(){this.max=1e3,this.map=new Map}get(r){const n=this.map.get(r);if(n!==void 0)return this.map.delete(r),this.map.set(r,n),n}delete(r){return this.map.delete(r)}set(r,n){if(!this.delete(r)&&n!==void 0){if(this.map.size>=this.max){const a=this.map.keys().next().value;this.delete(a)}this.map.set(r,n)}return this}}return Qo=e,Qo}var Zo,zd;function kS(){if(zd)return Zo;zd=1;const e=or();return Zo=(r,n,i)=>e(r,n,i)===0,Zo}var ea,Wd;function jS(){if(Wd)return ea;Wd=1;const e=or();return ea=(r,n,i)=>e(r,n,i)!==0,ea}var ta,Xd;function US(){if(Xd)return ta;Xd=1;const e=or();return ta=(r,n,i)=>e(r,n,i)>0,ta}var ra,Kd;function MS(){if(Kd)return ra;Kd=1;const e=or();return ra=(r,n,i)=>e(r,n,i)>=0,ra}var na,Yd;function GS(){if(Yd)return na;Yd=1;const e=or();return na=(r,n,i)=>e(r,n,i)<0,na}var ia,Jd;function jm(){if(Jd)return ia;Jd=1;const e=or();return ia=(r,n,i)=>e(r,n,i)<=0,ia}var sa,Qd;function VS(){if(Qd)return sa;Qd=1;const e=kS(),t=jS(),r=US(),n=MS(),i=GS(),a=jm();return sa=(l,c,u,o)=>{switch(c){case"===":return typeof l=="object"&&(l=l.version),typeof u=="object"&&(u=u.version),l===u;case"!==":return typeof l=="object"&&(l=l.version),typeof u=="object"&&(u=u.version),l!==u;case"":case"=":case"==":return e(l,u,o);case"!=":return t(l,u,o);case">":return r(l,u,o);case">=":return n(l,u,o);case"<":return i(l,u,o);case"<=":return a(l,u,o);default:throw new TypeError(`Invalid operator: ${c}`)}},sa}var oa,Zd;function BS(){if(Zd)return oa;Zd=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(o,m){if(m=r(m),o instanceof t){if(o.loose===!!m.loose)return o;o=o.value}o=o.trim().split(/\s+/).join(" "),s("comparator",o,m),this.options=m,this.loose=!!m.loose,this.parse(o),this.semver===e?this.value="":this.value=this.operator+this.semver.version,s("comp",this)}parse(o){const m=this.options.loose?n[i.COMPARATORLOOSE]:n[i.COMPARATOR],_=o.match(m);if(!_)throw new TypeError(`Invalid comparator: ${o}`);this.operator=_[1]!==void 0?_[1]:"",this.operator==="="&&(this.operator=""),_[2]?this.semver=new l(_[2],this.options.loose):this.semver=e}toString(){return this.value}test(o){if(s("Comparator.test",o,this.options.loose),this.semver===e||o===e)return!0;if(typeof o=="string")try{o=new l(o,this.options)}catch{return!1}return a(o,this.operator,this.semver,this.options)}intersects(o,m){if(!(o instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new c(o.value,m).test(this.value):o.operator===""?o.value===""?!0:new c(this.value,m).test(o.semver):(m=r(m),m.includePrerelease&&(this.value==="<0.0.0-0"||o.value==="<0.0.0-0")||!m.includePrerelease&&(this.value.startsWith("<0.0.0")||o.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&o.operator.startsWith(">")||this.operator.startsWith("<")&&o.operator.startsWith("<")||this.semver.version===o.semver.version&&this.operator.includes("=")&&o.operator.includes("=")||a(this.semver,"<",o.semver,m)&&this.operator.startsWith(">")&&o.operator.startsWith("<")||a(this.semver,">",o.semver,m)&&this.operator.startsWith("<")&&o.operator.startsWith(">")))}}oa=t;const r=Eu(),{safeRe:n,t:i}=Bn(),a=VS(),s=Vn(),l=$r(),c=Um();return oa}var aa,eh;function Um(){if(eh)return aa;eh=1;const e=/\s+/g;class t{constructor(I,N){if(N=i(N),I instanceof t)return I.loose===!!N.loose&&I.includePrerelease===!!N.includePrerelease?I:new t(I.raw,N);if(I instanceof a)return this.raw=I.value,this.set=[[I]],this.formatted=void 0,this;if(this.options=N,this.loose=!!N.loose,this.includePrerelease=!!N.includePrerelease,this.raw=I.trim().replace(e," "),this.set=this.raw.split("||").map(D=>this.parseRange(D.trim())).filter(D=>D.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const D=this.set[0];if(this.set=this.set.filter(x=>!p(x[0])),this.set.length===0)this.set=[D];else if(this.set.length>1){for(const x of this.set)if(x.length===1&&h(x[0])){this.set=[x];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let I=0;I<this.set.length;I++){I>0&&(this.formatted+="||");const N=this.set[I];for(let D=0;D<N.length;D++)D>0&&(this.formatted+=" "),this.formatted+=N[D].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(I){const D=((this.options.includePrerelease&&S)|(this.options.loose&&R))+":"+I,x=n.get(D);if(x)return x;const F=this.options.loose,C=F?c[u.HYPHENRANGELOOSE]:c[u.HYPHENRANGE];I=I.replace(C,V(this.options.includePrerelease)),s("hyphen replace",I),I=I.replace(c[u.COMPARATORTRIM],o),s("comparator trim",I),I=I.replace(c[u.TILDETRIM],m),s("tilde trim",I),I=I.replace(c[u.CARETTRIM],_),s("caret trim",I);let B=I.split(" ").map(W=>v(W,this.options)).join(" ").split(/\s+/).map(W=>q(W,this.options));F&&(B=B.filter(W=>(s("loose invalid filter",W,this.options),!!W.match(c[u.COMPARATORLOOSE])))),s("range list",B);const G=new Map,J=B.map(W=>new a(W,this.options));for(const W of J){if(p(W))return[W];G.set(W.value,W)}G.size>1&&G.has("")&&G.delete("");const se=[...G.values()];return n.set(D,se),se}intersects(I,N){if(!(I instanceof t))throw new TypeError("a Range is required");return this.set.some(D=>y(D,N)&&I.set.some(x=>y(x,N)&&D.every(F=>x.every(C=>F.intersects(C,N)))))}test(I){if(!I)return!1;if(typeof I=="string")try{I=new l(I,this.options)}catch{return!1}for(let N=0;N<this.set.length;N++)if(M(this.set[N],I,this.options))return!0;return!1}}aa=t;const r=qS(),n=new r,i=Eu(),a=BS(),s=Vn(),l=$r(),{safeRe:c,t:u,comparatorTrimReplace:o,tildeTrimReplace:m,caretTrimReplace:_}=Bn(),{FLAG_INCLUDE_PRERELEASE:S,FLAG_LOOSE:R}=gu(),p=P=>P.value==="<0.0.0-0",h=P=>P.value==="",y=(P,I)=>{let N=!0;const D=P.slice();let x=D.pop();for(;N&&D.length;)N=D.every(F=>x.intersects(F,I)),x=D.pop();return N},v=(P,I)=>(P=P.replace(c[u.BUILD],""),s("comp",P,I),P=w(P,I),s("caret",P),P=E(P,I),s("tildes",P),P=b(P,I),s("xrange",P),P=T(P,I),s("stars",P),P),g=P=>!P||P.toLowerCase()==="x"||P==="*",E=(P,I)=>P.trim().split(/\s+/).map(N=>d(N,I)).join(" "),d=(P,I)=>{const N=I.loose?c[u.TILDELOOSE]:c[u.TILDE];return P.replace(N,(D,x,F,C,B)=>{s("tilde",P,D,x,F,C,B);let G;return g(x)?G="":g(F)?G=`>=${x}.0.0 <${+x+1}.0.0-0`:g(C)?G=`>=${x}.${F}.0 <${x}.${+F+1}.0-0`:B?(s("replaceTilde pr",B),G=`>=${x}.${F}.${C}-${B} <${x}.${+F+1}.0-0`):G=`>=${x}.${F}.${C} <${x}.${+F+1}.0-0`,s("tilde return",G),G})},w=(P,I)=>P.trim().split(/\s+/).map(N=>f(N,I)).join(" "),f=(P,I)=>{s("caret",P,I);const N=I.loose?c[u.CARETLOOSE]:c[u.CARET],D=I.includePrerelease?"-0":"";return P.replace(N,(x,F,C,B,G)=>{s("caret",P,x,F,C,B,G);let J;return g(F)?J="":g(C)?J=`>=${F}.0.0${D} <${+F+1}.0.0-0`:g(B)?F==="0"?J=`>=${F}.${C}.0${D} <${F}.${+C+1}.0-0`:J=`>=${F}.${C}.0${D} <${+F+1}.0.0-0`:G?(s("replaceCaret pr",G),F==="0"?C==="0"?J=`>=${F}.${C}.${B}-${G} <${F}.${C}.${+B+1}-0`:J=`>=${F}.${C}.${B}-${G} <${F}.${+C+1}.0-0`:J=`>=${F}.${C}.${B}-${G} <${+F+1}.0.0-0`):(s("no pr"),F==="0"?C==="0"?J=`>=${F}.${C}.${B}${D} <${F}.${C}.${+B+1}-0`:J=`>=${F}.${C}.${B}${D} <${F}.${+C+1}.0-0`:J=`>=${F}.${C}.${B} <${+F+1}.0.0-0`),s("caret return",J),J})},b=(P,I)=>(s("replaceXRanges",P,I),P.split(/\s+/).map(N=>$(N,I)).join(" ")),$=(P,I)=>{P=P.trim();const N=I.loose?c[u.XRANGELOOSE]:c[u.XRANGE];return P.replace(N,(D,x,F,C,B,G)=>{s("xRange",P,D,x,F,C,B,G);const J=g(F),se=J||g(C),W=se||g(B),ie=W;return x==="="&&ie&&(x=""),G=I.includePrerelease?"-0":"",J?x===">"||x==="<"?D="<0.0.0-0":D="*":x&&ie?(se&&(C=0),B=0,x===">"?(x=">=",se?(F=+F+1,C=0,B=0):(C=+C+1,B=0)):x==="<="&&(x="<",se?F=+F+1:C=+C+1),x==="<"&&(G="-0"),D=`${x+F}.${C}.${B}${G}`):se?D=`>=${F}.0.0${G} <${+F+1}.0.0-0`:W&&(D=`>=${F}.${C}.0${G} <${F}.${+C+1}.0-0`),s("xRange return",D),D})},T=(P,I)=>(s("replaceStars",P,I),P.trim().replace(c[u.STAR],"")),q=(P,I)=>(s("replaceGTE0",P,I),P.trim().replace(c[I.includePrerelease?u.GTE0PRE:u.GTE0],"")),V=P=>(I,N,D,x,F,C,B,G,J,se,W,ie)=>(g(D)?N="":g(x)?N=`>=${D}.0.0${P?"-0":""}`:g(F)?N=`>=${D}.${x}.0${P?"-0":""}`:C?N=`>=${N}`:N=`>=${N}${P?"-0":""}`,g(J)?G="":g(se)?G=`<${+J+1}.0.0-0`:g(W)?G=`<${J}.${+se+1}.0-0`:ie?G=`<=${J}.${se}.${W}-${ie}`:P?G=`<${J}.${se}.${+W+1}-0`:G=`<=${G}`,`${N} ${G}`.trim()),M=(P,I,N)=>{for(let D=0;D<P.length;D++)if(!P[D].test(I))return!1;if(I.prerelease.length&&!N.includePrerelease){for(let D=0;D<P.length;D++)if(s(P[D].semver),P[D].semver!==a.ANY&&P[D].semver.prerelease.length>0){const x=P[D].semver;if(x.major===I.major&&x.minor===I.minor&&x.patch===I.patch)return!0}return!1}return!0};return aa}var ua,th;function HS(){if(th)return ua;th=1;const e=Um();return ua=(r,n,i)=>{try{n=new e(n,i)}catch{return!1}return n.test(r)},ua}var zS=HS();const Pu=$e(zS),Mm=/v?(\d\S*)/;async function Gm(e,t=Mm){try{const r=await Iu.getExecOutput(e,["--version"]),i=(r.stdout||r.stderr||"").trim().match(t)?.[1];return _r(i)??void 0}catch(r){console.error(r);return}}async function Qa(e,t,r=Mm){const n=await Gm(e,r);if(n!==void 0&&t!=="")try{return FS(n,t)!==-1}catch{return Pu(n,t)}else return!1}function Tu(e){if(Hn(e)===null)try{const t=_r(e);if(t!==null)return Y(`Coerced version '${e}' to '${t}'`),t.version}catch{}return e}function WS(e){if(Hn(e)===null)try{const t=_r(e);if(t!==null){const r=/^[<=>^~]/.test(t.version)?t.version:`^${t.version}`;return Y(`Coerced version '${e}' to '${r}'`),r}}catch{}return e}function XS(e){return Number.parseInt(e.replace(/^v/,""),10)}function KS(e){return e.match(/^v/)?e:`v${e}`}function YS(e,t){const r=_r(e),n=_r(t);return r!==null&&n!==null?n.compare(r):t.localeCompare(e)}async function Vm(){const e=Z(UR,"gcc_matcher.json");if(!await _e(e))return ye("the gcc_matcher.json file does not exist in the same folder as setup-cpp.js");Y(`::add-matcher::${e}`)}async function $n(e){const t=await pr(e,"utf-8");return JSON.parse(t)}function On(e,t){const r=Object.keys(e),n=new Map;if(t.filterMapTag===void 0)for(const l of r)n.set(l,l);else for(const l of r){const c=t.filterMapTag(l);c!==void 0&&n.set(c,l)}if(n.size===0)return;const i=t.versionSatisfies??Pu,a=WS(t.version),s=[];for(const[l,c]of n.entries())i(l,a)&&s.push(c);if(s.length!==0)for(const l of s){let c=e[l];if(c===void 0||(t.filterName!==void 0&&(c=c.filter(t.filterName)),c.length===0))continue;const u=JS(l,c,t);if(u!==void 0)return u}}function JS(e,t,r){if((r.keywords===void 0||r.keywords.length===0)&&(r.optionalKeywords===void 0||r.optionalKeywords.length===0))return{tag:e,name:t[0]};let n=[];if(r.keywords!==void 0&&r.keywords.length!==0)for(const i of t)r.keywords.every(a=>typeof a=="string"&&i.includes(a)?!0:Array.isArray(a)&&a.some(s=>i.includes(s)))&&n.push(i);else n=t;if(n.length!==0){if(r.optionalKeywords!==void 0&&r.optionalKeywords.length!==0){const i=n.map(l=>{let c=0;for(const u of r.optionalKeywords)(typeof u=="string"&&l.includes(u)||Array.isArray(u)&&u.some(o=>l.includes(o)))&&c++;return c}),a=Math.max(...i),s=i.indexOf(a);return{tag:e,name:n[s]}}return{tag:e,name:n[0]}}}var ca={},nn={},rh;function Me(){return rh||(rh=1,nn.fromCallback=function(e){return Object.defineProperty(function(...t){if(typeof t[t.length-1]=="function")e.apply(this,t);else return new Promise((r,n)=>{t.push((i,a)=>i!=null?n(i):r(a)),e.apply(this,t)})},"name",{value:e.name})},nn.fromPromise=function(e){return Object.defineProperty(function(...t){const r=t[t.length-1];if(typeof r!="function")return e.apply(this,t);t.pop(),e.apply(this,t).then(n=>r(null,n),r)},"name",{value:e.name})}),nn}var la,nh;function QS(){if(nh)return la;nh=1;var e=Z_,t=process.cwd,r=null,n=process.env.GRACEFUL_FS_PLATFORM||process.platform;process.cwd=function(){return r||(r=t.call(process)),r};try{process.cwd()}catch{}if(typeof process.chdir=="function"){var i=process.chdir;process.chdir=function(s){r=null,i.call(process,s)},Object.setPrototypeOf&&Object.setPrototypeOf(process.chdir,i)}la=a;function a(s){e.hasOwnProperty("O_SYMLINK")&&process.version.match(/^v0\.6\.[0-2]|^v0\.5\./)&&l(s),s.lutimes||c(s),s.chown=m(s.chown),s.fchown=m(s.fchown),s.lchown=m(s.lchown),s.chmod=u(s.chmod),s.fchmod=u(s.fchmod),s.lchmod=u(s.lchmod),s.chownSync=_(s.chownSync),s.fchownSync=_(s.fchownSync),s.lchownSync=_(s.lchownSync),s.chmodSync=o(s.chmodSync),s.fchmodSync=o(s.fchmodSync),s.lchmodSync=o(s.lchmodSync),s.stat=S(s.stat),s.fstat=S(s.fstat),s.lstat=S(s.lstat),s.statSync=R(s.statSync),s.fstatSync=R(s.fstatSync),s.lstatSync=R(s.lstatSync),s.chmod&&!s.lchmod&&(s.lchmod=function(h,y,v){v&&process.nextTick(v)},s.lchmodSync=function(){}),s.chown&&!s.lchown&&(s.lchown=function(h,y,v,g){g&&process.nextTick(g)},s.lchownSync=function(){}),n==="win32"&&(s.rename=typeof s.rename!="function"?s.rename:(function(h){function y(v,g,E){var d=Date.now(),w=0;h(v,g,function f(b){if(b&&(b.code==="EACCES"||b.code==="EPERM"||b.code==="EBUSY")&&Date.now()-d<6e4){setTimeout(function(){s.stat(g,function($,T){$&&$.code==="ENOENT"?h(v,g,f):E(b)})},w),w<100&&(w+=10);return}E&&E(b)})}return Object.setPrototypeOf&&Object.setPrototypeOf(y,h),y})(s.rename)),s.read=typeof s.read!="function"?s.read:(function(h){function y(v,g,E,d,w,f){var b;if(f&&typeof f=="function"){var $=0;b=function(T,q,V){if(T&&T.code==="EAGAIN"&&$<10)return $++,h.call(s,v,g,E,d,w,b);f.apply(this,arguments)}}return h.call(s,v,g,E,d,w,b)}return Object.setPrototypeOf&&Object.setPrototypeOf(y,h),y})(s.read),s.readSync=typeof s.readSync!="function"?s.readSync:(function(h){return function(y,v,g,E,d){for(var w=0;;)try{return h.call(s,y,v,g,E,d)}catch(f){if(f.code==="EAGAIN"&&w<10){w++;continue}throw f}}})(s.readSync);function l(h){h.lchmod=function(y,v,g){h.open(y,e.O_WRONLY|e.O_SYMLINK,v,function(E,d){if(E){g&&g(E);return}h.fchmod(d,v,function(w){h.close(d,function(f){g&&g(w||f)})})})},h.lchmodSync=function(y,v){var g=h.openSync(y,e.O_WRONLY|e.O_SYMLINK,v),E=!0,d;try{d=h.fchmodSync(g,v),E=!1}finally{if(E)try{h.closeSync(g)}catch{}else h.closeSync(g)}return d}}function c(h){e.hasOwnProperty("O_SYMLINK")&&h.futimes?(h.lutimes=function(y,v,g,E){h.open(y,e.O_SYMLINK,function(d,w){if(d){E&&E(d);return}h.futimes(w,v,g,function(f){h.close(w,function(b){E&&E(f||b)})})})},h.lutimesSync=function(y,v,g){var E=h.openSync(y,e.O_SYMLINK),d,w=!0;try{d=h.futimesSync(E,v,g),w=!1}finally{if(w)try{h.closeSync(E)}catch{}else h.closeSync(E)}return d}):h.futimes&&(h.lutimes=function(y,v,g,E){E&&process.nextTick(E)},h.lutimesSync=function(){})}function u(h){return h&&function(y,v,g){return h.call(s,y,v,function(E){p(E)&&(E=null),g&&g.apply(this,arguments)})}}function o(h){return h&&function(y,v){try{return h.call(s,y,v)}catch(g){if(!p(g))throw g}}}function m(h){return h&&function(y,v,g,E){return h.call(s,y,v,g,function(d){p(d)&&(d=null),E&&E.apply(this,arguments)})}}function _(h){return h&&function(y,v,g){try{return h.call(s,y,v,g)}catch(E){if(!p(E))throw E}}}function S(h){return h&&function(y,v,g){typeof v=="function"&&(g=v,v=null);function E(d,w){w&&(w.uid<0&&(w.uid+=4294967296),w.gid<0&&(w.gid+=4294967296)),g&&g.apply(this,arguments)}return v?h.call(s,y,v,E):h.call(s,y,E)}}function R(h){return h&&function(y,v){var g=v?h.call(s,y,v):h.call(s,y);return g&&(g.uid<0&&(g.uid+=4294967296),g.gid<0&&(g.gid+=4294967296)),g}}function p(h){if(!h||h.code==="ENOSYS")return!0;var y=!process.getuid||process.getuid()!==0;return!!(y&&(h.code==="EINVAL"||h.code==="EPERM"))}}return la}var fa,ih;function ZS(){if(ih)return fa;ih=1;var e=Gr.Stream;fa=t;function t(r){return{ReadStream:n,WriteStream:i};function n(a,s){if(!(this instanceof n))return new n(a,s);e.call(this);var l=this;this.path=a,this.fd=null,this.readable=!0,this.paused=!1,this.flags="r",this.mode=438,this.bufferSize=64*1024,s=s||{};for(var c=Object.keys(s),u=0,o=c.length;u<o;u++){var m=c[u];this[m]=s[m]}if(this.encoding&&this.setEncoding(this.encoding),this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.end===void 0)this.end=1/0;else if(typeof this.end!="number")throw TypeError("end must be a Number");if(this.start>this.end)throw new Error("start must be <= end");this.pos=this.start}if(this.fd!==null){process.nextTick(function(){l._read()});return}r.open(this.path,this.flags,this.mode,function(_,S){if(_){l.emit("error",_),l.readable=!1;return}l.fd=S,l.emit("open",S),l._read()})}function i(a,s){if(!(this instanceof i))return new i(a,s);e.call(this),this.path=a,this.fd=null,this.writable=!0,this.flags="w",this.encoding="binary",this.mode=438,this.bytesWritten=0,s=s||{};for(var l=Object.keys(s),c=0,u=l.length;c<u;c++){var o=l[c];this[o]=s[o]}if(this.start!==void 0){if(typeof this.start!="number")throw TypeError("start must be a Number");if(this.start<0)throw new Error("start must be >= zero");this.pos=this.start}this.busy=!1,this._queue=[],this.fd===null&&(this._open=r.open,this._queue.push([this._open,this.path,this.flags,this.mode,void 0]),this.flush())}}return fa}var da,sh;function eR(){if(sh)return da;sh=1,da=t;var e=Object.getPrototypeOf||function(r){return r.__proto__};function t(r){if(r===null||typeof r!="object")return r;if(r instanceof Object)var n={__proto__:e(r)};else var n=Object.create(null);return Object.getOwnPropertyNames(r).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(r,i))}),n}return da}var sn,oh;function Hr(){if(oh)return sn;oh=1;var e=De,t=QS(),r=ZS(),n=eR(),i=Cn,a,s;typeof Symbol=="function"&&typeof Symbol.for=="function"?(a=Symbol.for("graceful-fs.queue"),s=Symbol.for("graceful-fs.previous")):(a="___graceful-fs.queue",s="___graceful-fs.previous");function l(){}function c(h,y){Object.defineProperty(h,a,{get:function(){return y}})}var u=l;if(i.debuglog?u=i.debuglog("gfs4"):/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&(u=function(){var h=i.format.apply(i,arguments);h="GFS4: "+h.split(/\n/).join(`
GFS4: `),console.error(h)}),!e[a]){var o=at[a]||[];c(e,o),e.close=(function(h){function y(v,g){return h.call(e,v,function(E){E||R(),typeof g=="function"&&g.apply(this,arguments)})}return Object.defineProperty(y,s,{value:h}),y})(e.close),e.closeSync=(function(h){function y(v){h.apply(e,arguments),R()}return Object.defineProperty(y,s,{value:h}),y})(e.closeSync),/\bgfs4\b/i.test(process.env.NODE_DEBUG||"")&&process.on("exit",function(){u(e[a]),Mr.equal(e[a].length,0)})}at[a]||c(at,e[a]),sn=m(n(e)),process.env.TEST_GRACEFUL_FS_GLOBAL_PATCH&&!e.__patched&&(sn=m(e),e.__patched=!0);function m(h){t(h),h.gracefulify=m,h.createReadStream=B,h.createWriteStream=G;var y=h.readFile;h.readFile=v;function v(W,ie,oe){return typeof ie=="function"&&(oe=ie,ie=null),ve(W,ie,oe);function ve(U,j,k,z){return y(U,j,function(K){K&&(K.code==="EMFILE"||K.code==="ENFILE")?_([ve,[U,j,k],K,z||Date.now(),Date.now()]):typeof k=="function"&&k.apply(this,arguments)})}}var g=h.writeFile;h.writeFile=E;function E(W,ie,oe,ve){return typeof oe=="function"&&(ve=oe,oe=null),U(W,ie,oe,ve);function U(j,k,z,K,te){return g(j,k,z,function(Q){Q&&(Q.code==="EMFILE"||Q.code==="ENFILE")?_([U,[j,k,z,K],Q,te||Date.now(),Date.now()]):typeof K=="function"&&K.apply(this,arguments)})}}var d=h.appendFile;d&&(h.appendFile=w);function w(W,ie,oe,ve){return typeof oe=="function"&&(ve=oe,oe=null),U(W,ie,oe,ve);function U(j,k,z,K,te){return d(j,k,z,function(Q){Q&&(Q.code==="EMFILE"||Q.code==="ENFILE")?_([U,[j,k,z,K],Q,te||Date.now(),Date.now()]):typeof K=="function"&&K.apply(this,arguments)})}}var f=h.copyFile;f&&(h.copyFile=b);function b(W,ie,oe,ve){return typeof oe=="function"&&(ve=oe,oe=0),U(W,ie,oe,ve);function U(j,k,z,K,te){return f(j,k,z,function(Q){Q&&(Q.code==="EMFILE"||Q.code==="ENFILE")?_([U,[j,k,z,K],Q,te||Date.now(),Date.now()]):typeof K=="function"&&K.apply(this,arguments)})}}var $=h.readdir;h.readdir=q;var T=/^v[0-5]\./;function q(W,ie,oe){typeof ie=="function"&&(oe=ie,ie=null);var ve=T.test(process.version)?function(k,z,K,te){return $(k,U(k,z,K,te))}:function(k,z,K,te){return $(k,z,U(k,z,K,te))};return ve(W,ie,oe);function U(j,k,z,K){return function(te,Q){te&&(te.code==="EMFILE"||te.code==="ENFILE")?_([ve,[j,k,z],te,K||Date.now(),Date.now()]):(Q&&Q.sort&&Q.sort(),typeof z=="function"&&z.call(this,te,Q))}}}if(process.version.substr(0,4)==="v0.8"){var V=r(h);D=V.ReadStream,F=V.WriteStream}var M=h.ReadStream;M&&(D.prototype=Object.create(M.prototype),D.prototype.open=x);var P=h.WriteStream;P&&(F.prototype=Object.create(P.prototype),F.prototype.open=C),Object.defineProperty(h,"ReadStream",{get:function(){return D},set:function(W){D=W},enumerable:!0,configurable:!0}),Object.defineProperty(h,"WriteStream",{get:function(){return F},set:function(W){F=W},enumerable:!0,configurable:!0});var I=D;Object.defineProperty(h,"FileReadStream",{get:function(){return I},set:function(W){I=W},enumerable:!0,configurable:!0});var N=F;Object.defineProperty(h,"FileWriteStream",{get:function(){return N},set:function(W){N=W},enumerable:!0,configurable:!0});function D(W,ie){return this instanceof D?(M.apply(this,arguments),this):D.apply(Object.create(D.prototype),arguments)}function x(){var W=this;se(W.path,W.flags,W.mode,function(ie,oe){ie?(W.autoClose&&W.destroy(),W.emit("error",ie)):(W.fd=oe,W.emit("open",oe),W.read())})}function F(W,ie){return this instanceof F?(P.apply(this,arguments),this):F.apply(Object.create(F.prototype),arguments)}function C(){var W=this;se(W.path,W.flags,W.mode,function(ie,oe){ie?(W.destroy(),W.emit("error",ie)):(W.fd=oe,W.emit("open",oe))})}function B(W,ie){return new h.ReadStream(W,ie)}function G(W,ie){return new h.WriteStream(W,ie)}var J=h.open;h.open=se;function se(W,ie,oe,ve){return typeof oe=="function"&&(ve=oe,oe=null),U(W,ie,oe,ve);function U(j,k,z,K,te){return J(j,k,z,function(Q,qe){Q&&(Q.code==="EMFILE"||Q.code==="ENFILE")?_([U,[j,k,z,K],Q,te||Date.now(),Date.now()]):typeof K=="function"&&K.apply(this,arguments)})}}return h}function _(h){u("ENQUEUE",h[0].name,h[1]),e[a].push(h),p()}var S;function R(){for(var h=Date.now(),y=0;y<e[a].length;++y)e[a][y].length>2&&(e[a][y][3]=h,e[a][y][4]=h);p()}function p(){if(clearTimeout(S),S=void 0,e[a].length!==0){var h=e[a].shift(),y=h[0],v=h[1],g=h[2],E=h[3],d=h[4];if(E===void 0)u("RETRY",y.name,v),y.apply(null,v);else if(Date.now()-E>=6e4){u("TIMEOUT",y.name,v);var w=v.pop();typeof w=="function"&&w.call(null,g)}else{var f=Date.now()-d,b=Math.max(d-E,1),$=Math.min(b*1.2,100);f>=$?(u("RETRY",y.name,v),y.apply(null,v.concat([E]))):e[a].push(h)}S===void 0&&(S=setTimeout(p,0))}}return sn}var ah;function Xe(){return ah||(ah=1,(function(e){const t=Me().fromCallback,r=Hr(),n=["access","appendFile","chmod","chown","close","copyFile","cp","fchmod","fchown","fdatasync","fstat","fsync","ftruncate","futimes","glob","lchmod","lchown","lutimes","link","lstat","mkdir","mkdtemp","open","opendir","readdir","readFile","readlink","realpath","rename","rm","rmdir","stat","statfs","symlink","truncate","unlink","utimes","writeFile"].filter(i=>typeof r[i]=="function");Object.assign(e,r),n.forEach(i=>{e[i]=t(r[i])}),e.exists=function(i,a){return typeof a=="function"?r.exists(i,a):new Promise(s=>r.exists(i,s))},e.read=function(i,a,s,l,c,u){return typeof u=="function"?r.read(i,a,s,l,c,u):new Promise((o,m)=>{r.read(i,a,s,l,c,(_,S,R)=>{if(_)return m(_);o({bytesRead:S,buffer:R})})})},e.write=function(i,a,...s){return typeof s[s.length-1]=="function"?r.write(i,a,...s):new Promise((l,c)=>{r.write(i,a,...s,(u,o,m)=>{if(u)return c(u);l({bytesWritten:o,buffer:m})})})},e.readv=function(i,a,...s){return typeof s[s.length-1]=="function"?r.readv(i,a,...s):new Promise((l,c)=>{r.readv(i,a,...s,(u,o,m)=>{if(u)return c(u);l({bytesRead:o,buffers:m})})})},e.writev=function(i,a,...s){return typeof s[s.length-1]=="function"?r.writev(i,a,...s):new Promise((l,c)=>{r.writev(i,a,...s,(u,o,m)=>{if(u)return c(u);l({bytesWritten:o,buffers:m})})})},typeof r.realpath.native=="function"?e.realpath.native=t(r.realpath.native):process.emitWarning("fs.realpath.native is not a function. Is fs being monkey-patched?","Warning","fs-extra-WARN0003")})(ca)),ca}var on={},ha={},uh;function tR(){if(uh)return ha;uh=1;const e=ce;return ha.checkPath=function(r){if(process.platform==="win32"&&/[<>:"|?*]/.test(r.replace(e.parse(r).root,""))){const i=new Error(`Path contains invalid characters: ${r}`);throw i.code="EINVAL",i}},ha}var ch;function rR(){if(ch)return on;ch=1;const e=Xe(),{checkPath:t}=tR(),r=n=>{const i={mode:511};return typeof n=="number"?n:{...i,...n}.mode};return on.makeDir=async(n,i)=>(t(n),e.mkdir(n,{mode:r(i),recursive:!0})),on.makeDirSync=(n,i)=>(t(n),e.mkdirSync(n,{mode:r(i),recursive:!0})),on}var pa,lh;function Lt(){if(lh)return pa;lh=1;const e=Me().fromPromise,{makeDir:t,makeDirSync:r}=rR(),n=e(t);return pa={mkdirs:n,mkdirsSync:r,mkdirp:n,mkdirpSync:r,ensureDir:n,ensureDirSync:r},pa}var ma,fh;function ar(){if(fh)return ma;fh=1;const e=Me().fromPromise,t=Xe();function r(n){return t.access(n).then(()=>!0).catch(()=>!1)}return ma={pathExists:e(r),pathExistsSync:t.existsSync},ma}var _a,dh;function Bm(){if(dh)return _a;dh=1;const e=Xe(),t=Me().fromPromise;async function r(i,a,s){const l=await e.open(i,"r+");let c=null;try{await e.futimes(l,a,s)}finally{try{await e.close(l)}catch(u){c=u}}if(c)throw c}function n(i,a,s){const l=e.openSync(i,"r+");return e.futimesSync(l,a,s),e.closeSync(l)}return _a={utimesMillis:t(r),utimesMillisSync:n},_a}var ya,hh;function Ir(){if(hh)return ya;hh=1;const e=Xe(),t=ce,r=Me().fromPromise;function n(_,S,R){const p=R.dereference?h=>e.stat(h,{bigint:!0}):h=>e.lstat(h,{bigint:!0});return Promise.all([p(_),p(S).catch(h=>{if(h.code==="ENOENT")return null;throw h})]).then(([h,y])=>({srcStat:h,destStat:y}))}function i(_,S,R){let p;const h=R.dereference?v=>e.statSync(v,{bigint:!0}):v=>e.lstatSync(v,{bigint:!0}),y=h(_);try{p=h(S)}catch(v){if(v.code==="ENOENT")return{srcStat:y,destStat:null};throw v}return{srcStat:y,destStat:p}}async function a(_,S,R,p){const{srcStat:h,destStat:y}=await n(_,S,p);if(y){if(u(h,y)){const v=t.basename(_),g=t.basename(S);if(R==="move"&&v!==g&&v.toLowerCase()===g.toLowerCase())return{srcStat:h,destStat:y,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(h.isDirectory()&&!y.isDirectory())throw new Error(`Cannot overwrite non-directory '${S}' with directory '${_}'.`);if(!h.isDirectory()&&y.isDirectory())throw new Error(`Cannot overwrite directory '${S}' with non-directory '${_}'.`)}if(h.isDirectory()&&o(_,S))throw new Error(m(_,S,R));return{srcStat:h,destStat:y}}function s(_,S,R,p){const{srcStat:h,destStat:y}=i(_,S,p);if(y){if(u(h,y)){const v=t.basename(_),g=t.basename(S);if(R==="move"&&v!==g&&v.toLowerCase()===g.toLowerCase())return{srcStat:h,destStat:y,isChangingCase:!0};throw new Error("Source and destination must not be the same.")}if(h.isDirectory()&&!y.isDirectory())throw new Error(`Cannot overwrite non-directory '${S}' with directory '${_}'.`);if(!h.isDirectory()&&y.isDirectory())throw new Error(`Cannot overwrite directory '${S}' with non-directory '${_}'.`)}if(h.isDirectory()&&o(_,S))throw new Error(m(_,S,R));return{srcStat:h,destStat:y}}async function l(_,S,R,p){const h=t.resolve(t.dirname(_)),y=t.resolve(t.dirname(R));if(y===h||y===t.parse(y).root)return;let v;try{v=await e.stat(y,{bigint:!0})}catch(g){if(g.code==="ENOENT")return;throw g}if(u(S,v))throw new Error(m(_,R,p));return l(_,S,y,p)}function c(_,S,R,p){const h=t.resolve(t.dirname(_)),y=t.resolve(t.dirname(R));if(y===h||y===t.parse(y).root)return;let v;try{v=e.statSync(y,{bigint:!0})}catch(g){if(g.code==="ENOENT")return;throw g}if(u(S,v))throw new Error(m(_,R,p));return c(_,S,y,p)}function u(_,S){return S.ino&&S.dev&&S.ino===_.ino&&S.dev===_.dev}function o(_,S){const R=t.resolve(_).split(t.sep).filter(h=>h),p=t.resolve(S).split(t.sep).filter(h=>h);return R.every((h,y)=>p[y]===h)}function m(_,S,R){return`Cannot ${R} '${_}' to a subdirectory of itself, '${S}'.`}return ya={checkPaths:r(a),checkPathsSync:s,checkParentPaths:r(l),checkParentPathsSync:c,isSrcSubdir:o,areIdentical:u},ya}var va,ph;function nR(){if(ph)return va;ph=1;const e=Xe(),t=ce,{mkdirs:r}=Lt(),{pathExists:n}=ar(),{utimesMillis:i}=Bm(),a=Ir();async function s(p,h,y={}){typeof y=="function"&&(y={filter:y}),y.clobber="clobber"in y?!!y.clobber:!0,y.overwrite="overwrite"in y?!!y.overwrite:y.clobber,y.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0001");const{srcStat:v,destStat:g}=await a.checkPaths(p,h,"copy",y);if(await a.checkParentPaths(p,v,h,"copy"),!await l(p,h,y))return;const d=t.dirname(h);await n(d)||await r(d),await c(g,p,h,y)}async function l(p,h,y){return y.filter?y.filter(p,h):!0}async function c(p,h,y,v){const E=await(v.dereference?e.stat:e.lstat)(h);if(E.isDirectory())return S(E,p,h,y,v);if(E.isFile()||E.isCharacterDevice()||E.isBlockDevice())return u(E,p,h,y,v);if(E.isSymbolicLink())return R(p,h,y,v);throw E.isSocket()?new Error(`Cannot copy a socket file: ${h}`):E.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${h}`):new Error(`Unknown file: ${h}`)}async function u(p,h,y,v,g){if(!h)return o(p,y,v,g);if(g.overwrite)return await e.unlink(v),o(p,y,v,g);if(g.errorOnExist)throw new Error(`'${v}' already exists`)}async function o(p,h,y,v){if(await e.copyFile(h,y),v.preserveTimestamps){m(p.mode)&&await _(y,p.mode);const g=await e.stat(h);await i(y,g.atime,g.mtime)}return e.chmod(y,p.mode)}function m(p){return(p&128)===0}function _(p,h){return e.chmod(p,h|128)}async function S(p,h,y,v,g){h||await e.mkdir(v);const E=[];for await(const d of await e.opendir(y)){const w=t.join(y,d.name),f=t.join(v,d.name);E.push(l(w,f,g).then(b=>{if(b)return a.checkPaths(w,f,"copy",g).then(({destStat:$})=>c($,w,f,g))}))}await Promise.all(E),h||await e.chmod(v,p.mode)}async function R(p,h,y,v){let g=await e.readlink(h);if(v.dereference&&(g=t.resolve(process.cwd(),g)),!p)return e.symlink(g,y);let E=null;try{E=await e.readlink(y)}catch(d){if(d.code==="EINVAL"||d.code==="UNKNOWN")return e.symlink(g,y);throw d}if(v.dereference&&(E=t.resolve(process.cwd(),E)),a.isSrcSubdir(g,E))throw new Error(`Cannot copy '${g}' to a subdirectory of itself, '${E}'.`);if(a.isSrcSubdir(E,g))throw new Error(`Cannot overwrite '${E}' with '${g}'.`);return await e.unlink(y),e.symlink(g,y)}return va=s,va}var wa,mh;function iR(){if(mh)return wa;mh=1;const e=Hr(),t=ce,r=Lt().mkdirsSync,n=Bm().utimesMillisSync,i=Ir();function a(d,w,f){typeof f=="function"&&(f={filter:f}),f=f||{},f.clobber="clobber"in f?!!f.clobber:!0,f.overwrite="overwrite"in f?!!f.overwrite:f.clobber,f.preserveTimestamps&&process.arch==="ia32"&&process.emitWarning(`Using the preserveTimestamps option in 32-bit node is not recommended;

	see https://github.com/jprichardson/node-fs-extra/issues/269`,"Warning","fs-extra-WARN0002");const{srcStat:b,destStat:$}=i.checkPathsSync(d,w,"copy",f);if(i.checkParentPathsSync(d,b,w,"copy"),f.filter&&!f.filter(d,w))return;const T=t.dirname(w);return e.existsSync(T)||r(T),s($,d,w,f)}function s(d,w,f,b){const T=(b.dereference?e.statSync:e.lstatSync)(w);if(T.isDirectory())return p(T,d,w,f,b);if(T.isFile()||T.isCharacterDevice()||T.isBlockDevice())return l(T,d,w,f,b);if(T.isSymbolicLink())return g(d,w,f,b);throw T.isSocket()?new Error(`Cannot copy a socket file: ${w}`):T.isFIFO()?new Error(`Cannot copy a FIFO pipe: ${w}`):new Error(`Unknown file: ${w}`)}function l(d,w,f,b,$){return w?c(d,f,b,$):u(d,f,b,$)}function c(d,w,f,b){if(b.overwrite)return e.unlinkSync(f),u(d,w,f,b);if(b.errorOnExist)throw new Error(`'${f}' already exists`)}function u(d,w,f,b){return e.copyFileSync(w,f),b.preserveTimestamps&&o(d.mode,w,f),S(f,d.mode)}function o(d,w,f){return m(d)&&_(f,d),R(w,f)}function m(d){return(d&128)===0}function _(d,w){return S(d,w|128)}function S(d,w){return e.chmodSync(d,w)}function R(d,w){const f=e.statSync(d);return n(w,f.atime,f.mtime)}function p(d,w,f,b,$){return w?y(f,b,$):h(d.mode,f,b,$)}function h(d,w,f,b){return e.mkdirSync(f),y(w,f,b),S(f,d)}function y(d,w,f){const b=e.opendirSync(d);try{let $;for(;($=b.readSync())!==null;)v($.name,d,w,f)}finally{b.closeSync()}}function v(d,w,f,b){const $=t.join(w,d),T=t.join(f,d);if(b.filter&&!b.filter($,T))return;const{destStat:q}=i.checkPathsSync($,T,"copy",b);return s(q,$,T,b)}function g(d,w,f,b){let $=e.readlinkSync(w);if(b.dereference&&($=t.resolve(process.cwd(),$)),d){let T;try{T=e.readlinkSync(f)}catch(q){if(q.code==="EINVAL"||q.code==="UNKNOWN")return e.symlinkSync($,f);throw q}if(b.dereference&&(T=t.resolve(process.cwd(),T)),i.isSrcSubdir($,T))throw new Error(`Cannot copy '${$}' to a subdirectory of itself, '${T}'.`);if(i.isSrcSubdir(T,$))throw new Error(`Cannot overwrite '${T}' with '${$}'.`);return E($,f)}else return e.symlinkSync($,f)}function E(d,w){return e.unlinkSync(w),e.symlinkSync(d,w)}return wa=a,wa}var ga,_h;function Au(){if(_h)return ga;_h=1;const e=Me().fromPromise;return ga={copy:e(nR()),copySync:iR()},ga}var Ea,yh;function zn(){if(yh)return Ea;yh=1;const e=Hr(),t=Me().fromCallback;function r(i,a){e.rm(i,{recursive:!0,force:!0},a)}function n(i){e.rmSync(i,{recursive:!0,force:!0})}return Ea={remove:t(r),removeSync:n},Ea}var Sa,vh;function sR(){if(vh)return Sa;vh=1;const e=Me().fromPromise,t=Xe(),r=ce,n=Lt(),i=zn(),a=e(async function(c){let u;try{u=await t.readdir(c)}catch{return n.mkdirs(c)}return Promise.all(u.map(o=>i.remove(r.join(c,o))))});function s(l){let c;try{c=t.readdirSync(l)}catch{return n.mkdirsSync(l)}c.forEach(u=>{u=r.join(l,u),i.removeSync(u)})}return Sa={emptyDirSync:s,emptydirSync:s,emptyDir:a,emptydir:a},Sa}var Ra,wh;function oR(){if(wh)return Ra;wh=1;const e=Me().fromPromise,t=ce,r=Xe(),n=Lt();async function i(s){let l;try{l=await r.stat(s)}catch{}if(l&&l.isFile())return;const c=t.dirname(s);let u=null;try{u=await r.stat(c)}catch(o){if(o.code==="ENOENT"){await n.mkdirs(c),await r.writeFile(s,"");return}else throw o}u.isDirectory()?await r.writeFile(s,""):await r.readdir(c)}function a(s){let l;try{l=r.statSync(s)}catch{}if(l&&l.isFile())return;const c=t.dirname(s);try{r.statSync(c).isDirectory()||r.readdirSync(c)}catch(u){if(u&&u.code==="ENOENT")n.mkdirsSync(c);else throw u}r.writeFileSync(s,"")}return Ra={createFile:e(i),createFileSync:a},Ra}var ba,gh;function aR(){if(gh)return ba;gh=1;const e=Me().fromPromise,t=ce,r=Xe(),n=Lt(),{pathExists:i}=ar(),{areIdentical:a}=Ir();async function s(c,u){let o;try{o=await r.lstat(u)}catch{}let m;try{m=await r.lstat(c)}catch(R){throw R.message=R.message.replace("lstat","ensureLink"),R}if(o&&a(m,o))return;const _=t.dirname(u);await i(_)||await n.mkdirs(_),await r.link(c,u)}function l(c,u){let o;try{o=r.lstatSync(u)}catch{}try{const S=r.lstatSync(c);if(o&&a(S,o))return}catch(S){throw S.message=S.message.replace("lstat","ensureLink"),S}const m=t.dirname(u);return r.existsSync(m)||n.mkdirsSync(m),r.linkSync(c,u)}return ba={createLink:e(s),createLinkSync:l},ba}var $a,Eh;function uR(){if(Eh)return $a;Eh=1;const e=ce,t=Xe(),{pathExists:r}=ar(),n=Me().fromPromise;async function i(s,l){if(e.isAbsolute(s)){try{await t.lstat(s)}catch(m){throw m.message=m.message.replace("lstat","ensureSymlink"),m}return{toCwd:s,toDst:s}}const c=e.dirname(l),u=e.join(c,s);if(await r(u))return{toCwd:u,toDst:s};try{await t.lstat(s)}catch(m){throw m.message=m.message.replace("lstat","ensureSymlink"),m}return{toCwd:s,toDst:e.relative(c,s)}}function a(s,l){if(e.isAbsolute(s)){if(!t.existsSync(s))throw new Error("absolute srcpath does not exist");return{toCwd:s,toDst:s}}const c=e.dirname(l),u=e.join(c,s);if(t.existsSync(u))return{toCwd:u,toDst:s};if(!t.existsSync(s))throw new Error("relative srcpath does not exist");return{toCwd:s,toDst:e.relative(c,s)}}return $a={symlinkPaths:n(i),symlinkPathsSync:a},$a}var Oa,Sh;function cR(){if(Sh)return Oa;Sh=1;const e=Xe(),t=Me().fromPromise;async function r(i,a){if(a)return a;let s;try{s=await e.lstat(i)}catch{return"file"}return s&&s.isDirectory()?"dir":"file"}function n(i,a){if(a)return a;let s;try{s=e.lstatSync(i)}catch{return"file"}return s&&s.isDirectory()?"dir":"file"}return Oa={symlinkType:t(r),symlinkTypeSync:n},Oa}var Ia,Rh;function lR(){if(Rh)return Ia;Rh=1;const e=Me().fromPromise,t=ce,r=Xe(),{mkdirs:n,mkdirsSync:i}=Lt(),{symlinkPaths:a,symlinkPathsSync:s}=uR(),{symlinkType:l,symlinkTypeSync:c}=cR(),{pathExists:u}=ar(),{areIdentical:o}=Ir();async function m(S,R,p){let h;try{h=await r.lstat(R)}catch{}if(h&&h.isSymbolicLink()){const[E,d]=await Promise.all([r.stat(S),r.stat(R)]);if(o(E,d))return}const y=await a(S,R);S=y.toDst;const v=await l(y.toCwd,p),g=t.dirname(R);return await u(g)||await n(g),r.symlink(S,R,v)}function _(S,R,p){let h;try{h=r.lstatSync(R)}catch{}if(h&&h.isSymbolicLink()){const E=r.statSync(S),d=r.statSync(R);if(o(E,d))return}const y=s(S,R);S=y.toDst,p=c(y.toCwd,p);const v=t.dirname(R);return r.existsSync(v)||i(v),r.symlinkSync(S,R,p)}return Ia={createSymlink:e(m),createSymlinkSync:_},Ia}var Pa,bh;function fR(){if(bh)return Pa;bh=1;const{createFile:e,createFileSync:t}=oR(),{createLink:r,createLinkSync:n}=aR(),{createSymlink:i,createSymlinkSync:a}=lR();return Pa={createFile:e,createFileSync:t,ensureFile:e,ensureFileSync:t,createLink:r,createLinkSync:n,ensureLink:r,ensureLinkSync:n,createSymlink:i,createSymlinkSync:a,ensureSymlink:i,ensureSymlinkSync:a},Pa}var Ta,$h;function Nu(){if($h)return Ta;$h=1;function e(r,{EOL:n=`
`,finalEOL:i=!0,replacer:a=null,spaces:s}={}){const l=i?n:"";return JSON.stringify(r,a,s).replace(/\n/g,n)+l}function t(r){return Buffer.isBuffer(r)&&(r=r.toString("utf8")),r.replace(/^\uFEFF/,"")}return Ta={stringify:e,stripBom:t},Ta}var Aa,Oh;function dR(){if(Oh)return Aa;Oh=1;let e;try{e=Hr()}catch{e=De}const t=Me(),{stringify:r,stripBom:n}=Nu();async function i(m,_={}){typeof _=="string"&&(_={encoding:_});const S=_.fs||e,R="throws"in _?_.throws:!0;let p=await t.fromCallback(S.readFile)(m,_);p=n(p);let h;try{h=JSON.parse(p,_?_.reviver:null)}catch(y){if(R)throw y.message=`${m}: ${y.message}`,y;return null}return h}const a=t.fromPromise(i);function s(m,_={}){typeof _=="string"&&(_={encoding:_});const S=_.fs||e,R="throws"in _?_.throws:!0;try{let p=S.readFileSync(m,_);return p=n(p),JSON.parse(p,_.reviver)}catch(p){if(R)throw p.message=`${m}: ${p.message}`,p;return null}}async function l(m,_,S={}){const R=S.fs||e,p=r(_,S);await t.fromCallback(R.writeFile)(m,p,S)}const c=t.fromPromise(l);function u(m,_,S={}){const R=S.fs||e,p=r(_,S);return R.writeFileSync(m,p,S)}return Aa={readFile:a,readFileSync:s,writeFile:c,writeFileSync:u},Aa}var Na,Ih;function hR(){if(Ih)return Na;Ih=1;const e=dR();return Na={readJson:e.readFile,readJsonSync:e.readFileSync,writeJson:e.writeFile,writeJsonSync:e.writeFileSync},Na}var La,Ph;function Lu(){if(Ph)return La;Ph=1;const e=Me().fromPromise,t=Xe(),r=ce,n=Lt(),i=ar().pathExists;async function a(l,c,u="utf-8"){const o=r.dirname(l);return await i(o)||await n.mkdirs(o),t.writeFile(l,c,u)}function s(l,...c){const u=r.dirname(l);t.existsSync(u)||n.mkdirsSync(u),t.writeFileSync(l,...c)}return La={outputFile:e(a),outputFileSync:s},La}var Ca,Th;function pR(){if(Th)return Ca;Th=1;const{stringify:e}=Nu(),{outputFile:t}=Lu();async function r(n,i,a={}){const s=e(i,a);await t(n,s,a)}return Ca=r,Ca}var xa,Ah;function mR(){if(Ah)return xa;Ah=1;const{stringify:e}=Nu(),{outputFileSync:t}=Lu();function r(n,i,a){const s=e(i,a);t(n,s,a)}return xa=r,xa}var Da,Nh;function _R(){if(Nh)return Da;Nh=1;const e=Me().fromPromise,t=hR();return t.outputJson=e(pR()),t.outputJsonSync=mR(),t.outputJSON=t.outputJson,t.outputJSONSync=t.outputJsonSync,t.writeJSON=t.writeJson,t.writeJSONSync=t.writeJsonSync,t.readJSON=t.readJson,t.readJSONSync=t.readJsonSync,Da=t,Da}var Fa,Lh;function yR(){if(Lh)return Fa;Lh=1;const e=Xe(),t=ce,{copy:r}=Au(),{remove:n}=zn(),{mkdirp:i}=Lt(),{pathExists:a}=ar(),s=Ir();async function l(o,m,_={}){const S=_.overwrite||_.clobber||!1,{srcStat:R,isChangingCase:p=!1}=await s.checkPaths(o,m,"move",_);await s.checkParentPaths(o,R,m,"move");const h=t.dirname(m);return t.parse(h).root!==h&&await i(h),c(o,m,S,p)}async function c(o,m,_,S){if(!S){if(_)await n(m);else if(await a(m))throw new Error("dest already exists.")}try{await e.rename(o,m)}catch(R){if(R.code!=="EXDEV")throw R;await u(o,m,_)}}async function u(o,m,_){return await r(o,m,{overwrite:_,errorOnExist:!0,preserveTimestamps:!0}),n(o)}return Fa=l,Fa}var qa,Ch;function vR(){if(Ch)return qa;Ch=1;const e=Hr(),t=ce,r=Au().copySync,n=zn().removeSync,i=Lt().mkdirpSync,a=Ir();function s(m,_,S){S=S||{};const R=S.overwrite||S.clobber||!1,{srcStat:p,isChangingCase:h=!1}=a.checkPathsSync(m,_,"move",S);return a.checkParentPathsSync(m,p,_,"move"),l(_)||i(t.dirname(_)),c(m,_,R,h)}function l(m){const _=t.dirname(m);return t.parse(_).root===_}function c(m,_,S,R){if(R)return u(m,_,S);if(S)return n(_),u(m,_,S);if(e.existsSync(_))throw new Error("dest already exists.");return u(m,_,S)}function u(m,_,S){try{e.renameSync(m,_)}catch(R){if(R.code!=="EXDEV")throw R;return o(m,_,S)}}function o(m,_,S){return r(m,_,{overwrite:S,errorOnExist:!0,preserveTimestamps:!0}),n(m)}return qa=s,qa}var ka,xh;function wR(){if(xh)return ka;xh=1;const e=Me().fromPromise;return ka={move:e(yR()),moveSync:vR()},ka}var ja,Dh;function gR(){return Dh||(Dh=1,ja={...Xe(),...Au(),...sR(),...fR(),..._R(),...Lt(),...wR(),...Lu(),...ar(),...zn()}),ja}var Pt=gR();let qt;async function Hm(e){if(process.platform!=="win32")return;if(typeof qt=="string")return{binDir:qt};const t=fe.sync("choco",{nothrow:!0});if(t!==null)return qt=Re(t),{binDir:qt};let r="powershell.exe";const n=fe.sync(`${process.env.SystemRoot}\\System32\\WindowsPowerShell\\v1.0\\powershell.exe`,{nothrow:!0});n!==null&&(r=n),ze(r,["-NoProfile","-InputFormat","None","-ExecutionPolicy","Bypass","-Command","[System.Net.ServicePointManager]::SecurityProtocol = 3072; iex ((New-Object System.Net.WebClient).DownloadString('https://community.chocolatey.org/install.ps1'))"],{stdio:"inherit"});const i=`${process.env.ALLUSERSPROFILE}\\chocolatey\\bin`;await be(i,ne);const a=fe.sync("choco",{nothrow:!0});if(a!==null?qt=Re(a):qt=`${process.env.ChocolateyInstall??"C:/ProgramData/chocolatey"}/bin`,await _e(qt))return{binDir:qt}}let Fh=!1;async function xe(e,t,r=[]){Y(`Installing ${e} ${t??""} via chocolatey`),(!Fh||fe.sync("choco",{nothrow:!0})===null)&&(await Hm(),Fh=!0);const n=process.env.PATH,i={...process.env};if(i.TMP=void 0,i.TEMP=void 0,i.Path=void 0,i.PATH=n,t!==void 0&&t!=="")ze("choco",["install","-y",e,`--version=${t}`,...r],{env:i,extendEnv:!1,stdio:"inherit"});else try{ze("choco",["install","-y",e,...r],{env:i,extendEnv:!1,stdio:"inherit"})}catch(s){if(s.message.includes("exit code 3010"))Y(`${e} might require a reboot for the completion of the installation.`);else throw s}const a=`${process.env.ChocolateyInstall??"C:/ProgramData/chocolatey"}/bin`;return await be(a,ne),{binDir:a}}async function dn({version:e}={}){switch(process.platform){case"win32":return xe("7zip",e);case"darwin":return Ge("p7zip",e);case"linux":{if(Pe())return ge("p7zip",e);if(Ce())return Le([{name:"p7zip",version:e},{name:"p7zip-plugins",version:e}]);if(me())return de([{name:"p7zip-full",version:e}]);if(await Oe())return Fe([{name:"p7zip",version:e}]);throw new Error("Unsupported linux distribution")}default:throw new Error("Unsupported platform")}}var ue={},Cr={exports:{}},an={exports:{}},qh;function zm(){return qh||(qh=1,(function(e,t){t=e.exports=f;var r;typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?r=function(){var O=Array.prototype.slice.call(arguments,0);O.unshift("SEMVER"),console.log.apply(console,O)}:r=function(){},t.SEMVER_SPEC_VERSION="2.0.0";var n=256,i=Number.MAX_SAFE_INTEGER||9007199254740991,a=16,s=n-6,l=t.re=[],c=t.safeRe=[],u=t.src=[],o=t.tokens={},m=0;function _(O){o[O]=m++}var S="[a-zA-Z0-9-]",R=[["\\s",1],["\\d",n],[S,s]];function p(O){for(var A=0;A<R.length;A++){var L=R[A][0],H=R[A][1];O=O.split(L+"*").join(L+"{0,"+H+"}").split(L+"+").join(L+"{1,"+H+"}")}return O}_("NUMERICIDENTIFIER"),u[o.NUMERICIDENTIFIER]="0|[1-9]\\d*",_("NUMERICIDENTIFIERLOOSE"),u[o.NUMERICIDENTIFIERLOOSE]="\\d+",_("NONNUMERICIDENTIFIER"),u[o.NONNUMERICIDENTIFIER]="\\d*[a-zA-Z-]"+S+"*",_("MAINVERSION"),u[o.MAINVERSION]="("+u[o.NUMERICIDENTIFIER]+")\\.("+u[o.NUMERICIDENTIFIER]+")\\.("+u[o.NUMERICIDENTIFIER]+")",_("MAINVERSIONLOOSE"),u[o.MAINVERSIONLOOSE]="("+u[o.NUMERICIDENTIFIERLOOSE]+")\\.("+u[o.NUMERICIDENTIFIERLOOSE]+")\\.("+u[o.NUMERICIDENTIFIERLOOSE]+")",_("PRERELEASEIDENTIFIER"),u[o.PRERELEASEIDENTIFIER]="(?:"+u[o.NUMERICIDENTIFIER]+"|"+u[o.NONNUMERICIDENTIFIER]+")",_("PRERELEASEIDENTIFIERLOOSE"),u[o.PRERELEASEIDENTIFIERLOOSE]="(?:"+u[o.NUMERICIDENTIFIERLOOSE]+"|"+u[o.NONNUMERICIDENTIFIER]+")",_("PRERELEASE"),u[o.PRERELEASE]="(?:-("+u[o.PRERELEASEIDENTIFIER]+"(?:\\."+u[o.PRERELEASEIDENTIFIER]+")*))",_("PRERELEASELOOSE"),u[o.PRERELEASELOOSE]="(?:-?("+u[o.PRERELEASEIDENTIFIERLOOSE]+"(?:\\."+u[o.PRERELEASEIDENTIFIERLOOSE]+")*))",_("BUILDIDENTIFIER"),u[o.BUILDIDENTIFIER]=S+"+",_("BUILD"),u[o.BUILD]="(?:\\+("+u[o.BUILDIDENTIFIER]+"(?:\\."+u[o.BUILDIDENTIFIER]+")*))",_("FULL"),_("FULLPLAIN"),u[o.FULLPLAIN]="v?"+u[o.MAINVERSION]+u[o.PRERELEASE]+"?"+u[o.BUILD]+"?",u[o.FULL]="^"+u[o.FULLPLAIN]+"$",_("LOOSEPLAIN"),u[o.LOOSEPLAIN]="[v=\\s]*"+u[o.MAINVERSIONLOOSE]+u[o.PRERELEASELOOSE]+"?"+u[o.BUILD]+"?",_("LOOSE"),u[o.LOOSE]="^"+u[o.LOOSEPLAIN]+"$",_("GTLT"),u[o.GTLT]="((?:<|>)?=?)",_("XRANGEIDENTIFIERLOOSE"),u[o.XRANGEIDENTIFIERLOOSE]=u[o.NUMERICIDENTIFIERLOOSE]+"|x|X|\\*",_("XRANGEIDENTIFIER"),u[o.XRANGEIDENTIFIER]=u[o.NUMERICIDENTIFIER]+"|x|X|\\*",_("XRANGEPLAIN"),u[o.XRANGEPLAIN]="[v=\\s]*("+u[o.XRANGEIDENTIFIER]+")(?:\\.("+u[o.XRANGEIDENTIFIER]+")(?:\\.("+u[o.XRANGEIDENTIFIER]+")(?:"+u[o.PRERELEASE]+")?"+u[o.BUILD]+"?)?)?",_("XRANGEPLAINLOOSE"),u[o.XRANGEPLAINLOOSE]="[v=\\s]*("+u[o.XRANGEIDENTIFIERLOOSE]+")(?:\\.("+u[o.XRANGEIDENTIFIERLOOSE]+")(?:\\.("+u[o.XRANGEIDENTIFIERLOOSE]+")(?:"+u[o.PRERELEASELOOSE]+")?"+u[o.BUILD]+"?)?)?",_("XRANGE"),u[o.XRANGE]="^"+u[o.GTLT]+"\\s*"+u[o.XRANGEPLAIN]+"$",_("XRANGELOOSE"),u[o.XRANGELOOSE]="^"+u[o.GTLT]+"\\s*"+u[o.XRANGEPLAINLOOSE]+"$",_("COERCE"),u[o.COERCE]="(^|[^\\d])(\\d{1,"+a+"})(?:\\.(\\d{1,"+a+"}))?(?:\\.(\\d{1,"+a+"}))?(?:$|[^\\d])",_("COERCERTL"),l[o.COERCERTL]=new RegExp(u[o.COERCE],"g"),c[o.COERCERTL]=new RegExp(p(u[o.COERCE]),"g"),_("LONETILDE"),u[o.LONETILDE]="(?:~>?)",_("TILDETRIM"),u[o.TILDETRIM]="(\\s*)"+u[o.LONETILDE]+"\\s+",l[o.TILDETRIM]=new RegExp(u[o.TILDETRIM],"g"),c[o.TILDETRIM]=new RegExp(p(u[o.TILDETRIM]),"g");var h="$1~";_("TILDE"),u[o.TILDE]="^"+u[o.LONETILDE]+u[o.XRANGEPLAIN]+"$",_("TILDELOOSE"),u[o.TILDELOOSE]="^"+u[o.LONETILDE]+u[o.XRANGEPLAINLOOSE]+"$",_("LONECARET"),u[o.LONECARET]="(?:\\^)",_("CARETTRIM"),u[o.CARETTRIM]="(\\s*)"+u[o.LONECARET]+"\\s+",l[o.CARETTRIM]=new RegExp(u[o.CARETTRIM],"g"),c[o.CARETTRIM]=new RegExp(p(u[o.CARETTRIM]),"g");var y="$1^";_("CARET"),u[o.CARET]="^"+u[o.LONECARET]+u[o.XRANGEPLAIN]+"$",_("CARETLOOSE"),u[o.CARETLOOSE]="^"+u[o.LONECARET]+u[o.XRANGEPLAINLOOSE]+"$",_("COMPARATORLOOSE"),u[o.COMPARATORLOOSE]="^"+u[o.GTLT]+"\\s*("+u[o.LOOSEPLAIN]+")$|^$",_("COMPARATOR"),u[o.COMPARATOR]="^"+u[o.GTLT]+"\\s*("+u[o.FULLPLAIN]+")$|^$",_("COMPARATORTRIM"),u[o.COMPARATORTRIM]="(\\s*)"+u[o.GTLT]+"\\s*("+u[o.LOOSEPLAIN]+"|"+u[o.XRANGEPLAIN]+")",l[o.COMPARATORTRIM]=new RegExp(u[o.COMPARATORTRIM],"g"),c[o.COMPARATORTRIM]=new RegExp(p(u[o.COMPARATORTRIM]),"g");var v="$1$2$3";_("HYPHENRANGE"),u[o.HYPHENRANGE]="^\\s*("+u[o.XRANGEPLAIN]+")\\s+-\\s+("+u[o.XRANGEPLAIN]+")\\s*$",_("HYPHENRANGELOOSE"),u[o.HYPHENRANGELOOSE]="^\\s*("+u[o.XRANGEPLAINLOOSE]+")\\s+-\\s+("+u[o.XRANGEPLAINLOOSE]+")\\s*$",_("STAR"),u[o.STAR]="(<|>)?=?\\s*\\*";for(var g=0;g<m;g++)r(g,u[g]),l[g]||(l[g]=new RegExp(u[g]),c[g]=new RegExp(p(u[g])));t.parse=E;function E(O,A){if((!A||typeof A!="object")&&(A={loose:!!A,includePrerelease:!1}),O instanceof f)return O;if(typeof O!="string"||O.length>n)return null;var L=A.loose?c[o.LOOSE]:c[o.FULL];if(!L.test(O))return null;try{return new f(O,A)}catch{return null}}t.valid=d;function d(O,A){var L=E(O,A);return L?L.version:null}t.clean=w;function w(O,A){var L=E(O.trim().replace(/^[=v]+/,""),A);return L?L.version:null}t.SemVer=f;function f(O,A){if((!A||typeof A!="object")&&(A={loose:!!A,includePrerelease:!1}),O instanceof f){if(O.loose===A.loose)return O;O=O.version}else if(typeof O!="string")throw new TypeError("Invalid Version: "+O);if(O.length>n)throw new TypeError("version is longer than "+n+" characters");if(!(this instanceof f))return new f(O,A);r("SemVer",O,A),this.options=A,this.loose=!!A.loose;var L=O.trim().match(A.loose?c[o.LOOSE]:c[o.FULL]);if(!L)throw new TypeError("Invalid Version: "+O);if(this.raw=O,this.major=+L[1],this.minor=+L[2],this.patch=+L[3],this.major>i||this.major<0)throw new TypeError("Invalid major version");if(this.minor>i||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>i||this.patch<0)throw new TypeError("Invalid patch version");L[4]?this.prerelease=L[4].split(".").map(function(H){if(/^[0-9]+$/.test(H)){var X=+H;if(X>=0&&X<i)return X}return H}):this.prerelease=[],this.build=L[5]?L[5].split("."):[],this.format()}f.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},f.prototype.toString=function(){return this.version},f.prototype.compare=function(O){return r("SemVer.compare",this.version,this.options,O),O instanceof f||(O=new f(O,this.options)),this.compareMain(O)||this.comparePre(O)},f.prototype.compareMain=function(O){return O instanceof f||(O=new f(O,this.options)),q(this.major,O.major)||q(this.minor,O.minor)||q(this.patch,O.patch)},f.prototype.comparePre=function(O){if(O instanceof f||(O=new f(O,this.options)),this.prerelease.length&&!O.prerelease.length)return-1;if(!this.prerelease.length&&O.prerelease.length)return 1;if(!this.prerelease.length&&!O.prerelease.length)return 0;var A=0;do{var L=this.prerelease[A],H=O.prerelease[A];if(r("prerelease compare",A,L,H),L===void 0&&H===void 0)return 0;if(H===void 0)return 1;if(L===void 0)return-1;if(L===H)continue;return q(L,H)}while(++A)},f.prototype.compareBuild=function(O){O instanceof f||(O=new f(O,this.options));var A=0;do{var L=this.build[A],H=O.build[A];if(r("prerelease compare",A,L,H),L===void 0&&H===void 0)return 0;if(H===void 0)return 1;if(L===void 0)return-1;if(L===H)continue;return q(L,H)}while(++A)},f.prototype.inc=function(O,A){switch(O){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",A);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",A);break;case"prepatch":this.prerelease.length=0,this.inc("patch",A),this.inc("pre",A);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",A),this.inc("pre",A);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var L=this.prerelease.length;--L>=0;)typeof this.prerelease[L]=="number"&&(this.prerelease[L]++,L=-2);L===-1&&this.prerelease.push(0)}A&&(this.prerelease[0]===A?isNaN(this.prerelease[1])&&(this.prerelease=[A,0]):this.prerelease=[A,0]);break;default:throw new Error("invalid increment argument: "+O)}return this.format(),this.raw=this.version,this},t.inc=b;function b(O,A,L,H){typeof L=="string"&&(H=L,L=void 0);try{return new f(O,L).inc(A,H).version}catch{return null}}t.diff=$;function $(O,A){if(se(O,A))return null;var L=E(O),H=E(A),X="";if(L.prerelease.length||H.prerelease.length){X="pre";var ee="prerelease"}for(var re in L)if((re==="major"||re==="minor"||re==="patch")&&L[re]!==H[re])return X+re;return ee}t.compareIdentifiers=q;var T=/^[0-9]+$/;function q(O,A){var L=T.test(O),H=T.test(A);return L&&H&&(O=+O,A=+A),O===A?0:L&&!H?-1:H&&!L?1:O<A?-1:1}t.rcompareIdentifiers=V;function V(O,A){return q(A,O)}t.major=M;function M(O,A){return new f(O,A).major}t.minor=P;function P(O,A){return new f(O,A).minor}t.patch=I;function I(O,A){return new f(O,A).patch}t.compare=N;function N(O,A,L){return new f(O,L).compare(new f(A,L))}t.compareLoose=D;function D(O,A){return N(O,A,!0)}t.compareBuild=x;function x(O,A,L){var H=new f(O,L),X=new f(A,L);return H.compare(X)||H.compareBuild(X)}t.rcompare=F;function F(O,A,L){return N(A,O,L)}t.sort=C;function C(O,A){return O.sort(function(L,H){return t.compareBuild(L,H,A)})}t.rsort=B;function B(O,A){return O.sort(function(L,H){return t.compareBuild(H,L,A)})}t.gt=G;function G(O,A,L){return N(O,A,L)>0}t.lt=J;function J(O,A,L){return N(O,A,L)<0}t.eq=se;function se(O,A,L){return N(O,A,L)===0}t.neq=W;function W(O,A,L){return N(O,A,L)!==0}t.gte=ie;function ie(O,A,L){return N(O,A,L)>=0}t.lte=oe;function oe(O,A,L){return N(O,A,L)<=0}t.cmp=ve;function ve(O,A,L,H){switch(A){case"===":return typeof O=="object"&&(O=O.version),typeof L=="object"&&(L=L.version),O===L;case"!==":return typeof O=="object"&&(O=O.version),typeof L=="object"&&(L=L.version),O!==L;case"":case"=":case"==":return se(O,L,H);case"!=":return W(O,L,H);case">":return G(O,L,H);case">=":return ie(O,L,H);case"<":return J(O,L,H);case"<=":return oe(O,L,H);default:throw new TypeError("Invalid operator: "+A)}}t.Comparator=U;function U(O,A){if((!A||typeof A!="object")&&(A={loose:!!A,includePrerelease:!1}),O instanceof U){if(O.loose===!!A.loose)return O;O=O.value}if(!(this instanceof U))return new U(O,A);O=O.trim().split(/\s+/).join(" "),r("comparator",O,A),this.options=A,this.loose=!!A.loose,this.parse(O),this.semver===j?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}var j={};U.prototype.parse=function(O){var A=this.options.loose?c[o.COMPARATORLOOSE]:c[o.COMPARATOR],L=O.match(A);if(!L)throw new TypeError("Invalid comparator: "+O);this.operator=L[1]!==void 0?L[1]:"",this.operator==="="&&(this.operator=""),L[2]?this.semver=new f(L[2],this.options.loose):this.semver=j},U.prototype.toString=function(){return this.value},U.prototype.test=function(O){if(r("Comparator.test",O,this.options.loose),this.semver===j||O===j)return!0;if(typeof O=="string")try{O=new f(O,this.options)}catch{return!1}return ve(O,this.operator,this.semver,this.options)},U.prototype.intersects=function(O,A){if(!(O instanceof U))throw new TypeError("a Comparator is required");(!A||typeof A!="object")&&(A={loose:!!A,includePrerelease:!1});var L;if(this.operator==="")return this.value===""?!0:(L=new k(O.value,A),zr(this.value,L,A));if(O.operator==="")return O.value===""?!0:(L=new k(this.value,A),zr(O.semver,L,A));var H=(this.operator===">="||this.operator===">")&&(O.operator===">="||O.operator===">"),X=(this.operator==="<="||this.operator==="<")&&(O.operator==="<="||O.operator==="<"),ee=this.semver.version===O.semver.version,re=(this.operator===">="||this.operator==="<=")&&(O.operator===">="||O.operator==="<="),he=ve(this.semver,"<",O.semver,A)&&(this.operator===">="||this.operator===">")&&(O.operator==="<="||O.operator==="<"),ae=ve(this.semver,">",O.semver,A)&&(this.operator==="<="||this.operator==="<")&&(O.operator===">="||O.operator===">");return H||X||ee&&re||he||ae},t.Range=k;function k(O,A){if((!A||typeof A!="object")&&(A={loose:!!A,includePrerelease:!1}),O instanceof k)return O.loose===!!A.loose&&O.includePrerelease===!!A.includePrerelease?O:new k(O.raw,A);if(O instanceof U)return new k(O.value,A);if(!(this instanceof k))return new k(O,A);if(this.options=A,this.loose=!!A.loose,this.includePrerelease=!!A.includePrerelease,this.raw=O.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(function(L){return this.parseRange(L.trim())},this).filter(function(L){return L.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+this.raw);this.format()}k.prototype.format=function(){return this.range=this.set.map(function(O){return O.join(" ").trim()}).join("||").trim(),this.range},k.prototype.toString=function(){return this.range},k.prototype.parseRange=function(O){var A=this.options.loose,L=A?c[o.HYPHENRANGELOOSE]:c[o.HYPHENRANGE];O=O.replace(L,$_),r("hyphen replace",O),O=O.replace(c[o.COMPARATORTRIM],v),r("comparator trim",O,c[o.COMPARATORTRIM]),O=O.replace(c[o.TILDETRIM],h),O=O.replace(c[o.CARETTRIM],y),O=O.split(/\s+/).join(" ");var H=A?c[o.COMPARATORLOOSE]:c[o.COMPARATOR],X=O.split(" ").map(function(ee){return te(ee,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(X=X.filter(function(ee){return!!ee.match(H)})),X=X.map(function(ee){return new U(ee,this.options)},this),X},k.prototype.intersects=function(O,A){if(!(O instanceof k))throw new TypeError("a Range is required");return this.set.some(function(L){return z(L,A)&&O.set.some(function(H){return z(H,A)&&L.every(function(X){return H.every(function(ee){return X.intersects(ee,A)})})})})};function z(O,A){for(var L=!0,H=O.slice(),X=H.pop();L&&H.length;)L=H.every(function(ee){return X.intersects(ee,A)}),X=H.pop();return L}t.toComparators=K;function K(O,A){return new k(O,A).set.map(function(L){return L.map(function(H){return H.value}).join(" ").trim().split(" ")})}function te(O,A){return r("comp",O,A),O=Ke(O,A),r("caret",O),O=qe(O,A),r("tildes",O),O=Ct(O,A),r("xrange",O),O=b_(O,A),r("stars",O),O}function Q(O){return!O||O.toLowerCase()==="x"||O==="*"}function qe(O,A){return O.trim().split(/\s+/).map(function(L){return Te(L,A)}).join(" ")}function Te(O,A){var L=A.loose?c[o.TILDELOOSE]:c[o.TILDE];return O.replace(L,function(H,X,ee,re,he){r("tilde",O,H,X,ee,re,he);var ae;return Q(X)?ae="":Q(ee)?ae=">="+X+".0.0 <"+(+X+1)+".0.0":Q(re)?ae=">="+X+"."+ee+".0 <"+X+"."+(+ee+1)+".0":he?(r("replaceTilde pr",he),ae=">="+X+"."+ee+"."+re+"-"+he+" <"+X+"."+(+ee+1)+".0"):ae=">="+X+"."+ee+"."+re+" <"+X+"."+(+ee+1)+".0",r("tilde return",ae),ae})}function Ke(O,A){return O.trim().split(/\s+/).map(function(L){return Ae(L,A)}).join(" ")}function Ae(O,A){r("caret",O,A);var L=A.loose?c[o.CARETLOOSE]:c[o.CARET];return O.replace(L,function(H,X,ee,re,he){r("caret",O,H,X,ee,re,he);var ae;return Q(X)?ae="":Q(ee)?ae=">="+X+".0.0 <"+(+X+1)+".0.0":Q(re)?X==="0"?ae=">="+X+"."+ee+".0 <"+X+"."+(+ee+1)+".0":ae=">="+X+"."+ee+".0 <"+(+X+1)+".0.0":he?(r("replaceCaret pr",he),X==="0"?ee==="0"?ae=">="+X+"."+ee+"."+re+"-"+he+" <"+X+"."+ee+"."+(+re+1):ae=">="+X+"."+ee+"."+re+"-"+he+" <"+X+"."+(+ee+1)+".0":ae=">="+X+"."+ee+"."+re+"-"+he+" <"+(+X+1)+".0.0"):(r("no pr"),X==="0"?ee==="0"?ae=">="+X+"."+ee+"."+re+" <"+X+"."+ee+"."+(+re+1):ae=">="+X+"."+ee+"."+re+" <"+X+"."+(+ee+1)+".0":ae=">="+X+"."+ee+"."+re+" <"+(+X+1)+".0.0"),r("caret return",ae),ae})}function Ct(O,A){return r("replaceXRanges",O,A),O.split(/\s+/).map(function(L){return R_(L,A)}).join(" ")}function R_(O,A){O=O.trim();var L=A.loose?c[o.XRANGELOOSE]:c[o.XRANGE];return O.replace(L,function(H,X,ee,re,he,ae){r("xRange",O,H,X,ee,re,he,ae);var Et=Q(ee),St=Et||Q(re),ot=St||Q(he),Ye=ot;return X==="="&&Ye&&(X=""),ae=A.includePrerelease?"-0":"",Et?X===">"||X==="<"?H="<0.0.0-0":H="*":X&&Ye?(St&&(re=0),he=0,X===">"?(X=">=",St?(ee=+ee+1,re=0,he=0):(re=+re+1,he=0)):X==="<="&&(X="<",St?ee=+ee+1:re=+re+1),H=X+ee+"."+re+"."+he+ae):St?H=">="+ee+".0.0"+ae+" <"+(+ee+1)+".0.0"+ae:ot&&(H=">="+ee+"."+re+".0"+ae+" <"+ee+"."+(+re+1)+".0"+ae),r("xRange return",H),H})}function b_(O,A){return r("replaceStars",O,A),O.trim().replace(c[o.STAR],"")}function $_(O,A,L,H,X,ee,re,he,ae,Et,St,ot,Ye){return Q(L)?A="":Q(H)?A=">="+L+".0.0":Q(X)?A=">="+L+"."+H+".0":A=">="+A,Q(ae)?he="":Q(Et)?he="<"+(+ae+1)+".0.0":Q(St)?he="<"+ae+"."+(+Et+1)+".0":ot?he="<="+ae+"."+Et+"."+St+"-"+ot:he="<="+he,(A+" "+he).trim()}k.prototype.test=function(O){if(!O)return!1;if(typeof O=="string")try{O=new f(O,this.options)}catch{return!1}for(var A=0;A<this.set.length;A++)if(O_(this.set[A],O,this.options))return!0;return!1};function O_(O,A,L){for(var H=0;H<O.length;H++)if(!O[H].test(A))return!1;if(A.prerelease.length&&!L.includePrerelease){for(H=0;H<O.length;H++)if(r(O[H].semver),O[H].semver!==j&&O[H].semver.prerelease.length>0){var X=O[H].semver;if(X.major===A.major&&X.minor===A.minor&&X.patch===A.patch)return!0}return!1}return!0}t.satisfies=zr;function zr(O,A,L){try{A=new k(A,L)}catch{return!1}return A.test(O)}t.maxSatisfying=I_;function I_(O,A,L){var H=null,X=null;try{var ee=new k(A,L)}catch{return null}return O.forEach(function(re){ee.test(re)&&(!H||X.compare(re)===-1)&&(H=re,X=new f(H,L))}),H}t.minSatisfying=P_;function P_(O,A,L){var H=null,X=null;try{var ee=new k(A,L)}catch{return null}return O.forEach(function(re){ee.test(re)&&(!H||X.compare(re)===1)&&(H=re,X=new f(H,L))}),H}t.minVersion=T_;function T_(O,A){O=new k(O,A);var L=new f("0.0.0");if(O.test(L)||(L=new f("0.0.0-0"),O.test(L)))return L;L=null;for(var H=0;H<O.set.length;++H){var X=O.set[H];X.forEach(function(ee){var re=new f(ee.semver.version);switch(ee.operator){case">":re.prerelease.length===0?re.patch++:re.prerelease.push(0),re.raw=re.format();case"":case">=":(!L||G(L,re))&&(L=re);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+ee.operator)}})}return L&&O.test(L)?L:null}t.validRange=A_;function A_(O,A){try{return new k(O,A).range||"*"}catch{return null}}t.ltr=N_;function N_(O,A,L){return Wn(O,A,"<",L)}t.gtr=L_;function L_(O,A,L){return Wn(O,A,">",L)}t.outside=Wn;function Wn(O,A,L,H){O=new f(O,H),A=new k(A,H);var X,ee,re,he,ae;switch(L){case">":X=G,ee=oe,re=J,he=">",ae=">=";break;case"<":X=J,ee=ie,re=G,he="<",ae="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(zr(O,A,H))return!1;for(var Et=0;Et<A.set.length;++Et){var St=A.set[Et],ot=null,Ye=null;if(St.forEach(function(Dt){Dt.semver===j&&(Dt=new U(">=0.0.0")),ot=ot||Dt,Ye=Ye||Dt,X(Dt.semver,ot.semver,H)?ot=Dt:re(Dt.semver,Ye.semver,H)&&(Ye=Dt)}),ot.operator===he||ot.operator===ae||(!Ye.operator||Ye.operator===he)&&ee(O,Ye.semver))return!1;if(Ye.operator===ae&&re(O,Ye.semver))return!1}return!0}t.prerelease=C_;function C_(O,A){var L=E(O,A);return L&&L.prerelease.length?L.prerelease:null}t.intersects=x_;function x_(O,A,L){return O=new k(O,L),A=new k(A,L),O.intersects(A)}t.coerce=D_;function D_(O,A){if(O instanceof f)return O;if(typeof O=="number"&&(O=String(O)),typeof O!="string")return null;A=A||{};var L=null;if(!A.rtl)L=O.match(c[o.COERCE]);else{for(var H;(H=c[o.COERCERTL].exec(O))&&(!L||L.index+L[0].length!==O.length);)(!L||H.index+H[0].length!==L.index+L[0].length)&&(L=H),c[o.COERCERTL].lastIndex=H.index+H[1].length+H[2].length;c[o.COERCERTL].lastIndex=-1}return L===null?null:E(L[2]+"."+(L[3]||"0")+"."+(L[4]||"0"),A)}})(an,an.exports)),an.exports}var kt=Cr.exports,kh;function ER(){return kh||(kh=1,(function(e,t){var r=kt&&kt.__createBinding||(Object.create?(function(R,p,h,y){y===void 0&&(y=h);var v=Object.getOwnPropertyDescriptor(p,h);(!v||("get"in v?!p.__esModule:v.writable||v.configurable))&&(v={enumerable:!0,get:function(){return p[h]}}),Object.defineProperty(R,y,v)}):(function(R,p,h,y){y===void 0&&(y=h),R[y]=p[h]})),n=kt&&kt.__setModuleDefault||(Object.create?(function(R,p){Object.defineProperty(R,"default",{enumerable:!0,value:p})}):function(R,p){R.default=p}),i=kt&&kt.__importStar||function(R){if(R&&R.__esModule)return R;var p={};if(R!=null)for(var h in R)h!=="default"&&Object.prototype.hasOwnProperty.call(R,h)&&r(p,R,h);return n(p,R),p},a=kt&&kt.__awaiter||function(R,p,h,y){function v(g){return g instanceof h?g:new h(function(E){E(g)})}return new(h||(h=Promise))(function(g,E){function d(b){try{f(y.next(b))}catch($){E($)}}function w(b){try{f(y.throw(b))}catch($){E($)}}function f(b){b.done?g(b.value):v(b.value).then(d,w)}f((y=y.apply(R,p||[])).next())})};Object.defineProperty(t,"__esModule",{value:!0}),t._readLinuxVersionFile=t._getOsVersion=t._findMatch=void 0;const s=i(zm()),l=gr(),c=it,u=Ur,o=De;function m(R,p,h,y){return a(this,void 0,void 0,function*(){const v=c.platform();let g,E,d;for(const w of h){const f=w.version;if((0,l.debug)(`check ${f} satisfies ${R}`),s.satisfies(f,R)&&(!p||w.stable===p)&&(d=w.files.find(b=>{(0,l.debug)(`${b.arch}===${y} && ${b.platform}===${v}`);let $=b.arch===y&&b.platform===v;if($&&b.platform_version){const T=e.exports._getOsVersion();T===b.platform_version?$=!0:$=s.satisfies(T,b.platform_version)}return $}),d)){(0,l.debug)(`matched ${w.version}`),E=w;break}}return E&&d&&(g=Object.assign({},E),g.files=[d]),g})}t._findMatch=m;function _(){const R=c.platform();let p="";if(R==="darwin")p=u.execSync("sw_vers -productVersion").toString();else if(R==="linux"){const h=e.exports._readLinuxVersionFile();if(h){const y=h.split(`
`);for(const v of y){const g=v.split("=");if(g.length===2&&(g[0].trim()==="VERSION_ID"||g[0].trim()==="DISTRIB_RELEASE")){p=g[1].trim().replace(/^"/,"").replace(/"$/,"");break}}}}return p}t._getOsVersion=_;function S(){const R="/etc/lsb-release",p="/etc/os-release";let h="";return o.existsSync(R)?h=o.readFileSync(R).toString():o.existsSync(p)&&(h=o.readFileSync(p).toString()),h}t._readLinuxVersionFile=S})(Cr,Cr.exports)),Cr.exports}var et={},jh;function SR(){if(jh)return et;jh=1;var e=et&&et.__createBinding||(Object.create?(function(s,l,c,u){u===void 0&&(u=c);var o=Object.getOwnPropertyDescriptor(l,c);(!o||("get"in o?!l.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return l[c]}}),Object.defineProperty(s,u,o)}):(function(s,l,c,u){u===void 0&&(u=c),s[u]=l[c]})),t=et&&et.__setModuleDefault||(Object.create?(function(s,l){Object.defineProperty(s,"default",{enumerable:!0,value:l})}):function(s,l){s.default=l}),r=et&&et.__importStar||function(s){if(s&&s.__esModule)return s;var l={};if(s!=null)for(var c in s)c!=="default"&&Object.prototype.hasOwnProperty.call(s,c)&&e(l,s,c);return t(l,s),l},n=et&&et.__awaiter||function(s,l,c,u){function o(m){return m instanceof c?m:new c(function(_){_(m)})}return new(c||(c=Promise))(function(m,_){function S(h){try{p(u.next(h))}catch(y){_(y)}}function R(h){try{p(u.throw(h))}catch(y){_(y)}}function p(h){h.done?m(h.value):o(h.value).then(S,R)}p((u=u.apply(s,l||[])).next())})};Object.defineProperty(et,"__esModule",{value:!0}),et.RetryHelper=void 0;const i=r(gr());class a{constructor(l,c,u){if(l<1)throw new Error("max attempts should be greater than or equal to 1");if(this.maxAttempts=l,this.minSeconds=Math.floor(c),this.maxSeconds=Math.floor(u),this.minSeconds>this.maxSeconds)throw new Error("min seconds should be less than or equal to max seconds")}execute(l,c){return n(this,void 0,void 0,function*(){let u=1;for(;u<this.maxAttempts;){try{return yield l()}catch(m){if(c&&!c(m))throw m;i.info(m.message)}const o=this.getSleepAmount();i.info(`Waiting ${o} seconds before trying again`),yield this.sleep(o),u++}return yield l()})}getSleepAmount(){return Math.floor(Math.random()*(this.maxSeconds-this.minSeconds+1))+this.minSeconds}sleep(l){return n(this,void 0,void 0,function*(){return new Promise(c=>setTimeout(c,l*1e3))})}}return et.RetryHelper=a,et}var Uh;function RR(){if(Uh)return ue;Uh=1;var e=ue&&ue.__createBinding||(Object.create?(function(U,j,k,z){z===void 0&&(z=k);var K=Object.getOwnPropertyDescriptor(j,k);(!K||("get"in K?!j.__esModule:K.writable||K.configurable))&&(K={enumerable:!0,get:function(){return j[k]}}),Object.defineProperty(U,z,K)}):(function(U,j,k,z){z===void 0&&(z=k),U[z]=j[k]})),t=ue&&ue.__setModuleDefault||(Object.create?(function(U,j){Object.defineProperty(U,"default",{enumerable:!0,value:j})}):function(U,j){U.default=j}),r=ue&&ue.__importStar||function(U){if(U&&U.__esModule)return U;var j={};if(U!=null)for(var k in U)k!=="default"&&Object.prototype.hasOwnProperty.call(U,k)&&e(j,U,k);return t(j,U),j},n=ue&&ue.__awaiter||function(U,j,k,z){function K(te){return te instanceof k?te:new k(function(Q){Q(te)})}return new(k||(k=Promise))(function(te,Q){function qe(Ae){try{Ke(z.next(Ae))}catch(Ct){Q(Ct)}}function Te(Ae){try{Ke(z.throw(Ae))}catch(Ct){Q(Ct)}}function Ke(Ae){Ae.done?te(Ae.value):K(Ae.value).then(qe,Te)}Ke((z=z.apply(U,j||[])).next())})};Object.defineProperty(ue,"__esModule",{value:!0}),ue.evaluateVersions=ue.isExplicitVersion=ue.findFromManifest=ue.getManifestFromRepo=ue.findAllVersions=ue.find=ue.cacheFile=ue.cacheDir=ue.extractZip=ue.extractXar=ue.extractTar=ue.extract7z=ue.downloadTool=ue.HTTPError=void 0;const i=r(gr()),a=r(Np()),s=r(yp),l=r(De),c=r(ER()),u=r(it),o=r(ce),m=r(Tp),_=r(zm()),S=r(Gr),R=r(Cn),p=Mr,h=fu(),y=SR();class v extends Error{constructor(j){super(`Unexpected HTTP response: ${j}`),this.httpStatusCode=j,Object.setPrototypeOf(this,new.target.prototype)}}ue.HTTPError=v;const g=process.platform==="win32",E=process.platform==="darwin",d="actions/tool-cache";function w(U,j,k,z){return n(this,void 0,void 0,function*(){j=j||o.join(ie(),s.randomUUID()),yield a.mkdirP(o.dirname(j)),i.debug(`Downloading ${U}`),i.debug(`Destination ${j}`);const K=3,te=oe("TEST_DOWNLOAD_TOOL_RETRY_MIN_SECONDS",10),Q=oe("TEST_DOWNLOAD_TOOL_RETRY_MAX_SECONDS",20);return yield new y.RetryHelper(K,te,Q).execute(()=>n(this,void 0,void 0,function*(){return yield f(U,j||"",k,z)}),Te=>!(Te instanceof v&&Te.httpStatusCode&&Te.httpStatusCode<500&&Te.httpStatusCode!==408&&Te.httpStatusCode!==429))})}ue.downloadTool=w;function f(U,j,k,z){return n(this,void 0,void 0,function*(){if(l.existsSync(j))throw new Error(`Destination file path ${j} already exists`);const K=new m.HttpClient(d,[],{allowRetries:!1});k&&(i.debug("set auth"),z===void 0&&(z={}),z.authorization=k);const te=yield K.get(U,z);if(te.message.statusCode!==200){const Ae=new v(te.message.statusCode);throw i.debug(`Failed to download from "${U}". Code(${te.message.statusCode}) Message(${te.message.statusMessage})`),Ae}const Q=R.promisify(S.pipeline),Te=oe("TEST_DOWNLOAD_TOOL_RESPONSE_MESSAGE_FACTORY",()=>te.message)();let Ke=!1;try{return yield Q(Te,l.createWriteStream(j)),i.debug("download complete"),Ke=!0,j}finally{if(!Ke){i.debug("download failed");try{yield a.rmRF(j)}catch(Ae){i.debug(`Failed to delete '${j}'. ${Ae.message}`)}}}})}function b(U,j,k){return n(this,void 0,void 0,function*(){(0,p.ok)(g,"extract7z() not supported on current OS"),(0,p.ok)(U,'parameter "file" is required'),j=yield C(j);const z=process.cwd();if(process.chdir(j),k)try{const te=["x",i.isDebug()?"-bb1":"-bb0","-bd","-sccUTF-8",U],Q={silent:!0};yield(0,h.exec)(`"${k}"`,te,Q)}finally{process.chdir(z)}else{const K=o.join(__dirname,"..","scripts","Invoke-7zdec.ps1").replace(/'/g,"''").replace(/"|\n|\r/g,""),te=U.replace(/'/g,"''").replace(/"|\n|\r/g,""),Q=j.replace(/'/g,"''").replace(/"|\n|\r/g,""),Te=["-NoLogo","-Sta","-NoProfile","-NonInteractive","-ExecutionPolicy","Unrestricted","-Command",`& '${K}' -Source '${te}' -Target '${Q}'`],Ke={silent:!0};try{const Ae=yield a.which("powershell",!0);yield(0,h.exec)(`"${Ae}"`,Te,Ke)}finally{process.chdir(z)}}return j})}ue.extract7z=b;function $(U,j,k="xz"){return n(this,void 0,void 0,function*(){if(!U)throw new Error("parameter 'file' is required");j=yield C(j),i.debug("Checking tar --version");let z="";yield(0,h.exec)("tar --version",[],{ignoreReturnCode:!0,silent:!0,listeners:{stdout:Te=>z+=Te.toString(),stderr:Te=>z+=Te.toString()}}),i.debug(z.trim());const K=z.toUpperCase().includes("GNU TAR");let te;k instanceof Array?te=k:te=[k],i.isDebug()&&!k.includes("v")&&te.push("-v");let Q=j,qe=U;return g&&K&&(te.push("--force-local"),Q=j.replace(/\\/g,"/"),qe=U.replace(/\\/g,"/")),K&&(te.push("--warning=no-unknown-keyword"),te.push("--overwrite")),te.push("-C",Q,"-f",qe),yield(0,h.exec)("tar",te),j})}ue.extractTar=$;function T(U,j,k=[]){return n(this,void 0,void 0,function*(){(0,p.ok)(E,"extractXar() not supported on current OS"),(0,p.ok)(U,'parameter "file" is required'),j=yield C(j);let z;k instanceof Array?z=k:z=[k],z.push("-x","-C",j,"-f",U),i.isDebug()&&z.push("-v");const K=yield a.which("xar",!0);return yield(0,h.exec)(`"${K}"`,ve(z)),j})}ue.extractXar=T;function q(U,j){return n(this,void 0,void 0,function*(){if(!U)throw new Error("parameter 'file' is required");return j=yield C(j),g?yield V(U,j):yield M(U,j),j})}ue.extractZip=q;function V(U,j){return n(this,void 0,void 0,function*(){const k=U.replace(/'/g,"''").replace(/"|\n|\r/g,""),z=j.replace(/'/g,"''").replace(/"|\n|\r/g,""),K=yield a.which("pwsh",!1);if(K){const Q=["-NoLogo","-NoProfile","-NonInteractive","-ExecutionPolicy","Unrestricted","-Command",["$ErrorActionPreference = 'Stop' ;","try { Add-Type -AssemblyName System.IO.Compression.ZipFile } catch { } ;",`try { [System.IO.Compression.ZipFile]::ExtractToDirectory('${k}', '${z}', $true) }`,`catch { if (($_.Exception.GetType().FullName -eq 'System.Management.Automation.MethodException') -or ($_.Exception.GetType().FullName -eq 'System.Management.Automation.RuntimeException') ){ Expand-Archive -LiteralPath '${k}' -DestinationPath '${z}' -Force } else { throw $_ } } ;`].join(" ")];i.debug(`Using pwsh at path: ${K}`),yield(0,h.exec)(`"${K}"`,Q)}else{const Q=["-NoLogo","-Sta","-NoProfile","-NonInteractive","-ExecutionPolicy","Unrestricted","-Command",["$ErrorActionPreference = 'Stop' ;","try { Add-Type -AssemblyName System.IO.Compression.FileSystem } catch { } ;",`if ((Get-Command -Name Expand-Archive -Module Microsoft.PowerShell.Archive -ErrorAction Ignore)) { Expand-Archive -LiteralPath '${k}' -DestinationPath '${z}' -Force }`,`else {[System.IO.Compression.ZipFile]::ExtractToDirectory('${k}', '${z}', $true) }`].join(" ")],qe=yield a.which("powershell",!0);i.debug(`Using powershell at path: ${qe}`),yield(0,h.exec)(`"${qe}"`,Q)}})}function M(U,j){return n(this,void 0,void 0,function*(){const k=yield a.which("unzip",!0),z=[U];i.isDebug()||z.unshift("-q"),z.unshift("-o"),yield(0,h.exec)(`"${k}"`,z,{cwd:j})})}function P(U,j,k,z){return n(this,void 0,void 0,function*(){if(k=_.clean(k)||k,z=z||u.arch(),i.debug(`Caching tool ${j} ${k} ${z}`),i.debug(`source dir: ${U}`),!l.statSync(U).isDirectory())throw new Error("sourceDir is not a directory");const K=yield B(j,k,z);for(const te of l.readdirSync(U)){const Q=o.join(U,te);yield a.cp(Q,K,{recursive:!0})}return G(j,k,z),K})}ue.cacheDir=P;function I(U,j,k,z,K){return n(this,void 0,void 0,function*(){if(z=_.clean(z)||z,K=K||u.arch(),i.debug(`Caching tool ${k} ${z} ${K}`),i.debug(`source file: ${U}`),!l.statSync(U).isFile())throw new Error("sourceFile is not a file");const te=yield B(k,z,K),Q=o.join(te,j);return i.debug(`destination file ${Q}`),yield a.cp(U,Q),G(k,z,K),te})}ue.cacheFile=I;function N(U,j,k){if(!U)throw new Error("toolName parameter is required");if(!j)throw new Error("versionSpec parameter is required");if(k=k||u.arch(),!J(j)){const K=D(U,k);j=se(K,j)}let z="";if(j){j=_.clean(j)||"";const K=o.join(W(),U,j,k);i.debug(`checking cache: ${K}`),l.existsSync(K)&&l.existsSync(`${K}.complete`)?(i.debug(`Found tool in cache ${U} ${j} ${k}`),z=K):i.debug("not found")}return z}ue.find=N;function D(U,j){const k=[];j=j||u.arch();const z=o.join(W(),U);if(l.existsSync(z)){const K=l.readdirSync(z);for(const te of K)if(J(te)){const Q=o.join(z,te,j||"");l.existsSync(Q)&&l.existsSync(`${Q}.complete`)&&k.push(te)}}return k}ue.findAllVersions=D;function x(U,j,k,z="master"){return n(this,void 0,void 0,function*(){let K=[];const te=`https://api.github.com/repos/${U}/${j}/git/trees/${z}`,Q=new m.HttpClient("tool-cache"),qe={};k&&(i.debug("set auth"),qe.authorization=k);const Te=yield Q.getJson(te,qe);if(!Te.result)return K;let Ke="";for(const Ct of Te.result.tree)if(Ct.path==="versions-manifest.json"){Ke=Ct.url;break}qe.accept="application/vnd.github.VERSION.raw";let Ae=yield(yield Q.get(Ke,qe)).readBody();if(Ae){Ae=Ae.replace(/^\uFEFF/,"");try{K=JSON.parse(Ae)}catch{i.debug("Invalid json")}}return K})}ue.getManifestFromRepo=x;function F(U,j,k,z=u.arch()){return n(this,void 0,void 0,function*(){return yield c._findMatch(U,j,k,z)})}ue.findFromManifest=F;function C(U){return n(this,void 0,void 0,function*(){return U||(U=o.join(ie(),s.randomUUID())),yield a.mkdirP(U),U})}function B(U,j,k){return n(this,void 0,void 0,function*(){const z=o.join(W(),U,_.clean(j)||j,k||"");i.debug(`destination ${z}`);const K=`${z}.complete`;return yield a.rmRF(z),yield a.rmRF(K),yield a.mkdirP(z),z})}function G(U,j,k){const K=`${o.join(W(),U,_.clean(j)||j,k||"")}.complete`;l.writeFileSync(K,""),i.debug("finished caching tool")}function J(U){const j=_.clean(U)||"";i.debug(`isExplicit: ${j}`);const k=_.valid(j)!=null;return i.debug(`explicit? ${k}`),k}ue.isExplicitVersion=J;function se(U,j){let k="";i.debug(`evaluating ${U.length} versions`),U=U.sort((z,K)=>_.gt(z,K)?1:-1);for(let z=U.length-1;z>=0;z--){const K=U[z];if(_.satisfies(K,j)){k=K;break}}return k?i.debug(`matched: ${k}`):i.debug("match not found"),k}ue.evaluateVersions=se;function W(){const U=process.env.RUNNER_TOOL_CACHE||"";return(0,p.ok)(U,"Expected RUNNER_TOOL_CACHE to be defined"),U}function ie(){const U=process.env.RUNNER_TEMP||"";return(0,p.ok)(U,"Expected RUNNER_TEMP to be defined"),U}function oe(U,j){const k=at[U];return k!==void 0?k:j}function ve(U){return Array.from(new Set(U))}return ue}var Cu=RR(),$t={},Mh;function bR(){if(Mh)return $t;Mh=1,Object.defineProperty($t,"__esModule",{value:!0}),$t.retryAsPromised=$t.applyJitter=$t.TimeoutError=void 0;class e extends Error{constructor(a,s){super(a),this.name="TimeoutError",this.previous=s}}$t.TimeoutError=e;function t(i,a){if(typeof i=="function")try{if(a instanceof i)return!0}catch{return!!i(a)}return i===a.toString()||i===a.message?!0:i instanceof RegExp&&(i.test(a.message)||i.test(a.toString()))}function r(i,a){const s=i+Math.random()*a*(Math.random()>.5?1:-1);return Math.max(0,s)}$t.applyJitter=r;function n(i,a){if(!i||!a)throw new Error("retry-as-promised must be passed a callback and a options set");a=typeof a=="number"?{max:a}:a;const s={$current:"$current"in a?a.$current:1,max:a.max,timeout:a.timeout||void 0,match:a.match?Array.isArray(a.match)?a.match:[a.match]:[],backoffBase:a.backoffBase===void 0?100:a.backoffBase,backoffExponent:a.backoffExponent||1.1,backoffJitter:a.backoffJitter||0,report:a.report,name:a.name||i.name||"unknown"};return s.match&&!Array.isArray(s.match)&&(s.match=[s.match]),s.report&&s.report("Trying "+s.name+" #"+s.$current+" at "+new Date().toLocaleTimeString(),s),new Promise(function(l,c){let u,o,m;s.timeout&&(u=setTimeout(function(){o&&clearTimeout(o),c(new e(s.name+" timed out",m))},s.timeout)),Promise.resolve(i({current:s.$current})).then(l).then(function(){u&&clearTimeout(u),o&&clearTimeout(o)}).catch(function(_){u&&clearTimeout(u),o&&clearTimeout(o),m=_,s.report&&s.report(_&&_.toString()||_,s,_);var S=s.$current<s.max;if(!S||(S=s.match.length===0||s.match.some(function(h){return t(h,_)}),!S))return c(_);var R=s.backoffBase*Math.pow(s.backoffExponent,s.$current-1);const p=s.backoffJitter;p!==void 0&&(R=r(R,p)),s.$current++,s.report&&s.report(`Retrying ${s.name} (${s.$current})`,s),R?(s.report&&s.report(`Delaying retry of ${s.name} by ${R}`,s),o=setTimeout(function(){n(i,s).then(l).catch(c)},R)):n(i,s).then(l).catch(c)})})}return $t.retryAsPromised=n,$t.default=n,$t}var $R=bR();const Wm=$e($R),{GITHUB_ACTIONS:Xm}=At;async function vt(e,t,r,n,i){Y(`Installing ${e} ${t} ${i} via direct downloading`),process.env.RUNNER_TEMP=process.env.RUNNER_TEMP??Ue(),process.env.RUNNER_TOOL_CACHE=process.env.RUNNER_TOOL_CACHE??Z(Ue(),"setup-cpp","hostedtoolcache");const{url:a,binRelativeDir:s,binFileName:l,extractedFolderName:c,extractFunction:u}=await r(t,process.platform,i);if(Xm)try{const S=Cu.find(e,t);if(S){const R=Z(S,c),p=Z(R,s);if(await _e(Z(p,l)))return Y(`${e} ${t} was found in the cache at ${p}.`),await be(p,ne),{installDir:R,binDir:p}}}catch{}const o=Z(n,c),m=Z(o,s),_=Z(m,l);return await OR(m,_,e,t,a,n,u,i),await PR(n,e,t),{installDir:o,binDir:m}}async function OR(e,t,r,n,i,a,s,l){if((await Promise.all([_e(e),_e(t)])).includes(!1))try{const c=await IR(r,n,i);Y(`Extracting ${c} to ${a}`),await(s??Jm(Ym(i)))(c,a)}catch(c){throw new Error(`Failed to download ${r} ${n} ${l} from ${i}: ${c}`)}if(Y(`Add ${e} to PATH`),await be(e,ne),!await _e(t))throw new Error(`Failed to find the binary ${t} after extracting ${r} ${n} ${l}`);if(process.platform!=="win32")try{await Sp(t,"755")}catch(c){ye(`Failed to make ${t} executable: ${c}`)}}async function IR(e,t,r){return Y(`Download ${e} ${t}`),await Wm(()=>{const i=`${Date.now()}-setup-cpp-`,a=Z(process.env.RUNNER_TEMP??Ue(),`${i}${er(r)}`);return Cu.downloadTool(r,a)},{name:r,max:4,backoffBase:2e3,report:i=>Y(i)})}async function PR(e,t,r){Xm&&typeof process.env.RUNNER_TOOL_CACHE=="string"&&(Lp("cache-tools")==="true"||process.env.CACHE_TOOLS==="true")&&await Cu.cacheDir(e,t,r)}async function Km({version:e,arch:t,setupDir:r}){const n=await fe("tar",{nothrow:!0});if(n!==null){Y(`tar already installed at ${n}`);return}switch(process.platform){case"win32":return vt("tar",e,TR,r,t);case"darwin":return Ge("gnu-tar",e);case"linux":{if(Pe())return await ge("gzip"),await ge("xz"),ge("tar");if(Ce())return Le([{name:"tar"},{name:"gzip"},{name:"xz"}]);if(me())return de([{name:"tar"},{name:"gzip"},{name:"xz-utils"}]);if(await Oe())return Fe([{name:"tar"},{name:"gzip"},{name:"xz"}]);throw new Error("Unsupported linux distribution")}default:throw new Error("Unsupported platform")}}function TR(e,t,r){if(t!=="win32")throw new Error("Unsupported platform");return r!=="x64"&&ye(`Unsupported architecture ${r} for tar on Windows. Using x64.`),{url:`https://phoenixnap.dl.sourceforge.net/project/gnuwin32/tar/${e}/tar-${e}-bin.zip?viasf=1`,extractedFolderName:"",binRelativeDir:"bin",binFileName:"tar.exe"}}var hn=(e=>(e[e.Tar=0]="Tar",e[e.TarGz=1]="TarGz",e[e.TarXz=2]="TarXz",e[e.Zip=3]="Zip",e[e.SevenZip=4]="SevenZip",e))(hn||{});function Ym(e){const t=e.split(".").pop();return t==="tar"?0:t==="gz"||t==="tgz"?1:t==="xz"||t==="txz"?2:t==="zip"?3:(t==="7z"||t==="exe"||ye(`Unknown archive type: ${t}. Defaulting to 7z`),4)}function Jm(e){switch(e){case 0:case 1:case 2:return process.platform==="win32"?yr:xu;case 3:return CR;default:return yr}}let Ua;async function yr(e,t,r=!1){const n=er(e);return/.*\.tar\..+$/.test(n)?await AR(e,n,t,r):await Za(e,t),t}async function AR(e,t,r,n){if(!/.*\.tar\..+$/.test(t))throw new Error(`Invalid tar file: ${t}`);const i=Z(Re(e),"sevenzip-temp");await Za(e,i);const a=t.slice(0,-3),s=Z(i,a);await Za(s,i),await Pt.remove(s),Y(`Moving ${i} to ${r}`);const l=await Pt.readdir(i);await Promise.all(l.map(async c=>{await Pt.move(Z(i,c),Z(r,c),{overwrite:!0})})),await Pt.remove(i),n&&await NR(r)}async function NR(e){Y(`Stripping path components from ${e}`);const t=await Pt.readdir(e);if(t.length!==1)throw new Error(`Expected 1 folder in ${e}, got ${t.length}`);const r=t[0],n=Z(e,r),i=await Pt.stat(n);if(!i.isDirectory()){ye(`Expected ${n} to be a directory, got ${i}.`);return}const a=await Pt.readdir(n);await Promise.all(a.map(s=>Pt.move(Z(n,s),Z(e,s),{overwrite:!0}))),await Pt.remove(n)}async function Za(e,t){Y(`7z: extracting ${e} to ${t}`),await le(await LR(),["x",e,`-o${t}`,"-y"],{stdio:"inherit"}),await Rr(t)}async function LR(){return Ua===void 0&&(fe.sync("7z",{nothrow:!0})===null&&await dn({version:""}),Ua="7z"),Ua}async function CR(e,t){return fe.sync("7z",{nothrow:!0})!==null?yr(e,t):fe.sync("unzip",{nothrow:!0})!==null?(await le("unzip",["-q",e,"-d",t],{stdio:"inherit"}),await Rr(t),t):yr(e,t)}async function xu(e,t,r=0,n=[]){await Km({version:"",arch:process.arch,setupDir:rt("~/tar")});try{await Pt.mkdirp(t)}catch{}try{await le("tar",["xf",e,"-C",t,`--strip-components=${r}`,...n],{stdio:"inherit"})}catch(i){process.platform==="win32"&&i.message.includes("Can't create '\\\\?\\C:")&&ye(`Failed to extract symlink ${e} to ${t}. Ignoring this symlink.`)}return await Rr(t),t}const{GITHUB_ACTIONS:xR}=At,DR=typeof __dirname=="string"?__dirname:ce.dirname(xt(import.meta.url));async function Du({version:e,setupDir:t,arch:r}){let n;switch(process.platform){case"win32":{(r==="arm"||r==="arm64")&&(n=await xe("gcc-arm-embedded",e));try{n=await vt("g++",e,qR,t,r)}catch(i){Y(`Failed to download g++ binary. ${i}. Falling back to chocolatey.`),n=await FR(e,r)}break}case"linux":{if(Pe())n=await ge("mingw-w64-gcc",e);else if(Ce())n=await Le([{name:"mingw64-gcc",version:e}]);else if(me())n=await de([{name:"mingw-w64",version:e}]);else if(await Oe())await Sm(),n=await Fe([{name:"mingw-w64-gcc",version:e},{name:"mingw-w64-crt",version:e}]);else throw new Error(`Unsupported Linux distro for ${r}`);break}default:throw new Error(`Unsupported platform for ${r}`)}return n!==void 0&&await kR(n.binDir),n}async function FR(e,t){await xe("mingw",e);let r;if(t==="x64"&&await _e("C:/tools/mingw64/bin")?(r="C:/tools/mingw64/bin",await be(r,ne)):t==="ia32"&&await _e("C:/tools/mingw32/bin")?(r="C:/tools/mingw32/bin",await be(r,ne)):await _e(`${process.env.ChocolateyInstall??"C:/ProgramData/chocolatey"}/bin/g++.exe`)&&(r=`${process.env.ChocolateyInstall??"C:/ProgramData/chocolatey"}/bin`),r!==void 0)return{binDir:r}}async function qR(e,t,r){if(t!=="win32")throw new Error(`Unsupported platform '${t}'`);const n=await $n(Z(DR,"github_brechtsanders_winlibs_mingw.json")),i={x64:"x86_64",ia32:"i386"},a=Ma(e),s=Ga(e),l=Gh(e),c=On(n,{version:e,keywords:[i[r]??r],filterName:u=>(a===void 0||a===Ma(u))&&(s===void 0||s===Ga(u))&&(l===void 0||l===Gh(u)),versionSatisfies:(u,o)=>{const m=_r(u);if(m===null)throw new Error(`Invalid MinGW asset version: '${u}'`);return Pu(m,o)&&(a===void 0||a===Ma(u))&&(s===void 0||s===Ga(u))}});if(c===void 0)throw new Error(`No asset found for version ${e} and arch ${r}`);return{binRelativeDir:"bin/",binFileName:we("g++"),extractedFolderName:"mingw64",extractFunction:yr,url:`https://github.com/brechtsanders/winlibs_mingw/releases/download/${c.tag}/${c.name}`}}function Ma(e){const t=e.match(/(ucrt|msvcrt)/);return t!==null?t[1]:void 0}function Ga(e){const t=e.match(/(posix|mcf)/);return t!==null?t[1]:void 0}function Gh(e){const t=e.match(/(seh|dwarf)/);return t!==null?t[1]:void 0}async function kR(e){const t=[];process.platform==="win32"&&t.push(Ie("CC",we(`${e}/gcc`),ne),Ie("CXX",we(`${e}/g++`),ne)),xR&&await Vm(),await Promise.all(t)}const{GITHUB_ACTIONS:jR}=At,UR=typeof __dirname=="string"?__dirname:ce.dirname(xt(import.meta.url));async function In({version:e,setupDir:t,arch:r,priority:n=40}){let i;switch(process.platform){case"win32":{i=await Du({version:e,setupDir:t,arch:r});break}case"darwin":{i=await Ge("gcc",e);break}case"linux":{if(Pe())i=await ge("gcc",e);else if(Ce())i=await Le([{name:"gcc",version:e},{name:"gcc-c++",version:e},{name:"libstdc++-devel"}]);else if(await Oe())i=await Fe([{name:"gcc",version:e},{name:"g++",version:e}]);else if(me())if(e==="")i=await de([{name:"gcc"},{name:"g++"}]);else try{i=await de([{name:"gcc",version:e},{name:"g++",version:e}])}catch{i=await de([{name:"gcc",version:e,repository:"ppa:ubuntu-toolchain-r/test",key:{key:"1E9377A2BA9EF27F",fileName:"ubuntu-toolchain-r-test.gpg"}},{name:"g++",version:e,repository:"ppa:ubuntu-toolchain-r/test",key:{key:"1E9377A2BA9EF27F",fileName:"ubuntu-toolchain-r-test.gpg"}}])}break}default:throw new Error(`Unsupported platform for ${r}`)}if(i!==void 0)return await MR(e,i.binDir,n),i}async function MR(e,t,r=40){if(process.platform==="win32")return;const n=[];{const i=GR(e),[a,s]=await Promise.all([Vh("gcc",t,i),Vh("g++",t,i)]);n.push(Ie("CC",a,ne),Ie("CXX",s,ne)),me()&&n.push(_t("cc",a,ne,r),_t("cxx",s,ne,r),_t("gcc",a,ne,r),_t("g++",s,ne,r))}n.push(qm()),jR&&await Vm(),await Promise.all(n)}function GR(e){try{const t=Tu(e),r=gm(t);return r>=5?`${r}`:e}catch{return e}}async function Vh(e,t,r){if(await _e(`${t}/${e}-${r}`))return we(`${t}/${e}-${r}`);const n=new RegExp(`^${Rn(e)}-?([\\d\\.\\-]*)(?:\\.exe)?$`),i=(await Rp(t)).filter(a=>n.test(a)).sort((a,s)=>{const l=a.match(n)?.[1]??"",c=s.match(n)?.[1]??"";try{return YS(l,c)}catch{return 0}});for(const a of i){const s=`${t}/${a}`;if(r===""||a.includes(r)||((await VR(s))?.includes(r)??!1))return we(s)}return await _e(`${t}/${e}`)?we(`${t}/${e}`):we(e)}async function VR(e){try{const{stdout:t}=await le(e,["--version"],{stdio:"pipe"}),r=t.match(/(gcc|g\+\+).* \(.*\) ([\d.]+)/);if(r!==null)return r[2];ye(`Failed to parse gcc version from: ${t}`)}catch(t){Ne(`Failed to get gcc version: ${t}`)}}const Mt=e=>{if(!e)e={mode:511};else if(typeof e=="object")e={mode:511,...e};else if(typeof e=="number")e={mode:e};else if(typeof e=="string")e={mode:parseInt(e,8)};else throw new TypeError("invalid options argument");const t=e,r=e.fs||{};return e.mkdir=e.mkdir||r.mkdir||mp,e.mkdirAsync=e.mkdirAsync?e.mkdirAsync:async(n,i)=>new Promise((a,s)=>t.mkdir(n,i,(l,c)=>l?s(l):a(c))),e.stat=e.stat||r.stat||k_,e.statAsync=e.statAsync?e.statAsync:async n=>new Promise((i,a)=>t.stat(n,(s,l)=>s?a(s):i(l))),e.statSync=e.statSync||r.statSync||j_,e.mkdirSync=e.mkdirSync||r.mkdirSync||_p,t},tr=(e,t,r)=>{const n=Re(e),i={...Mt(t),recursive:!1};if(n===e)try{return i.mkdirSync(e,i)}catch(a){const s=a;if(s&&s.code!=="EISDIR")throw a;return}try{return i.mkdirSync(e,i),r||e}catch(a){const s=a;if(s&&s.code==="ENOENT")return tr(e,i,tr(n,i,r));if(s&&s.code!=="EEXIST"&&s&&s.code!=="EROFS")throw a;try{if(!i.statSync(e).isDirectory())throw a}catch{throw a}}},fr=Object.assign(async(e,t,r)=>{const n=Mt(t);n.recursive=!1;const i=Re(e);return i===e?n.mkdirAsync(e,n).catch(a=>{const s=a;if(s&&s.code!=="EISDIR")throw a}):n.mkdirAsync(e,n).then(()=>r||e,async a=>{const s=a;if(s&&s.code==="ENOENT")return fr(i,n).then(l=>fr(e,n,l));if(s&&s.code!=="EEXIST"&&s.code!=="EROFS")throw a;return n.statAsync(e).then(l=>{if(l.isDirectory())return r;throw a},()=>{throw a})})},{sync:tr}),Qm=async(e,t,r)=>{if(r!==t)return e.statAsync(t).then(n=>n.isDirectory()?r:void 0,n=>{const i=n;return i&&i.code==="ENOENT"?Qm(e,Re(t),t):void 0})},Zm=(e,t,r)=>{if(r!==t)try{return e.statSync(t).isDirectory()?r:void 0}catch(n){const i=n;return i&&i.code==="ENOENT"?Zm(e,Re(t),t):void 0}},Pn=(e,t)=>{const r=Mt(t);if(r.recursive=!0,Re(e)===e)return r.mkdirSync(e,r);const i=Zm(r,e);try{return r.mkdirSync(e,r),i}catch(a){const s=a;if(s&&s.code==="ENOENT")return tr(e,r);throw a}},Va=Object.assign(async(e,t)=>{const r={...Mt(t),recursive:!0};return Re(e)===e?await r.mkdirAsync(e,r):Qm(r,e).then(i=>r.mkdirAsync(e,r).then(a=>i||a).catch(a=>{const s=a;if(s&&s.code==="ENOENT")return fr(e,r);throw a}))},{sync:Pn}),BR=process.env.__TESTING_MKDIRP_PLATFORM__||process.platform,e_=e=>{if(/\0/.test(e))throw Object.assign(new TypeError("path must be a string without null bytes"),{path:e,code:"ERR_INVALID_ARG_VALUE"});if(e=tu(e),BR==="win32"){const t=/[*|"<>?:]/,{root:r}=pp(e);if(t.test(e.substring(r.length)))throw Object.assign(new Error("Illegal characters in path."),{path:e,code:"EINVAL"})}return e},HR=process.env.__TESTING_MKDIRP_NODE_VERSION__||process.version,Ba=HR.replace(/^v/,"").split("."),t_=+Ba[0]>10||+Ba[0]==10&&+Ba[1]>=12,Fu=t_?e=>Mt(e).mkdirSync===_p:()=>!1,Bh=Object.assign(t_?e=>Mt(e).mkdir===mp:()=>!1,{sync:Fu}),Hh=(e,t)=>{e=e_(e);const r=Mt(t);return Fu(r)?Pn(e,r):tr(e,r)},xr=Object.assign(async(e,t)=>{e=e_(e);const r=Mt(t);return Bh(r)?Va(e,r):fr(e,r)},{mkdirpSync:Hh,mkdirpNative:Va,mkdirpNativeSync:Pn,mkdirpManual:fr,mkdirpManualSync:tr,sync:Hh,native:Va,nativeSync:Pn,manual:fr,manualSync:tr,useNative:Bh,useNativeSync:Fu});function nt(e,t,r=null){return r_(t)?qu(e,r)??"":t}function zR(){const e=typeof __dirname=="string"?__dirname:ce.dirname(xt(import.meta.url)),t=ce.join(e,"versions.json");return JSON.parse(De.readFileSync(t,"utf-8"))}const WR=ke(zR);function qu(e,t=null){const n=WR()[e];if(n===void 0)return;if(typeof n=="string")return n;const i=n,a=i[process.platform]??i.else;if(a===void 0)throw new Error(`Platform "${process.platform}" not found in versions data for tool "${e}"`);if(typeof a=="string")return a;const s=a,l=me()?"ubuntu":Pe()?"archlinux":Em()?"alpine":Ce()?"fedora":"else",c=s[l]??s.else;if(c===void 0)throw new Error(`Distro "${l}" not found in versions data for tool "${e}"`);if(typeof c=="string")return c;const u=c,o=t!==null?XR(t,u):u.else;if(o===void 0)throw new Error(`Architecture "${process.arch}" not found in versions data for tool "${e}"`);if(typeof o=="string")return o;const m=o;return m[process.arch]??m.else}function XR(e,t){const r=e[0],n=Object.keys(t).map(i=>Number.parseInt(i,10)).filter(i=>!Number.isNaN(i)).sort((i,a)=>a-i).find(i=>r>=i);return n!==void 0?t[n]??t.else:t.else}function r_(e){return e==="true"||e===void 0}function KR(e,t,r=void 0){const n=r===void 0?!1:t.includes(r.compiler),a=(n?t:t.filter(c=>c!=="compiler")).filter(c=>e[c]!==void 0),s=a.filter(c=>{const u=n&&c==="compiler"&&r!==void 0?r.version:e[c];return!r_(u)}),l=s.length!==0?n&&s[0]==="compiler"&&r!==void 0?r.version??"true":e[s[0]]??"true":"true";if(s.some(c=>n&&c==="compiler"&&r!==void 0?e.compiler!==`${r.compiler}-${l}`:e[c]!==l))return!1;for(const c of a)e[c]=n&&c==="compiler"&&r!==void 0?`${r.compiler}-${l}`:l;return!0}function YR(e){return e.startsWith(">")}const{GITHUB_ACTIONS:JR}=At;async function n_({version:e,setupDir:t,arch:r}){Ee.startGroup("Setup Python");const n=await r0(e,t,r);Mr(n.bin!==void 0);const i=n.bin;Ee.endGroup(),Ee.startGroup("Setup venv"),await ZR(i),Ee.endGroup(),Ee.startGroup("Setup pip");const a=await i0(i);if(Ee.endGroup(),a===void 0)throw new Error("pip was not installed correctly");return Ee.startGroup("Setup pipx"),await QR(i),Ee.endGroup(),Ee.startGroup("Setup wheel"),await t0(i),Ee.endGroup(),n}async function QR(e){try{if(!await mn(e)){try{await kr("pipx")}catch(t){Zt(`pipx was not installed completely for the system-wide python: ${t}`)}try{await mn(e)||await Tn(e,"pipx",void 0,{upgrade:!0,usePipx:!1})}catch(t){Zt(`pipx was not installed completely for ${e}: ${t}`)}}if(await mn(e))await le(e,["-m","pipx","ensurepath"],{stdio:"inherit"});else if(await l0())Zt(`pipx module not found for ${e}. Trying to install with pipx binary...`),await le("pipx",["ensurepath"],{stdio:"inherit"});else throw new Error("pipx module or pipx binary not found. Corrput pipx installation.")}catch(t){Zt(`Failed to install pipx completely for ${e}: ${t.toString()}. Ignoring...`)}}async function ZR(e){if(await e0(e)){Y("venv module already installed.");return}try{await kr("venv")}catch(t){Y(`Failed to install venv: ${t.toString()}. Ignoring...`)}}async function e0(e){try{return await le(e,["-m","venv","-h"],{stdio:"ignore"}),me()?Ru("python3-venv"):!0}catch{}return!1}async function t0(e){try{await Tn(e,"setuptools",void 0,{upgrade:!0,isLibrary:!0,usePipx:!1}),await Tn(e,"wheel",void 0,{upgrade:!1,isLibrary:!0,usePipx:!1})}catch(t){Y(`Failed to install setuptools/wheel: ${t.toString()}. Ignoring...`)}}async function r0(e,t,r){const n=YR(e)?"":e;let i,a=await pn(t);if(a!==void 0){const s=Re(a);i={bin:a,installDir:s,binDir:s}}else{if(JR)try{Y("Installing python in GitHub Actions");const{setupActionsPython:s}=await import("./assets/actions_python-ph6vnUiA.mjs");if(await s(n,t,r),a=await pn(t),a===void 0)throw new Error("Python binary could not be found");const l=Re(a);i={bin:a,installDir:l,binDir:l}}catch(s){ye(s.toString())}i===void 0&&(i=await n0(t,n))}if(a===void 0||i.bin===void 0){if(a=await pn(t),a===void 0)throw new Error("Python binary could not be found");i={bin:a,installDir:Re(a),binDir:Re(a)}}return i}async function n0(e,t){let r;switch(process.platform){case"win32":{e?await xe("python3",t,[`--params=/InstallDir:${e}`]):await xe("python3",t);const n=await pn(e);if(n===void 0)throw new Error("Python binary could not be found");const i=Re(n);await be(i,ne),r={installDir:i,binDir:i,bin:n};break}case"darwin":{r=await Ge("python3",t);const n=await le("brew",["--prefix","python"],{stdio:"pipe"}),i=Z(n.stdout,"libexec","bin");await be(i,ne);break}case"linux":{if(Pe())r=await ge("python",t);else if(Ce())r=await Le([{name:"python3",version:t}]);else if(me())r=await de([{name:"python3",version:t},{name:"python-is-python3"}]);else if(await Oe())r=await Fe([{name:"python3",version:t}]);else throw new Error("Unsupported linux distributions");break}default:throw new Error("Unsupported platform")}return r}async function pn(e){for(const t of["python","python3"]){const r=await zh(t,e);if(r!==void 0)return r}if(process.platform==="win32"){const t=pp(dp()).root,r=(await Rp(t)).filter(n=>n.startsWith("Python"));for(const n of r)for(const i of["python3","python"]){const a=await zh(i,Z(t,n));if(a!==void 0)return a}}}async function zh(e,t){try{const r=qu("python");if(t!==void 0){const i=Z(t,we(e));if(await _e(i)&&await Qa(i,r))return i}const n=await fe(e,{nothrow:!0,all:!0})??[];for(const i of n)if(await Qa(i,r))return i}catch{}}async function i0(e){const t=await Wh();return t===void 0?(Y("pip was not found. Installing pip"),await o0(e),Wh()):t}async function Wh(){for(const e of["pip3","pip"]){const t=await s0(e);if(t!==void 0)return t}}async function s0(e){try{const t=qu("pip"),r=await fe(e,{nothrow:!0,all:!0})??[];for(const n of r)if(await Qa(n,t))return n}catch{}}async function o0(e){await Xh(e)||(await kr("pip"),await Xh(e))}async function Xh(e){if(await a_(e))return!1;try{return await le(e,["-m","ensurepip","-U","--upgrade"],{stdio:"inherit"}),!0}catch(t){Y(t.toString());try{return await le(e,["-m","pip","install","--upgrade","pip"],{stdio:"inherit"}),!0}catch(r){Y(r.toString())}}return!1}var Nr={},Kh;function a0(){if(Kh)return Nr;Kh=1,Object.defineProperty(Nr,"__esModule",{value:!0}),Nr.getUbuntuVersion=void 0;const e=Ur;function t(i){return"errno"in i}function r(i,a){return new Promise((s,l)=>{e.execFile(i,a,{encoding:"utf8",shell:!1},(c,u,o)=>{if(c){if(t(c)&&c.code==="ENOENT"){s(null);return}l(new Error(`Could not execute \`${i} ${a.join(" ")}\`: ${c} (stderr=${o})`));return}s(u)})})}async function n(){if(process.platform!=="linux")return[];const i=await r("lsb_release",["-a"]);if(i===null)return[];const a=/^Distributor ID:\s*(.+)$/,s=/^Description:\s*Ubuntu\s+(\d+)\.(\d+)(?:\.(\d+))?/,l=/^Release:\s*(\d+)\.(\d+)(?:\.(\d+))?$/;let c=null,u=null,o=!1;for(const m of i.split(`
`)){const _=m.match(a);if(_!==null){if(_[1]!=="Ubuntu")return[];o=!0}const S=m.match(s);S&&(c=S);const R=m.match(l);if(R&&(u=R),o&&c&&u)break}if(!o)return[];for(const m of[c,u])if(m){const _=[m[1],m[2]];return m[3]&&_.push(m[3]),_.map(S=>parseInt(S,10))}return[]}return Nr.getUbuntuVersion=n,Nr}var i_=a0();async function u0(){try{if(me()){try{fe.sync("lsb_release",{nothrow:!0})===null&&await de([{name:"lsb-release"}])}catch{return Yh()}const e=await i_.getUbuntuVersion();return e.length===0?Yh():e}else return null}catch(e){return ye(e.toString()),null}}const jt=ke(u0,{promise:!0});function Yh(){if(!("version"in it&&typeof it.version=="function"))return null;const t=it.version().match(/(\d+)\.(\d+)\.(\d+)/);if(t===null)return null;const r=Number.parseInt(t[1],10),n=Number.parseInt(t[2],10),i=Number.parseInt(t[3],10);return[r,n,i]}function c0(e){return[...new Set(e)]}function Jh(e,t='"'){return e.includes(" ")?`${t}${e}${t}`:e}async function ur(e,t,r={}){return Tn(await p0(r.pythonVersion),e,t,r)}async function Tn(e,t,r,n={}){const{usePipx:i=!0,user:a=!0,upgrade:s=!1,isLibrary:l=!1}=n,c=i&&!l&&await mn(e),u=!c&&await a_(e),o=c?"pipx":"pip",m=m0(t);if(!s&&(c?await y0(e,m):await _0(e,m)))return{binDir:c?await Qh():await Zh(e,m)};if(!u&&await v0(e,m))try{Ee.info(`Installing ${t} ${r??""} via ${o}`);const S=r!==void 0&&r!==""?`${t}==${r}`:t,R=s?c?["upgrade"]:["install","--upgrade"]:["install"],p=!c&&a?["--user"]:[],h=process.env;c&&a&&(h.PIPX_HOME=await d0(),h.PIPX_BIN_DIR=await s_()),ze(e,["-m",o,...R,...p,S],{stdio:"inherit",env:h})}catch(S){const R=S instanceof Error?`${S.message}
${S.stack}`:String(S);if(Ee.info(`Failed to install ${t} via ${o}: ${R}`),await kr(t)===null)throw new Error(`Failed to install ${t} via ${o}: ${S}.`)}else if(await kr(t)===null)throw new Error(`Failed to install ${t} as it was not found via ${o} or the system package manager`);return{binDir:c?await Qh():await Zh(e,m)}}function Qh(){return s_()}async function Zh(e,t){const r=await E0(e),n=await w0(r,t);return await be(n,ne),n}async function l0(){return await fe("pipx",{nothrow:!0})!==null}async function mn(e){return(await le(e,["-m","pipx","--help"],{stdio:"ignore",reject:!1})).exitCode===0}async function f0(){let e=process.env.PIPX_HOME;if(e!==void 0)return e;const t=rt("~/.local/pipx");if(await _e(t))return t;switch(process.platform){case"win32":{e=rt("~/AppData/Local/pipx");break}case"darwin":{e=rt("~/Library/Application Support/pipx");break}default:{e=rt("~/.local/share/pipx");break}}return await xr(e),await xr(Z(e,"trash")),await xr(Z(e,"shared")),await xr(Z(e,"venv")),e}const d0=ke(f0,{promise:!0});async function h0(){if(process.env.PIPX_BIN_DIR!==void 0)return process.env.PIPX_BIN_DIR;const e=rt("~/.local/bin");return await be(e,ne),await xr(e),e}const s_=ke(h0,{promise:!0});let un;async function p0(e){if(un!==void 0)return un;const t=e??nt("python",void 0,await jt());return un=(await n_({version:t,setupDir:"",arch:process.arch})).bin,un}function m0(e){return e.replace(/\[.*]/g,"").trim()}async function _0(e,t){try{return(await le(e,["-m","pip","-qq","show",t],{stdio:"ignore",reject:!1})).exitCode===0}catch{return!1}}async function y0(e,t){try{const r=await le(e,["-m","pipx","list","--json"],{stdio:"ignore",reject:!1});if(r.exitCode!==0||typeof r.stdout!="string")return!1;const n=JSON.parse(r.stdout);if(t in n.venvs)return!0;for(const i of Object.values(n.venvs))if(i.metadata.main_package.package_or_url===t||i.metadata.main_package.package===t)return!0}catch{}return!1}async function v0(e,t){return(await le(e,["-m","pip","-qq","index","versions",t],{stdio:"ignore",reject:!1})).exitCode===0}async function w0(e,t){const n=(await Promise.all(e.map(a=>_e(Z(a,we(t)))))).findIndex(a=>a);if(n!==-1)return e[n];const i=fe.sync(we(t),{nothrow:!0});return i!==null?Re(i):e[e.length-1]}async function kr(e,t){if(process.platform==="linux"){Ee.info(`Installing ${e} via the system package manager`);const r=e==="pipx"?Pe():!0;if(Pe())return ge(r?`python-${e}`:e);if(Ce())return Le([{name:r?`python3-${e}`:e}]);if(me())return de([{name:r?`python3-${e}`:e}]);if(await Oe())return Fe([{name:r?`py3-${e}`:e}])}else if(process.platform==="darwin")return["venv"].includes(e)?null:Ge(e);return null}async function g0(e){const t=[];process.platform==="linux"?t.push("/home/runner/.local/bin/"):process.platform==="darwin"&&t.push("/usr/local/bin/");const r=await o_(e);return t.push(Z(r,"Scripts"),Z(r,"Scripts","bin"),Z(r,"bin")),c0(t)}const E0=ke(g0,{promise:!0});async function S0(e){return(await Iu.getExecOutput(`${e} -c "import sys;print(sys.base_exec_prefix);"`)).stdout.trim()}const o_=ke(S0,{promise:!0});async function R0(e){try{const t=await o_(e),r=await Gm(e);if(r===void 0)return ye(`Failed to get the version of ${e}`),!1;const n=Z(t,"lib",`python${r.major}.${r.minor}`,"EXTERNALLY-MANAGED");return _e(n)}catch(t){return ye(`Failed to check if ${e} is externally managed: ${t}`),!1}}const a_=ke(R0,{promise:!0});function b0({version:e}={}){return me()&&(e===void 0||e==="")?de([{name:"gcovr",version:e}]):ur("gcovr",e)}function $0(){return Ie("GCOV","llvm-cov gcov",ne)}function ep(e){const t=Hn(e),r=t!==null?gm(t):e,n=r!==""?`gcov-${r}`:"gcov";return Ie("GCOV",n,ne)}const ut=["x64","amd64","x86_64","win64","64","amd64_x86","amd64_arm64"],dr=["x86","i386","ia32","win32","32","x32"],ct=["aarch64","arm64","woa64","arm"],O0=["armv7","armv7a"],I0=["powerpc64le","ppc64le"],P0=["sparc64"],T0=["sparcv9"];function u_(e){return ct.includes(e)?"arm64":ut.includes(e)?"amd64":e}async function A0({version:e}={}){switch(process.platform){case"win32":return xe("bazelisk",e);case"darwin":return Ge("bazelisk",e);case"linux":{if(Pe())throw new Error("installing bazel on Arch linux is not supported yet");if(Ce())return await Le([{name:"dnf-plugins-core"}]),await yt("dnf",["copr","enable","vbatts/bazel"]),Le([{name:"bazel4"}]);if(me()){const t=await Om({fileName:"bazel-archive-keyring.gpg",keyUrl:"https://bazel.build/bazel-release.pub.gpg"});return await yt("bash",["-c",`echo "deb [arch=${u_(process.arch)} signed-by=${t}] https://storage.googleapis.com/bazel-apt stable jdk1.8" | tee /etc/apt/sources.list.d/bazel.list`]),de([{name:"bazel",version:e}],!0)}else if(await Oe())return Fe([{name:"bazel",version:e}],!0);throw new Error("Unsupported linux distribution")}default:throw new Error("Unsupported platform")}}async function N0({version:e}={}){switch(process.platform){case"win32":return xe("ccache",e);case"darwin":return Ge("ccache",e);case"linux":{if(Pe())return ge("ccache",e);if(Ce())return Le([{name:"ccache",version:e}]);if(me())return de([{name:"ccache",version:e}]);if(await Oe())return Fe([{name:"ccache",version:e}]);throw new Error("Unsupported linux distribution")}default:throw new Error("Unsupported platform")}}var L0=jm();const Ha=$e(L0);function C0(e,t,r){const n=e===""?"":Tu(e);switch(t){case"win32":{const i=n===""?!1:Ha(n,"v3.19.6");let a;ut.includes(r)?a=i?"win64-x64":"windows-x86_64":dr.includes(r)?a=i?"win32-x86":"windows-i386":ct.includes(r)?a="windows-arm64":(Y(`Trying unsupported arch '${r}' for cmake on Windows`),a=`windows-${r}`);const s=`cmake-${e}-${a}`;return{binRelativeDir:"bin/",binFileName:we("cmake"),extractedFolderName:s,url:`https://github.com/Kitware/CMake/releases/download/v${e}/${s}.zip`}}case"darwin":{const a=(n===""?!1:Ha(n,"v3.19.1"))?"Darwin-x86_64":"macos-universal",s=`cmake-${e}-${a}`;return{binRelativeDir:"CMake.app/Contents/bin/",binFileName:we("cmake"),extractedFolderName:s,url:`https://github.com/Kitware/CMake/releases/download/v${e}/${s}.tar.gz`}}case"linux":{const i=n===""?!1:Ha(n,"v3.19.8");let a;ct.includes(r)?a=i?"Linux-aarch64":"linux-aarch64":ut.includes(r)?a=i?"Linux-x86_64":"linux-x86_64":(Y(`Trying unsupported arch '${r}' for cmake on Linux`),a=`linux-${r}`);const s=`cmake-${e}-${a}`;return{binRelativeDir:"bin/",binFileName:we("cmake"),extractedFolderName:s,url:`https://github.com/Kitware/CMake/releases/download/v${e}/${s}.tar.gz`}}default:throw new Error(`Unsupported platform '${t}'`)}}async function c_({version:e,setupDir:t,arch:r}){return await Oe()?Fe([{name:"cmake"}]):vt("cmake",e,C0,t,r)}function Lr({version:e}={}){return ur("cmakelang[YAML]",e)}function x0({version:e}={}){return ur("conan",e)}async function D0({version:e}={}){switch(process.platform){case"win32":return await xe("cppcheck",e),{binDir:await F0()};case"darwin":return Ge("cppcheck",e);case"linux":{if(Pe())return ge("cppcheck",e);if(Ce())return Le([{name:"ccache",version:e}]);if(me())return de([{name:"cppcheck",version:e}]);if(await Oe())return Fe([{name:"cppcheck",version:e}]);throw new Error("Unsupported linux distribution")}default:throw new Error("Unsupported platform")}}async function F0(){const e="C:/Program Files/Cppcheck";return await be(e,ne),e}function q0({version:e}={}){return ur("cpplint",e,{pythonVersion:">=3.8.0"})}async function _n({version:e}={}){switch(process.platform){case"win32":return await xe("graphviz",e),k0();case"darwin":return Ge("graphviz",e);case"linux":{if(Pe())return ge("graphviz",e);if(Ce())return Le([{name:"graphviz",version:e}]);if(me())return de([{name:"graphviz",version:e}]);if(await Oe())return Fe([{name:"graphviz",version:e}]);throw new Error("Unsupported linux distribution")}default:throw new Error("Unsupported platform")}}async function k0(){if(process.platform==="win32"){const e="C:/Program Files/Graphviz/bin";return await be(e,ne),{binDir:e}}else throw new Error("Unsupported platform")}const j0=new Map([[25,["Tahoe","26"]],[24,["Sequoia","15"]],[23,["Sonoma","14"]],[22,["Ventura","13"]],[21,["Monterey","12"]],[20,["Big Sur","11"]],[19,["Catalina","10.15"]],[18,["Mojave","10.14"]],[17,["High Sierra","10.13"]],[16,["Sierra","10.12"]],[15,["El Capitan","10.11"]],[14,["Yosemite","10.10"]],[13,["Mavericks","10.9"]],[12,["Mountain Lion","10.8"]],[11,["Lion","10.7"]],[10,["Snow Leopard","10.6"]],[9,["Leopard","10.5"]],[8,["Tiger","10.4"]],[7,["Panther","10.3"]],[6,["Jaguar","10.2"]],[5,["Puma","10.1"]]]);function U0(e){e=Number((e||wp.release()).split(".")[0]);const[t,r]=j0.get(e)||["Unknown",""];return{name:t,version:r}}function M0(){if(process.platform!=="darwin")return[];const{version:e}=U0();return e.split(".").map(t=>Number.parseInt(t,10))}const G0=ke(M0);async function V0(e,t){const{ArchiveHdi:r}=await import("./assets/index-DDkfbFPw.mjs");await new r(e).read(async i=>{await i.extract(Z(t,i.path))})}function B0(e,t,r){switch(t){case"linux":{if(process.arch==="arm64")throw new Error("Doxygen binaries are not available for Linux arm64");const n=`doxygen-${e}`;return{binRelativeDir:"bin/",binFileName:we("doxygen"),extractedFolderName:n,url:`https://www.doxygen.nl/files/${n}.linux.bin.tar.gz`}}case"win32":{const n=`doxygen-${e}`;return{binRelativeDir:"",binFileName:we("doxygen"),extractedFolderName:n,url:`https://www.doxygen.nl/files/${n}.windows.x64.bin.zip`}}case"darwin":{const n=`Doxygen-${e}`;return{binRelativeDir:"Doxygen/Doxygen.app/Contents/Resources/",binFileName:we("doxygen"),extractedFolderName:n,extractFunction:V0,url:`https://doxygen.nl/files/${n}.dmg`}}default:throw new Error(`Unsupported platform '${t}'`)}}async function H0({version:e,setupDir:t,arch:r}){switch(process.platform){case"win32":{await Wm(()=>xe("doxygen.install",e),{name:"doxygen.install",max:4,backoffBase:2e3,report:a=>Y(a)});const i={binDir:await W0()};return await _n({version:nt("graphviz",void 0)}),i}case"darwin":{const n=await Ge("doxygen",void 0,{formula:!0});return G0()[0]>11&&await _n({version:nt("graphviz",void 0)}),n}case"linux":{const n=await z0({version:e,setupDir:t,arch:r});return await _n({version:nt("graphviz",void 0,await jt())}),n}default:throw new Error("Unsupported platform")}}async function z0({version:e,setupDir:t,arch:r}){try{if(Pe())return await ge("doxygen",e);if(Ce())return Le([{name:"doxygen",version:e}]);if(me())return await de([{name:"doxygen",version:e,fallBackToLatest:ct.includes(r)}]);if(await Oe())return Fe([{name:"doxygen"}]);throw new Error("Unsupported linux distributions")}catch{try{const n=await vt("doxygen",e,B0,t,r);if(me())try{await de([{name:"libclang-cpp-dev"}])}catch(i){Y(`Failed to download libclang-cpp-dev that might be needed for running doxygen. ${i}`)}return n}catch(n){return Zt(`Failed to download doxygen binary. ${n}. Falling back to installing the latest version from apt-get.`),de([{name:"doxygen"}])}}}async function W0(){switch(process.platform){case"win32":{for(const e of["C:/ProgramData/chocolatey/bin","C:/Program Files/doxygen/bin","C:/Program Files (x86)/doxygen"])if(await _e(Z(e,"doxygen.exe")))return await be(e,ne),e;throw new Error("Failed to find doxygen binary")}default:throw new Error("Unsupported platform")}}function X0({version:e}={}){return ur("flawfinder",e)}async function l_({version:e}={}){const t=await fe("git",{nothrow:!0});if(t!==null){Y(`Git already installed at ${t}`);return}switch(process.platform){case"win32":{const r=await xe("git",e),n=K0();return n!==null&&await be(n,ne),r}case"darwin":return Ge("git",e);case"linux":{if(Pe())return ge("git",e);if(Ce())return Le([{name:"git",version:e}]);if(me())return de([{name:"git",version:e}]);if(await Oe())return Fe([{name:"git",version:e}]);throw new Error("Unsupported linux distribution")}default:throw new Error("Unsupported platform")}}function K0(){const e=["C:/Program Files/Git/bin/","C:/Program Files (x86)/Git/bin/"];for(const t of e)if(Qt(Z(t,"git.exe")))return t;return ye("Git not found in the default locations. Add git to PATH manually."),null}const Y0=typeof __dirname=="string"?__dirname:ce.dirname(xt(import.meta.url));async function J0(e,t,r){const{keywords:n,optionalKeywords:i}=Z0(t,r),a=await $n(Z(Y0,"github_facebook_infer.json")),s=On(a,{version:e,keywords:n,optionalKeywords:i,filterMapTag(l){return l.replace(/^v/,"")}});if(s!==void 0)return{url:`https://github.com/facebook/infer/releases/download/${s.tag}/${s.name}`,extractedFolderName:`${er(s.name,".tar.xz")}`,binRelativeDir:"bin",binFileName:we("infer")};throw new Error(`No asset found for version ${e} matching ${n} and ${i}`)}function Q0({version:e,setupDir:t,arch:r}){return vt("infer",e,J0,t,r)}function Z0(e,t){const r=[],n=[];switch(e){case"linux":{r.push("linux"),ut.includes(t)?(n.push("64"),n.push("x86_64")):(Y(`Using arch ${t} for infer`),r.push(t));break}case"darwin":{r.push("osx"),ut.includes(t)?n.push("x86_64"):ct.includes(t)?n.push("arm64"):(Y(`Using arch ${t} for infer`),r.push(t));break}default:Y(`Using ${e} ${t} for infer`),r.push(e,t);break}return{keywords:r,optionalKeywords:n}}function eb(e,t){switch(e){case"win32":return ut.includes(t)||dr.includes(t)?"win":ct.includes(t)?"winarm64":"win";case"darwin":return"mac";case"linux":return ut.includes(t)||dr.includes(t)?"linux":ct.includes(t)?"linux-aarch64":"linux";default:throw new Error(`Unsupported platform '${e}'`)}}function tb(e,t,r){const n=eb(t,r);return{binRelativeDir:"",binFileName:we("ninja"),extractedFolderName:"",url:`https://github.com/ninja-build/ninja/releases/download/v${e}/ninja-${n}.zip`}}async function f_({version:e,setupDir:t,arch:r}){return await Oe()?(await Sm(),await Fe([{name:"ninja-build"},{name:"ninja-is-really-ninja"}]),await be("/usr/lib/ninja-build/bin",ne),{binDir:"/usr/lib/ninja-build/bin",installDir:"/usr/lib/ninja-build/",bin:"/usr/lib/ninja-build/bin/ninja"}):vt("ninja",e,tb,t,r)}const rb=typeof __dirname=="string"?__dirname:ce.dirname(xt(import.meta.url));function nb(e){return{url:`https://github.com/SimonKagstrom/kcov/releases/download/${e}/kcov-amd64.tar.gz`,extractedFolderName:"",binRelativeDir:"usr/local/bin",binFileName:we("kcov")}}function ib(e,t,r){return{url:`https://github.com/SimonKagstrom/kcov/archive/refs/tags/${e}.tar.gz`,extractedFolderName:"",binRelativeDir:"build/src",binFileName:we("kcov"),extractFunction:(n,i)=>sb(n,i,r)}}async function sb(e,t,r){const n=await xu(e,t,1),i=await ob(r);process.platform==="linux"&&(Pe()?await Promise.all([ge("libdwarf"),ge("libcurl-openssl")]):Ce()?await Le([{name:"libdwarf-devel"},{name:"libcurl-devel"}]):me()&&await de([{name:"libdw-dev"},{name:"libcurl4-openssl-dev"}]));try{if(fe.sync("patch",{nothrow:!0})!==null){const s=Z(rb,"gcc13.patch");await le("patch",["-N","-p1","-i",s],{cwd:n,stdio:"inherit"})}else Y("`patch` not found, skipping gcc13.patch, kcov may not build on gcc 13")}catch{}const a=Z(n,"build");return await le(i,["-S",n,"-B",a,"-DCMAKE_BUILD_TYPE=Release","-G","Ninja"],{cwd:n,stdio:"inherit"}),await le(i,["--build",a,"--config","Release"],{cwd:n,stdio:"inherit"}),n}async function ob(e){let t=fe.sync("cmake",{nothrow:!0});if(t===null){const{binDir:n}=await c_({version:nt("cmake",void 0,await jt()),setupDir:Z(rt("~"),"cmake"),arch:e});t=Z(n,"cmake")}return fe.sync("ninja",{nothrow:!0})===null&&await f_({version:nt("ninja",void 0,await jt()),setupDir:Z(rt("~"),"ninja"),arch:e}),t}async function ab({version:e,setupDir:t,arch:r}){if(process.platform!=="linux"){Y("Kcov is not supported on non-linux");return}const n=e.split("-");let i=KS(n[0]);const a=n[1],s=XS(i);s===38&&(i="v38");let l;return a==="binary"&&s>=39?(l=await vt("kcov",i,nb,t,r),Pe()?await ge("binutils"):Ce()?await Le([{name:"binutils"}]):me()&&await de([{name:"libbinutils"}]),l):(l=await vt("kcov",i,ib,t,r),l)}function ub({version:e}={}){return ur("lizard",e)}async function Dr(){process.platform==="darwin"&&(await fe("clang",{nothrow:!0})!==null&&await fe("clang++",{nothrow:!0})!==null&&(Zt("Assuming clang is an Apple Clang compiler"),await Promise.all([Ie("CC","clang",ne),Ie("CXX","clang++",ne)])),ey("Apple Clang automatic installation is not supported yet"))}function cb(e){const t=Tu(e);return Number.parseInt(t.split(".")[0],10)}const Pr=ke(cb);async function lb(e){if(await Oe())try{return await fb(e)}catch(t){Y(`Failed to install llvm via system package manager ${t}.`)}}function fb(e){const t=Pr(e);return Fe([{name:`llvm${t}`}])}var za={},tp;function db(){return tp||(tp=1,(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DownloaderHelper=e.DH_STATES=void 0;var t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},r=(function(){function v(g,E){for(var d,w=0;w<E.length;w++)d=E[w],d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(g,d.key,d)}return function(g,E,d){return E&&v(g.prototype,E),d&&v(g,d),g}})(),n=De,i=S(n),a=ru,s=ce,l=S(s),c=Ln,u=S(c),o=jr,m=S(o),_=vr;function S(v){if(v&&v.__esModule)return v;var g={};if(v!=null)for(var E in v)Object.prototype.hasOwnProperty.call(v,E)&&(g[E]=v[E]);return g.default=v,g}function R(v,g){if(!(v instanceof g))throw new TypeError("Cannot call a class as a function")}function p(v,g){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:v}function h(v,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);v.prototype=Object.create(g&&g.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(v,g):v.__proto__=g)}var y=e.DH_STATES={IDLE:"IDLE",SKIPPED:"SKIPPED",STARTED:"STARTED",DOWNLOADING:"DOWNLOADING",RETRY:"RETRY",PAUSED:"PAUSED",RESUMED:"RESUMED",STOPPED:"STOPPED",FINISHED:"FINISHED",FAILED:"FAILED"};e.DownloaderHelper=(function(v){function g(E,d){var w=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{};R(this,g);var f=p(this,(g.__proto__||Object.getPrototypeOf(g)).call(this,{captureRejections:!0}));return f.__validate(E,d)?(f.url=f.requestURL=E.trim(),f.state=y.IDLE,f.__defaultOpts={body:null,retry:!1,method:"GET",headers:{},fileName:"",timeout:-1,metadata:null,override:!1,forceResume:!1,removeOnStop:!0,removeOnFail:!0,progressThrottle:1e3,httpRequestOptions:{},httpsRequestOptions:{},resumeOnIncomplete:!0,resumeIfFileExists:!1,resumeOnIncompleteMaxRetry:5},f.__opts=Object.assign({},f.__defaultOpts),f.__pipes=[],f.__total=0,f.__downloaded=0,f.__progress=0,f.__retryCount=0,f.__retryTimeout=null,f.__resumeRetryCount=0,f.__states=y,f.__promise=null,f.__request=null,f.__response=null,f.__isAborted=!1,f.__isResumed=!1,f.__isResumable=!1,f.__isRedirected=!1,f.__destFolder=d,f.__statsEstimate={time:0,bytes:0,prevBytes:0,throttleTime:0},f.__fileName="",f.__filePath="",f.updateOptions(w),f):p(f)}return h(g,v),r(g,[{key:"start",value:function(){var d=this,w=function(){return new Promise(function(f,b){d.__promise={resolve:f,reject:b},d.__start()})};return this.__opts.resumeIfFileExists&&this.state!==this.__states.RESUMED?this.getTotalSize().then(function(f){var b=f.name,$=f.total,T=d.__opts.override;if(d.__opts.override=!0,d.__filePath=d.__getFilePath(b),d.__opts.override=T,d.__filePath&&i.existsSync(d.__filePath)){var q=d.__getFilesizeInBytes(d.__filePath);return q===$?w():d.resumeFromFile(d.__filePath,{total:$,fileName:b})}return w()}):w()}},{key:"pause",value:function(){var d=this;return this.state===this.__states.STOPPED?Promise.resolve(!0):(this.__response&&(this.__response.unpipe(),this.__pipes.forEach(function(w){return w.stream.unpipe()})),this.__fileStream&&this.__fileStream.removeAllListeners(),this.__requestAbort(),this.__closeFileStream().then(function(){return d.__setState(d.__states.PAUSED),d.emit("pause"),!0}))}},{key:"resume",value:function(){return this.__promise?this.state===this.__states.STOPPED?Promise.resolve(!1):(this.__setState(this.__states.RESUMED),this.__isResumable&&(this.__isResumed=!0,this.__reqOptions.headers.range="bytes="+this.__downloaded+"-"),this.emit("resume",this.__isResumed),this.__start()):this.start()}},{key:"stop",value:function(){var d=this;if(this.state===this.__states.STOPPED)return Promise.resolve(!0);var w=function(){return new Promise(function(f,b){i.access(d.__filePath,function($){return $?(d.__emitStop(),f(!0)):void i.unlink(d.__filePath,function(T){return T?(d.__setState(d.__states.FAILED),d.emit("error",T),b(T)):(d.__emitStop(),void f(!0))})})})};return this.__requestAbort(),this.__closeFileStream().then(function(){return d.__opts.removeOnStop?w():(d.__emitStop(),Promise.resolve(!0))})}},{key:"pipe",value:function(d){var w=1<arguments.length&&arguments[1]!==void 0?arguments[1]:null;return this.__pipes.push({stream:d,options:w}),d}},{key:"unpipe",value:function(){var d=this,w=0<arguments.length&&arguments[0]!==void 0?arguments[0]:null,f=function($){return d.__response?d.__response.unpipe($):$.unpipe()};if(w){var b=this.__pipes.find(function($){return $.stream===w});return void(b&&(f(w),this.__pipes=this.__pipes.filter(function($){return $.stream!==w})))}this.__pipes.forEach(function($){return f($.stream)}),this.__pipes=[]}},{key:"getDownloadPath",value:function(){return this.__filePath}},{key:"isResumable",value:function(){return this.__isResumable}},{key:"updateOptions",value:function(d){var w=1<arguments.length&&arguments[1]!==void 0?arguments[1]:"";this.__opts=Object.assign({},this.__opts,d),this.__headers=this.__opts.headers,-1<this.__opts.timeout&&(this.__opts.httpRequestOptions.timeout=this.__opts.timeout,this.__opts.httpsRequestOptions.timeout=this.__opts.timeout),(typeof this.__opts.progressThrottle!="number"||0>this.__opts.progressThrottle)&&(this.__opts.progressThrottle=this.__defaultOpts.progressThrottle),this.url=w||this.url,this.__reqOptions=this.__getReqOptions(this.__opts.method,this.url,this.__opts.headers),this.__initProtocol(this.url)}},{key:"getOptions",value:function(){return this.__opts}},{key:"getMetadata",value:function(){return this.__opts.metadata}},{key:"getStats",value:function(){return{total:this.__total,name:this.__fileName,downloaded:this.__downloaded,progress:this.__progress,speed:this.__statsEstimate.bytes}}},{key:"getTotalSize",value:function(){var d=this;return new Promise(function(w,f){var b=function(M){d.__initProtocol(M);var P=Object.assign({},d.__headers);P.hasOwnProperty("range")&&delete P.range;var I=d.__getReqOptions("HEAD",M,P);return Object.assign({},d.__reqOptions,I)},$=0,T=null,q=function(M,P){if(!d.__opts.retry||t(d.__opts.retry)!=="object")return Promise.reject(M||new Error("wrong retry options"));T&&(clearTimeout(T),T=null);var I=d.__opts.retry,N=I.delay,D=N===void 0?0:N,x=I.maxRetries,F=x===void 0?999:x;return $>=F?Promise.reject(M||new Error("reached the maximum retries")):($++,d.__setState(d.__states.RETRY),d.emit("retry",$,d.__opts.retry,M),new Promise(function(C){T=setTimeout(function(){d.__setState(d.__states.IDLE),V(P,b(P)),C()},D)}))},V=function(M,P){T&&(clearTimeout(T),T=null);var I=d.__protocol.request(P,function(N){if(d.__isRequireRedirect(N)){var D=/^https?:\/\//.test(N.headers.location)?N.headers.location:new a.URL(N.headers.location,M).href;return d.emit("redirected",D,M),V(D,b(D))}if(200>N.statusCode||400<=N.statusCode){var x=new Error("Response status was "+N.statusCode);return d.__opts.retry&&500<=N.statusCode&&600>N.statusCode?q(x,M).catch(f):f(x)}w({name:d.__getFileNameFromHeaders(N.headers,N),total:parseInt(N.headers["content-length"])||null})});I.on("error",function(N){return d.__opts.retry?q(N,M).catch(f):void f(N)}),I.on("timeout",function(){return d.__opts.retry?q(new Error("timeout"),M).catch(f):void f(new Error("timeout"))}),I.on("uncaughtException",function(N){return d.__opts.retry?q(N,M).catch(f):void f(N)}),I.end()};V(d.url,b(d.url))})}},{key:"getResumeState",value:function(){return{downloaded:this.__downloaded,filePath:this.__filePath,fileName:this.__fileName,total:this.__total}}},{key:"resumeFromFile",value:function(d){var w=this,f=1<arguments.length&&arguments[1]!==void 0?arguments[1]:{};return this.__opts.override=!0,this.__filePath=d,(f.total&&f.fileName?Promise.resolve({name:f.fileName,total:f.total}):this.getTotalSize()).then(function(b){var $=b.name,T=b.total;return w.__total=f.total||T,w.__fileName=f.fileName||$,w.__downloaded=f.downloaded||w.__getFilesizeInBytes(w.__filePath),w.__reqOptions.headers.range="bytes="+w.__downloaded+"-",w.__isResumed=!0,w.__isResumable=!0,w.__setState(w.__states.RESUMED),w.emit("resume",w.__isResumed),new Promise(function(q,V){w.__promise={resolve:q,reject:V},w.__start()})})}},{key:"__start",value:function(){this.__isRedirected||this.state===this.__states.RESUMED||(this.emit("start"),this.__setState(this.__states.STARTED),this.__initProtocol(this.url)),this.__response=null,this.__isAborted=!1,this.__request&&!this.__request.destroyed&&this.__request.destroy(),this.__retryTimeout&&(clearTimeout(this.__retryTimeout),this.__retryTimeout=null),this.__request=this.__downloadRequest(this.__promise.resolve,this.__promise.reject),this.__request.on("error",this.__onError(this.__promise.resolve,this.__promise.reject)),this.__request.on("timeout",this.__onTimeout(this.__promise.resolve,this.__promise.reject)),this.__request.on("uncaughtException",this.__onError(this.__promise.resolve,this.__promise.reject,!0)),this.__opts.body&&this.__request.write(this.__opts.body),this.__request.end()}},{key:"__resolvePending",value:function(){if(this.__promise){var d=this.__promise.resolve;return this.__promise=null,d(!0)}}},{key:"__downloadRequest",value:function(d,w){var f=this;return this.__protocol.request(this.__reqOptions,function(b){if(f.__response=b,f.__isResumed||(f.__total=parseInt(b.headers["content-length"])||null,f.__resetStats()),f.__isRequireRedirect(b)){var $=/^https?:\/\//.test(b.headers.location)?b.headers.location:new a.URL(b.headers.location,f.url).href;return f.__isRedirected=!0,f.__initProtocol($),f.emit("redirected",$,f.url),f.__start()}if(200>b.statusCode||400<=b.statusCode){var T=new Error("Response status was "+b.statusCode);return T.status=b.statusCode||0,T.body=b.body||"",500<=b.statusCode&&600>b.statusCode?f.__onError(d,w)(T):(f.__setState(f.__states.FAILED),f.emit("error",T),w(T))}(f.__opts.forceResume||b.headers.hasOwnProperty("accept-ranges")&&b.headers["accept-ranges"]!=="none")&&(f.__isResumable=!0),f.__startDownload(b,d,w)})}},{key:"__startDownload",value:function(d,w,f){var b=this,$=d;if(this.__isResumed)this.__fileStream=i.createWriteStream(this.__filePath,{flags:"a"});else{var T=this.__getFileNameFromHeaders(d.headers);if(this.__filePath=this.__getFilePath(T),this.__fileName=this.__filePath.split(l.sep).pop(),i.existsSync(this.__filePath)){var q=this.__getFilesizeInBytes(this.__filePath),V=this.__total?this.__total:0;if(t(this.__opts.override)==="object"&&this.__opts.override.skip&&(this.__opts.override.skipSmaller||q>=V))return this.emit("skip",{totalSize:this.__total,fileName:this.__fileName,filePath:this.__filePath,downloadedSize:q}),this.__setState(this.__states.SKIPPED),w(!0)}this.__fileStream=i.createWriteStream(this.__filePath,{})}this.emit("download",{fileName:this.__fileName,filePath:this.__filePath,totalSize:this.__total,isResumed:this.__isResumed,downloadedSize:this.__downloaded}),this.__retryCount=0,this.__isResumed=!1,this.__isRedirected=!1,this.__setState(this.__states.DOWNLOADING),this.__statsEstimate.time=new Date,this.__statsEstimate.throttleTime=new Date,$.on("data",function(M){return b.__calculateStats(M.length)}),this.__pipes.forEach(function(M){$.pipe(M.stream,M.options),$=M.stream}),$.pipe(this.__fileStream),$.on("error",this.__onError(w,f)),this.__fileStream.on("finish",this.__onFinished(w,f)),this.__fileStream.on("error",this.__onError(w,f))}},{key:"__hasFinished",value:function(){return!this.__isAborted&&[this.__states.PAUSED,this.__states.STOPPED,this.__states.RETRY,this.__states.FAILED,this.__states.RESUMED].indexOf(this.state)===-1}},{key:"__isRequireRedirect",value:function(d){return 300<d.statusCode&&400>d.statusCode&&d.headers.hasOwnProperty("location")&&d.headers.location}},{key:"__onFinished",value:function(d,w){var f=this;return function(){f.__fileStream.close(function(b){if(b)return w(b);if(f.__hasFinished()){var $=!!f.__total&&f.__downloaded!==f.__total;if($&&f.__isResumable&&f.__opts.resumeOnIncomplete&&f.__resumeRetryCount<=f.__opts.resumeOnIncompleteMaxRetry)return f.__resumeRetryCount++,f.emit("warning",new Error("uncomplete download, retrying")),f.resume();f.__setState(f.__states.FINISHED),f.__pipes=[],f.emit("end",{fileName:f.__fileName,filePath:f.__filePath,totalSize:f.__total,incomplete:$,onDiskSize:f.__getFilesizeInBytes(f.__filePath),downloadedSize:f.__downloaded})}return d(f.__downloaded===f.__total)})}}},{key:"__closeFileStream",value:function(){var d=this;return this.__fileStream?new Promise(function(w,f){d.__fileStream.close(function(b){return b?f(b):w(!0)})}):Promise.resolve(!0)}},{key:"__onError",value:function(d,w){var f=this,b=2<arguments.length&&arguments[2]!==void 0&&arguments[2];return function($){return f.__pipes=[],b&&f.__requestAbort(),f.state===f.__states.STOPPED||f.state===f.__states.FAILED?void 0:f.__opts.retry?f.__retry($).catch(function(T){f.__removeFile().finally(function(){f.__setState(f.__states.FAILED),f.emit("error",T||$),w(T||$)})}):f.__removeFile().finally(function(){f.__setState(f.__states.FAILED),f.emit("error",$),w($)})}}},{key:"__retry",value:function(){var d=this,w=0<arguments.length&&arguments[0]!==void 0?arguments[0]:null;if(!this.__opts.retry||t(this.__opts.retry)!=="object")return Promise.reject(w||new Error("wrong retry options"));var f=this.__opts.retry,b=f.delay,$=b===void 0?0:b,T=f.maxRetries,q=T===void 0?999:T;return this.__retryCount>=q?Promise.reject(w||new Error("reached the maximum retries")):(this.__retryCount++,this.__setState(this.__states.RETRY),this.emit("retry",this.__retryCount,this.__opts.retry,w),this.__response&&(this.__response.unpipe(),this.__pipes.forEach(function(V){return V.stream.unpipe()})),this.__fileStream&&this.__fileStream.removeAllListeners(),this.__requestAbort(),this.__closeFileStream().then(function(){return new Promise(function(V){return d.__retryTimeout=setTimeout(function(){return V(0<d.__downloaded?d.resume():d.__start())},$)})}))}},{key:"__onTimeout",value:function(d,w){var f=this;return function(){return f.__requestAbort(),f.__opts.retry?f.__retry(new Error("timeout")).catch(function(b){f.__removeFile().finally(function(){f.__setState(f.__states.FAILED),b?w(b):(f.emit("timeout"),w(new Error("timeout")))})}):f.__removeFile().finally(function(){f.__setState(f.__states.FAILED),f.emit("timeout"),w(new Error("timeout"))})}}},{key:"__resetStats",value:function(){this.__retryCount=0,this.__downloaded=0,this.__progress=0,this.__resumeRetryCount=0,this.__statsEstimate={time:0,bytes:0,prevBytes:0,throttleTime:0}}},{key:"__getFileNameFromHeaders",value:function(d,w){var f="",b=/.*filename\*=.*?'.*?'([^"].+?[^"])(?:(?:;)|$)/i,$=/.*filename="(.*?)";?/i,T=/.*filename=([^"].+?[^"])(?:(?:;)|$)/i,q=d.hasOwnProperty("content-disposition"),V=q?d["content-disposition"].match(b):null,M=!q||V?null:d["content-disposition"].match($),P=!q||V||M?null:d["content-disposition"].match(T);return q&&(V||M||P)?(f=d["content-disposition"],f=f.trim(),V?f=V[1]:M?f=M[1]:P&&(f=P[1]),f=f.replace(/[/\\]/g,"")):0<l.basename(new a.URL(this.requestURL).pathname).length?f=l.basename(new a.URL(this.requestURL).pathname):f=new a.URL(this.requestURL).hostname+".html",this.__opts.fileName?this.__getFileNameFromOpts(f,w):f.replace(/\.*$/,"")}},{key:"__getFilePath",value:function(d){var w=l.join(this.__destFolder,d),f=w;return this.__opts.override||this.state===this.__states.RESUMED||(f=this.__uniqFileNameSync(f),w!==f&&this.emit("renamed",{path:f,fileName:f.split(l.sep).pop(),prevPath:w,prevFileName:w.split(l.sep).pop()})),f}},{key:"__getFileNameFromOpts",value:function(d,w){if(!this.__opts.fileName)return d;if(typeof this.__opts.fileName=="string")return this.__opts.fileName;if(typeof this.__opts.fileName=="function"){var f=l.join(this.__destFolder,d);return w&&w.headers||this.__response&&this.__response.headers?this.__opts.fileName(d,f,(w||this.__response).headers["content-type"]):this.__opts.fileName(d,f)}if(t(this.__opts.fileName)==="object"){var b=this.__opts.fileName,$=b.name,T=!!b.hasOwnProperty("ext")&&b.ext;if(typeof T=="string")return $+"."+T;if(typeof T=="boolean"){if(T)return $;var q=d.includes(".")?d.split(".").pop():"";return q===""?$:$+"."+q}}return d}},{key:"__calculateStats",value:function(d){var w=new Date,f=w-this.__statsEstimate.time,b=w-this.__statsEstimate.throttleTime,$=this.__total||0;d&&(this.__downloaded+=d,this.__progress=$===0?0:100*(this.__downloaded/$),(this.__downloaded===$||1e3<f)&&(this.__statsEstimate.time=w,this.__statsEstimate.bytes=this.__downloaded-this.__statsEstimate.prevBytes,this.__statsEstimate.prevBytes=this.__downloaded),(this.__downloaded===$||b>this.__opts.progressThrottle)&&(this.__statsEstimate.throttleTime=w,this.emit("progress.throttled",this.getStats())),this.emit("progress",this.getStats()))}},{key:"__setState",value:function(d){this.state=d,this.emit("stateChanged",this.state)}},{key:"__getReqOptions",value:function(d,w){var f=2<arguments.length&&arguments[2]!==void 0?arguments[2]:{},b=new a.URL(w),$={protocol:b.protocol,host:b.hostname,port:b.port,path:b.pathname+b.search,method:d};return f&&($.headers=f),$}},{key:"__getFilesizeInBytes",value:function(d){try{var w=i.statSync(d,{throwIfNoEntry:!1}),f=w.size||0;return f}catch(b){this.emit("warning",b)}return 0}},{key:"__validate",value:function(d,w){if(typeof d!="string")throw new Error("URL should be an string");if(d.trim()==="")throw new Error("URL couldn't be empty");if(typeof w!="string")throw new Error("Destination Folder should be an string");if(w.trim()==="")throw new Error("Destination Folder couldn't be empty");if(!i.existsSync(w))throw new Error("Destination Folder must exist");var f=i.statSync(w);if(!f.isDirectory())throw new Error("Destination Folder must be a directory");try{i.accessSync(w,i.constants.W_OK)}catch{throw new Error("Destination Folder must be writable")}return!0}},{key:"__initProtocol",value:function(d){var w=this.__getReqOptions(this.__opts.method,d,this.__headers);this.requestURL=d,-1<d.indexOf("https://")?(this.__protocol=m,w.agent=new m.Agent({keepAlive:!1}),this.__reqOptions=Object.assign({},w,this.__opts.httpsRequestOptions)):(this.__protocol=u,w.agent=new u.Agent({keepAlive:!1}),this.__reqOptions=Object.assign({},w,this.__opts.httpRequestOptions))}},{key:"__uniqFileNameSync",value:function(d){if(typeof d!="string"||d==="")return d;try{i.accessSync(d,i.F_OK);var w=d.match(/(.*)(\([0-9]+\))(\..*)$/),f=w?w[1].trim():d,b=w?parseInt(w[2].replace(/\(|\)/,"")):0,$=d.split(".").pop();return $!==d&&0<$.length?($="."+$,f=f.replace($,"")):$="",this.__uniqFileNameSync(f+" ("+ ++b+")"+$)}catch{return d}}},{key:"__removeFile",value:function(){var d=this;return new Promise(function(w){return d.__fileStream?void d.__fileStream.close(function(f){return f&&d.emit("warning",f),d.__opts.removeOnFail?i.access(d.__filePath,function(b){return b?w():void i.unlink(d.__filePath,function($){$&&d.emit("warning",f),w()})}):void w()}):w()})}},{key:"__requestAbort",value:function(){this.__isAborted=!0,this.__retryTimeout&&(clearTimeout(this.__retryTimeout),this.__retryTimeout=null),this.__response&&this.__response.destroy(),this.__request&&(this.__request.destroy?this.__request.destroy():this.__request.abort())}},{key:"__emitStop",value:function(){this.__resolvePending(),this.__setState(this.__states.STOPPED),this.emit("stop")}}]),g})(_.EventEmitter)})(za)),za}var d_=db();const hb=typeof __dirname=="string"?__dirname:ce.dirname(xt(import.meta.url));var ku=(e=>(e[e.All=0]="All",e[e.ClangFormat=1]="ClangFormat",e[e.Core=2]="Core",e))(ku||{});async function pb(e,t=0){if(me())try{return await mb(e,t)}catch(r){Xa(`Failed to install llvm via system package manager ${r}. Trying to remove the repository`);try{pe(Z(hb,"llvm_repo_remove.bash"),[`${Pr(e)}`])}catch(n){Xa(`Failed to remove llvm repository ${n}`)}}}async function mb(e,t=0){const r=Pr(e),n=`/usr/lib/llvm-${r}`;await de([{name:"ca-certificates"}]);const i=new d_.DownloaderHelper("https://apt.llvm.org/llvm.sh",Ue(),{fileName:"llvm.sh",override:!0});i.on("error",l=>{throw new Error(`Failed to download the LLVM installer script: ${l}`)}),await i.start();const a=await pr(i.getDownloadPath(),"utf-8"),s=Z(Ue(),"llvm-setup-cpp.sh");return await _b(a,s,r,t),await xm(),await de([{name:"lsb-release"},{name:"wget"},{name:"gnupg"}]),await Sp(s,"755"),await yt("bash",[s,`${r}`,...t===0?["all"]:[]],{stdio:"inherit",shell:!0,timeout:E_}),await be(`${n}/bin`,ne),{installDir:`${n}`,binDir:`${n}/bin`,bin:`${n}/bin/clang++`}}async function _b(e,t,r,n){let i=yb(e);i=vb(i),i=Eb(n,i,r),i=await wb(i),i=gb(i),await wn(t,i)}function yb(e){return process.env.NODE_DEBUG!=="1"&&process.env.NODE_DEBUG!=="true"?e.replace(/set -eux/g,"set -eu"):e}function vb(e){const t=Cm();return e.replace(/add-apt-repository\s*(-y)?\s*"\${REPO_NAME}"/g,`add-apt-repository -y ${t?"--no-update":""} "\${REPO_NAME}"
apt-get update -o ${Or}`)}async function wb(e){let t=e.replace(/apt-get install -y/g,`apt-get install -o Dpkg::Options::="--force-overwrite" -o ${Or}  -y --fix-broken`);const r=["libc++-$LLVM_VERSION-dev","libc++abi-$LLVM_VERSION-dev","libunwind-$LLVM_VERSION-dev"];return await Promise.all(r.map(async n=>{const i=n.replace("$LLVM_VERSION","*");await fS(i)&&(Xa(`Removing conflicting package ${i}`),t=t.replace(n,""))})),t}function gb(e){return $m()?e.replace(/apt-get/g,"nala"):e}function Eb(e,t,r){return e===1?t.replace(/ -y \$PKG/g,` -y clang-format-${r}`):t}const rp=typeof __dirname=="string"?__dirname:ce.dirname(xt(import.meta.url));async function Sb(e,t,r){const n=await Rb(t,r,e);Y(`Downloading LLVM from ${n}`);const i=Ym(n);return{url:n,extractedFolderName:"",binRelativeDir:"bin",binFileName:we("clang"),extractFunction:i===hn.Tar||i===hn.TarGz||i===hn.TarXz?(a,s)=>process.platform==="win32"?yr(a,s,!0):xu(a,s,1):Jm(i)}}async function Rb(e,t,r){const{keywords:n,optionalKeywords:i}=await bb(e,t),a=await $n(Z(rp,"github_llvm_llvm-project.json")),s=On(a,{version:r,keywords:n,optionalKeywords:i,filterMapTag(u){return u.replace(/^llvmorg-/,"")}});if(s!==void 0)return`https://github.com/llvm/llvm-project/releases/download/${s.tag}/${s.name}`;const l=await $n(Z(rp,"llvm_org_releases.json")),c=On(l,{version:r,keywords:n,optionalKeywords:i});if(c!==void 0)return`https://releases.llvm.org/${c.tag}/${c.name}`;throw new Error(`No asset found for version ${r} matching ${n} and ${i}`)}async function bb(e,t){const r=[],n=[];switch(e){case"win32":{n.push(".tar.xz",".tar.xz");const i=[];ut.includes(t)?(i.push("win64"),n.push(["x86_64","X64"])):dr.includes(t)?i.push("win32"):ct.includes(t)?i.push("woa64"):(Y(`Using arch ${t} for LLVM`),i.push(t)),i.push("windows","Windows"),r.push(i);break}case"linux":{const i=["linux","Linux"];if(me()){n.push("ubuntu");const a=await jt();if(a!==null){n.push(`${a[0]}`);const s=a[1]<10?`0${a[1]}`:`${a[1]}`;n.push(`${a[0]}.${s}`),n.push(`${a[0]}.${s}.${a[2]}`)}}else Ce()&&n.push("rhel");ut.includes(t)?r.push(["x86_64","X64"]):dr.includes(t)?r.push("x86"):ct.includes(t)?r.push("aarch64"):O0.includes(t)?r.push("armv7a"):I0.includes(t)?r.push("powerpc64le"):P0.includes(t)?r.push("sparc64"):(Y(`Using arch ${t} for LLVM`),r.push(t)),r.push(i);break}case"darwin":{r.push(["apple","macos","macOS"]),ut.includes(t)?n.push(["x86_64","X64"]):ct.includes(t)?n.push(["arm64","ARM64"]):(Y(`Using arch ${t} for LLVM`),r.push(t));break}case"freebsd":{r.push("freebsd"),ut.includes(t)?r.push("amd64"):dr.includes(t)?r.push("i386"):(Y(`Using arch ${t} for LLVM`),r.push(t));break}case"solaris":{r.push("solaris"),ut.includes(t)?r.push("amd64"):T0.includes(t)?r.push("sparcv9"):(Y(`Using arch ${t} for LLVM`),r.push(t));break}default:Y(`Using ${e} ${t} for LLVM`),r.push(e,t);break}return{keywords:r,optionalKeywords:n}}async function $b({version:e,setupDir:t,arch:r}){const n=await vt("llvm",e,Sb,t,r);return await Ib(Pr(e),r),n}async function Ob(e,t){if(me())for(const r of["libtinfo5","libtinfo6"])try{await de([{name:r}])}catch{try{if(r==="libtinfo5"){Y(`Failed to install ${r}
Manually installing the package`);const i=`libtinfo5_6.3-2ubuntu0.1_${u_(t)}.deb`,a=`https://launchpad.net/ubuntu/+archive/primary/+files/${i}`,s=new d_.DownloaderHelper(a,Ue(),{fileName:i});s.on("error",async l=>{Y(`Failed to download ${a}: ${l}`),await s.stop()}),await s.start(),pe("dpkg",["-i",Z(Ue(),i)])}}catch{Y(`Failed to install ${r}. Ignoring`)}}else Pe()?await ge("ncurses5-compat-libs",void 0,"yay"):Ce()&&await Le([{name:"ncurses-compat-libs"}])}const Ib=ke(Ob,{promise:!0});async function Pb({version:e}){if(process.platform!=="darwin")return Promise.resolve(void 0);try{return await Tb({version:e})}catch(t){Y(`Failed to install llvm via brew: ${t}`);return}}async function Tb({version:e}){const t=Pr(e),r=await Ge("llvm",`${t}`,{"force-bottle":!0});return await be(r.binDir,ne),r}const{GITHUB_ACTIONS:Ab}=At,Nb=typeof __dirname=="string"?__dirname:ce.dirname(xt(import.meta.url));async function yn({version:e,setupDir:t,arch:r}){const n=await ju(e,t,r);return await Cb(r),await Db(),n.installDir!==void 0&&await xb(n.installDir,e),n}async function ju(e,t,r,n=ku.All){const i=await pb(e,n);if(i!==void 0)return i;const a=await lb(e);if(a!==void 0)return a;const s=await Pb({version:e});return s!==void 0?s:$b({version:e,setupDir:t,arch:r})}async function Lb(e){process.platform==="linux"&&await In({version:nt("gcc",void 0,await jt()),setupDir:"",arch:e,priority:40})}const Cb=ke(Lb,{promise:!0});async function xb(e,t){const r=process.env.LD_LIBRARY_PATH??"",n=process.env.DYLD_LIBRARY_PATH??"",i=Pr(t),a=[Ie("CC",we(`${e}/bin/clang`),ne),Ie("CXX",we(`${e}/bin/clang++`),ne),Ie("LLVM_PATH",e,ne),Ie("LLVM_LD_LIBRARY_PATH",`${r}${vn}${e}/lib`,ne),Ie("LLVM_DYLD_LIBRARY_PATH",`${n}${vn}${e}/lib`,ne),Ie("LLVM_LDFLAGS",`-L${Jh(`${e}/lib`)}`,ne),Ie("LLVM_CPPFLAGS",`-I${Jh(`${e}/include`)}`,ne),await _e(`${e}/lib/clang/${t}/include`)?Ie("LLVM_CPATH",`${e}/lib/clang/${t}/include`,ne):await _e(`${e}/lib/clang/${i}/include`)?Ie("LLVM_CPATH",`${e}/lib/clang/${i}/include`,ne):Promise.resolve(),Ie("LLVM_LIBRARY_PATH",`${e}/lib`,ne),qm()];me()&&a.push(_t("cc",`${e}/bin/clang`,ne,60),_t("cxx",`${e}/bin/clang++`,ne,60),_t("clang",`${e}/bin/clang`,ne),_t("clang++",`${e}/bin/clang++`,ne),_t("lld",`${e}/bin/lld`,ne),_t("ld.lld",`${e}/bin/ld.lld`,ne),_t("llvm-ar",`${e}/bin/llvm-ar`,ne)),await Promise.all(a)}async function Db(){if(!Ab)return;const e=Z(Nb,"llvm_matcher.json");if(!await _e(e))return ye("the llvm_matcher.json file does not exist in the same folder as setup-cpp.js");Y(`::add-matcher::${e}`)}function np({version:e,setupDir:t,arch:r}){return ju(e,t,r,ku.ClangFormat)}function ip({version:e,setupDir:t,arch:r}){return ju(e,t,r)}async function Fb({version:e}={}){switch(process.platform){case"win32":return xe("make",e);case"darwin":{await Ge("make",e);const t=Z(Ou(),"opt/make/libexec/gnubin");return await be(t,ne),{binDir:t}}case"linux":{if(Pe())return ge("make",e);if(Ce())return Le([{name:"make",version:e}]);if(me())return de([{name:"make",version:e}]);if(await Oe())return Fe([{name:"make",version:e}]);throw new Error("Unsupported linux distribution")}default:throw new Error("Unsupported platform")}}function qb({version:e}={}){return ur("meson",e)}var Jt={},sp;function kb(){if(sp)return Jt;sp=1;const e=gr(),t=Ur,r=De,n=ce,i=fp,a=i.env["ProgramFiles(x86)"],s=[i.env["ProgramFiles(x86)"],i.env.ProgramFiles],l=["Enterprise","Professional","Community","BuildTools"],c=["2022","2019","2017"],u={2022:"17.0",2019:"16.0",2017:"15.0",2015:"14.0",2013:"12.0"};function o(v){return Object.values(u).includes(v)?v:v in u?u[v]:v}Jt.vsversion_to_versionnumber=o;function m(v){if(Object.keys(u).includes(v))return v;for(const[g,E]of Object.entries(u))if(E===v)return g;return v}Jt.vsversion_to_year=m;const _=`${a}\\Microsoft Visual Studio\\Installer`;function S(v,g){try{return t.execSync(`vswhere -products * ${g} -prerelease -property installationPath`).toString().trim()+"\\"+v}catch(E){e.warning(`vswhere failed: ${E}`)}return null}Jt.findWithVswhere=S;function R(v){const g=o(v);let E;if(g){const f=g.split(".")[0]+".9";E=`-version "${g},${f}"`}else E="-latest";let d=S("VC\\Auxiliary\\Build\\vcvarsall.bat",E);if(d&&r.existsSync(d))return e.info(`Found with vswhere: ${d}`),d;e.info("Not found with vswhere");const w=v?[m(v)]:c;for(const f of s)for(const b of w)for(const $ of l)if(d=`${f}\\Microsoft Visual Studio\\${b}\\${$}\\VC\\Auxiliary\\Build\\vcvarsall.bat`,e.info(`Trying standard location: ${d}`),r.existsSync(d))return e.info(`Found standard location: ${d}`),d;if(e.info("Not found in standard locations"),d=`${a}\\Microsoft Visual C++ Build Tools\\vcbuildtools.bat`,r.existsSync(d))return e.info(`Found VS 2015: ${d}`),d;throw e.info(`Not found in VS 2015 location: ${d}`),new Error("Microsoft Visual Studio not found")}Jt.findVcvarsall=R;function p(v){return["PATH","INCLUDE","LIB","LIBPATH"].indexOf(v.toUpperCase())!=-1}function h(v){let g=v.split(";");function E(d,w,f){return f.indexOf(d)===w}return g.filter(E).join(";")}function y(v,g,E,d,w,f){if(i.platform!="win32"){e.info("This is not a Windows virtual environment, bye!");return}i.env.PATH+=n.delimiter+_;let b={win32:"x86",win64:"x64",x86_64:"x64","x86-64":"x64"};v.toLowerCase()in b&&(v=b[v.toLowerCase()]);var $=[v];d&&JSON.parse(d)===!0&&$.push("uwp"),g&&$.push(g),E&&$.push(`-vcvars_ver=${E}`),w&&JSON.parse(w)===!0&&$.push("-vcvars_spectre_libs=spectre");const T=`"${R(f)}" ${$.join(" ")}`;e.debug(`vcvars command-line: ${T}`);const V=t.execSync(`set && cls && ${T} && cls && set`,{shell:"cmd"}).toString().split("\f"),M=V[0].split(`\r
`),P=V[1].split(`\r
`),I=V[2].split(`\r
`),N=P.filter(x=>!!(x.match(/^\[ERROR.*\]/)&&!x.match(/Error in script usage. The correct usage is:$/)));if(N.length>0)throw new Error(`invalid parameters\r
`+N.join(`\r
`));let D={};for(let x of M){const[F,C]=x.split("=");D[F]=C}e.startGroup("Environment variables");for(let x of I){if(!x.includes("="))continue;let[F,C]=x.split("="),B=D[F];C!==B&&(e.info(`Setting ${F}`),p(F)&&(C=h(C)),e.exportVariable(F,C))}e.endGroup(),e.info("Configured Developer Command Prompt")}return Jt.setupMSVCDevCmd=y,Jt}var eu=kb();function jb(e){switch(e){case"x32":case"32":case"ia32":return"x86";case"64":return"x64";default:return e}}async function Uu({vsversion:e,VCTargetsPath:t,arch:r,toolset:n,sdk:i,uwp:a,spectre:s}){t!==void 0&&await _e(t)&&(Y(`Adding ${t} to PATH`),await Ie("VCTargetsPath",t,ne)),await eu.setupMSVCDevCmd(jb(r),i,n,a,s,e)}const{GITHUB_ACTIONS:Ub}=At,Mb=typeof __dirname=="string"?__dirname:ce.dirname(xt(import.meta.url));async function Fr({version:e,setupDir:t,arch:r,sdk:n,uwp:i,spectre:a}){if(process.platform!=="win32")return;const s=eu.vsversion_to_versionnumber(e);Y(`Checking if MSVC ${s} is already installed`);let l=!1;try{const o=eu.findVcvarsall(s);l=!0,Y(`Found the pre-installed version of MSVC at ${o}`)}catch{}let c,u;if(!l)try{s==="14.0"?(c="14.0",await xe("visualcpp-build-tools","14.0.25420.1",["--ignore-dependencies"]),u="C:/Program Files (x86)/MSBuild/Microsoft.Cpp/v4.0/v140"):s==="15.0"?(c="14.16",await xe("visualstudio2017buildtools","15.9.41.0",[]),u="C:/Program Files (x86)/Microsoft Visual Studio/2017/BuildTools/VC/Tools/MSVC/14.16"):s==="16.0"?(c="14.29",await xe("visualstudio2019buildtools","16.11.7.0",[]),u="C:/Program Files (x86)/Microsoft Visual Studio/2019/BuildTools/VC/Tools/MSVC/14.29.30133"):s==="17.0"?(c=void 0,await xe("visualstudio2022buildtools","117.0.5.0",[]),u=void 0):Ne(`The given MSVC versions ${e} is not supported yet.`)}catch(o){Ne(o)}await Uu({VCTargetsPath:u,arch:r,toolset:c,sdk:n,uwp:i,spectre:a}),Ub&&await Gb()}async function Gb(){const e=Z(Mb,"msvc_matcher.json");if(!await _e(e))return ye("the msvc_matcher.json file does not exist in the same folder as setup-cpp.js");Y(`::add-matcher::${e}`)}async function op({version:e}={}){return process.platform!=="win32"?void 0:(await xe("opencppcoverage",e),{binDir:await Vb()})}async function Vb(){const e="C:/Program Files/OpenCppCoverage";return await be(e,ne),e}function Bb(e,t,r){return{url:Hb(t,r,e),binRelativeDir:"",binFileName:we("pwsh"),extractedFolderName:""}}function Hb(e,t,r){switch(e){case"win32":{const n=["ia32","x86","i386","x32"].includes(t)?"win-x86":"win-x64";return`https://github.com/PowerShell/PowerShell/releases/download/v${r}/PowerShell-${r}-${n}.zip`}case"darwin":{const n=["arm","arm64"].includes(t)?"osx-arm64":"osx-x64";return`https://github.com/PowerShell/PowerShell/releases/download/v${r}/powershell-${r}-${n}.tar.gz`}case"linux":{const i={arm64:"linux-arm64",arm:"linux-arm64",arm32:"linux-arm32",aarch64:"linux-arm64",x64:"linux-x64"}[t]??"linux-x64";return`https://github.com/PowerShell/PowerShell/releases/download/v${r}/powershell-${r}-${i}.tar.gz`}default:throw new Error(`Unsupported platform '${e}'`)}}async function ap({version:e,setupDir:t,arch:r}){try{return await Oe()?up({version:e}):await vt("pwsh",e,Bb,t,r)}catch(n){return Ne(`Failed to setup pwsh via download: ${n}. Trying package managers...`),up({version:e})}}async function up({version:e}={}){switch(process.platform){case"win32":{await xe("powershell-core",e);const t="C:/Program Files/PowerShell/7";return await be(t,ne),{binDir:t}}case"darwin":return Ge("powershell",e,{cask:!0,overwrite:!1});case"linux":{if(Pe())return ge("powershell-bin",e,"yay");if(Ce())return await Le([{name:"curl"}]),pe("/bin/bash",["-c","curl https://packages.microsoft.com/config/rhel/8/prod.repo | sudo tee /etc/yum.repos.d/microsoft.repo"]),Le([{name:"powershell",version:e}]);if(me()){await de([{name:"curl"}]);const t=await jt(),r=`${t[0]}.0${t[1]}`;return pe("curl",["-LJO",`https://packages.microsoft.com/config/ubuntu/${r}/packages-microsoft-prod.deb`]),pe("dpkg",["-i","packages-microsoft-prod.deb"]),de([{name:"powershell",version:e}],!0)}else if(await Oe())return Fe([{name:"powershell",version:void 0}]);throw new Error("Unsupported linux distribution")}default:throw new Error("Unsupported platform")}}async function zb({version:e}={}){switch(process.platform){case"win32":return xe("sccache",e);case"linux":{if(me()){if((await i_.getUbuntuVersion())[0]>=24)return de([{name:"sccache",version:e}])}else if(await Oe())return Fe([{name:"sccache",version:e}]);return Ge("sccache",e)}case"darwin":return Ge("sccache",e);default:throw new Error("Unsupported platform")}}function Wb(e){return e==="win32"?"windows":e}function Xb(e){switch(e){case"x64":return"amd64";case"ia32":case"x86":case"i386":case"x32":return"386";default:return e}}function Kb(e,t,r){const n=Wb(t),i=Xb(r),a=t==="win32"?"zip":"tar.gz";return{binRelativeDir:"",binFileName:we("task"),extractedFolderName:"",url:`https://github.com/go-task/task/releases/download/v${e}/task_${n}_${i}.${a}`}}function Yb({version:e,setupDir:t,arch:r}){return vt("task",e,Kb,t,r)}let cp=!1;async function Jb({version:e,setupDir:t,arch:r}){const n=await fe("vcpkg",{nothrow:!0});if(cp&&n!==null)return{binDir:Re(n)};if(await l_(),process.platform==="linux"){if(Pe())await Promise.all([ge("curl"),ge("zip"),ge("unzip"),ge("tar"),ge("pkg-config")]);else if(Ce())await Le([{name:"curl"},{name:"zip"},{name:"unzip"},{name:"tar"},{name:"pkg-config"}]);else if(me())await de([{name:"curl"},{name:"zip"},{name:"unzip"},{name:"tar"},{name:"pkg-config"}]);else if(await Oe()){const i=[{name:"curl"},{name:"zip"},{name:"unzip"},{name:"tar"},{name:"pkgconf"}];ct.includes(r)&&i.push({name:"build-base"}),await Fe(i)}}return await _e(Z(t,Ya("bootstrap-vcpkg",".bat")))?Zt(`Vcpkg folder already exists at ${t}. Skipping the clone`):await le("git",["clone","https://github.com/microsoft/vcpkg"],{cwd:Re(t),stdio:"inherit"}),e!==""&&e!=="true"&&(Y(`Checking out vcpkg version ${e}`),await le("git",["checkout",e],{cwd:t,stdio:"inherit"})),process.platform==="linux"&&ct.includes(r)&&await Ie("VCPKG_FORCE_SYSTEM_BINARIES","1",ne),await le(Ya(lm("bootstrap-vcpkg"),".bat"),{cwd:t,shell:!0,stdio:"inherit"}),await Rr(t),await be(t,ne),cp=!0,{binDir:t}}const h_={llvm:yn,clang:yn,"clang++":yn},p_={gcc:In,"g++":In},m_={mingw:Du},__={msvc:Fr,cl:Fr,msbuild:Fr,visualstudio:Fr},y_={appleclang:Dr,applellvm:Dr,"apple-clang":Dr,"apple-llvm":Dr},Qb={cmakelang:Lr,"cmake-lint":Lr,"cmake-format":Lr,cmakelint:Lr,cmakeformat:Lr},v_=["llvm","clang","clang++","clang-tidy","clang-format","clangtidy","clangformat"],w_={"apt-fast":qd,aptfast:qd,nala:RS,git:l_,brew:bu,choco:Hm,python:n_,powershell:ap,pwsh:ap,...h_,...p_,...m_,...__,...y_,...Qb,cmake:c_,ninja:f_,vcpkg:Jb,bazel:A0,conan:x0,meson:qb,gcovr:b0,opencppcoverage:op,OpenCppCoverage:op,ccache:N0,sccache:zb,doxygen:H0,graphviz:_n,cppcheck:D0,cpplint:q0,flawfinder:X0,lizard:ub,infer:Q0,"clang-tidy":ip,clangtidy:ip,"clang-format":np,clangformat:np,vcvarsall:Uu,kcov:ab,make:Fb,task:Yb,sevenzip:dn,"7zip":dn,"7z":dn,tar:Km},g_=Object.keys(w_),lp=["compiler","architecture","timeout",...g_],E_=3600*1e3;async function Zb(e,t,r,n,i,a,s,l=E_){Ee.startGroup(`Installing ${e} ${t}`);try{await e$(e,t,r,n,i,a)}catch(c){Ne(c),c instanceof Error&&c.stack!==void 0&&Ne(c.stack),s.push(`${e} failed to install`)}Ee.endGroup()}async function e$(e,t,r,n,i,a){const s=v_.includes(e);let l;if(e==="vcvarsall")await Uu({version:nt(e,t,r),arch:n,uwp:!1,spectre:!1});else if(e==="brew")l=await bu({rcOptions:ne});else{const c=Z(i,s?"llvm":e),u=nt(e,t,r),o=w_[e];l=await o({version:u,setupDir:c,arch:n})}a.push(S_(e,l))}function S_(e,t){let r=`✅ ${e} was installed successfully:`;return t===void 0||("installDir"in t&&(r+=`
- The installation directory is ${t.installDir}`),t.binDir!==""&&(r+=`
- The binary directory is ${t.binDir}`)),r}const t$=/[.-]((?:\d{4}|\d+(?:\.\d+)*(?:-[\w.-]+)?(?:\+[\w.-]+)?)$)/;function r$(e){try{const t=e.match(t$);if(t===null)return{compiler:e,version:void 0};const r=t[1],n=e.slice(0,t.index).replace(/[.-]$/,"");return!r.match(/^\d{4}$/)&&Hn(r)===null&&Y(`Non-semver version format: ${r}`),{compiler:n,version:r}}catch(t){return Ne(`Failed to parse the compiler info ${e}: ${t}`),{compiler:e,version:void 0}}}async function n$(e,t,r,n,i,a,s){let l;try{if(Ee.startGroup(`Installing ${e} ${t??""}`),e in h_)l=await yn({version:nt("llvm",t,r),setupDir:Z(n,"llvm"),arch:i}),await $0();else if(e in p_){const c=nt("gcc",t,r);l=await In({version:c,setupDir:Z(n,"gcc"),arch:i}),await ep(c)}else if(e in m_){const c=nt("mingw",t,r);l=await Du({version:c,setupDir:Z(n,"gcc"),arch:i}),await ep(c)}else e in __?l=await Fr({version:nt("msvc",t,r),setupDir:Z(n,"msvc"),arch:i}):e in y_?await Dr():(l=null,s.push(`Unsupported compiler ${e}`))}catch(c){Ne(c),c instanceof Error&&Ne(c.stack??""),s.push(`Failed to install the ${e} compiler ${t}`)}l!==null&&a.push(S_(e,l)),Ee.endGroup()}async function i$(e,t="npm"){try{return await fe("setup-cpp",{nothrow:!0})!==null?`setup-cpp@${e} already installed`:(Y(`Installing setup-cpp@${e} via ${t}...`),await le(t,["install","-g",`setup-cpp@${e}`],{stdio:"inherit",timeout:1e3*60*1}),`setup-cpp@${e} installed successfully`)}catch(r){return new Error(`Failed to install the setup-cpp@${e} CLI: ${r}. Ignoring...`)}}async function s$(e={}){const t=e.architecture??process.arch,r=process.env.SETUP_CPP_DIR??rt("~"),n=[],i=[],a=Ed.create({autoloadLocales:!0});Ed.addLocale(xE),bE.addLocale(IE);let s,l;const c=await jt(),u=e.compiler!==void 0?r$(e.compiler):void 0;if(!KR(e,[...v_,"compiler"],u))return{successMessages:[],errorMessages:["The same version must be used for llvm, clang-format and clang-tidy"]};Pe()&&typeof e.cppcheck=="string"&&typeof e.gcovr=="string"&&(Y("installing python-pygments to avoid conflicts with cppcheck and gcovr on Arch linux"),await ge("python-pygments"));const o=g_.filter(R=>{const p=e[R];return p!==void 0&&p!=="false"}),m=e["setup-cpp"]===void 0||e["setup-cpp"]?i$(cu.version,e["node-package-manager"]):Promise.resolve(void 0);let _=!1;for(const R of o){const p=e[R],h=e.timeout!==void 0?Number.parseFloat(e.timeout)*60*1e3:void 0;if(s=Date.now(),await Zb(R,p,c,t,r,n,i,h),l=Date.now(),Y(`took ${a.format(s,l)||"0 seconds"}`),i.length!==0&&gn.isCI){_=!0;break}}if(!_&&u!==void 0){const R=Date.now();await n$(u.compiler,u.version,c,r,t,n,i);const p=Date.now();Y(`took ${a.format(R,p)||"0 seconds"}`)}const S=await m;return typeof S=="string"&&n.push(S),await aE(ne),{successMessages:n,errorMessages:i}}async function o$(e){const t=gn.GITHUB_ACTIONS?Promise.resolve():a$(),r=u$(e);if(r.help)return c$(),0;if(r.version)return Y(`${cu.version}`),0;const{successMessages:n,errorMessages:i}=await s$(r);for(const a of n)rv(a);for(const a of i)Ne(a);if((n.length!==0||i.length!==0)&&(Y("setup-cpp finished"),!gn.GITHUB_ACTIONS))switch(process.platform){case"win32":{ye("Run `RefreshEnv.cmd` or restart your shell to update the environment.");break}case"linux":case"darwin":{ye("Run `source ~/.cpprc` or restart your shell to update the environment.");break}}return await t,i.length===0?0:1}async function a$(){try{await Ny({pkg:cu})}catch(e){ye(`Failed to check for updates: ${e instanceof Error?e.message+e.stack:e}`)}}function u$(e){const t=Object.fromEntries(lp.map(r=>[r,Lp(r)]));return ry(e,{string:[...lp,"timeout","node-package-manager"],default:t,alias:{h:"help",v:"version"},boolean:["help","version","setup-cpp"]})}function c$(){Y(`
setup-cpp [options]
setup-cpp --compiler llvm --cmake true --ninja true --ccache true --vcpkg true

Install all the tools required for building and testing C++/C projects.

--architecture	 the cpu architecture to install the tools for. By default it uses the current CPU architecture.
--timeout	 the timeout for the installation of each tool in minutes. By default it is 10 minutes.
--compiler	 the <compiler> to install.
          	 You can specify the version instead of specifying just the name e.g: --compiler 'llvm-13.0.0'
--tool_name	 pass "true" or pass the <version> you would like to install for this tool. e.g. --conan true or --conan "1.42.1"
--nodePackageManager	 the node package manager to use (npm/yarn/pnpm) when installing setup-cpp globally
--help	 show this help message
--version	 show the version of setup-cpp

All the available tools:
`),console.table({"compiler and analyzer":{tools:"--llvm, --gcc, --msvc, --apple-clang, --vcvarsall"},"build system":{tools:"--cmake, --ninja, --meson, --make, --task, --bazel"},"package manager":{tools:"--vcpkg, --conan, --choco, --brew, --apt-fast, --nala, --git, --setup-cpp"},"analyzer/linter":{tools:"--clang-tidy, --clang-format, --cppcheck, --cpplint, --flawfinder, --lizard, --infer, , --cmakelang, --cmake-lint, --cmake-format"},cache:{tools:"--ccache, --sccache"},documentation:{tools:"--doxygen, --graphviz"},coverage:{tools:"--gcovr, --opencppcoverage, --kcov"},other:{tools:"--python, --powershell, --sevenzip, --tar"}},["tools"])}process.env.SETUP_CPP_SKIP_MAIN!=="true"&&o$(process.argv).then(e=>{process.exitCode=e}).catch(e=>{Ne("main() panicked!"),Ne(e),process.exitCode=1});export{Wy as H,Ee as a,At as b,at as c,Iu as e,$e as g,Y as i,_e as p,u$ as parseArgs,Cu as t,ye as w};
//# sourceMappingURL=setup-cpp.mjs.map
