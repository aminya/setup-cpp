"use strict";Object.defineProperty(exports,Symbol.toStringTag,{value:"Module"});const path=require("path"),require$$1=require("url"),setupCpp=require("../setup-cpp.js"),fs=require("fs"),require$$0=require("stream"),os=require("os");require("process");require("https");require("perf_hooks");require("http");require("net");require("tls");require("events");require("util");require("string_decoder");require("child_process");require("assert");require("timers");require("buffer");require("constants");require("console");var _documentCurrentScript=typeof document<"u"?document.currentScript:null;function _interopNamespaceDefault(e){const t=Object.create(null,{[Symbol.toStringTag]:{value:"Module"}});if(e){for(const s in e)if(s!=="default"){const r=Object.getOwnPropertyDescriptor(e,s);Object.defineProperty(t,s,r.get?r:{enumerable:!0,get:()=>e[s]})}}return t.default=e,Object.freeze(t)}const path__namespace=_interopNamespaceDefault(path),os__namespace=_interopNamespaceDefault(os);var re={exports:{}},constants,hasRequiredConstants;function requireConstants(){if(hasRequiredConstants)return constants;hasRequiredConstants=1;const e="2.0.0",t=256,s=Number.MAX_SAFE_INTEGER||9007199254740991,r=16,i=t-6;return constants={MAX_LENGTH:t,MAX_SAFE_COMPONENT_LENGTH:r,MAX_SAFE_BUILD_LENGTH:i,MAX_SAFE_INTEGER:s,RELEASE_TYPES:["major","premajor","minor","preminor","patch","prepatch","prerelease"],SEMVER_SPEC_VERSION:e,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2},constants}var debug_1,hasRequiredDebug;function requireDebug(){return hasRequiredDebug||(hasRequiredDebug=1,debug_1=typeof process=="object"&&process.env&&process.env.NODE_DEBUG&&/\bsemver\b/i.test(process.env.NODE_DEBUG)?(...t)=>console.error("SEMVER",...t):()=>{}),debug_1}var hasRequiredRe;function requireRe(){return hasRequiredRe||(hasRequiredRe=1,(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:s,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=requireConstants(),a=requireDebug();t=e.exports={};const o=t.re=[],c=t.safeRe=[],h=t.src=[],u=t.safeSrc=[],n=t.t={};let l=0;const f="[a-zA-Z0-9-]",m=[["\\s",1],["\\d",i],[f,r]],A=I=>{for(const[P,H]of m)I=I.split(`${P}*`).join(`${P}{0,${H}}`).split(`${P}+`).join(`${P}{1,${H}}`);return I},d=(I,P,H)=>{const O=A(P),M=l++;a(I,M,P),n[I]=M,h[M]=P,u[M]=O,o[M]=new RegExp(P,H?"g":void 0),c[M]=new RegExp(O,H?"g":void 0)};d("NUMERICIDENTIFIER","0|[1-9]\\d*"),d("NUMERICIDENTIFIERLOOSE","\\d+"),d("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),d("MAINVERSION",`(${h[n.NUMERICIDENTIFIER]})\\.(${h[n.NUMERICIDENTIFIER]})\\.(${h[n.NUMERICIDENTIFIER]})`),d("MAINVERSIONLOOSE",`(${h[n.NUMERICIDENTIFIERLOOSE]})\\.(${h[n.NUMERICIDENTIFIERLOOSE]})\\.(${h[n.NUMERICIDENTIFIERLOOSE]})`),d("PRERELEASEIDENTIFIER",`(?:${h[n.NONNUMERICIDENTIFIER]}|${h[n.NUMERICIDENTIFIER]})`),d("PRERELEASEIDENTIFIERLOOSE",`(?:${h[n.NONNUMERICIDENTIFIER]}|${h[n.NUMERICIDENTIFIERLOOSE]})`),d("PRERELEASE",`(?:-(${h[n.PRERELEASEIDENTIFIER]}(?:\\.${h[n.PRERELEASEIDENTIFIER]})*))`),d("PRERELEASELOOSE",`(?:-?(${h[n.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${h[n.PRERELEASEIDENTIFIERLOOSE]})*))`),d("BUILDIDENTIFIER",`${f}+`),d("BUILD",`(?:\\+(${h[n.BUILDIDENTIFIER]}(?:\\.${h[n.BUILDIDENTIFIER]})*))`),d("FULLPLAIN",`v?${h[n.MAINVERSION]}${h[n.PRERELEASE]}?${h[n.BUILD]}?`),d("FULL",`^${h[n.FULLPLAIN]}$`),d("LOOSEPLAIN",`[v=\\s]*${h[n.MAINVERSIONLOOSE]}${h[n.PRERELEASELOOSE]}?${h[n.BUILD]}?`),d("LOOSE",`^${h[n.LOOSEPLAIN]}$`),d("GTLT","((?:<|>)?=?)"),d("XRANGEIDENTIFIERLOOSE",`${h[n.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),d("XRANGEIDENTIFIER",`${h[n.NUMERICIDENTIFIER]}|x|X|\\*`),d("XRANGEPLAIN",`[v=\\s]*(${h[n.XRANGEIDENTIFIER]})(?:\\.(${h[n.XRANGEIDENTIFIER]})(?:\\.(${h[n.XRANGEIDENTIFIER]})(?:${h[n.PRERELEASE]})?${h[n.BUILD]}?)?)?`),d("XRANGEPLAINLOOSE",`[v=\\s]*(${h[n.XRANGEIDENTIFIERLOOSE]})(?:\\.(${h[n.XRANGEIDENTIFIERLOOSE]})(?:\\.(${h[n.XRANGEIDENTIFIERLOOSE]})(?:${h[n.PRERELEASELOOSE]})?${h[n.BUILD]}?)?)?`),d("XRANGE",`^${h[n.GTLT]}\\s*${h[n.XRANGEPLAIN]}$`),d("XRANGELOOSE",`^${h[n.GTLT]}\\s*${h[n.XRANGEPLAINLOOSE]}$`),d("COERCEPLAIN",`(^|[^\\d])(\\d{1,${s}})(?:\\.(\\d{1,${s}}))?(?:\\.(\\d{1,${s}}))?`),d("COERCE",`${h[n.COERCEPLAIN]}(?:$|[^\\d])`),d("COERCEFULL",h[n.COERCEPLAIN]+`(?:${h[n.PRERELEASE]})?(?:${h[n.BUILD]})?(?:$|[^\\d])`),d("COERCERTL",h[n.COERCE],!0),d("COERCERTLFULL",h[n.COERCEFULL],!0),d("LONETILDE","(?:~>?)"),d("TILDETRIM",`(\\s*)${h[n.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",d("TILDE",`^${h[n.LONETILDE]}${h[n.XRANGEPLAIN]}$`),d("TILDELOOSE",`^${h[n.LONETILDE]}${h[n.XRANGEPLAINLOOSE]}$`),d("LONECARET","(?:\\^)"),d("CARETTRIM",`(\\s*)${h[n.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",d("CARET",`^${h[n.LONECARET]}${h[n.XRANGEPLAIN]}$`),d("CARETLOOSE",`^${h[n.LONECARET]}${h[n.XRANGEPLAINLOOSE]}$`),d("COMPARATORLOOSE",`^${h[n.GTLT]}\\s*(${h[n.LOOSEPLAIN]})$|^$`),d("COMPARATOR",`^${h[n.GTLT]}\\s*(${h[n.FULLPLAIN]})$|^$`),d("COMPARATORTRIM",`(\\s*)${h[n.GTLT]}\\s*(${h[n.LOOSEPLAIN]}|${h[n.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",d("HYPHENRANGE",`^\\s*(${h[n.XRANGEPLAIN]})\\s+-\\s+(${h[n.XRANGEPLAIN]})\\s*$`),d("HYPHENRANGELOOSE",`^\\s*(${h[n.XRANGEPLAINLOOSE]})\\s+-\\s+(${h[n.XRANGEPLAINLOOSE]})\\s*$`),d("STAR","(<|>)?=?\\s*\\*"),d("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),d("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(re,re.exports)),re.exports}var parseOptions_1,hasRequiredParseOptions;function requireParseOptions(){if(hasRequiredParseOptions)return parseOptions_1;hasRequiredParseOptions=1;const e=Object.freeze({loose:!0}),t=Object.freeze({});return parseOptions_1=r=>r?typeof r!="object"?e:r:t,parseOptions_1}var identifiers,hasRequiredIdentifiers;function requireIdentifiers(){if(hasRequiredIdentifiers)return identifiers;hasRequiredIdentifiers=1;const e=/^[0-9]+$/,t=(r,i)=>{const a=e.test(r),o=e.test(i);return a&&o&&(r=+r,i=+i),r===i?0:a&&!o?-1:o&&!a?1:r<i?-1:1};return identifiers={compareIdentifiers:t,rcompareIdentifiers:(r,i)=>t(i,r)},identifiers}var semver$1,hasRequiredSemver$1;function requireSemver$1(){if(hasRequiredSemver$1)return semver$1;hasRequiredSemver$1=1;const e=requireDebug(),{MAX_LENGTH:t,MAX_SAFE_INTEGER:s}=requireConstants(),{safeRe:r,t:i}=requireRe(),a=requireParseOptions(),{compareIdentifiers:o}=requireIdentifiers();class c{constructor(u,n){if(n=a(n),u instanceof c){if(u.loose===!!n.loose&&u.includePrerelease===!!n.includePrerelease)return u;u=u.version}else if(typeof u!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof u}".`);if(u.length>t)throw new TypeError(`version is longer than ${t} characters`);e("SemVer",u,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const l=u.trim().match(n.loose?r[i.LOOSE]:r[i.FULL]);if(!l)throw new TypeError(`Invalid Version: ${u}`);if(this.raw=u,this.major=+l[1],this.minor=+l[2],this.patch=+l[3],this.major>s||this.major<0)throw new TypeError("Invalid major version");if(this.minor>s||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>s||this.patch<0)throw new TypeError("Invalid patch version");l[4]?this.prerelease=l[4].split(".").map(f=>{if(/^[0-9]+$/.test(f)){const m=+f;if(m>=0&&m<s)return m}return f}):this.prerelease=[],this.build=l[5]?l[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(u){if(e("SemVer.compare",this.version,this.options,u),!(u instanceof c)){if(typeof u=="string"&&u===this.version)return 0;u=new c(u,this.options)}return u.version===this.version?0:this.compareMain(u)||this.comparePre(u)}compareMain(u){return u instanceof c||(u=new c(u,this.options)),o(this.major,u.major)||o(this.minor,u.minor)||o(this.patch,u.patch)}comparePre(u){if(u instanceof c||(u=new c(u,this.options)),this.prerelease.length&&!u.prerelease.length)return-1;if(!this.prerelease.length&&u.prerelease.length)return 1;if(!this.prerelease.length&&!u.prerelease.length)return 0;let n=0;do{const l=this.prerelease[n],f=u.prerelease[n];if(e("prerelease compare",n,l,f),l===void 0&&f===void 0)return 0;if(f===void 0)return 1;if(l===void 0)return-1;if(l===f)continue;return o(l,f)}while(++n)}compareBuild(u){u instanceof c||(u=new c(u,this.options));let n=0;do{const l=this.build[n],f=u.build[n];if(e("build compare",n,l,f),l===void 0&&f===void 0)return 0;if(f===void 0)return 1;if(l===void 0)return-1;if(l===f)continue;return o(l,f)}while(++n)}inc(u,n,l){if(u.startsWith("pre")){if(!n&&l===!1)throw new Error("invalid increment argument: identifier is empty");if(n){const f=`-${n}`.match(this.options.loose?r[i.PRERELEASELOOSE]:r[i.PRERELEASE]);if(!f||f[1]!==n)throw new Error(`invalid identifier: ${n}`)}}switch(u){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,l);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,l);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,l),this.inc("pre",n,l);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,l),this.inc("pre",n,l);break;case"release":if(this.prerelease.length===0)throw new Error(`version ${this.raw} is not a prerelease`);this.prerelease.length=0;break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const f=Number(l)?1:0;if(this.prerelease.length===0)this.prerelease=[f];else{let m=this.prerelease.length;for(;--m>=0;)typeof this.prerelease[m]=="number"&&(this.prerelease[m]++,m=-2);if(m===-1){if(n===this.prerelease.join(".")&&l===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(f)}}if(n){let m=[n,f];l===!1&&(m=[n]),o(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=m):this.prerelease=m}break}default:throw new Error(`invalid increment argument: ${u}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}}return semver$1=c,semver$1}var parse_1,hasRequiredParse$1;function requireParse$1(){if(hasRequiredParse$1)return parse_1;hasRequiredParse$1=1;const e=requireSemver$1();return parse_1=(s,r,i=!1)=>{if(s instanceof e)return s;try{return new e(s,r)}catch(a){if(!i)return null;throw a}},parse_1}var valid_1,hasRequiredValid$1;function requireValid$1(){if(hasRequiredValid$1)return valid_1;hasRequiredValid$1=1;const e=requireParse$1();return valid_1=(s,r)=>{const i=e(s,r);return i?i.version:null},valid_1}var clean_1,hasRequiredClean;function requireClean(){if(hasRequiredClean)return clean_1;hasRequiredClean=1;const e=requireParse$1();return clean_1=(s,r)=>{const i=e(s.trim().replace(/^[=v]+/,""),r);return i?i.version:null},clean_1}var inc_1,hasRequiredInc;function requireInc(){if(hasRequiredInc)return inc_1;hasRequiredInc=1;const e=requireSemver$1();return inc_1=(s,r,i,a,o)=>{typeof i=="string"&&(o=a,a=i,i=void 0);try{return new e(s instanceof e?s.version:s,i).inc(r,a,o).version}catch{return null}},inc_1}var diff_1,hasRequiredDiff;function requireDiff(){if(hasRequiredDiff)return diff_1;hasRequiredDiff=1;const e=requireParse$1();return diff_1=(s,r)=>{const i=e(s,null,!0),a=e(r,null,!0),o=i.compare(a);if(o===0)return null;const c=o>0,h=c?i:a,u=c?a:i,n=!!h.prerelease.length;if(!!u.prerelease.length&&!n){if(!u.patch&&!u.minor)return"major";if(u.compareMain(h)===0)return u.minor&&!u.patch?"minor":"patch"}const f=n?"pre":"";return i.major!==a.major?f+"major":i.minor!==a.minor?f+"minor":i.patch!==a.patch?f+"patch":"prerelease"},diff_1}var major_1,hasRequiredMajor;function requireMajor(){if(hasRequiredMajor)return major_1;hasRequiredMajor=1;const e=requireSemver$1();return major_1=(s,r)=>new e(s,r).major,major_1}var minor_1,hasRequiredMinor;function requireMinor(){if(hasRequiredMinor)return minor_1;hasRequiredMinor=1;const e=requireSemver$1();return minor_1=(s,r)=>new e(s,r).minor,minor_1}var patch_1,hasRequiredPatch;function requirePatch(){if(hasRequiredPatch)return patch_1;hasRequiredPatch=1;const e=requireSemver$1();return patch_1=(s,r)=>new e(s,r).patch,patch_1}var prerelease_1,hasRequiredPrerelease;function requirePrerelease(){if(hasRequiredPrerelease)return prerelease_1;hasRequiredPrerelease=1;const e=requireParse$1();return prerelease_1=(s,r)=>{const i=e(s,r);return i&&i.prerelease.length?i.prerelease:null},prerelease_1}var compare_1,hasRequiredCompare;function requireCompare(){if(hasRequiredCompare)return compare_1;hasRequiredCompare=1;const e=requireSemver$1();return compare_1=(s,r,i)=>new e(s,i).compare(new e(r,i)),compare_1}var rcompare_1,hasRequiredRcompare;function requireRcompare(){if(hasRequiredRcompare)return rcompare_1;hasRequiredRcompare=1;const e=requireCompare();return rcompare_1=(s,r,i)=>e(r,s,i),rcompare_1}var compareLoose_1,hasRequiredCompareLoose;function requireCompareLoose(){if(hasRequiredCompareLoose)return compareLoose_1;hasRequiredCompareLoose=1;const e=requireCompare();return compareLoose_1=(s,r)=>e(s,r,!0),compareLoose_1}var compareBuild_1,hasRequiredCompareBuild;function requireCompareBuild(){if(hasRequiredCompareBuild)return compareBuild_1;hasRequiredCompareBuild=1;const e=requireSemver$1();return compareBuild_1=(s,r,i)=>{const a=new e(s,i),o=new e(r,i);return a.compare(o)||a.compareBuild(o)},compareBuild_1}var sort_1,hasRequiredSort;function requireSort(){if(hasRequiredSort)return sort_1;hasRequiredSort=1;const e=requireCompareBuild();return sort_1=(s,r)=>s.sort((i,a)=>e(i,a,r)),sort_1}var rsort_1,hasRequiredRsort;function requireRsort(){if(hasRequiredRsort)return rsort_1;hasRequiredRsort=1;const e=requireCompareBuild();return rsort_1=(s,r)=>s.sort((i,a)=>e(a,i,r)),rsort_1}var gt_1,hasRequiredGt;function requireGt(){if(hasRequiredGt)return gt_1;hasRequiredGt=1;const e=requireCompare();return gt_1=(s,r,i)=>e(s,r,i)>0,gt_1}var lt_1,hasRequiredLt;function requireLt(){if(hasRequiredLt)return lt_1;hasRequiredLt=1;const e=requireCompare();return lt_1=(s,r,i)=>e(s,r,i)<0,lt_1}var eq_1,hasRequiredEq;function requireEq(){if(hasRequiredEq)return eq_1;hasRequiredEq=1;const e=requireCompare();return eq_1=(s,r,i)=>e(s,r,i)===0,eq_1}var neq_1,hasRequiredNeq;function requireNeq(){if(hasRequiredNeq)return neq_1;hasRequiredNeq=1;const e=requireCompare();return neq_1=(s,r,i)=>e(s,r,i)!==0,neq_1}var gte_1,hasRequiredGte;function requireGte(){if(hasRequiredGte)return gte_1;hasRequiredGte=1;const e=requireCompare();return gte_1=(s,r,i)=>e(s,r,i)>=0,gte_1}var lte_1,hasRequiredLte;function requireLte(){if(hasRequiredLte)return lte_1;hasRequiredLte=1;const e=requireCompare();return lte_1=(s,r,i)=>e(s,r,i)<=0,lte_1}var cmp_1,hasRequiredCmp;function requireCmp(){if(hasRequiredCmp)return cmp_1;hasRequiredCmp=1;const e=requireEq(),t=requireNeq(),s=requireGt(),r=requireGte(),i=requireLt(),a=requireLte();return cmp_1=(c,h,u,n)=>{switch(h){case"===":return typeof c=="object"&&(c=c.version),typeof u=="object"&&(u=u.version),c===u;case"!==":return typeof c=="object"&&(c=c.version),typeof u=="object"&&(u=u.version),c!==u;case"":case"=":case"==":return e(c,u,n);case"!=":return t(c,u,n);case">":return s(c,u,n);case">=":return r(c,u,n);case"<":return i(c,u,n);case"<=":return a(c,u,n);default:throw new TypeError(`Invalid operator: ${h}`)}},cmp_1}var coerce_1,hasRequiredCoerce;function requireCoerce(){if(hasRequiredCoerce)return coerce_1;hasRequiredCoerce=1;const e=requireSemver$1(),t=requireParse$1(),{safeRe:s,t:r}=requireRe();return coerce_1=(a,o)=>{if(a instanceof e)return a;if(typeof a=="number"&&(a=String(a)),typeof a!="string")return null;o=o||{};let c=null;if(!o.rtl)c=a.match(o.includePrerelease?s[r.COERCEFULL]:s[r.COERCE]);else{const m=o.includePrerelease?s[r.COERCERTLFULL]:s[r.COERCERTL];let A;for(;(A=m.exec(a))&&(!c||c.index+c[0].length!==a.length);)(!c||A.index+A[0].length!==c.index+c[0].length)&&(c=A),m.lastIndex=A.index+A[1].length+A[2].length;m.lastIndex=-1}if(c===null)return null;const h=c[2],u=c[3]||"0",n=c[4]||"0",l=o.includePrerelease&&c[5]?`-${c[5]}`:"",f=o.includePrerelease&&c[6]?`+${c[6]}`:"";return t(`${h}.${u}.${n}${l}${f}`,o)},coerce_1}var lrucache,hasRequiredLrucache;function requireLrucache(){if(hasRequiredLrucache)return lrucache;hasRequiredLrucache=1;class e{constructor(){this.max=1e3,this.map=new Map}get(s){const r=this.map.get(s);if(r!==void 0)return this.map.delete(s),this.map.set(s,r),r}delete(s){return this.map.delete(s)}set(s,r){if(!this.delete(s)&&r!==void 0){if(this.map.size>=this.max){const a=this.map.keys().next().value;this.delete(a)}this.map.set(s,r)}return this}}return lrucache=e,lrucache}var range,hasRequiredRange;function requireRange(){if(hasRequiredRange)return range;hasRequiredRange=1;const e=/\s+/g;class t{constructor(R,T){if(T=i(T),R instanceof t)return R.loose===!!T.loose&&R.includePrerelease===!!T.includePrerelease?R:new t(R.raw,T);if(R instanceof a)return this.raw=R.value,this.set=[[R]],this.formatted=void 0,this;if(this.options=T,this.loose=!!T.loose,this.includePrerelease=!!T.includePrerelease,this.raw=R.trim().replace(e," "),this.set=this.raw.split("||").map(_=>this.parseRange(_.trim())).filter(_=>_.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const _=this.set[0];if(this.set=this.set.filter(y=>!d(y[0])),this.set.length===0)this.set=[_];else if(this.set.length>1){for(const y of this.set)if(y.length===1&&I(y[0])){this.set=[y];break}}}this.formatted=void 0}get range(){if(this.formatted===void 0){this.formatted="";for(let R=0;R<this.set.length;R++){R>0&&(this.formatted+="||");const T=this.set[R];for(let _=0;_<T.length;_++)_>0&&(this.formatted+=" "),this.formatted+=T[_].toString().trim()}}return this.formatted}format(){return this.range}toString(){return this.range}parseRange(R){const _=((this.options.includePrerelease&&m)|(this.options.loose&&A))+":"+R,y=r.get(_);if(y)return y;const g=this.options.loose,x=g?h[u.HYPHENRANGELOOSE]:h[u.HYPHENRANGE];R=R.replace(x,v(this.options.includePrerelease)),o("hyphen replace",R),R=R.replace(h[u.COMPARATORTRIM],n),o("comparator trim",R),R=R.replace(h[u.TILDETRIM],l),o("tilde trim",R),R=R.replace(h[u.CARETTRIM],f),o("caret trim",R);let L=R.split(" ").map(D=>H(D,this.options)).join(" ").split(/\s+/).map(D=>S(D,this.options));g&&(L=L.filter(D=>(o("loose invalid filter",D,this.options),!!D.match(h[u.COMPARATORLOOSE])))),o("range list",L);const N=new Map,$=L.map(D=>new a(D,this.options));for(const D of $){if(d(D))return[D];N.set(D.value,D)}N.size>1&&N.has("")&&N.delete("");const V=[...N.values()];return r.set(_,V),V}intersects(R,T){if(!(R instanceof t))throw new TypeError("a Range is required");return this.set.some(_=>P(_,T)&&R.set.some(y=>P(y,T)&&_.every(g=>y.every(x=>g.intersects(x,T)))))}test(R){if(!R)return!1;if(typeof R=="string")try{R=new c(R,this.options)}catch{return!1}for(let T=0;T<this.set.length;T++)if(U(this.set[T],R,this.options))return!0;return!1}}range=t;const s=requireLrucache(),r=new s,i=requireParseOptions(),a=requireComparator(),o=requireDebug(),c=requireSemver$1(),{safeRe:h,t:u,comparatorTrimReplace:n,tildeTrimReplace:l,caretTrimReplace:f}=requireRe(),{FLAG_INCLUDE_PRERELEASE:m,FLAG_LOOSE:A}=requireConstants(),d=E=>E.value==="<0.0.0-0",I=E=>E.value==="",P=(E,R)=>{let T=!0;const _=E.slice();let y=_.pop();for(;T&&_.length;)T=_.every(g=>y.intersects(g,R)),y=_.pop();return T},H=(E,R)=>(o("comp",E,R),E=q(E,R),o("caret",E),E=M(E,R),o("tildes",E),E=w(E,R),o("xrange",E),E=C(E,R),o("stars",E),E),O=E=>!E||E.toLowerCase()==="x"||E==="*",M=(E,R)=>E.trim().split(/\s+/).map(T=>F(T,R)).join(" "),F=(E,R)=>{const T=R.loose?h[u.TILDELOOSE]:h[u.TILDE];return E.replace(T,(_,y,g,x,L)=>{o("tilde",E,_,y,g,x,L);let N;return O(y)?N="":O(g)?N=`>=${y}.0.0 <${+y+1}.0.0-0`:O(x)?N=`>=${y}.${g}.0 <${y}.${+g+1}.0-0`:L?(o("replaceTilde pr",L),N=`>=${y}.${g}.${x}-${L} <${y}.${+g+1}.0-0`):N=`>=${y}.${g}.${x} <${y}.${+g+1}.0-0`,o("tilde return",N),N})},q=(E,R)=>E.trim().split(/\s+/).map(T=>b(T,R)).join(" "),b=(E,R)=>{o("caret",E,R);const T=R.loose?h[u.CARETLOOSE]:h[u.CARET],_=R.includePrerelease?"-0":"";return E.replace(T,(y,g,x,L,N)=>{o("caret",E,y,g,x,L,N);let $;return O(g)?$="":O(x)?$=`>=${g}.0.0${_} <${+g+1}.0.0-0`:O(L)?g==="0"?$=`>=${g}.${x}.0${_} <${g}.${+x+1}.0-0`:$=`>=${g}.${x}.0${_} <${+g+1}.0.0-0`:N?(o("replaceCaret pr",N),g==="0"?x==="0"?$=`>=${g}.${x}.${L}-${N} <${g}.${x}.${+L+1}-0`:$=`>=${g}.${x}.${L}-${N} <${g}.${+x+1}.0-0`:$=`>=${g}.${x}.${L}-${N} <${+g+1}.0.0-0`):(o("no pr"),g==="0"?x==="0"?$=`>=${g}.${x}.${L}${_} <${g}.${x}.${+L+1}-0`:$=`>=${g}.${x}.${L}${_} <${g}.${+x+1}.0-0`:$=`>=${g}.${x}.${L} <${+g+1}.0.0-0`),o("caret return",$),$})},w=(E,R)=>(o("replaceXRanges",E,R),E.split(/\s+/).map(T=>p(T,R)).join(" ")),p=(E,R)=>{E=E.trim();const T=R.loose?h[u.XRANGELOOSE]:h[u.XRANGE];return E.replace(T,(_,y,g,x,L,N)=>{o("xRange",E,_,y,g,x,L,N);const $=O(g),V=$||O(x),D=V||O(L),B=D;return y==="="&&B&&(y=""),N=R.includePrerelease?"-0":"",$?y===">"||y==="<"?_="<0.0.0-0":_="*":y&&B?(V&&(x=0),L=0,y===">"?(y=">=",V?(g=+g+1,x=0,L=0):(x=+x+1,L=0)):y==="<="&&(y="<",V?g=+g+1:x=+x+1),y==="<"&&(N="-0"),_=`${y+g}.${x}.${L}${N}`):V?_=`>=${g}.0.0${N} <${+g+1}.0.0-0`:D&&(_=`>=${g}.${x}.0${N} <${g}.${+x+1}.0-0`),o("xRange return",_),_})},C=(E,R)=>(o("replaceStars",E,R),E.trim().replace(h[u.STAR],"")),S=(E,R)=>(o("replaceGTE0",E,R),E.trim().replace(h[R.includePrerelease?u.GTE0PRE:u.GTE0],"")),v=E=>(R,T,_,y,g,x,L,N,$,V,D,B)=>(O(_)?T="":O(y)?T=`>=${_}.0.0${E?"-0":""}`:O(g)?T=`>=${_}.${y}.0${E?"-0":""}`:x?T=`>=${T}`:T=`>=${T}${E?"-0":""}`,O($)?N="":O(V)?N=`<${+$+1}.0.0-0`:O(D)?N=`<${$}.${+V+1}.0-0`:B?N=`<=${$}.${V}.${D}-${B}`:E?N=`<${$}.${V}.${+D+1}-0`:N=`<=${N}`,`${T} ${N}`.trim()),U=(E,R,T)=>{for(let _=0;_<E.length;_++)if(!E[_].test(R))return!1;if(R.prerelease.length&&!T.includePrerelease){for(let _=0;_<E.length;_++)if(o(E[_].semver),E[_].semver!==a.ANY&&E[_].semver.prerelease.length>0){const y=E[_].semver;if(y.major===R.major&&y.minor===R.minor&&y.patch===R.patch)return!0}return!1}return!0};return range}var comparator,hasRequiredComparator;function requireComparator(){if(hasRequiredComparator)return comparator;hasRequiredComparator=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(n,l){if(l=s(l),n instanceof t){if(n.loose===!!l.loose)return n;n=n.value}n=n.trim().split(/\s+/).join(" "),o("comparator",n,l),this.options=l,this.loose=!!l.loose,this.parse(n),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(n){const l=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],f=n.match(l);if(!f)throw new TypeError(`Invalid comparator: ${n}`);this.operator=f[1]!==void 0?f[1]:"",this.operator==="="&&(this.operator=""),f[2]?this.semver=new c(f[2],this.options.loose):this.semver=e}toString(){return this.value}test(n){if(o("Comparator.test",n,this.options.loose),this.semver===e||n===e)return!0;if(typeof n=="string")try{n=new c(n,this.options)}catch{return!1}return a(n,this.operator,this.semver,this.options)}intersects(n,l){if(!(n instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new h(n.value,l).test(this.value):n.operator===""?n.value===""?!0:new h(this.value,l).test(n.semver):(l=s(l),l.includePrerelease&&(this.value==="<0.0.0-0"||n.value==="<0.0.0-0")||!l.includePrerelease&&(this.value.startsWith("<0.0.0")||n.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&n.operator.startsWith(">")||this.operator.startsWith("<")&&n.operator.startsWith("<")||this.semver.version===n.semver.version&&this.operator.includes("=")&&n.operator.includes("=")||a(this.semver,"<",n.semver,l)&&this.operator.startsWith(">")&&n.operator.startsWith("<")||a(this.semver,">",n.semver,l)&&this.operator.startsWith("<")&&n.operator.startsWith(">")))}}comparator=t;const s=requireParseOptions(),{safeRe:r,t:i}=requireRe(),a=requireCmp(),o=requireDebug(),c=requireSemver$1(),h=requireRange();return comparator}var satisfies_1,hasRequiredSatisfies;function requireSatisfies(){if(hasRequiredSatisfies)return satisfies_1;hasRequiredSatisfies=1;const e=requireRange();return satisfies_1=(s,r,i)=>{try{r=new e(r,i)}catch{return!1}return r.test(s)},satisfies_1}var toComparators_1,hasRequiredToComparators;function requireToComparators(){if(hasRequiredToComparators)return toComparators_1;hasRequiredToComparators=1;const e=requireRange();return toComparators_1=(s,r)=>new e(s,r).set.map(i=>i.map(a=>a.value).join(" ").trim().split(" ")),toComparators_1}var maxSatisfying_1,hasRequiredMaxSatisfying;function requireMaxSatisfying(){if(hasRequiredMaxSatisfying)return maxSatisfying_1;hasRequiredMaxSatisfying=1;const e=requireSemver$1(),t=requireRange();return maxSatisfying_1=(r,i,a)=>{let o=null,c=null,h=null;try{h=new t(i,a)}catch{return null}return r.forEach(u=>{h.test(u)&&(!o||c.compare(u)===-1)&&(o=u,c=new e(o,a))}),o},maxSatisfying_1}var minSatisfying_1,hasRequiredMinSatisfying;function requireMinSatisfying(){if(hasRequiredMinSatisfying)return minSatisfying_1;hasRequiredMinSatisfying=1;const e=requireSemver$1(),t=requireRange();return minSatisfying_1=(r,i,a)=>{let o=null,c=null,h=null;try{h=new t(i,a)}catch{return null}return r.forEach(u=>{h.test(u)&&(!o||c.compare(u)===1)&&(o=u,c=new e(o,a))}),o},minSatisfying_1}var minVersion_1,hasRequiredMinVersion;function requireMinVersion(){if(hasRequiredMinVersion)return minVersion_1;hasRequiredMinVersion=1;const e=requireSemver$1(),t=requireRange(),s=requireGt();return minVersion_1=(i,a)=>{i=new t(i,a);let o=new e("0.0.0");if(i.test(o)||(o=new e("0.0.0-0"),i.test(o)))return o;o=null;for(let c=0;c<i.set.length;++c){const h=i.set[c];let u=null;h.forEach(n=>{const l=new e(n.semver.version);switch(n.operator){case">":l.prerelease.length===0?l.patch++:l.prerelease.push(0),l.raw=l.format();case"":case">=":(!u||s(l,u))&&(u=l);break;case"<":case"<=":break;default:throw new Error(`Unexpected operation: ${n.operator}`)}}),u&&(!o||s(o,u))&&(o=u)}return o&&i.test(o)?o:null},minVersion_1}var valid,hasRequiredValid;function requireValid(){if(hasRequiredValid)return valid;hasRequiredValid=1;const e=requireRange();return valid=(s,r)=>{try{return new e(s,r).range||"*"}catch{return null}},valid}var outside_1,hasRequiredOutside;function requireOutside(){if(hasRequiredOutside)return outside_1;hasRequiredOutside=1;const e=requireSemver$1(),t=requireComparator(),{ANY:s}=t,r=requireRange(),i=requireSatisfies(),a=requireGt(),o=requireLt(),c=requireLte(),h=requireGte();return outside_1=(n,l,f,m)=>{n=new e(n,m),l=new r(l,m);let A,d,I,P,H;switch(f){case">":A=a,d=c,I=o,P=">",H=">=";break;case"<":A=o,d=h,I=a,P="<",H="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(i(n,l,m))return!1;for(let O=0;O<l.set.length;++O){const M=l.set[O];let F=null,q=null;if(M.forEach(b=>{b.semver===s&&(b=new t(">=0.0.0")),F=F||b,q=q||b,A(b.semver,F.semver,m)?F=b:I(b.semver,q.semver,m)&&(q=b)}),F.operator===P||F.operator===H||(!q.operator||q.operator===P)&&d(n,q.semver))return!1;if(q.operator===H&&I(n,q.semver))return!1}return!0},outside_1}var gtr_1,hasRequiredGtr;function requireGtr(){if(hasRequiredGtr)return gtr_1;hasRequiredGtr=1;const e=requireOutside();return gtr_1=(s,r,i)=>e(s,r,">",i),gtr_1}var ltr_1,hasRequiredLtr;function requireLtr(){if(hasRequiredLtr)return ltr_1;hasRequiredLtr=1;const e=requireOutside();return ltr_1=(s,r,i)=>e(s,r,"<",i),ltr_1}var intersects_1,hasRequiredIntersects;function requireIntersects(){if(hasRequiredIntersects)return intersects_1;hasRequiredIntersects=1;const e=requireRange();return intersects_1=(s,r,i)=>(s=new e(s,i),r=new e(r,i),s.intersects(r,i)),intersects_1}var simplify,hasRequiredSimplify;function requireSimplify(){if(hasRequiredSimplify)return simplify;hasRequiredSimplify=1;const e=requireSatisfies(),t=requireCompare();return simplify=(s,r,i)=>{const a=[];let o=null,c=null;const h=s.sort((f,m)=>t(f,m,i));for(const f of h)e(f,r,i)?(c=f,o||(o=f)):(c&&a.push([o,c]),c=null,o=null);o&&a.push([o,null]);const u=[];for(const[f,m]of a)f===m?u.push(f):!m&&f===h[0]?u.push("*"):m?f===h[0]?u.push(`<=${m}`):u.push(`${f} - ${m}`):u.push(`>=${f}`);const n=u.join(" || "),l=typeof r.raw=="string"?r.raw:String(r);return n.length<l.length?n:r},simplify}var subset_1,hasRequiredSubset;function requireSubset(){if(hasRequiredSubset)return subset_1;hasRequiredSubset=1;const e=requireRange(),t=requireComparator(),{ANY:s}=t,r=requireSatisfies(),i=requireCompare(),a=(l,f,m={})=>{if(l===f)return!0;l=new e(l,m),f=new e(f,m);let A=!1;e:for(const d of l.set){for(const I of f.set){const P=h(d,I,m);if(A=A||P!==null,P)continue e}if(A)return!1}return!0},o=[new t(">=0.0.0-0")],c=[new t(">=0.0.0")],h=(l,f,m)=>{if(l===f)return!0;if(l.length===1&&l[0].semver===s){if(f.length===1&&f[0].semver===s)return!0;m.includePrerelease?l=o:l=c}if(f.length===1&&f[0].semver===s){if(m.includePrerelease)return!0;f=c}const A=new Set;let d,I;for(const w of l)w.operator===">"||w.operator===">="?d=u(d,w,m):w.operator==="<"||w.operator==="<="?I=n(I,w,m):A.add(w.semver);if(A.size>1)return null;let P;if(d&&I){if(P=i(d.semver,I.semver,m),P>0)return null;if(P===0&&(d.operator!==">="||I.operator!=="<="))return null}for(const w of A){if(d&&!r(w,String(d),m)||I&&!r(w,String(I),m))return null;for(const p of f)if(!r(w,String(p),m))return!1;return!0}let H,O,M,F,q=I&&!m.includePrerelease&&I.semver.prerelease.length?I.semver:!1,b=d&&!m.includePrerelease&&d.semver.prerelease.length?d.semver:!1;q&&q.prerelease.length===1&&I.operator==="<"&&q.prerelease[0]===0&&(q=!1);for(const w of f){if(F=F||w.operator===">"||w.operator===">=",M=M||w.operator==="<"||w.operator==="<=",d){if(b&&w.semver.prerelease&&w.semver.prerelease.length&&w.semver.major===b.major&&w.semver.minor===b.minor&&w.semver.patch===b.patch&&(b=!1),w.operator===">"||w.operator===">="){if(H=u(d,w,m),H===w&&H!==d)return!1}else if(d.operator===">="&&!r(d.semver,String(w),m))return!1}if(I){if(q&&w.semver.prerelease&&w.semver.prerelease.length&&w.semver.major===q.major&&w.semver.minor===q.minor&&w.semver.patch===q.patch&&(q=!1),w.operator==="<"||w.operator==="<="){if(O=n(I,w,m),O===w&&O!==I)return!1}else if(I.operator==="<="&&!r(I.semver,String(w),m))return!1}if(!w.operator&&(I||d)&&P!==0)return!1}return!(d&&M&&!I&&P!==0||I&&F&&!d&&P!==0||b||q)},u=(l,f,m)=>{if(!l)return f;const A=i(l.semver,f.semver,m);return A>0?l:A<0||f.operator===">"&&l.operator===">="?f:l},n=(l,f,m)=>{if(!l)return f;const A=i(l.semver,f.semver,m);return A<0?l:A>0||f.operator==="<"&&l.operator==="<="?f:l};return subset_1=a,subset_1}var semver,hasRequiredSemver;function requireSemver(){if(hasRequiredSemver)return semver;hasRequiredSemver=1;const e=requireRe(),t=requireConstants(),s=requireSemver$1(),r=requireIdentifiers(),i=requireParse$1(),a=requireValid$1(),o=requireClean(),c=requireInc(),h=requireDiff(),u=requireMajor(),n=requireMinor(),l=requirePatch(),f=requirePrerelease(),m=requireCompare(),A=requireRcompare(),d=requireCompareLoose(),I=requireCompareBuild(),P=requireSort(),H=requireRsort(),O=requireGt(),M=requireLt(),F=requireEq(),q=requireNeq(),b=requireGte(),w=requireLte(),p=requireCmp(),C=requireCoerce(),S=requireComparator(),v=requireRange(),U=requireSatisfies(),E=requireToComparators(),R=requireMaxSatisfying(),T=requireMinSatisfying(),_=requireMinVersion(),y=requireValid(),g=requireOutside(),x=requireGtr(),L=requireLtr(),N=requireIntersects(),$=requireSimplify(),V=requireSubset();return semver={parse:i,valid:a,clean:o,inc:c,diff:h,major:u,minor:n,patch:l,prerelease:f,compare:m,rcompare:A,compareLoose:d,compareBuild:I,sort:P,rsort:H,gt:O,lt:M,eq:F,neq:q,gte:b,lte:w,cmp:p,coerce:C,Comparator:S,Range:v,satisfies:U,toComparators:E,maxSatisfying:R,minSatisfying:T,minVersion:_,validRange:y,outside:g,gtr:x,ltr:L,intersects:N,simplifyRange:$,subset:V,SemVer:s,re:e.re,src:e.src,tokens:e.t,SEMVER_SPEC_VERSION:t.SEMVER_SPEC_VERSION,RELEASE_TYPES:t.RELEASE_TYPES,compareIdentifiers:r.compareIdentifiers,rcompareIdentifiers:r.rcompareIdentifiers},semver}var semverExports=requireSemver(),toml={},parse={exports:{}},tomlParser={exports:{}},parser,hasRequiredParser;function requireParser(){if(hasRequiredParser)return parser;hasRequiredParser=1;const e=1114112;class t extends Error{constructor(a,o,c){super("[ParserError] "+a,o,c),this.name="ParserError",this.code="ParserError",Error.captureStackTrace&&Error.captureStackTrace(this,t)}}class s{constructor(a){this.parser=a,this.buf="",this.returned=null,this.result=null,this.resultTable=null,this.resultArr=null}}class r{constructor(){this.pos=0,this.col=0,this.line=0,this.obj={},this.ctx=this.obj,this.stack=[],this._buf="",this.char=null,this.ii=0,this.state=new s(this.parseStart)}parse(a){if(a.length===0||a.length==null)return;this._buf=String(a),this.ii=-1,this.char=-1;let o;for(;o===!1||this.nextChar();)o=this.runOne();this._buf=null}nextChar(){return this.char===10&&(++this.line,this.col=-1),++this.ii,this.char=this._buf.codePointAt(this.ii),++this.pos,++this.col,this.haveBuffer()}haveBuffer(){return this.ii<this._buf.length}runOne(){return this.state.parser.call(this,this.state.returned)}finish(){this.char=e;let a;do a=this.state.parser,this.runOne();while(this.state.parser!==a);return this.ctx=null,this.state=null,this._buf=null,this.obj}next(a){if(typeof a!="function")throw new t("Tried to set state to non-existent state: "+JSON.stringify(a));this.state.parser=a}goto(a){return this.next(a),this.runOne()}call(a,o){o&&this.next(o),this.stack.push(this.state),this.state=new s(a)}callNow(a,o){return this.call(a,o),this.runOne()}return(a){if(this.stack.length===0)throw this.error(new t("Stack underflow"));a===void 0&&(a=this.state.buf),this.state=this.stack.pop(),this.state.returned=a}returnNow(a){return this.return(a),this.runOne()}consume(){if(this.char===e)throw this.error(new t("Unexpected end-of-buffer"));this.state.buf+=this._buf[this.ii]}error(a){return a.line=this.line,a.col=this.col,a.pos=this.pos,a}parseStart(){throw new t("Must declare a parseStart method")}}return r.END=e,r.Error=t,parser=r,parser}var createDatetime,hasRequiredCreateDatetime;function requireCreateDatetime(){return hasRequiredCreateDatetime||(hasRequiredCreateDatetime=1,createDatetime=e=>{const t=new Date(e);if(isNaN(t))throw new TypeError("Invalid Datetime");return t}),createDatetime}var formatNum,hasRequiredFormatNum;function requireFormatNum(){return hasRequiredFormatNum||(hasRequiredFormatNum=1,formatNum=(e,t)=>{for(t=String(t);t.length<e;)t="0"+t;return t}),formatNum}var createDatetimeFloat,hasRequiredCreateDatetimeFloat;function requireCreateDatetimeFloat(){if(hasRequiredCreateDatetimeFloat)return createDatetimeFloat;hasRequiredCreateDatetimeFloat=1;const e=requireFormatNum();class t extends Date{constructor(r){super(r+"Z"),this.isFloating=!0}toISOString(){const r=`${this.getUTCFullYear()}-${e(2,this.getUTCMonth()+1)}-${e(2,this.getUTCDate())}`,i=`${e(2,this.getUTCHours())}:${e(2,this.getUTCMinutes())}:${e(2,this.getUTCSeconds())}.${e(3,this.getUTCMilliseconds())}`;return`${r}T${i}`}}return createDatetimeFloat=s=>{const r=new t(s);if(isNaN(r))throw new TypeError("Invalid Datetime");return r},createDatetimeFloat}var createDate,hasRequiredCreateDate;function requireCreateDate(){if(hasRequiredCreateDate)return createDate;hasRequiredCreateDate=1;const e=requireFormatNum(),t=setupCpp.commonjsGlobal.Date;class s extends t{constructor(i){super(i),this.isDate=!0}toISOString(){return`${this.getUTCFullYear()}-${e(2,this.getUTCMonth()+1)}-${e(2,this.getUTCDate())}`}}return createDate=r=>{const i=new s(r);if(isNaN(i))throw new TypeError("Invalid Datetime");return i},createDate}var createTime,hasRequiredCreateTime;function requireCreateTime(){if(hasRequiredCreateTime)return createTime;hasRequiredCreateTime=1;const e=requireFormatNum();class t extends Date{constructor(r){super(`0000-01-01T${r}Z`),this.isTime=!0}toISOString(){return`${e(2,this.getUTCHours())}:${e(2,this.getUTCMinutes())}:${e(2,this.getUTCSeconds())}.${e(3,this.getUTCMilliseconds())}`}}return createTime=s=>{const r=new t(s);if(isNaN(r))throw new TypeError("Invalid Datetime");return r},createTime}var hasRequiredTomlParser;function requireTomlParser(){if(hasRequiredTomlParser)return tomlParser.exports;hasRequiredTomlParser=1,tomlParser.exports=makeParserClass(requireParser()),tomlParser.exports.makeParserClass=makeParserClass;class TomlError extends Error{constructor(t){super(t),this.name="TomlError",Error.captureStackTrace&&Error.captureStackTrace(this,TomlError),this.fromTOML=!0,this.wrapped=null}}TomlError.wrap=e=>{const t=new TomlError(e.message);return t.code=e.code,t.wrapped=e,t},tomlParser.exports.TomlError=TomlError;const createDateTime=requireCreateDatetime(),createDateTimeFloat=requireCreateDatetimeFloat(),createDate=requireCreateDate(),createTime=requireCreateTime(),CTRL_I=9,CTRL_J=10,CTRL_M=13,CTRL_CHAR_BOUNDARY=31,CHAR_SP=32,CHAR_QUOT=34,CHAR_NUM=35,CHAR_APOS=39,CHAR_PLUS=43,CHAR_COMMA=44,CHAR_HYPHEN=45,CHAR_PERIOD=46,CHAR_0=48,CHAR_1=49,CHAR_7=55,CHAR_9=57,CHAR_COLON=58,CHAR_EQUALS=61,CHAR_A=65,CHAR_E=69,CHAR_F=70,CHAR_T=84,CHAR_U=85,CHAR_Z=90,CHAR_LOWBAR=95,CHAR_a=97,CHAR_b=98,CHAR_e=101,CHAR_f=102,CHAR_i=105,CHAR_l=108,CHAR_n=110,CHAR_o=111,CHAR_r=114,CHAR_s=115,CHAR_t=116,CHAR_u=117,CHAR_x=120,CHAR_z=122,CHAR_LCUB=123,CHAR_RCUB=125,CHAR_LSQB=91,CHAR_BSOL=92,CHAR_RSQB=93,CHAR_DEL=127,SURROGATE_FIRST=55296,SURROGATE_LAST=57343,escapes={[CHAR_b]:"\b",[CHAR_t]:"	",[CHAR_n]:`
`,[CHAR_f]:"\f",[CHAR_r]:"\r",[CHAR_QUOT]:'"',[CHAR_BSOL]:"\\"};function isDigit(e){return e>=CHAR_0&&e<=CHAR_9}function isHexit(e){return e>=CHAR_A&&e<=CHAR_F||e>=CHAR_a&&e<=CHAR_f||e>=CHAR_0&&e<=CHAR_9}function isBit(e){return e===CHAR_1||e===CHAR_0}function isOctit(e){return e>=CHAR_0&&e<=CHAR_7}function isAlphaNumQuoteHyphen(e){return e>=CHAR_A&&e<=CHAR_Z||e>=CHAR_a&&e<=CHAR_z||e>=CHAR_0&&e<=CHAR_9||e===CHAR_APOS||e===CHAR_QUOT||e===CHAR_LOWBAR||e===CHAR_HYPHEN}function isAlphaNumHyphen(e){return e>=CHAR_A&&e<=CHAR_Z||e>=CHAR_a&&e<=CHAR_z||e>=CHAR_0&&e<=CHAR_9||e===CHAR_LOWBAR||e===CHAR_HYPHEN}const _type=Symbol("type"),_declared=Symbol("declared"),hasOwnProperty=Object.prototype.hasOwnProperty,defineProperty=Object.defineProperty,descriptor={configurable:!0,enumerable:!0,writable:!0,value:void 0};function hasKey(e,t){return hasOwnProperty.call(e,t)?!0:(t==="__proto__"&&defineProperty(e,"__proto__",descriptor),!1)}const INLINE_TABLE=Symbol("inline-table");function InlineTable(){return Object.defineProperties({},{[_type]:{value:INLINE_TABLE}})}function isInlineTable(e){return e===null||typeof e!="object"?!1:e[_type]===INLINE_TABLE}const TABLE=Symbol("table");function Table(){return Object.defineProperties({},{[_type]:{value:TABLE},[_declared]:{value:!1,writable:!0}})}function isTable(e){return e===null||typeof e!="object"?!1:e[_type]===TABLE}const _contentType=Symbol("content-type"),INLINE_LIST=Symbol("inline-list");function InlineList(e){return Object.defineProperties([],{[_type]:{value:INLINE_LIST},[_contentType]:{value:e}})}function isInlineList(e){return e===null||typeof e!="object"?!1:e[_type]===INLINE_LIST}const LIST=Symbol("list");function List(){return Object.defineProperties([],{[_type]:{value:LIST}})}function isList(e){return e===null||typeof e!="object"?!1:e[_type]===LIST}let _custom;try{const utilInspect=eval("require('util').inspect");_custom=utilInspect.custom}catch(e){}const _inspect=_custom||"inspect";class BoxedBigInt{constructor(t){try{this.value=setupCpp.commonjsGlobal.BigInt.asIntN(64,t)}catch{this.value=null}Object.defineProperty(this,_type,{value:INTEGER})}isNaN(){return this.value===null}toString(){return String(this.value)}[_inspect](){return`[BigInt: ${this.toString()}]}`}valueOf(){return this.value}}const INTEGER=Symbol("integer");function Integer(e){let t=Number(e);return Object.is(t,-0)&&(t=0),setupCpp.commonjsGlobal.BigInt&&!Number.isSafeInteger(t)?new BoxedBigInt(e):Object.defineProperties(new Number(t),{isNaN:{value:function(){return isNaN(this)}},[_type]:{value:INTEGER},[_inspect]:{value:()=>`[Integer: ${e}]`}})}function isInteger(e){return e===null||typeof e!="object"?!1:e[_type]===INTEGER}const FLOAT=Symbol("float");function Float(e){return Object.defineProperties(new Number(e),{[_type]:{value:FLOAT},[_inspect]:{value:()=>`[Float: ${e}]`}})}function isFloat(e){return e===null||typeof e!="object"?!1:e[_type]===FLOAT}function tomlType(e){const t=typeof e;if(t==="object"){if(e===null)return"null";if(e instanceof Date)return"datetime";if(_type in e)switch(e[_type]){case INLINE_TABLE:return"inline-table";case INLINE_LIST:return"inline-list";case TABLE:return"table";case LIST:return"list";case FLOAT:return"float";case INTEGER:return"integer"}}return t}function makeParserClass(e){class t extends e{constructor(){super(),this.ctx=this.obj=Table()}atEndOfWord(){return this.char===CHAR_NUM||this.char===CTRL_I||this.char===CHAR_SP||this.atEndOfLine()}atEndOfLine(){return this.char===e.END||this.char===CTRL_J||this.char===CTRL_M}parseStart(){if(this.char===e.END)return null;if(this.char===CHAR_LSQB)return this.call(this.parseTableOrList);if(this.char===CHAR_NUM)return this.call(this.parseComment);if(this.char===CTRL_J||this.char===CHAR_SP||this.char===CTRL_I||this.char===CTRL_M)return null;if(isAlphaNumQuoteHyphen(this.char))return this.callNow(this.parseAssignStatement);throw this.error(new TomlError(`Unknown character "${this.char}"`))}parseWhitespaceToEOL(){if(this.char===CHAR_SP||this.char===CTRL_I||this.char===CTRL_M)return null;if(this.char===CHAR_NUM)return this.goto(this.parseComment);if(this.char===e.END||this.char===CTRL_J)return this.return();throw this.error(new TomlError("Unexpected character, expected only whitespace or comments till end of line"))}parseAssignStatement(){return this.callNow(this.parseAssign,this.recordAssignStatement)}recordAssignStatement(r){let i=this.ctx,a=r.key.pop();for(let o of r.key){if(hasKey(i,o)&&!isTable(i[o]))throw this.error(new TomlError("Can't redefine existing key"));i=i[o]=i[o]||Table()}if(hasKey(i,a))throw this.error(new TomlError("Can't redefine existing key"));return i[_declared]=!0,isInteger(r.value)||isFloat(r.value)?i[a]=r.value.valueOf():i[a]=r.value,this.goto(this.parseWhitespaceToEOL)}parseAssign(){return this.callNow(this.parseKeyword,this.recordAssignKeyword)}recordAssignKeyword(r){return this.state.resultTable?this.state.resultTable.push(r):this.state.resultTable=[r],this.goto(this.parseAssignKeywordPreDot)}parseAssignKeywordPreDot(){if(this.char===CHAR_PERIOD)return this.next(this.parseAssignKeywordPostDot);if(this.char!==CHAR_SP&&this.char!==CTRL_I)return this.goto(this.parseAssignEqual)}parseAssignKeywordPostDot(){if(this.char!==CHAR_SP&&this.char!==CTRL_I)return this.callNow(this.parseKeyword,this.recordAssignKeyword)}parseAssignEqual(){if(this.char===CHAR_EQUALS)return this.next(this.parseAssignPreValue);throw this.error(new TomlError('Invalid character, expected "="'))}parseAssignPreValue(){return this.char===CHAR_SP||this.char===CTRL_I?null:this.callNow(this.parseValue,this.recordAssignValue)}recordAssignValue(r){return this.returnNow({key:this.state.resultTable,value:r})}parseComment(){do{if(this.char===e.END||this.char===CTRL_J)return this.return();if(this.char===CHAR_DEL||this.char<=CTRL_CHAR_BOUNDARY&&this.char!==CTRL_I)throw this.errorControlCharIn("comments")}while(this.nextChar())}parseTableOrList(){if(this.char===CHAR_LSQB)this.next(this.parseList);else return this.goto(this.parseTable)}parseTable(){return this.ctx=this.obj,this.goto(this.parseTableNext)}parseTableNext(){return this.char===CHAR_SP||this.char===CTRL_I?null:this.callNow(this.parseKeyword,this.parseTableMore)}parseTableMore(r){if(this.char===CHAR_SP||this.char===CTRL_I)return null;if(this.char===CHAR_RSQB){if(hasKey(this.ctx,r)&&(!isTable(this.ctx[r])||this.ctx[r][_declared]))throw this.error(new TomlError("Can't redefine existing key"));return this.ctx=this.ctx[r]=this.ctx[r]||Table(),this.ctx[_declared]=!0,this.next(this.parseWhitespaceToEOL)}else if(this.char===CHAR_PERIOD){if(!hasKey(this.ctx,r))this.ctx=this.ctx[r]=Table();else if(isTable(this.ctx[r]))this.ctx=this.ctx[r];else if(isList(this.ctx[r]))this.ctx=this.ctx[r][this.ctx[r].length-1];else throw this.error(new TomlError("Can't redefine existing key"));return this.next(this.parseTableNext)}else throw this.error(new TomlError("Unexpected character, expected whitespace, . or ]"))}parseList(){return this.ctx=this.obj,this.goto(this.parseListNext)}parseListNext(){return this.char===CHAR_SP||this.char===CTRL_I?null:this.callNow(this.parseKeyword,this.parseListMore)}parseListMore(r){if(this.char===CHAR_SP||this.char===CTRL_I)return null;if(this.char===CHAR_RSQB){if(hasKey(this.ctx,r)||(this.ctx[r]=List()),isInlineList(this.ctx[r]))throw this.error(new TomlError("Can't extend an inline array"));if(isList(this.ctx[r])){const i=Table();this.ctx[r].push(i),this.ctx=i}else throw this.error(new TomlError("Can't redefine an existing key"));return this.next(this.parseListEnd)}else if(this.char===CHAR_PERIOD){if(!hasKey(this.ctx,r))this.ctx=this.ctx[r]=Table();else{if(isInlineList(this.ctx[r]))throw this.error(new TomlError("Can't extend an inline array"));if(isInlineTable(this.ctx[r]))throw this.error(new TomlError("Can't extend an inline table"));if(isList(this.ctx[r]))this.ctx=this.ctx[r][this.ctx[r].length-1];else if(isTable(this.ctx[r]))this.ctx=this.ctx[r];else throw this.error(new TomlError("Can't redefine an existing key"))}return this.next(this.parseListNext)}else throw this.error(new TomlError("Unexpected character, expected whitespace, . or ]"))}parseListEnd(r){if(this.char===CHAR_RSQB)return this.next(this.parseWhitespaceToEOL);throw this.error(new TomlError("Unexpected character, expected whitespace, . or ]"))}parseValue(){if(this.char===e.END)throw this.error(new TomlError("Key without value"));if(this.char===CHAR_QUOT)return this.next(this.parseDoubleString);if(this.char===CHAR_APOS)return this.next(this.parseSingleString);if(this.char===CHAR_HYPHEN||this.char===CHAR_PLUS)return this.goto(this.parseNumberSign);if(this.char===CHAR_i)return this.next(this.parseInf);if(this.char===CHAR_n)return this.next(this.parseNan);if(isDigit(this.char))return this.goto(this.parseNumberOrDateTime);if(this.char===CHAR_t||this.char===CHAR_f)return this.goto(this.parseBoolean);if(this.char===CHAR_LSQB)return this.call(this.parseInlineList,this.recordValue);if(this.char===CHAR_LCUB)return this.call(this.parseInlineTable,this.recordValue);throw this.error(new TomlError("Unexpected character, expecting string, number, datetime, boolean, inline array or inline table"))}recordValue(r){return this.returnNow(r)}parseInf(){if(this.char===CHAR_n)return this.next(this.parseInf2);throw this.error(new TomlError('Unexpected character, expected "inf", "+inf" or "-inf"'))}parseInf2(){if(this.char===CHAR_f)return this.state.buf==="-"?this.return(-1/0):this.return(1/0);throw this.error(new TomlError('Unexpected character, expected "inf", "+inf" or "-inf"'))}parseNan(){if(this.char===CHAR_a)return this.next(this.parseNan2);throw this.error(new TomlError('Unexpected character, expected "nan"'))}parseNan2(){if(this.char===CHAR_n)return this.return(NaN);throw this.error(new TomlError('Unexpected character, expected "nan"'))}parseKeyword(){return this.char===CHAR_QUOT?this.next(this.parseBasicString):this.char===CHAR_APOS?this.next(this.parseLiteralString):this.goto(this.parseBareKey)}parseBareKey(){do{if(this.char===e.END)throw this.error(new TomlError("Key ended without value"));if(isAlphaNumHyphen(this.char))this.consume();else{if(this.state.buf.length===0)throw this.error(new TomlError("Empty bare keys are not allowed"));return this.returnNow()}}while(this.nextChar())}parseSingleString(){return this.char===CHAR_APOS?this.next(this.parseLiteralMultiStringMaybe):this.goto(this.parseLiteralString)}parseLiteralString(){do{if(this.char===CHAR_APOS)return this.return();if(this.atEndOfLine())throw this.error(new TomlError("Unterminated string"));if(this.char===CHAR_DEL||this.char<=CTRL_CHAR_BOUNDARY&&this.char!==CTRL_I)throw this.errorControlCharIn("strings");this.consume()}while(this.nextChar())}parseLiteralMultiStringMaybe(){return this.char===CHAR_APOS?this.next(this.parseLiteralMultiString):this.returnNow()}parseLiteralMultiString(){return this.char===CTRL_M?null:this.char===CTRL_J?this.next(this.parseLiteralMultiStringContent):this.goto(this.parseLiteralMultiStringContent)}parseLiteralMultiStringContent(){do{if(this.char===CHAR_APOS)return this.next(this.parseLiteralMultiEnd);if(this.char===e.END)throw this.error(new TomlError("Unterminated multi-line string"));if(this.char===CHAR_DEL||this.char<=CTRL_CHAR_BOUNDARY&&this.char!==CTRL_I&&this.char!==CTRL_J&&this.char!==CTRL_M)throw this.errorControlCharIn("strings");this.consume()}while(this.nextChar())}parseLiteralMultiEnd(){return this.char===CHAR_APOS?this.next(this.parseLiteralMultiEnd2):(this.state.buf+="'",this.goto(this.parseLiteralMultiStringContent))}parseLiteralMultiEnd2(){return this.char===CHAR_APOS?this.next(this.parseLiteralMultiEnd3):(this.state.buf+="''",this.goto(this.parseLiteralMultiStringContent))}parseLiteralMultiEnd3(){return this.char===CHAR_APOS?(this.state.buf+="'",this.next(this.parseLiteralMultiEnd4)):this.returnNow()}parseLiteralMultiEnd4(){return this.char===CHAR_APOS?(this.state.buf+="'",this.return()):this.returnNow()}parseDoubleString(){return this.char===CHAR_QUOT?this.next(this.parseMultiStringMaybe):this.goto(this.parseBasicString)}parseBasicString(){do{if(this.char===CHAR_BSOL)return this.call(this.parseEscape,this.recordEscapeReplacement);if(this.char===CHAR_QUOT)return this.return();if(this.atEndOfLine())throw this.error(new TomlError("Unterminated string"));if(this.char===CHAR_DEL||this.char<=CTRL_CHAR_BOUNDARY&&this.char!==CTRL_I)throw this.errorControlCharIn("strings");this.consume()}while(this.nextChar())}recordEscapeReplacement(r){return this.state.buf+=r,this.goto(this.parseBasicString)}parseMultiStringMaybe(){return this.char===CHAR_QUOT?this.next(this.parseMultiString):this.returnNow()}parseMultiString(){return this.char===CTRL_M?null:this.char===CTRL_J?this.next(this.parseMultiStringContent):this.goto(this.parseMultiStringContent)}parseMultiStringContent(){do{if(this.char===CHAR_BSOL)return this.call(this.parseMultiEscape,this.recordMultiEscapeReplacement);if(this.char===CHAR_QUOT)return this.next(this.parseMultiEnd);if(this.char===e.END)throw this.error(new TomlError("Unterminated multi-line string"));if(this.char===CHAR_DEL||this.char<=CTRL_CHAR_BOUNDARY&&this.char!==CTRL_I&&this.char!==CTRL_J&&this.char!==CTRL_M)throw this.errorControlCharIn("strings");this.consume()}while(this.nextChar())}errorControlCharIn(r){let i="\\u00";return this.char<16&&(i+="0"),i+=this.char.toString(16),this.error(new TomlError(`Control characters (codes < 0x1f and 0x7f) are not allowed in ${r}, use ${i} instead`))}recordMultiEscapeReplacement(r){return this.state.buf+=r,this.goto(this.parseMultiStringContent)}parseMultiEnd(){return this.char===CHAR_QUOT?this.next(this.parseMultiEnd2):(this.state.buf+='"',this.goto(this.parseMultiStringContent))}parseMultiEnd2(){return this.char===CHAR_QUOT?this.next(this.parseMultiEnd3):(this.state.buf+='""',this.goto(this.parseMultiStringContent))}parseMultiEnd3(){return this.char===CHAR_QUOT?(this.state.buf+='"',this.next(this.parseMultiEnd4)):this.returnNow()}parseMultiEnd4(){return this.char===CHAR_QUOT?(this.state.buf+='"',this.return()):this.returnNow()}parseMultiEscape(){return this.char===CTRL_M||this.char===CTRL_J?this.next(this.parseMultiTrim):this.char===CHAR_SP||this.char===CTRL_I?this.next(this.parsePreMultiTrim):this.goto(this.parseEscape)}parsePreMultiTrim(){if(this.char===CHAR_SP||this.char===CTRL_I)return null;if(this.char===CTRL_M||this.char===CTRL_J)return this.next(this.parseMultiTrim);throw this.error(new TomlError("Can't escape whitespace"))}parseMultiTrim(){return this.char===CTRL_J||this.char===CHAR_SP||this.char===CTRL_I||this.char===CTRL_M?null:this.returnNow()}parseEscape(){if(this.char in escapes)return this.return(escapes[this.char]);if(this.char===CHAR_u)return this.call(this.parseSmallUnicode,this.parseUnicodeReturn);if(this.char===CHAR_U)return this.call(this.parseLargeUnicode,this.parseUnicodeReturn);throw this.error(new TomlError("Unknown escape character: "+this.char))}parseUnicodeReturn(r){try{const i=parseInt(r,16);if(i>=SURROGATE_FIRST&&i<=SURROGATE_LAST)throw this.error(new TomlError("Invalid unicode, character in range 0xD800 - 0xDFFF is reserved"));return this.returnNow(String.fromCodePoint(i))}catch(i){throw this.error(TomlError.wrap(i))}}parseSmallUnicode(){if(isHexit(this.char)){if(this.consume(),this.state.buf.length>=4)return this.return()}else throw this.error(new TomlError("Invalid character in unicode sequence, expected hex"))}parseLargeUnicode(){if(isHexit(this.char)){if(this.consume(),this.state.buf.length>=8)return this.return()}else throw this.error(new TomlError("Invalid character in unicode sequence, expected hex"))}parseNumberSign(){return this.consume(),this.next(this.parseMaybeSignedInfOrNan)}parseMaybeSignedInfOrNan(){return this.char===CHAR_i?this.next(this.parseInf):this.char===CHAR_n?this.next(this.parseNan):this.callNow(this.parseNoUnder,this.parseNumberIntegerStart)}parseNumberIntegerStart(){return this.char===CHAR_0?(this.consume(),this.next(this.parseNumberIntegerExponentOrDecimal)):this.goto(this.parseNumberInteger)}parseNumberIntegerExponentOrDecimal(){return this.char===CHAR_PERIOD?(this.consume(),this.call(this.parseNoUnder,this.parseNumberFloat)):this.char===CHAR_E||this.char===CHAR_e?(this.consume(),this.next(this.parseNumberExponentSign)):this.returnNow(Integer(this.state.buf))}parseNumberInteger(){if(isDigit(this.char))this.consume();else{if(this.char===CHAR_LOWBAR)return this.call(this.parseNoUnder);if(this.char===CHAR_E||this.char===CHAR_e)return this.consume(),this.next(this.parseNumberExponentSign);if(this.char===CHAR_PERIOD)return this.consume(),this.call(this.parseNoUnder,this.parseNumberFloat);{const r=Integer(this.state.buf);if(r.isNaN())throw this.error(new TomlError("Invalid number"));return this.returnNow(r)}}}parseNoUnder(){if(this.char===CHAR_LOWBAR||this.char===CHAR_PERIOD||this.char===CHAR_E||this.char===CHAR_e)throw this.error(new TomlError("Unexpected character, expected digit"));if(this.atEndOfWord())throw this.error(new TomlError("Incomplete number"));return this.returnNow()}parseNoUnderHexOctBinLiteral(){if(this.char===CHAR_LOWBAR||this.char===CHAR_PERIOD)throw this.error(new TomlError("Unexpected character, expected digit"));if(this.atEndOfWord())throw this.error(new TomlError("Incomplete number"));return this.returnNow()}parseNumberFloat(){if(this.char===CHAR_LOWBAR)return this.call(this.parseNoUnder,this.parseNumberFloat);if(isDigit(this.char))this.consume();else return this.char===CHAR_E||this.char===CHAR_e?(this.consume(),this.next(this.parseNumberExponentSign)):this.returnNow(Float(this.state.buf))}parseNumberExponentSign(){if(isDigit(this.char))return this.goto(this.parseNumberExponent);if(this.char===CHAR_HYPHEN||this.char===CHAR_PLUS)this.consume(),this.call(this.parseNoUnder,this.parseNumberExponent);else throw this.error(new TomlError("Unexpected character, expected -, + or digit"))}parseNumberExponent(){if(isDigit(this.char))this.consume();else return this.char===CHAR_LOWBAR?this.call(this.parseNoUnder):this.returnNow(Float(this.state.buf))}parseNumberOrDateTime(){return this.char===CHAR_0?(this.consume(),this.next(this.parseNumberBaseOrDateTime)):this.goto(this.parseNumberOrDateTimeOnly)}parseNumberOrDateTimeOnly(){if(this.char===CHAR_LOWBAR)return this.call(this.parseNoUnder,this.parseNumberInteger);if(isDigit(this.char))this.consume(),this.state.buf.length>4&&this.next(this.parseNumberInteger);else return this.char===CHAR_E||this.char===CHAR_e?(this.consume(),this.next(this.parseNumberExponentSign)):this.char===CHAR_PERIOD?(this.consume(),this.call(this.parseNoUnder,this.parseNumberFloat)):this.char===CHAR_HYPHEN?this.goto(this.parseDateTime):this.char===CHAR_COLON?this.goto(this.parseOnlyTimeHour):this.returnNow(Integer(this.state.buf))}parseDateTimeOnly(){if(this.state.buf.length<4){if(isDigit(this.char))return this.consume();if(this.char===CHAR_COLON)return this.goto(this.parseOnlyTimeHour);throw this.error(new TomlError("Expected digit while parsing year part of a date"))}else{if(this.char===CHAR_HYPHEN)return this.goto(this.parseDateTime);throw this.error(new TomlError("Expected hyphen (-) while parsing year part of date"))}}parseNumberBaseOrDateTime(){return this.char===CHAR_b?(this.consume(),this.call(this.parseNoUnderHexOctBinLiteral,this.parseIntegerBin)):this.char===CHAR_o?(this.consume(),this.call(this.parseNoUnderHexOctBinLiteral,this.parseIntegerOct)):this.char===CHAR_x?(this.consume(),this.call(this.parseNoUnderHexOctBinLiteral,this.parseIntegerHex)):this.char===CHAR_PERIOD?this.goto(this.parseNumberInteger):isDigit(this.char)?this.goto(this.parseDateTimeOnly):this.returnNow(Integer(this.state.buf))}parseIntegerHex(){if(isHexit(this.char))this.consume();else{if(this.char===CHAR_LOWBAR)return this.call(this.parseNoUnderHexOctBinLiteral);{const r=Integer(this.state.buf);if(r.isNaN())throw this.error(new TomlError("Invalid number"));return this.returnNow(r)}}}parseIntegerOct(){if(isOctit(this.char))this.consume();else{if(this.char===CHAR_LOWBAR)return this.call(this.parseNoUnderHexOctBinLiteral);{const r=Integer(this.state.buf);if(r.isNaN())throw this.error(new TomlError("Invalid number"));return this.returnNow(r)}}}parseIntegerBin(){if(isBit(this.char))this.consume();else{if(this.char===CHAR_LOWBAR)return this.call(this.parseNoUnderHexOctBinLiteral);{const r=Integer(this.state.buf);if(r.isNaN())throw this.error(new TomlError("Invalid number"));return this.returnNow(r)}}}parseDateTime(){if(this.state.buf.length<4)throw this.error(new TomlError("Years less than 1000 must be zero padded to four characters"));return this.state.result=this.state.buf,this.state.buf="",this.next(this.parseDateMonth)}parseDateMonth(){if(this.char===CHAR_HYPHEN){if(this.state.buf.length<2)throw this.error(new TomlError("Months less than 10 must be zero padded to two characters"));return this.state.result+="-"+this.state.buf,this.state.buf="",this.next(this.parseDateDay)}else if(isDigit(this.char))this.consume();else throw this.error(new TomlError("Incomplete datetime"))}parseDateDay(){if(this.char===CHAR_T||this.char===CHAR_SP){if(this.state.buf.length<2)throw this.error(new TomlError("Days less than 10 must be zero padded to two characters"));return this.state.result+="-"+this.state.buf,this.state.buf="",this.next(this.parseStartTimeHour)}else{if(this.atEndOfWord())return this.returnNow(createDate(this.state.result+"-"+this.state.buf));if(isDigit(this.char))this.consume();else throw this.error(new TomlError("Incomplete datetime"))}}parseStartTimeHour(){return this.atEndOfWord()?this.returnNow(createDate(this.state.result)):this.goto(this.parseTimeHour)}parseTimeHour(){if(this.char===CHAR_COLON){if(this.state.buf.length<2)throw this.error(new TomlError("Hours less than 10 must be zero padded to two characters"));return this.state.result+="T"+this.state.buf,this.state.buf="",this.next(this.parseTimeMin)}else if(isDigit(this.char))this.consume();else throw this.error(new TomlError("Incomplete datetime"))}parseTimeMin(){if(this.state.buf.length<2&&isDigit(this.char))this.consume();else{if(this.state.buf.length===2&&this.char===CHAR_COLON)return this.state.result+=":"+this.state.buf,this.state.buf="",this.next(this.parseTimeSec);throw this.error(new TomlError("Incomplete datetime"))}}parseTimeSec(){if(isDigit(this.char)){if(this.consume(),this.state.buf.length===2)return this.state.result+=":"+this.state.buf,this.state.buf="",this.next(this.parseTimeZoneOrFraction)}else throw this.error(new TomlError("Incomplete datetime"))}parseOnlyTimeHour(){if(this.char===CHAR_COLON){if(this.state.buf.length<2)throw this.error(new TomlError("Hours less than 10 must be zero padded to two characters"));return this.state.result=this.state.buf,this.state.buf="",this.next(this.parseOnlyTimeMin)}else throw this.error(new TomlError("Incomplete time"))}parseOnlyTimeMin(){if(this.state.buf.length<2&&isDigit(this.char))this.consume();else{if(this.state.buf.length===2&&this.char===CHAR_COLON)return this.state.result+=":"+this.state.buf,this.state.buf="",this.next(this.parseOnlyTimeSec);throw this.error(new TomlError("Incomplete time"))}}parseOnlyTimeSec(){if(isDigit(this.char)){if(this.consume(),this.state.buf.length===2)return this.next(this.parseOnlyTimeFractionMaybe)}else throw this.error(new TomlError("Incomplete time"))}parseOnlyTimeFractionMaybe(){if(this.state.result+=":"+this.state.buf,this.char===CHAR_PERIOD)this.state.buf="",this.next(this.parseOnlyTimeFraction);else return this.return(createTime(this.state.result))}parseOnlyTimeFraction(){if(isDigit(this.char))this.consume();else if(this.atEndOfWord()){if(this.state.buf.length===0)throw this.error(new TomlError("Expected digit in milliseconds"));return this.returnNow(createTime(this.state.result+"."+this.state.buf))}else throw this.error(new TomlError("Unexpected character in datetime, expected period (.), minus (-), plus (+) or Z"))}parseTimeZoneOrFraction(){if(this.char===CHAR_PERIOD)this.consume(),this.next(this.parseDateTimeFraction);else if(this.char===CHAR_HYPHEN||this.char===CHAR_PLUS)this.consume(),this.next(this.parseTimeZoneHour);else{if(this.char===CHAR_Z)return this.consume(),this.return(createDateTime(this.state.result+this.state.buf));if(this.atEndOfWord())return this.returnNow(createDateTimeFloat(this.state.result+this.state.buf));throw this.error(new TomlError("Unexpected character in datetime, expected period (.), minus (-), plus (+) or Z"))}}parseDateTimeFraction(){if(isDigit(this.char))this.consume();else{if(this.state.buf.length===1)throw this.error(new TomlError("Expected digit in milliseconds"));if(this.char===CHAR_HYPHEN||this.char===CHAR_PLUS)this.consume(),this.next(this.parseTimeZoneHour);else{if(this.char===CHAR_Z)return this.consume(),this.return(createDateTime(this.state.result+this.state.buf));if(this.atEndOfWord())return this.returnNow(createDateTimeFloat(this.state.result+this.state.buf));throw this.error(new TomlError("Unexpected character in datetime, expected period (.), minus (-), plus (+) or Z"))}}}parseTimeZoneHour(){if(isDigit(this.char)){if(this.consume(),/\d\d$/.test(this.state.buf))return this.next(this.parseTimeZoneSep)}else throw this.error(new TomlError("Unexpected character in datetime, expected digit"))}parseTimeZoneSep(){if(this.char===CHAR_COLON)this.consume(),this.next(this.parseTimeZoneMin);else throw this.error(new TomlError("Unexpected character in datetime, expected colon"))}parseTimeZoneMin(){if(isDigit(this.char)){if(this.consume(),/\d\d$/.test(this.state.buf))return this.return(createDateTime(this.state.result+this.state.buf))}else throw this.error(new TomlError("Unexpected character in datetime, expected digit"))}parseBoolean(){if(this.char===CHAR_t)return this.consume(),this.next(this.parseTrue_r);if(this.char===CHAR_f)return this.consume(),this.next(this.parseFalse_a)}parseTrue_r(){if(this.char===CHAR_r)return this.consume(),this.next(this.parseTrue_u);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseTrue_u(){if(this.char===CHAR_u)return this.consume(),this.next(this.parseTrue_e);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseTrue_e(){if(this.char===CHAR_e)return this.return(!0);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseFalse_a(){if(this.char===CHAR_a)return this.consume(),this.next(this.parseFalse_l);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseFalse_l(){if(this.char===CHAR_l)return this.consume(),this.next(this.parseFalse_s);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseFalse_s(){if(this.char===CHAR_s)return this.consume(),this.next(this.parseFalse_e);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseFalse_e(){if(this.char===CHAR_e)return this.return(!1);throw this.error(new TomlError("Invalid boolean, expected true or false"))}parseInlineList(){if(this.char===CHAR_SP||this.char===CTRL_I||this.char===CTRL_M||this.char===CTRL_J)return null;if(this.char===e.END)throw this.error(new TomlError("Unterminated inline array"));return this.char===CHAR_NUM?this.call(this.parseComment):this.char===CHAR_RSQB?this.return(this.state.resultArr||InlineList()):this.callNow(this.parseValue,this.recordInlineListValue)}recordInlineListValue(r){return this.state.resultArr||(this.state.resultArr=InlineList(tomlType(r))),isFloat(r)||isInteger(r)?this.state.resultArr.push(r.valueOf()):this.state.resultArr.push(r),this.goto(this.parseInlineListNext)}parseInlineListNext(){if(this.char===CHAR_SP||this.char===CTRL_I||this.char===CTRL_M||this.char===CTRL_J)return null;if(this.char===CHAR_NUM)return this.call(this.parseComment);if(this.char===CHAR_COMMA)return this.next(this.parseInlineList);if(this.char===CHAR_RSQB)return this.goto(this.parseInlineList);throw this.error(new TomlError("Invalid character, expected whitespace, comma (,) or close bracket (])"))}parseInlineTable(){if(this.char===CHAR_SP||this.char===CTRL_I)return null;if(this.char===e.END||this.char===CHAR_NUM||this.char===CTRL_J||this.char===CTRL_M)throw this.error(new TomlError("Unterminated inline array"));return this.char===CHAR_RCUB?this.return(this.state.resultTable||InlineTable()):(this.state.resultTable||(this.state.resultTable=InlineTable()),this.callNow(this.parseAssign,this.recordInlineTableValue))}recordInlineTableValue(r){let i=this.state.resultTable,a=r.key.pop();for(let o of r.key){if(hasKey(i,o)&&(!isTable(i[o])||i[o][_declared]))throw this.error(new TomlError("Can't redefine existing key"));i=i[o]=i[o]||Table()}if(hasKey(i,a))throw this.error(new TomlError("Can't redefine existing key"));return isInteger(r.value)||isFloat(r.value)?i[a]=r.value.valueOf():i[a]=r.value,this.goto(this.parseInlineTableNext)}parseInlineTableNext(){if(this.char===CHAR_SP||this.char===CTRL_I)return null;if(this.char===e.END||this.char===CHAR_NUM||this.char===CTRL_J||this.char===CTRL_M)throw this.error(new TomlError("Unterminated inline array"));if(this.char===CHAR_COMMA)return this.next(this.parseInlineTablePostComma);if(this.char===CHAR_RCUB)return this.goto(this.parseInlineTable);throw this.error(new TomlError("Invalid character, expected whitespace, comma (,) or close bracket (])"))}parseInlineTablePostComma(){if(this.char===CHAR_SP||this.char===CTRL_I)return null;if(this.char===e.END||this.char===CHAR_NUM||this.char===CTRL_J||this.char===CTRL_M)throw this.error(new TomlError("Unterminated inline array"));if(this.char===CHAR_COMMA)throw this.error(new TomlError("Empty elements in inline tables are not permitted"));if(this.char===CHAR_RCUB)throw this.error(new TomlError("Trailing commas in inline tables are not permitted"));return this.goto(this.parseInlineTable)}}return t}return tomlParser.exports}var parsePrettyError,hasRequiredParsePrettyError;function requireParsePrettyError(){if(hasRequiredParsePrettyError)return parsePrettyError;hasRequiredParsePrettyError=1,parsePrettyError=e;function e(t,s){if(t.pos==null||t.line==null)return t;let r=t.message;if(r+=` at row ${t.line+1}, col ${t.col+1}, pos ${t.pos}:
`,s&&s.split){const i=s.split(/\n/),a=String(Math.min(i.length,t.line+3)).length;let o=" ";for(;o.length<a;)o+=" ";for(let c=Math.max(0,t.line-1);c<Math.min(i.length,t.line+2);++c){let h=String(c+1);if(h.length<a&&(h=" "+h),t.line===c){r+=h+"> "+i[c]+`
`,r+=o+"  ";for(let u=0;u<t.col;++u)r+=" ";r+=`^
`}else r+=h+": "+i[c]+`
`}}return t.message=r+`
`,t}return parsePrettyError}var parseString_1,hasRequiredParseString;function requireParseString(){if(hasRequiredParseString)return parseString_1;hasRequiredParseString=1,parseString_1=s;const e=requireTomlParser(),t=requireParsePrettyError();function s(r){setupCpp.commonjsGlobal.Buffer&&setupCpp.commonjsGlobal.Buffer.isBuffer(r)&&(r=r.toString("utf8"));const i=new e;try{return i.parse(r),i.finish()}catch(a){throw t(a,r)}}return parseString_1}var parseAsync_1,hasRequiredParseAsync;function requireParseAsync(){if(hasRequiredParseAsync)return parseAsync_1;hasRequiredParseAsync=1,parseAsync_1=s;const e=requireTomlParser(),t=requireParsePrettyError();function s(r,i){i||(i={});const a=0,o=i.blocksize||40960,c=new e;return new Promise((u,n)=>{setImmediate(h,a,o,u,n)});function h(u,n,l,f){if(u>=r.length)try{return l(c.finish())}catch(m){return f(t(m,r))}try{c.parse(r.slice(u,u+n)),setImmediate(h,u+n,n,l,f)}catch(m){f(t(m,r))}}}return parseAsync_1}var parseStream_1,hasRequiredParseStream;function requireParseStream(){if(hasRequiredParseStream)return parseStream_1;hasRequiredParseStream=1,parseStream_1=s;const e=require$$0,t=requireTomlParser();function s(a){return a?r(a):i()}function r(a){const o=new t;return a.setEncoding("utf8"),new Promise((c,h)=>{let u,n=!1,l=!1;function f(){if(n=!0,!u)try{c(o.finish())}catch(d){h(d)}}function m(d){l=!0,h(d)}a.once("end",f),a.once("error",m),A();function A(){u=!0;let d;for(;(d=a.read())!==null;)try{o.parse(d)}catch(I){return m(I)}if(u=!1,n)return f();l||a.once("readable",A)}})}function i(){const a=new t;return new e.Transform({objectMode:!0,transform(o,c,h){try{a.parse(o.toString(c))}catch(u){this.emit("error",u)}h()},flush(o){try{this.push(a.finish())}catch(c){this.emit("error",c)}o()}})}return parseStream_1}var hasRequiredParse;function requireParse(){return hasRequiredParse||(hasRequiredParse=1,parse.exports=requireParseString(),parse.exports.async=requireParseAsync(),parse.exports.stream=requireParseStream(),parse.exports.prettyError=requireParsePrettyError()),parse.exports}var stringify={exports:{}},hasRequiredStringify;function requireStringify(){if(hasRequiredStringify)return stringify.exports;hasRequiredStringify=1,stringify.exports=e,stringify.exports.value=d;function e(p){if(p===null)throw t("null");if(p===void 0)throw t("undefined");if(typeof p!="object")throw t(typeof p);if(typeof p.toJSON=="function"&&(p=p.toJSON()),p==null)return null;const C=c(p);if(C!=="table")throw t(C);return a("","",p)}function t(p){return new Error("Can only stringify objects, not "+p)}function s(p){return Object.keys(p).filter(C=>o(p[C]))}function r(p){return Object.keys(p).filter(C=>!o(p[C]))}function i(p){let C=Array.isArray(p)?[]:Object.prototype.hasOwnProperty.call(p,"__proto__")?{["__proto__"]:void 0}:{};for(let S of Object.keys(p))p[S]&&typeof p[S].toJSON=="function"&&!("toISOString"in p[S])?C[S]=p[S].toJSON():C[S]=p[S];return C}function a(p,C,S){S=i(S);let v,U;v=s(S),U=r(S);const E=[],R=C||"";v.forEach(_=>{var y=c(S[_]);y!=="undefined"&&y!=="null"&&E.push(R+h(_)+" = "+A(S[_],!0))}),E.length>0&&E.push("");const T=p&&v.length>0?C+"  ":"";return U.forEach(_=>{E.push(q(p,T,_,S[_]))}),E.join(`
`)}function o(p){switch(c(p)){case"undefined":case"null":case"integer":case"nan":case"float":case"boolean":case"string":case"datetime":return!0;case"array":return p.length===0||c(p[0])!=="table";case"table":return Object.keys(p).length===0;default:return!1}}function c(p){return p===void 0?"undefined":p===null?"null":typeof p=="bigint"||Number.isInteger(p)&&!Object.is(p,-0)?"integer":typeof p=="number"?"float":typeof p=="boolean"?"boolean":typeof p=="string"?"string":"toISOString"in p?isNaN(p)?"undefined":"datetime":Array.isArray(p)?"array":"table"}function h(p){const C=String(p);return/^[-A-Za-z0-9_]+$/.test(C)?C:u(C)}function u(p){return'"'+f(p).replace(/"/g,'\\"')+'"'}function n(p){return"'"+p+"'"}function l(p,C){for(;C.length<p;)C="0"+C;return C}function f(p){return p.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\t/g,"\\t").replace(/\n/g,"\\n").replace(/\f/g,"\\f").replace(/\r/g,"\\r").replace(/([\u0000-\u001f\u007f])/,C=>"\\u"+l(4,C.codePointAt(0).toString(16)))}function m(p){let C=p.split(/\n/).map(S=>f(S).replace(/"(?="")/g,'\\"')).join(`
`);return C.slice(-1)==='"'&&(C+=`\\
`),`"""
`+C+'"""'}function A(p,C){let S=c(p);return S==="string"&&(C&&/\n/.test(p)?S="string-multiline":!/[\b\t\n\f\r']/.test(p)&&/"/.test(p)&&(S="string-literal")),d(p,S)}function d(p,C){switch(C||(C=c(p)),C){case"string-multiline":return m(p);case"string":return u(p);case"string-literal":return n(p);case"integer":return I(p);case"float":return P(p);case"boolean":return H(p);case"datetime":return O(p);case"array":return M(p.filter(S=>c(S)!=="null"&&c(S)!=="undefined"&&c(S)!=="nan"));case"table":return F(p);default:throw t(C)}}function I(p){return String(p).replace(/\B(?=(\d{3})+(?!\d))/g,"_")}function P(p){if(p===1/0)return"inf";if(p===-1/0)return"-inf";if(Object.is(p,NaN))return"nan";if(Object.is(p,-0))return"-0.0";const[C,S]=String(p).split(".");return I(C)+"."+S}function H(p){return String(p)}function O(p){return p.toISOString()}function M(p){p=i(p);let C="[";const S=p.map(v=>d(v));return S.join(", ").length>60||/\n/.test(S)?C+=`
  `+S.join(`,
  `)+`
`:C+=" "+S.join(", ")+(S.length>0?" ":""),C+"]"}function F(p){p=i(p);const C=[];return Object.keys(p).forEach(S=>{C.push(h(S)+" = "+A(p[S],!1))}),"{ "+C.join(", ")+(C.length>0?" ":"")+"}"}function q(p,C,S,v){const U=c(v);if(U==="array")return b(p,C,S,v);if(U==="table")return w(p,C,S,v);throw t(U)}function b(p,C,S,v){v=i(v);const U=c(v[0]);if(U!=="table")throw t(U);const E=p+h(S);let R="";return v.forEach(T=>{R.length>0&&(R+=`
`),R+=C+"[["+E+`]]
`,R+=a(E+".",C,T)}),R}function w(p,C,S,v){const U=p+h(S);let E="";return s(v).length>0&&(E+=C+"["+U+`]
`),E+a(U+".",C,v)}return stringify.exports}var hasRequiredToml;function requireToml(){return hasRequiredToml||(hasRequiredToml=1,toml.parse=requireParse(),toml.stringify=requireStringify()),toml}requireToml();const IS_WINDOWS=process.platform==="win32",IS_LINUX=process.platform==="linux",IS_MAC=process.platform==="darwin",WINDOWS_ARCHS=["x86","x64"],WINDOWS_PLATFORMS=["win32","win64"],PYPY_VERSION_FILE="PYPY_VERSION";function createSymlinkInFolder(e,t,s,r=!1){const i=path__namespace.join(e,t),a=path__namespace.join(e,s);fs.existsSync(a)||(fs.symlinkSync(i,a),!IS_WINDOWS&&r&&fs.chmodSync(a,"755"))}function validateVersion(e){return isNightlyKeyword(e)||!!semverExports.validRange(e)}function isNightlyKeyword(e){return e==="nightly"}function getPyPyVersionFromPath(e){return path__namespace.basename(path__namespace.dirname(e))}function readExactPyPyVersionFile(e){let t="";const s=path__namespace.join(e,PYPY_VERSION_FILE);return fs.existsSync(s)&&(t=fs.readFileSync(s).toString().trim()),t}function writeExactPyPyVersionFile(e,t){const s=path__namespace.join(e,PYPY_VERSION_FILE);fs.writeFileSync(s,t)}function validatePythonVersionFormatForPyPy(e){return/^\d+\.\d+$/.test(e)}async function getWindowsInfo(){const{stdout:e}=await setupCpp.execExports.getExecOutput('powershell -command "(Get-CimInstance -ClassName Win32_OperatingSystem).Caption"',void 0,{silent:!0});return{osName:"Windows",osVersion:e.trim().split(" ")[3]}}async function getMacOSInfo(){const{stdout:e}=await setupCpp.execExports.getExecOutput("sw_vers",["-productVersion"],{silent:!0});return{osName:"macOS",osVersion:e.trim()}}async function getLinuxInfo(){const{stdout:e}=await setupCpp.execExports.getExecOutput("lsb_release",["-i","-r","-s"],{silent:!0}),[t,s]=e.trim().split(`
`);return setupCpp.coreExports.debug(`OS Name: ${t}, Version: ${s}`),{osName:t,osVersion:s}}async function getOSInfo(){let e;try{IS_WINDOWS?e=await getWindowsInfo():IS_LINUX?e=await getLinuxInfo():IS_MAC&&(e=await getMacOSInfo())}catch(t){const s=t;setupCpp.coreExports.debug(s.message)}finally{return e}}function getBinaryDirectory(e){return IS_WINDOWS?e:path__namespace.join(e,"bin")}function getDownloadFileName(e){const t=process.env.RUNNER_TEMP||".";return IS_WINDOWS?path__namespace.join(t,path__namespace.basename(e)):void 0}async function installPyPy(e,t,s,r,i){let a;if(i=i!=null?i:await getAvailablePyPyVersions(),!i||i.length===0)throw new Error("No release was found in PyPy version.json");let o=findRelease(i,t,e,s,!1);if(!o||!o.foundAsset)throw new Error(`PyPy version ${t} (${e}) with arch ${s} not found`);const{foundAsset:c,resolvedPythonVersion:h,resolvedPyPyVersion:u}=o,n=`${c.download_url}`;setupCpp.coreExports.info(`Downloading PyPy from "${n}" ...`);try{const l=getDownloadFileName(n),f=await setupCpp.toolCacheExports.downloadTool(n,l);setupCpp.coreExports.info("Extracting downloaded archive..."),IS_WINDOWS?a=await setupCpp.toolCacheExports.extractZip(f):a=await setupCpp.toolCacheExports.extractTar(f,void 0,"x");const m=fs.readdirSync(a)[0],A=path__namespace.join(a,m);let d=A;isNightlyKeyword(u)||(d=await setupCpp.toolCacheExports.cacheDir(A,"PyPy",h,s)),writeExactPyPyVersionFile(d,u);const I=getBinaryDirectory(d);return await createPyPySymlink(I,h),await installPip(I),{installDir:d,resolvedPythonVersion:h,resolvedPyPyVersion:u}}catch(l){throw l instanceof Error&&(l instanceof setupCpp.toolCacheExports.HTTPError&&(l.httpStatusCode===403||l.httpStatusCode===429)?setupCpp.coreExports.info(`Received HTTP status code ${l.httpStatusCode}.  This usually indicates the rate limit has been exceeded`):setupCpp.coreExports.info(l.message),l.stack!==void 0&&setupCpp.coreExports.debug(l.stack)),l}}async function getAvailablePyPyVersions(){const e="https://downloads.python.org/pypy/versions.json",s=await new setupCpp.HttpClient("tool-cache").getJson(e);if(!s.result)throw new Error(`Unable to retrieve the list of available PyPy versions from '${e}'`);return s.result}async function createPyPySymlink(e,t){const s=semverExports.coerce(t),r=semverExports.major(s),i=semverExports.minor(s),a=r===2?"":"3",o=`${r}.${i}`,c=IS_WINDOWS?".exe":"";setupCpp.coreExports.info("Creating symlinks..."),createSymlinkInFolder(e,`pypy${a}${c}`,`python${r}${c}`,!0),createSymlinkInFolder(e,`pypy${a}${c}`,`python${c}`,!0),createSymlinkInFolder(e,`pypy${a}${c}`,`pypy${o}${c}`,!0)}async function installPip(e){setupCpp.coreExports.info("Installing and updating pip");const t=path__namespace.join(e,"python");await setupCpp.execExports.exec(`${t} -m ensurepip`),await setupCpp.execExports.exec(`${e}/python -m pip install --ignore-installed pip`)}function findRelease(e,t,s,r,i){const a={includePrerelease:i},o=e.filter(n=>{const l=semverExports.satisfies(semverExports.coerce(n.python_version),t),m=isNightlyKeyword(s)&&isNightlyKeyword(n.pypy_version)||semverExports.satisfies(pypyVersionToSemantic(n.pypy_version),s,a),A=n.files&&(IS_WINDOWS?isArchPresentForWindows(n,r):isArchPresentForMacOrLinux(n,r,process.platform));return l&&m&&A});if(o.length===0)return null;const h=o.sort((n,l)=>semverExports.compare(semverExports.coerce(pypyVersionToSemantic(l.pypy_version)),semverExports.coerce(pypyVersionToSemantic(n.pypy_version)))||semverExports.compare(semverExports.coerce(l.python_version),semverExports.coerce(n.python_version)))[0];return{foundAsset:IS_WINDOWS?findAssetForWindows(h,r):findAssetForMacOrLinux(h,r,process.platform),resolvedPythonVersion:h.python_version,resolvedPyPyVersion:h.pypy_version.trim()}}function pypyVersionToSemantic(e){const t=/(\d+\.\d+\.\d+)((?:a|b|rc))(\d*)/g;return e.replace(t,"$1-$2.$3")}function isArchPresentForWindows(e,t){return t=replaceX32toX86(t),e.files.some(s=>WINDOWS_PLATFORMS.includes(s.platform)&&s.arch===t)}function isArchPresentForMacOrLinux(e,t,s){return e.files.some(r=>r.arch===t&&r.platform===s)}function findAssetForWindows(e,t){return t=replaceX32toX86(t),e.files.find(s=>WINDOWS_PLATFORMS.includes(s.platform)&&s.arch===t)}function findAssetForMacOrLinux(e,t,s){return e.files.find(r=>r.arch===t&&r.platform===s)}function replaceX32toX86(e){return e==="x32"&&(e="x86"),e}async function findPyPyVersion(e,t,s,r,i){let a="",o="",c,h;const u=parsePyPyVersion(e);({installDir:c,resolvedPythonVersion:o,resolvedPyPyVersion:a}=findPyPyToolCache(u.pythonVersion,u.pypyVersion,t)),c||({installDir:c,resolvedPythonVersion:o,resolvedPyPyVersion:a}=await installPyPy(u.pypyVersion,u.pythonVersion,t,i,h));const n=IS_WINDOWS?"Scripts":"bin",l=path__namespace.join(c,n),f=IS_WINDOWS?".exe":"",m=path__namespace.join(IS_WINDOWS?c:l,`python${f}`),A=getBinaryDirectory(c);return setupCpp.coreExports.exportVariable("pythonLocation",c),setupCpp.coreExports.exportVariable("Python_ROOT_DIR",c),setupCpp.coreExports.exportVariable("Python2_ROOT_DIR",c),setupCpp.coreExports.exportVariable("Python3_ROOT_DIR",c),setupCpp.coreExports.exportVariable("PKG_CONFIG_PATH",A+"/lib/pkgconfig"),setupCpp.coreExports.addPath(A),setupCpp.coreExports.addPath(l),setupCpp.coreExports.setOutput("python-version","pypy"+a),setupCpp.coreExports.setOutput("python-path",m),{resolvedPyPyVersion:a,resolvedPythonVersion:o}}function findPyPyToolCache(e,t,s){let r="",i="",a=IS_WINDOWS?findPyPyInstallDirForWindows(e):setupCpp.toolCacheExports.find("PyPy",e,s);return a&&(i=getPyPyVersionFromPath(a),r=readExactPyPyVersionFile(a),semverExports.satisfies(r,t)||(a=null,r="",i="")),a||setupCpp.coreExports.info(`PyPy version ${e} (${t}) was not found in the local cache`),{installDir:a,resolvedPythonVersion:i,resolvedPyPyVersion:r}}function parsePyPyVersion(e){const t=e.split("-").filter(i=>!!i);if(/^(pypy)(.+)/.test(t[0])){const i=t[0].replace("pypy","");t.splice(0,1,"pypy",i)}if(t.length<2||t[0]!="pypy")throw new Error("Invalid 'version' property for PyPy. PyPy version should be specified as 'pypy<python-version>' or 'pypy-<python-version>'. See README for examples and documentation.");const s=t[1];let r;if(t.length>2?r=pypyVersionToSemantic(t[2]):r="x",!validateVersion(s)||!validateVersion(r))throw new Error("Invalid 'version' property for PyPy. Both Python version and PyPy versions should satisfy SemVer notation. See README for examples and documentation.");if(!validatePythonVersionFormatForPyPy(s))throw new Error("Invalid format of Python version for PyPy. Python version should be specified in format 'x.y'. See README for examples and documentation.");return{pypyVersion:r,pythonVersion:s}}function findPyPyInstallDirForWindows(e){let t="";return WINDOWS_ARCHS.forEach(s=>t=t||setupCpp.toolCacheExports.find("PyPy",e,s)),t}const TOKEN=setupCpp.coreExports.getInput("token"),AUTH=TOKEN?`token ${TOKEN}`:void 0,MANIFEST_REPO_OWNER="actions",MANIFEST_REPO_NAME="python-versions",MANIFEST_REPO_BRANCH="main",MANIFEST_URL=`https://raw.githubusercontent.com/${MANIFEST_REPO_OWNER}/${MANIFEST_REPO_NAME}/${MANIFEST_REPO_BRANCH}/versions-manifest.json`;async function findReleaseFromManifest(e,t,s){return s||(s=await getManifest()),await setupCpp.toolCacheExports.findFromManifest(e,!1,s,t)}async function getManifest(){try{return await getManifestFromRepo()}catch(e){setupCpp.coreExports.debug("Fetching the manifest via the API failed."),e instanceof Error&&setupCpp.coreExports.debug(e.message)}return await getManifestFromURL()}function getManifestFromRepo(){return setupCpp.coreExports.debug(`Getting manifest from ${MANIFEST_REPO_OWNER}/${MANIFEST_REPO_NAME}@${MANIFEST_REPO_BRANCH}`),setupCpp.toolCacheExports.getManifestFromRepo(MANIFEST_REPO_OWNER,MANIFEST_REPO_NAME,AUTH,MANIFEST_REPO_BRANCH)}async function getManifestFromURL(){setupCpp.coreExports.debug("Falling back to fetching the manifest using raw URL.");const t=await new setupCpp.HttpClient("tool-cache").getJson(MANIFEST_URL);if(!t.result)throw new Error(`Unable to get manifest from ${MANIFEST_URL}`);return t.result}async function installPython(e){const t={cwd:e,env:{...process.env,...IS_LINUX&&{LD_LIBRARY_PATH:path__namespace.join(e,"lib")}},silent:!0,listeners:{stdout:s=>{setupCpp.coreExports.info(s.toString().trim())},stderr:s=>{setupCpp.coreExports.error(s.toString().trim())}}};IS_WINDOWS?await setupCpp.execExports.exec("powershell",["./setup.ps1"],t):await setupCpp.execExports.exec("bash",["./setup.sh"],t)}async function installCpythonFromRelease(e){const t=e.files[0].download_url;setupCpp.coreExports.info(`Download from "${t}"`);let s="";try{const r=getDownloadFileName(t);s=await setupCpp.toolCacheExports.downloadTool(t,r,AUTH),setupCpp.coreExports.info("Extract downloaded archive");let i;IS_WINDOWS?i=await setupCpp.toolCacheExports.extractZip(s):i=await setupCpp.toolCacheExports.extractTar(s),setupCpp.coreExports.info("Execute installation script"),await installPython(i)}catch(r){throw r instanceof setupCpp.toolCacheExports.HTTPError&&(r.httpStatusCode===403||r.httpStatusCode===429?setupCpp.coreExports.info(`Received HTTP status code ${r.httpStatusCode}.  This usually indicates the rate limit has been exceeded`):setupCpp.coreExports.info(r.message),r.stack&&setupCpp.coreExports.debug(r.stack)),r}}function binDir(e){return IS_WINDOWS?path__namespace.join(e,"Scripts"):path__namespace.join(e,"bin")}async function useCpythonVersion(e,t,s,r,i){let a=null;const o=desugarDevVersion(e);let c=pythonVersionToSemantic(o);setupCpp.coreExports.debug(`Semantic version spec of ${e} is ${c}`);let h=setupCpp.toolCacheExports.find("Python",c,t);if(!h){setupCpp.coreExports.info(`Version ${c} was not found in the local cache`);const m=await findReleaseFromManifest(c,t,a);m&&m.files&&m.files.length>0&&(setupCpp.coreExports.info(`Version ${c} is available for downloading`),await installCpythonFromRelease(m),h=setupCpp.toolCacheExports.find("Python",c,t))}if(!h){const m=await getOSInfo();throw new Error([`The version '${e}' with architecture '${t}' was not found for ${m?`${m.osName} ${m.osVersion}`:"this operating system"}.`,`The list of all available versions can be found here: ${MANIFEST_URL}`].join(os__namespace.EOL))}const u=binDir(h),n=IS_WINDOWS?".exe":"",l=path__namespace.join(IS_WINDOWS?h:u,`python${n}`);{if(setupCpp.coreExports.exportVariable("pythonLocation",h),setupCpp.coreExports.exportVariable("PKG_CONFIG_PATH",h+"/lib/pkgconfig"),setupCpp.coreExports.exportVariable("pythonLocation",h),setupCpp.coreExports.exportVariable("Python_ROOT_DIR",h),setupCpp.coreExports.exportVariable("Python2_ROOT_DIR",h),setupCpp.coreExports.exportVariable("Python3_ROOT_DIR",h),setupCpp.coreExports.exportVariable("PKG_CONFIG_PATH",h+"/lib/pkgconfig"),IS_LINUX){const m=process.env.LD_LIBRARY_PATH?`:${process.env.LD_LIBRARY_PATH}`:"",A=path__namespace.join(h,"lib");m.split(":").includes(A)||setupCpp.coreExports.exportVariable("LD_LIBRARY_PATH",A+m)}if(setupCpp.coreExports.addPath(h),setupCpp.coreExports.addPath(u),IS_WINDOWS){const m=path__namespace.basename(path__namespace.dirname(h)),A=semverExports.major(m),d=semverExports.minor(m),I=path__namespace.join(process.env.APPDATA||"","Python",`Python${A}${d}`,"Scripts");setupCpp.coreExports.addPath(I)}}const f=versionFromPath(h);return setupCpp.coreExports.setOutput("python-version",f),setupCpp.coreExports.setOutput("python-path",l),{impl:"CPython",version:f}}function desugarDevVersion(e){const t=/^(\d+)\.(\d+)-dev$/;return e.replace(t,"~$1.$2.0-0")}function versionFromPath(e){const t=e.split(path__namespace.sep),s=t.findIndex(r=>r==="PyPy"||r==="Python");return t[s+1]||""}function pythonVersionToSemantic(e,t){const s=/(\d+\.\d+\.\d+)((?:a|b|rc)\d*)/g;return e.replace(s,"$1-$2")}const{GITHUB_ACTIONS}=setupCpp.ciInfo,dirname=typeof __dirname=="string"?__dirname:path.dirname(require$$1.fileURLToPath(typeof document>"u"?require("url").pathToFileURL(__filename).href:_documentCurrentScript&&_documentCurrentScript.tagName.toUpperCase()==="SCRIPT"&&_documentCurrentScript.src||new URL("assets/actions_python-DDPJNGDN.js",document.baseURI).href));function isPyPyVersion(e){return e.startsWith("pypy")}const checkLatest=!1;async function setupActionsPython(e,t,s){var i;IS_MAC&&(process.env.AGENT_TOOLSDIRECTORY="/Users/runner/hostedtoolcache");const r=(i=process.env.AGENT_TOOLSDIRECTORY)==null?void 0:i.trim();if(typeof r=="string"&&r!==""&&(process.env.RUNNER_TOOL_CACHE=process.env.AGENT_TOOLSDIRECTORY),setupCpp.coreExports.debug(`Python is expected to be installed into ${process.env.RUNNER_TOOL_CACHE}`),e){let a;if(isPyPyVersion(e)){const o=await findPyPyVersion(e,s,!0,checkLatest,!1);a=`${o.resolvedPyPyVersion}-${o.resolvedPythonVersion}`,setupCpp.info(`Successfully set up PyPy ${o.resolvedPyPyVersion} with Python (${o.resolvedPythonVersion})`)}else{const o=await useCpythonVersion(e,s);a=o.version,setupCpp.info(`Successfully set up ${o.impl} (${a})`)}}GITHUB_ACTIONS&&await addPythonLoggingMatcher()}async function addPythonLoggingMatcher(){const e=path.join(dirname,"python_matcher.json");if(!await setupCpp.pathExists(e))return setupCpp.warning("the python_matcher.json file does not exist in the same folder as setup-cpp.js");setupCpp.info(`::add-matcher::${e}`)}exports.setupActionsPython=setupActionsPython;
//# sourceMappingURL=actions_python-DDPJNGDN.js.map
